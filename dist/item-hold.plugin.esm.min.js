export default function(e={}){let t;const n={time:1e3,movementThreshold:2,action(e,t){}};e=Object.assign(Object.assign({},n),e);const i={},o={x:0,y:0};function d(e){void 0!==i[e]&&delete i[e]}function r(t,n){function r(d){!function(t,n,d){void 0===i[t.id]&&(i[t.id]={x:d.x,y:d.y},d.stopPropagation(),d.preventDefault(),setTimeout(()=>{if(void 0!==i[t.id]){let d=!0;const r=Math.abs(i[t.id].x-o.x),s=Math.abs(i[t.id].y-o.y);r>e.movementThreshold&&(d=!1),s>e.movementThreshold&&(d=!1),delete i[t.id],d&&e.action(n,t)}},e.time))}(n.item,t,d)}function s(e){o.x=e.x,o.y=e.y}return t.addEventListener("pointerdown",r),document.addEventListener("pointerup",(function(){d(n.item.id)})),document.addEventListener("pointermove",s),{update(e,t){n=t},destroy(e,t){document.removeEventListener("pointerup",d),document.removeEventListener("poitnermove",s),e.removeEventListener("pointerdown",r)}}}return function(e){t=e.api,e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(r),e))}}
