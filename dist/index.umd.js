!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GSTC=e()}(this,(function(){"use strict";const t=["","list","list-column","list-column-header","list-expander","list-expander-toggle","list-column-header-resizer","list-column-row","chart","chart-calendar","chart-gantt","chart-gantt-grid","chart-gantt-grid-row","chart-gantt-items","chart-gantt-items-row","chart-gantt-items-row-item","chart-calendar-date","chart-gantt-grid-column","chart-gantt-grid-block"];const e={height:740,headerHeight:86,list:{rows:{},rowHeight:40,columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},data:{}},expander:{padding:20,size:20,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}}},scroll:{top:0,left:0,xMultiplier:1.5,yMultiplier:1,percent:{top:0,left:0}},chart:{time:{from:0,to:0,zoom:21,period:"day",dates:[]},calendar:{vertical:{smallFormat:"YYYY-MM-DD"}},grid:{},items:{}},classNames:{},actions:function(){const e={};return t.forEach(t=>e[t]=[]),e}(),locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",s="day",r="week",o="month",a="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},u={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(s,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,o),s=e-i<0,r=t.clone().add(n+(s?-1:1),o);return Number(-(n+(e-i)/(s?i-r:r-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:o,y:l,w:r,d:s,h:i,m:n,s:e,ms:t,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",g={};g[p]=f;var m=function(t){return t instanceof y},b=function(t,e,n){var i;if(!t)return p;if("string"==typeof t)g[t]&&(i=t),e&&(g[t]=e,i=t);else{var s=t.name;g[s]=t,i=s}return n||(p=i),i},v=function(t,e,n){if(m(t))return t.clone();var i=e?"string"==typeof e?{format:e,pl:n}:e:{};return i.date=t,new y(i)},w=u;w.l=b,w.i=m,w.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u})};var y=function(){function d(t){this.$L=this.$L||b(t.locale,null,!0),this.parse(t)}var u=d.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(c);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return w},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},u.isAfter=function(t,e){return v(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<v(t)},u.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",o)},u.day=function(t){return this.$g(t,"$W",s)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",i)},u.minute=function(t){return this.$g(t,"$m",n)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,a){var c=this,h=!!w.u(a)||a,d=w.p(t),u=function(t,e){var n=w.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return h?n:n.endOf(s)},f=function(t,e){return w.w(c.toDate()[t].apply(c.toDate(),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},p=this.$W,g=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case l:return h?u(1,0):u(31,11);case o:return h?u(1,g):u(0,g+1);case r:var v=this.$locale().weekStart||0,y=(p<v?p+7:p)-v;return u(h?m-y:m+(6-y),g);case s:case"date":return f(b+"Hours",0);case i:return f(b+"Minutes",1);case n:return f(b+"Seconds",2);case e:return f(b+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(r,a){var c,h=w.p(r),d="set"+(this.$u?"UTC":""),u=(c={},c[s]=d+"Date",c.date=d+"Date",c[o]=d+"Month",c[l]=d+"FullYear",c[i]=d+"Hours",c[n]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[h],f=h===s?this.$D+(a-this.$W):a;if(h===o||h===l){var p=this.clone().set("date",1);p.$d[u](f),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else u&&this.$d[u](f);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[w.p(t)]()},u.add=function(t,a){var c,h=this;t=Number(t);var d=w.p(a),u=function(e){var n=v(h);return w.w(n.date(n.date()+Math.round(e*t)),h)};if(d===o)return this.set(o,this.$M+t);if(d===l)return this.set(l,this.$y+t);if(d===s)return u(1);if(d===r)return u(7);var f=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[d]||1,p=this.valueOf()+t*f;return w.w(p,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),s=this.$locale(),r=this.$H,o=this.$m,a=this.$M,l=s.weekdays,c=s.months,d=function(t,i,s,r){return t&&(t[i]||t(e,n))||s[i].substr(0,r)},u=function(t){return w.s(r%12||12,t,"0")},f=s.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:d(s.monthsShort,a,c,3),MMMM:c[a]||c(this,n),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:d(s.weekdaysMin,this.$W,l,2),ddd:d(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:w.s(r,2,"0"),h:u(1),hh:u(2),a:f(r,o,!0),A:f(r,o,!1),m:String(o),mm:w.s(o,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,c,h){var d,u=w.p(c),f=v(t),p=6e4*(f.utcOffset()-this.utcOffset()),g=this-f,m=w.m(this,f);return m=(d={},d[l]=m/12,d[o]=m,d[a]=m/3,d[r]=(g-p)/6048e5,d[s]=(g-p)/864e5,d[i]=g/36e5,d[n]=g/6e4,d[e]=g/1e3,d)[u]||g,h?m:w.a(m)},u.daysInMonth=function(){return this.endOf(o).$D},u.$locale=function(){return g[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=b(t,e,!0),n},u.clone=function(){return w.w(this.toDate(),this)},u.toDate=function(){return new Date(this.$d)},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},d}();return v.prototype=y.prototype,v.extend=function(t,e){return t(e,y,v),v},v.locale=b,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=g[p],v.Ls=g,v}()}));n((function(t,e){t.exports=function(t,e,n){var i=e.prototype;n.utc=function(t,n){return new e({date:t,utc:!0,format:n})},i.utc=function(){return n(this.toDate(),{locale:this.$L,utc:!0})},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(t){t.utc&&(this.$u=!0),s.call(this,t)};var r=i.init;i.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var o=i.utcOffset;i.utcOffset=function(){return this.$u?0:o.call(this)};var a=i.format;i.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return a.call(this,e)},i.isUTC=function(){return!!this.$u}}}));function s(t,e){const n=t.get("config.locale");return i.locale(n,null,!0),{date:t=>t?i(t).locale(n.name):i().locale(n.name),recalculateFromTo(e){0!==(e={...e}).from&&(e.from=this.date(e.from).startOf("day").valueOf()),0!==e.to&&(e.to=this.date(e.to).endOf("day").valueOf());let n=Number.MAX_SAFE_INTEGER,i=0;const s=t.get("config.chart.items");if(0===Object.keys(s).length)return e;if(0===e.from||0===e.to){for(let t in s){const e=s[t];n>e.time.start&&(n=e.time.start),i<e.time.end&&(i=e.time.end)}0===e.from&&(e.from=this.date(n).startOf("day").valueOf()),0===e.to&&(e.to=this.date(i).endOf("day").valueOf())}return e}}}class r{constructor(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let n=0,i=t.length;n<i;n+=1){const i=t[n];i===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(i),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}match(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;const{length:e}=t;if(e<this.minLength||e>this.maxLength)return!1;let n=this.segments.length-1,i=t.length-1,s=!1;for(;;){const e=this.segments[n];if(n-=1,e===this.wchar)s=!0;else{const n=i+1-e.length,r=t.lastIndexOf(e,n);if(-1===r||r>n)return!1;if(s)i=r-1,s=!1;else{if(r!==n)return!1;i-=e.length}}if(0>n)break}return!0}}class o{constructor(t,e,n){this.obj=t,this.delimeter=e,this.wildcard=n}simpleMatch(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const n=t.indexOf(this.wildcard);if(n>-1){const i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){const t=i.length;return!(t>0)||e.substr(-t)===i}}return!1}match(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new r(t).match(e)}handleArray(t,e,n,i,s={}){let r=t.indexOf(this.delimeter,n),o=!1;-1===r&&(o=!0,r=t.length);const a=t.substring(n,r);let l=0;for(const n of e){const e=l.toString(),c=""===i?e:i+this.delimeter+l;(a===this.wildcard||a===e||this.simpleMatch(a,e))&&(o?s[c]=n:this.goFurther(t,n,r+1,c,s)),l++}return s}handleObject(t,e,n,i,s={}){let r=t.indexOf(this.delimeter,n),o=!1;-1===r&&(o=!0,r=t.length);const a=t.substring(n,r);for(let n in e){n=n.toString();const l=""===i?n:i+this.delimeter+n;(a===this.wildcard||a===n||this.simpleMatch(a,n))&&(o?s[l]=e[n]:this.goFurther(t,e[n],r+1,l,s))}return s}goFurther(t,e,n,i,s={}){return Array.isArray(e)?this.handleArray(t,e,n,i,s):this.handleObject(t,e,n,i,s)}get(t){return this.goFurther(t,this.obj,0,"")}}class a{static get(t,e,n=null){if(null===n&&(n=t.slice()),0===n.length||void 0===e)return e;const i=n.shift();return e.hasOwnProperty(i)?0===n.length?e[i]:a.get(t,e[i],n):void 0}static set(t,e,n,i=null){if(null===i&&(i=t.slice()),0===i.length){for(const t in n)delete n[t];for(const t in e)n[t]=e[t];return}const s=i.shift();0!==i.length?(n.hasOwnProperty(s)||(n[s]={}),a.set(t,e,n[s],i)):n[s]=e}}const l={delimeter:".",notRecursive:";",param:":",wildcard:"*",log:function(t,e){console.debug(t,e)}},c={bulk:!1,debug:!1,source:"",data:void 0},h={only:[],source:"",debug:!1,data:void 0};class d{constructor(t={},e=l){this.listeners={},this.data=t,this.options=Object.assign(Object.assign({},l),e),this.id=0,this.pathGet=a.get,this.pathSet=a.set,this.scan=new o(this.data,this.options.delimeter,this.options.wildcard)}getListeners(){return this.listeners}destroy(){this.data=void 0,this.listeners={}}match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))}cutPath(t,e){return this.split(this.cleanNotRecursivePath(t)).slice(0,this.split(this.cleanNotRecursivePath(e)).length).join(this.options.delimeter)}trimPath(t){return this.cleanNotRecursivePath(t).replace(new RegExp(`^\\${this.options.delimeter}{1}`),"")}split(t){return""===t?[]:t.split(this.options.delimeter)}isWildcard(t){return t.includes(this.options.wildcard)}isNotRecursive(t){return t.endsWith(this.options.notRecursive)}cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.slice(0,-this.options.notRecursive.length):t}hasParams(t){return t.includes(this.options.param)}getParamsInfo(t){let e={replaced:"",original:t,params:{}},n=0,i=[];for(const s of this.split(t)){e.params[n]={original:s,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let r=t.exec(s);r?(e.params[n].name=r[1],t.lastIndex=0,e.params[n].replaced=s.replace(t,this.options.wildcard),i.push(e.params[n].replaced),n++):(delete e.params[n],i.push(s),n++)}return e.replaced=i.join(this.options.delimeter),e}getParams(t,e){if(!t)return;const n=this.split(e),i={};for(const e in t.params){i[t.params[e].name]=n[e]}return i}subscribeAll(t,e,n=c){let i=[];for(const s of t)i.push(this.subscribe(s,e,n));return()=>{for(const t of i)t();i=[]}}getCleanListenersCollection(t={}){return Object.assign({listeners:{},isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)}getCleanListener(t,e=c){return{fn:t,options:Object.assign(Object.assign({},c),e)}}getListenerCollectionMatch(t,e,n){return t=this.cleanNotRecursivePath(t),i=>(e&&(i=this.cutPath(i,t)),!(!n||!this.match(t,i))||t===i)}getListenersCollection(t,e){if(void 0!==this.listeners[t]){let n=this.listeners[t];return this.id++,n.listeners[this.id]=e,n}let n={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(n.path)&&(n.paramsInfo=this.getParamsInfo(n.path),n.path=n.paramsInfo.replaced,n.hasParams=!0),n.isWildcard=this.isWildcard(n.path),this.isNotRecursive(n.path)&&(n.isRecursive=!1);let i=this.listeners[n.path]=this.getCleanListenersCollection(Object.assign(Object.assign({},n),{match:this.getListenerCollectionMatch(n.path,n.isRecursive,n.isWildcard)}));return this.id++,i.listeners[this.id]=e,i}subscribe(t,e,n=c,i="subscribe"){let s=this.getCleanListener(e,n);const r=this.getListenersCollection(t,s);if(r.count++,t=r.path,r.isWildcard){const o=this.scan.get(this.cleanNotRecursivePath(t));if(n.bulk){const a=[];for(const t in o)a.push({path:t,params:this.getParams(r.paramsInfo,t),value:o[t]});e(a,{type:i,listener:s,listenersCollection:r,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(const a in o)e(o[a],{type:i,listener:s,listenersCollection:r,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(a)},params:this.getParams(r.paramsInfo,a),options:n})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:i,listener:s,listenersCollection:r,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(r.paramsInfo,t),options:n});return this.debugSubscribe(s,r,t),this.unsubscribe(t,this.id)}unsubscribe(t,e){const n=this.listeners,i=n[t];return function(){delete i.listeners[e],i.count--,0===i.count&&delete n[t]}}same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t}notifyListeners(t,e=[],n=!0){const i=[];for(const s in t){let{single:r,bulk:o}=t[s];for(const t of r){if(e.includes(t))continue;const s=this.debugTime(t);t.listener.fn(t.value(),t.eventInfo),n&&i.push(t),this.debugListener(s,t)}for(const t of o){if(e.includes(t))continue;const s=this.debugTime(t),r=t.value.map(t=>Object.assign(Object.assign({},t),{value:t.value()}));t.listener.fn(r,t.eventInfo),n&&i.push(t),this.debugListener(s,t)}}return i}getSubscribedListeners(t,e,n,i="update",s=null){n=Object.assign(Object.assign({},h),n);const r={};for(let o in this.listeners){const a=this.listeners[o];if(r[o]={single:[],bulk:[],bulkData:[]},a.match(t)){const l=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,c=a.isRecursive||a.isWildcard?()=>this.get(this.cutPath(t,o)):()=>e,h=[{value:c,path:t,params:l}];for(const e in a.listeners){const d=a.listeners[e];d.options.bulk?r[o].bulk.push({listener:d,listenersCollection:a,eventInfo:{type:i,listener:d,path:{listener:o,update:s||t,resolved:void 0},params:l,options:n},value:h}):r[o].single.push({listener:d,listenersCollection:a,eventInfo:{type:i,listener:d,path:{listener:o,update:s||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:n},value:c})}}}return r}notifySubscribedListeners(t,e,n,i="update",s=null){return this.notifyListeners(this.getSubscribedListeners(t,e,n,i,s))}getNestedListeners(t,e,n,i="update",s=null){const r={};for(let a in this.listeners){r[a]={single:[],bulk:[]};const l=this.listeners[a],c=this.cutPath(a,t);if(this.match(c,t)){const h=this.trimPath(a.substr(c.length)),d=new o(e,this.options.delimeter,this.options.wildcard).get(h),u=l.paramsInfo?this.getParams(l.paramsInfo,t):void 0,f=[],p={};for(const e in d){const o=()=>d[e],c=[t,e].join(this.options.delimeter);for(const e in l.listeners){const h=l.listeners[e],d={type:i,listener:h,listenersCollection:l,path:{listener:a,update:s||t,resolved:this.cleanNotRecursivePath(c)},params:u,options:n};h.options.bulk?(f.push({value:o,path:c,params:u}),p[e]=h):r[a].single.push({listener:h,listenersCollection:l,eventInfo:d,value:o})}}for(const e in p){const s=p[e],o={type:i,listener:s,listenersCollection:l,path:{listener:a,update:t,resolved:void 0},options:n,params:u};r[a].bulk.push({listener:s,listenersCollection:l,eventInfo:o,value:f})}}}return r}notifyNestedListeners(t,e,n,i="update",s,r=null){return this.notifyListeners(this.getNestedListeners(t,e,n,i,r),s,!1)}getNotifyOnlyListeners(t,e,n,i="update",s=null){const r={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return r;for(const a of n.only){const l=new o(e,this.options.delimeter,this.options.wildcard).get(a);r[a]={bulk:[],single:[]};for(const e in l){const o=t+this.options.delimeter+e;for(const c in this.listeners){const h=this.listeners[c],d=h.paramsInfo?this.getParams(h.paramsInfo,o):void 0;if(this.match(c,o)){const u=()=>l[e],f=[{value:u,path:o,params:d}];for(const e in h.listeners){const l=h.listeners[e],p={type:i,listener:l,listenersCollection:h,path:{listener:c,update:s||t,resolved:this.cleanNotRecursivePath(o)},params:d,options:n};l.options.bulk?r[a].bulk.some(t=>t.listener===l)||r[a].bulk.push({listener:l,listenersCollection:h,eventInfo:p,value:f}):r[a].single.push({listener:l,listenersCollection:h,eventInfo:p,value:u})}}}}}return r}notifyOnly(t,e,n,i="update",s=null){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,n,i,s))[0]}canBeNested(t){return"object"==typeof t&&null!==t}getUpdateValues(t,e,n){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}}wildcardUpdate(t,e,n=h){n=Object.assign(Object.assign({},h),n);const i=this.scan.get(t),s={};for(const t in i){const n=this.split(t),{oldValue:r,newValue:o}=this.getUpdateValues(i[t],n,e);this.same(o,r)||(s[t]=o)}const r=[];for(const e in s){const i=s[e];n.only.length?r.push(this.getNotifyOnlyListeners(e,i,n,"update",t)):(r.push(this.getSubscribedListeners(e,i,n,"update",t)),this.canBeNested(i)&&r.push(this.getNestedListeners(e,i,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:e,newValue:i}),this.pathSet(this.split(e),i,this.data)}let o=[];for(const t of r)o=[...o,...this.notifyListeners(t,o)]}update(t,e,n=h){if(this.isWildcard(t))return this.wildcardUpdate(t,e,n);const i=this.split(t),{oldValue:s,newValue:r}=this.getUpdateValues(this.pathGet(i,this.data),i,e);if(n.debug&&this.options.log(`Updating ${t} ${n.source?`from ${n.source}`:""}`,s,r),this.same(r,s))return r;if(this.pathSet(i,r,this.data),n=Object.assign(Object.assign({},h),n),this.notifyOnly(t,r,n))return r;const o=this.notifySubscribedListeners(t,r,n);return this.canBeNested(r)&&this.notifyNestedListeners(t,r,n,"update",o),r}get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)}debugSubscribe(t,e,n){t.options.debug&&this.options.log("listener subscribed",n,t,e)}debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})}debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0}}const u="gantt-shedule-timeline-calendar";function f(t){return t&&"object"==typeof t&&!Array.isArray(t)}function p(t,...e){const n=e.shift();if(f(t)&&f(n))for(const e in n)if(f(n[e]))void 0===t[e]&&(t[e]={}),t[e]=p(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])f(i)?t[e].push(p({},i)):t[e].push(i)}else t[e]=n[e];return e.length?p(t,...e):t}const g={name:u,stateFromConfig:function(t){const n=function(t){const n=p({},e.actions),i=p({},t.actions),s=[Object.keys(n),Object.keys(i)].flatMap((t,e,n)=>1===e?t.filter(t=>!n[0].includes(t)):t),r={};for(const t of s)r[t]=[],void 0!==n[t]&&Array.isArray(n[t])&&(r[t]=[...n[t]]),void 0!==i[t]&&Array.isArray(i[t])&&(r[t]=[...r[t],...i[t]]);return delete t.actions,delete e.actions,r}(t),i={config:p({},e,t)};return i.config.actions=n,new d(i,{delimeter:"."})},mergeDeep:p,date:t=>t?i(t):i(),dayjs:i};var m=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return(function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];t.call(e,s[1],s[0])}},e}())}(),b="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,v="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),w="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(v):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},y=2;var $=20,_=["top","right","bottom","left","width","height","size","weight"],M="undefined"!=typeof MutationObserver,x=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,s=0;function r(){n&&(n=!1,t()),i&&a()}function o(){w(r)}function a(){var t=Date.now();if(n){if(t-s<y)return;i=!0}else n=!0,i=!1,setTimeout(o,e);s=t}return a}(this.refresh.bind(this),$)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){b&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),M?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){b&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;_.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),D=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},C=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||v},O=L(0,0,0,0);function P(t){return parseFloat(t)||0}function A(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+P(t["border-"+n+"-width"])}),0)}function I(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return O;var i=C(t).getComputedStyle(t),s=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],r=t["padding-"+s];e[s]=P(r)}return e}(i),r=s.left+s.right,o=s.top+s.bottom,a=P(i.width),l=P(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==e&&(a-=A(i,"left","right")+r),Math.round(l+o)!==n&&(l-=A(i,"top","bottom")+o)),!function(t){return t===C(t).document.documentElement}(t)){var c=Math.round(a+r)-e,h=Math.round(l+o)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(h)&&(l-=h)}return L(s.left,s.top,a,l)}var S="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof C(t).SVGGraphicsElement}:function(t){return t instanceof C(t).SVGElement&&"function"==typeof t.getBBox};function T(t){return b?S(t)?function(t){var e=t.getBBox();return L(0,0,e.width,e.height)}(t):I(t):O}function L(t,e,n,i){return{x:t,y:e,width:n,height:i}}var E=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=L(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=T(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Y=function(t,e){var n,i,s,r,o,a,l,c=(i=(n=e).x,s=n.y,r=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),D(l,{x:i,y:s,width:r,height:o,top:s,right:i+r,bottom:o+s,left:i}),l);D(this,{target:t,contentRect:c})},N=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new m,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof C(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new E(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof C(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Y(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),H="undefined"!=typeof WeakMap?new WeakMap:new m,k=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=x.getInstance(),i=new N(e,n,this);H.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){k.prototype[t]=function(){var e;return(e=H.get(this))[t].apply(e,arguments)}}));var R=void 0!==v.ResizeObserver?v.ResizeObserver:k;function z(t,e){const{api:n,state:i,onDestroy:s,actions:r,update:o,html:a,unsafeHTML:l}=e,c="list-expander-toggle",h=n.getActions(c);let d,u,f,p,g,m,b=!1;function v(){b=!b,t.row?i.update(`config.list.rows.${t.row.id}.expanded`,b):i.update("config.list.rows",t=>{for(const e in t)t[e].expanded=b;return t},{only:["*.expanded"]})}return s(i.subscribe("config.classNames",e=>{t.row?(d=n.getClass(c,{row:t.row}),f=n.getClass(c+"-open",{row:t.row}),p=n.getClass(c+"-closed",{row:t.row})):(d=n.getClass(c),f=n.getClass(c+"-open"),p=n.getClass(c+"-closed")),o()})),s(i.subscribeAll(["config.list.expander.size","config.list.expander.icons"],()=>{const t=i.get("config.list.expander");u=`--size: ${t.size}px`,g=t.icons.open,m=t.icons.closed,o()})),t.row?s(i.subscribe(`config.list.rows.${t.row.id}.expanded`,t=>{b=t,o()})):s(i.subscribe("config.list.rows.*.expanded",t=>{for(const e of t)if(e.value){b=!0;break}o()},{bulk:!0})),()=>a`
    <div
      class=${d}
      data-actions=${r(h,{row:t.row,api:n,state:i})}
      style=${u}
      @click=${v}
    >
      ${b?a`
            <div class=${f}>
              ${l(g)}
            </div>
          `:a`
            <div class=${p}>
              ${l(m)}
            </div>
          `}
    </div>
  `}function W(t,e){const{api:n,state:i,onDestroy:s,actions:r,update:o,html:a,createComponent:l}=e,c=n.getActions("list-expander");let h,d,u,f,p=[];s(i.subscribe("config.classNames",e=>{t.row?(h=n.getClass("list-expander",{row:t.row}),f=n.getClass("list-expander-padding",{row:t.row})):(h=n.getClass("list-expander"),f=n.getClass("list-expander-padding")),o()})),s(i.subscribeAll(["config.list.expander.padding"],t=>{d=t,o()})),t.row?s(i.subscribe(`_internal.list.rows.${t.row.id}.parentId`,e=>{u="width:"+t.row._internal.parents.length*d+"px",p=t.row._internal.children,o()})):(u="width:0px",p=[]);const g=l(z,t.row?{row:t.row}:{});return s(g.destroy),()=>a`
    <div class=${h} data-action=${r(c,{row:t.row,api:n,state:i})}>
      <div class=${f} style=${u}></div>
      ${p.length||!t.row?g.html():""}
    </div>
  `}function j({rowId:t,columnId:e},n){const{api:i,state:s,onDestroy:r,actions:o,update:a,html:l,createComponent:c}=n;let h,d,u=`config.list.rows.${t}`;r(s.subscribe(u,t=>{d=`--height: ${(h=t).height}px`,a()}));let f,p=`config.list.columns.data.${e}`;r(s.subscribe(p,t=>{f=t,a()}));const g=i.getActions("list-column-row");let m;r(s.subscribe("config.classNames",t=>{m=i.getClass("list-column-row",{row:h,column:f}),a()}));const b=c(W,{row:h});return r(b.destroy),t=>l`
    <div
      class=${m}
      style=${d}
      data-actions=${o(g,{column:f,row:h,api:i,state:s})}
    >
      ${"boolean"==typeof f.expander&&f.expander?b.html():""}
      ${"string"==typeof f.html?"function"==typeof f.data?l`
        ${f.data(h)}
      `:l`
      ${h[f.data]}
    `:"function"==typeof f.data?f.data(h):h[f.data]}
    </div>
  `}function V({columnId:t},e){const{api:n,state:i,onDestroy:s,update:r,html:o,actions:a}=e,l="list-column-header-resizer",c=n.getActions(l);let h,d,u,f,p,g,m,b;s(i.subscribe(`config.list.columns.data.${t}`,t=>{h=t,r()}));let v=!1;s(i.subscribe("config.classNames",t=>{d=n.getClass(l,{column:h}),u=n.getClass(l+"-container",{column:h}),f=n.getClass(l+"-dots",{column:h}),p=n.getClass(l+"-dots-dot",{column:h}),g=n.getClass(l+"-line",{column:h}),r()})),s(i.subscribeAll([`config.list.columns.data.${h.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const n=i.get("config.list");m=h.width*n.columns.percent*.01,b=`width: ${n.columns.resizer.width}px`,v=n.columns.resizer.inRealTime,r()}));let w=[1,2,3,4,5,6,7,8];s(i.subscribe("config.list.columns.resizer.dots",t=>{w=[];for(let e=0;e<t;e++)w.push(e);r()}));let y=!1,$=m;const _=`config.list.columns.data.${h.id}.width`;function M(t){y=!0,i.update("_internal.list.columns.resizer.active",!0)}function x(t){y&&(($+=t.movementX)<0&&($=0),v&&i.update(_,$))}function D(t){y&&(i.update("_internal.list.columns.resizer.active",!1),i.update(_,$),y=!1)}return document.body.addEventListener("mousemove",x),s(()=>document.body.removeEventListener("mousemove",x)),document.body.addEventListener("mouseup",D),s(()=>document.body.removeEventListener("mouseup",D)),t=>o`
    <div class=${d} data-actions=${a(c,{column:h,api:n,state:i})}>
      <div class=${u}>
        ${h.header.html?o`
              ${h.header.html}
            `:h.header.content}
      </div>
      <div class=${f} style=${"--"+b} @mousedown=${M}>
        ${w.map(t=>o`
              <div class=${p} />
            `)}
      </div>
    </div>
  `}function G({columnId:t},e){const{api:n,state:i,onDestroy:s,actions:r,update:o,createComponent:a,html:l}=e,c=n.getActions("list-column-header");let h,d,u,f;s(i.subscribe(`config.list.columns.data.${t}`,t=>{h=t,o()})),s(i.subscribeAll(["config.classNames","config.headerHeight"],()=>{const t=i.get("config");d=n.getClass("list-column-header",{column:h}),u=n.getClass("list-column-header-content",{column:h}),f=`--height: ${t.headerHeight}px;`,o()}));const p=a(V,{columnId:t});s(p.destroy);const g=a(W,{});return s(g.destroy),function(){return l`
      <div class=${d} style=${f} data-actions=${r(c,{column:h,api:n,state:i})}>
        ${"boolean"==typeof h.expander&&h.expander?l`
      <div class=${u}>
        ${g.html()}${p.html(h)}
      </div>
    `:l`
      <div class=${u}>
        ${p.html(h)}
      </div>
    `}
      </div>
    `}}function F({columnId:t},e){const{api:n,state:i,onDestroy:s,actions:r,update:o,createComponent:a,html:l,repeat:c}=e;let h,d=`config.list.columns.data.${t}`;s(i.subscribe(d,t=>{h=t,o()}));const u=n.getActions("list-column"),f=n.getActions("list-column-rows");let p,g,m,b,v;s(i.subscribe("config.classNames",t=>{p=n.getClass("list-column",{column:h}),g=n.getClass("list-column-rows",{column:h}),o()}));let w=[];s(i.subscribe("_internal.list.visibleRows;",e=>{w.forEach(t=>t.component.destroy()),w=e.map(e=>({id:e.id,component:a(j,{columnId:t,rowId:e.id})})),o()})),s(()=>{w.forEach(t=>t.component.destroy())}),s(i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${h.id}.width`,"config.height","config.headerHeight"],t=>{const e=i.get("config.list");m=e.columns.data[h.id].width*e.columns.percent*.01,b=`width: ${m+e.columns.resizer.width}px`,v=`height: ${i.get("config.height")}px`},{bulk:!0}));const y=a(G,{columnId:t});return s(y.destroy),t=>l`
    <div
      class=${p}
      data-actions=${r(u,{column:h,state:i,api:n})}
      style=${b}
    >
      ${y.html()}
      <div class=${g} style=${v} data-actions=${r(f,{api:n,state:i})}>
        ${w.map(t=>t.component.html())}
      </div>
    </div>
  `}function B(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,createComponent:o,html:a,repeat:l}=t,c=e.getActions("list");let h,d,u;i(n.subscribe("config.list",()=>{d=n.get("config.list"),u=d.columns.percent,r()})),i(n.subscribe("config.classNames",()=>{h=e.getClass("list",{list:d}),r()}));let f,p,g,m=[];function b(t){if(t.stopPropagation(),t.preventDefault(),"scroll"===t.type)n.update("config.scroll.top",t.target.scrollTop);else{const i=e.normalizeMouseWheelEvent(t);n.update("config.scroll.top",t=>e.limitScroll("top",t+=i.y*n.get("config.scroll.yMultiplier")))}}function v(t){g||(g=t.clientWidth,0===u&&(g=0),n.update("_internal.list.width",g),n.update("_internal.elements.List",t))}return i(n.subscribe("config.list.columns.data;",t=>{m.forEach(t=>t.component.destroy()),f=Object.keys(t),m=f.map(t=>{return{id:t,component:o(F,{columnId:t})}}),r()})),i(()=>{m.forEach(t=>t.component.destroy())}),i(n.subscribe("config.height",t=>{p=`height: ${t}px`,r()})),c.push({create(t){n.update("_internal.elements.list",t),v(t)},update:v}),t=>d.columns.percent>0?a`
          <div
            class=${h}
            data-actions=${s(c)}
            style=${p}
            @scroll=${b}
            @wheel=${b}
          >
            ${m.map(t=>t.component.html())}
          </div>
        `:null}function U({date:t},e){const{api:n,state:i,onDestroy:s,actions:r,update:o,html:a}=e,l="chart-calendar-date",c=n.getActions(l);let h,d,u,f,p,g,m,b,v,w,y,$,_,M,x,D;return s(i.subscribe("config.classNames",()=>{h=n.getClass(l,{date:t}),n.time.date(t.leftGlobal).format("YYYY-MM-DD")===n.time.date().format("YYYY-MM-DD")&&(h+=" current"),n.time.date(t.leftGlobal).subtract(1,"day").format("YYYY-MM-DD")===n.time.date().format("YYYY-MM-DD")&&(h+=" next"),n.time.date(t.leftGlobal).add(1,"day").format("YYYY-MM-DD")===n.time.date().format("YYYY-MM-DD")&&(h+=" previous"),d=n.getClass(`${l}-formatted`,{date:t}),u=n.getClass(`${l}-formatted-year`,{date:t}),f=n.getClass(`${l}-formatted-month`,{date:t}),p=n.getClass(`${l}-formatted-day`,{date:t}),g=n.getClass(`${l}-formatted-day-word`,{date:t}),o()})),s(i.subscribeAll(["_internal.chart.time","config.chart.calendar.vertical.smallFormat"],(function(){m=i.get("_internal.chart.time"),D=m.zoom<=22?18:13,b=m.period;const e=n.time.date(t.leftGlobal),s=m.maxWidth;v=s<=40;const r=i.get("config.chart.calendar.vertical.smallFormat");w=e.format(r),y=e.format("YYYY"),$=e.format("MMMM"),_=e.format("DD"),M=e.format("dddd"),s<=70?(y=e.format("YY"),$=e.format("MMM"),_=e.format("DD"),M=e.format("ddd")):s<=150&&(M=e.format("ddd")),x=`width: ${t.width}px; margin-left:-${t.subPx}px; --day-size: ${D}px`,o()}),{bulk:!0})),e=>a`
    <div class=${h} style=${x} data-actions=${r(c,{date:t,api:n,state:i})}>
      ${v?a`
            <div class=${d} style="transform: rotate(90deg);">${w}</div>
          `:a`
            <div class=${d}>
              <div class=${u}>${y}</div>
              <div class=${f}>${$}</div>
              <div class=${p}>${_}</div>
              <div class=${g}>${M}</div>
            </div>
          `}
    </div>
  `}function J(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,createComponent:o,html:a,repeat:l}=t,c=e.getActions("chart-calendar");let h;i(n.subscribe("config.classNames",t=>{h=e.getClass("chart-calendar"),r()}));let d,u="";i(n.subscribe("config.headerHeight",t=>{u=`height: ${d=t}px;`,r()}));let f,p=[];return i(n.subscribe("_internal.chart.time.dates",t=>{f=t,p.forEach(t=>t.component.destroy()),p=[];for(const t of f)p.push({id:t.id,component:o(U,{date:t})});r()})),i(()=>{p.forEach(t=>t.component.destroy())}),c.push({create(t){n.update("_internal.elements.calendar",t)}}),t=>a`
    <div class=${h} data-actions=${s(c)} style=${u}>
      ${l(p,t=>t.id,t=>t.component.html())}
    </div>
  `}function q({row:t,time:e,top:n},i){const{api:s,state:r,onDestroy:o,actions:a,update:l,html:c}=i,h=s.getActions("chart-gantt-grid-block",{row:t,time:e,top:n});let d=s.getClass("chart-gantt-grid-block",{row:t});o(r.subscribe("config.classNames",()=>{d=s.getClass("chart-gantt-grid-block"),l()}));let u=`width: ${e.width}px;height: 100%;margin-left:-${e.subPx}px`;return i=>c`
      <div
        class=${d}
        data-actions=${a(h,{row:t,time:e,top:n,api:s,state:r})}
        style=${u}
      />
    `}function Z({row:t},e){const{api:n,state:i,onDestroy:s,actions:r,update:o,html:a,createComponent:l,repeat:c}=e,h=n.getActions("chart-gantt-grid-row");let d;s(i.subscribe("config.classNames",e=>{d=n.getClass("chart-gantt-grid-row",{row:t}),o()}));let u=[];for(const e of t.blocks)u.push({id:e.id,component:l(q,{row:t,time:e.date,top:e.top})});s(()=>{u.forEach(t=>t.component.destroy())});let f=`height: ${t.rowData.height}px;`;return e=>a`
    <div class=${d} data-actions=${r(h,{row:t,api:n,state:i})} style=${f}>
      ${u.map(t=>t.component.html())}
    </div>
  `}function X(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,html:o,createComponent:a,repeat:l}=t,c=e.getActions("chart-gantt-grid");let h,d,u;i(n.subscribe("config.classNames",()=>{h=e.getClass("chart-gantt-grid"),r()})),i(n.subscribe("_internal.height",t=>{u=`height: ${d=t}px`,r()}));let f,p=[];return i(n.subscribeAll(["_internal.chart.time.dates","_internal.list.visibleRows","config.chart.grid.block"],(function(){const t=n.get("_internal.list.visibleRows"),e=n.get("_internal.chart.time.dates");p.forEach(t=>t.component.destroy()),p=[];let i=0;f=[];for(const n in t){const s=t[n],o=[];let l=0;for(const t of e)o.push({id:l++,date:t,row:s,top:i});const c={id:s.id,blocks:o,rowData:s,top:i};f.push(c),p.push({id:s.id,component:a(Z,{row:c})}),i+=s.height,r()}}),{bulk:!0})),c.push({create(t){n.update("_internal.elements.grid")}}),i(()=>{p.forEach(t=>t.component.destroy())}),t=>o`
    <div class=${h} data-actions=${s(c,{api:e,state:n})} style=${u}>
      ${p.map(t=>t.component.html())}
    </div>
  `}function K({rowId:t,itemId:e},n){const{api:i,state:s,onDestroy:r,actions:o,update:a,html:l}=n;let c,h=`config.list.rows.${t}`;r(s.subscribe(h,t=>{c=t,a()}));let d,u=`config.chart.items.${e}`;r(s.subscribe(u,t=>{d=t,a()}));const f="chart-gantt-items-row-item",p=i.getActions(f);let g,m,b;r(s.subscribe("config.classNames",()=>{g=i.getClass(f,{row:c,item:d}),m=i.getClass(f+"-content",{row:c,item:d}),b=i.getClass(f+"-content-label",{row:c,item:d}),a()}));let v,w=0,y=0;return r(s.subscribeAll(["_internal.chart.time","config.scroll",u],t=>{d=s.get(u);let e=s.get("_internal.chart.time");w=(d.time.start-e.leftGlobal)/e.timePerPixel,y=(d.time.end-d.time.start)/e.timePerPixel,y-=s.get("config.chart.spacing");i.isItemInViewport(d,e.leftGlobal,e.rightGlobal);v=`left:${w}px;width:${y}px;`,a()},{bulk:!0})),t=>l`
    <div
      class=${g}
      data-actions=${o(p,{item:d,row:c,left:w,width:y,api:i,state:s})}
      style=${v}
    >
      <div class=${m}>
        <div class=${b}">${d.label}</div>
      </div>
    </div>
  `}function Q({rowId:t},e){const{api:n,state:i,onDestroy:s,actions:r,update:o,html:a,createComponent:l,repeat:c}=e;let h,d,u,f=`_internal.flatTreeMapById.${t}`;s(i.subscribeAll([f,"_internal.chart"],t=>{h=i.get(f);const e=i.get("_internal.chart");d=`width:${e.dimensions.width}px;height:${h.height}px;--row-height:${h.height}px;`,u=`width: ${e.time.totalViewDurationPx}px;height: 100%;`,o()}));let p,g=[];s(i.subscribe(`_internal.flatTreeMapById.${t}._internal.items;`,e=>{p=e,g.forEach(t=>t.component.destroy()),g=[];for(const e of p)g.push({id:e.id,component:l(K,{rowId:t,itemId:e.id})});o()})),s(()=>{g.forEach(t=>t.component.destroy())});const m=n.getActions("chart-gantt-items-row");let b,v;return s(i.subscribe("config.classNames",()=>{b=n.getClass("chart-gantt-items-row",{row:h}),v=n.getClass("chart-gantt-items-row-inner",{row:h}),o()})),t=>a`
    <div class=${b} data-actions=${r(m)} style=${d}>
      <div class=${v} style=${u}>
        ${c(g,t=>t.id,t=>t.component.html())}
      </div>
    </div>
  `}function tt(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,html:o,createComponent:a,repeat:l}=t,c=e.getActions("chart-gantt-items");let h;i(n.subscribe("config.classNames",()=>{h=e.getClass("chart-gantt-items"),r()}));let d=[],u=[];return i(n.subscribe("_internal.list.visibleRows;",t=>{d=t,u.forEach(t=>t.component.destroy()),u=[];for(const t of d)u.push({id:t.id,component:a(Q,{rowId:t.id})});r()})),i(()=>{u.forEach(t=>t.component.destroy())}),t=>o`
    <div class=${h} data-actions=${s(c,{api:e,state:n})}>
      ${u.map(t=>t.component.html())}
    </div>
  `}function et(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,html:o,createComponent:a}=t,l=e.getActions("chart-gantt"),c=a(X);i(c.destroy);const h=a(tt);let d,u;i(h.destroy),i(n.subscribe("config.classNames",t=>{d=e.getClass("chart-gantt"),u=e.getClass("chart-gantt-inner"),r()}));let f="",p="";return i(n.subscribeAll(["_internal.height","_internal.list.rowsHeight"],()=>{f=`height: ${n.get("_internal.height")}px`,p=`height: ${n.get("_internal.list.rowsHeight")}px;`,r()})),l.push({create(t){n.update("_internal.elements.gantt",t)}}),t=>o`
    <div class=${d} style=${f} data-actions=${s(l)} @wheel=${e.onScroll}>
      <div class=${u} style=${p}>
        ${c.html()}${h.html()}
      </div>
    </div>
  `}function nt(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,html:o,createComponent:a}=t,l=a(J);i(l.destroy);const c=a(et);i(c.destroy);let h,d,u,f,p="",g="",m=e.getActions("chart");i(n.subscribe("config.classNames",t=>{h=e.getClass("chart"),d=e.getClass("horizontal-scroll"),u=e.getClass("horizontal-scroll-inner"),r()})),i(n.subscribe("config.scroll.left",t=>{f&&f.scrollLeft!==t&&(f.scrollLeft=t),r()})),i(n.subscribeAll(["_internal.chart.dimensions.width","_internal.chart.time.totalViewDurationPx"],(function(t,e){p=`width: ${n.get("_internal.chart.dimensions.width")}px`,g=`width: ${n.get("_internal.chart.time.totalViewDurationPx")}px; height:1px`,r()})));const b={handleEvent(t){if(t.stopPropagation(),t.preventDefault(),"scroll"===t.type)n.update("config.scroll.left",t.target.scrollLeft);else{const i=e.normalizeMouseWheelEvent(t),s=n.get("config.scroll.xMultiplier"),r=n.get("config.scroll.yMultiplier");t.shiftKey&&i.y?n.update("config.scroll.left",t=>e.limitScroll("left",t+=i.y*s)):i.x?n.update("config.scroll.left",t=>e.limitScroll("left",t+=i.x*s)):n.update("config.scroll.top",t=>e.limitScroll("top",t+=i.y*r))}const i=n.get("_internal.elements.chart"),s=n.get("_internal.elements.horizontalScrollInner");if(i){const t=n.get("config.scroll.left"),e=Math.round(t/(s.clientWidth-i.clientWidth)*100);console.log(e),n.update("config.scroll.percent.left",e)}},passive:!1},v={create(t){f=t,n.update("_internal.elements.horizontalScroll",t)}},w={create(t){n.update("_internal.elements.horizontalScrollInner",t)}};return m.push({create(t){n.update("_internal.elements.chart",t)}}),t=>o`
    <div class=${h} data-actions=${s(m,{api:e,state:n})} @wheel=${b}>
      ${l.html()}${c.html()}
      <div class=${d} style=${p} data-actions=${s([v])} @scroll=${b}>
        <div class=${u} style=${g} data-actions=${s([w])} />
      </div>
    </div>
  `}if("localhost:5000"!==location.host&&"neuronet.io"!==location.host)throw new Error("Sorry!");function it(t){const{api:e,state:n,onDestroy:i,actions:s,update:r,createComponent:o,html:a}=t,l=e.name,c=o(B);i(c.destroy);const h=o(nt);i(h.destroy),i(n.subscribe("config.plugins",t=>{if(void 0!==t&&Array.isArray(t))for(const i of t)i(n,e)}));const d=e.getActions("");let u,f,p,g,m,b,v=0,w=!1;i(n.subscribe("config.classNames",t=>{const i=n.get("config");u=e.getClass(l,{config:i}),w&&(u+=` ${l}__list-column-header-resizer--active`),f=e.getClass("vertical-scroll",{config:i}),r()})),i(n.subscribeAll(["config.height","config.headerHeight","_internal.scrollBarHeight"],()=>{const t=n.get("config"),e=n.get("_internal.scrollBarHeight"),i=t.height-t.headerHeight-e;n.update("_internal.height",i),p=`--height: ${t.height}px`,g=`height: ${i}px; width: ${e}px; margin-top: ${t.headerHeight}px;`,r()})),i(n.subscribe("_internal.list.columns.resizer.active",t=>{w=t,u=e.getClass(e.name),w&&(u+=` ${e.name}__list-column-header-resizer--active`),r()})),i(n.subscribeAll(["config.list.rows;","config.chart.items;","config.list.rows.*.parentId","config.chart.items.*.rowId"],(t,i)=>{if(n.get("_internal.flatTreeMap").length&&"subscribe"===i.type)return;const s=n.get("config.list.rows"),o=[];for(const t in s)o.push(s[t]);e.fillEmptyRowValues(o);const a=n.get("config.chart.items"),l=[];for(const t in a)l.push(a[t]);const c=e.makeTreeMap(o,l);n.update("_internal.treeMap",c),n.update("_internal.flatTreeMapById",e.getFlatTreeMapById(c)),n.update("_internal.flatTreeMap",e.flattenTreeMap(c)),r()},{bulk:!0})),i(n.subscribeAll(["config.list.rows.*.expanded","_internal.treeMap;"],t=>{const i=n.get("config.list.rows"),s=e.getRowsFromIds(e.getRowsWithParentsExpanded(n.get("_internal.flatTreeMap"),n.get("_internal.flatTreeMapById"),i),i);v=e.getRowsHeight(s),n.update("_internal.list.rowsHeight",v),n.update("_internal.list.rowsWithParentsExpanded",s),r()},{bulk:!0})),i(n.subscribeAll(["_internal.list.rowsWithParentsExpanded","config.scroll.top"],()=>{const t=e.getVisibleRows(n.get("_internal.list.rowsWithParentsExpanded"));n.update("_internal.list.visibleRows",t),r()})),i(n.subscribeAll(["config.scroll.top","_internal.list.visibleRows"],()=>{const t=n.get("config.scroll.top");m=`height: ${v}px; width: 1px`,b&&b.scrollTop!==t&&(b.scrollTop=t),r()})),i(n.subscribeAll(["config.chart.time","_internal.dimensions.width","config.scroll.left","_internal.scrollBarHeight","_internal.list.width"],(function(){const t=n.get("_internal.dimensions.width")-n.get("_internal.list.width"),i=t-n.get("_internal.scrollBarHeight"),s=n.get("_internal.dimensions.height")-n.get("config.headerHeight");n.update("_internal.chart.dimensions",{width:t,innerWidth:i,height:s});let o=e.mergeDeep({},n.get("config.chart.time"));const a=.01*(o=e.time.recalculateFromTo(o)).zoom;let l=n.get("config.scroll.left");o.timePerPixel=a+Math.pow(2,o.zoom),o.totalViewDurationMs=e.time.date(o.to).diff(o.from,"milliseconds"),o.totalViewDurationPx=o.totalViewDurationMs/o.timePerPixel,l>o.totalViewDurationPx&&(l=o.totalViewDurationPx-t),o.leftGlobal=l*o.timePerPixel+o.from,o.rightGlobal=o.leftGlobal+t*o.timePerPixel,o.leftInner=o.leftGlobal-o.from,o.rightInner=o.rightGlobal-o.from,o.leftPx=o.leftInner/o.timePerPixel,o.rightPx=o.rightInner/o.timePerPixel,Math.round(o.rightGlobal/o.timePerPixel)>Math.round(o.to/o.timePerPixel)&&(o.rightGlobal=o.to,o.rightInner=o.rightGlobal-o.from,o.totalViewDurationMs=o.to-o.from,o.totalViewDurationPx=o.rightPx,o.timePerPixel=o.totalViewDurationMs/o.totalViewDurationPx),function(t,n){const i=[];let s=t.leftGlobal;const r=t.rightGlobal,o=t.timePerPixel,a=t.period;let l=s-e.time.date(s).startOf(a),c=l/o,h=0,d=0,u=0;for(;s<r;){const t={id:u++,sub:l,subPx:c,leftGlobal:s,rightGlobal:e.time.date(s).endOf(a).valueOf(),width:0,leftPx:0,rightPx:0};t.width=(t.rightGlobal-t.leftGlobal+l)/o,t.width>n&&(t.width=n),d=t.width>d?t.width:d,t.leftPx=h,h+=t.width,t.rightPx=h,i.push(t),s=t.rightGlobal+1,l=0,c=0}t.maxWidth=d,t.dates=i}(o,t),n.update("_internal.chart.time",o),r()}))),n.update("_internal.scrollBarHeight",e.getScrollBarHeight());const y={handleEvent(t){t.stopPropagation(),t.preventDefault(),n.update("config.scroll",e=>{e.top=t.target.scrollTop;const i=n.get("_internal.elements.verticalScrollInner").clientHeight;return e.percent.top=e.top/i,e},{only:["top","percent.top"]})},passive:!1},$={width:0,height:0};d.push({create(t){new R((e,i)=>{const s=t.clientWidth,r=t.clientHeight;$.width===s&&$.height===r||($.width=s,$.height=r,n.update("_internal.dimensions",$),n.update("config.scroll",t=>(t.left=t.percent.left*t.left/100,t),{only:"left"}))}).observe(t),n.update("_internal.elements.main",t)}});const _={create(t){b=t,n.update("_internal.elements.verticalScroll",t)}},M={create(t){n.update("_internal.elements.verticalScrollInner",t)}};return t=>a`
      <div class=${u} style=${p} @scroll=${y} data-actions=${s(d)}>
        ${c.html()}${h.html()}
        <div
          class=${f}
          style=${g}
          @scroll=${y}
          data-action=${s([_])}
        >
          <div style=${m} data-actions=${s([M])} />
        </div>
      </div>
    `}const st={components:{Main:it},scrollBarHeight:17,height:0,treeMap:{},flatTreeMap:[],flatTreeMapById:{},list:{expandedHeight:0,visibleRows:[],rows:{},width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0},visibleItems:[],time:{dates:[],timePerPixel:0,firstTaskTime:0,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0}},elements:{}},rt=t=>{const e=t.state,n=function(t){let e=t.get(),n=[];const i={name:u,debug:!1,log(...t){this.debug&&console.log.call(console,...t)},mergeDeep:p,getComponentData(t,e){const n={};return n.componentName=t,n.className=this.getClass(t,e),n.action=this.getAction(t),n},getClass(n,i){let s=`${u}__${n}`;n===this.name&&(s=this.name);let r=`${s} `,o="-";if(void 0!==i)for(const t in i){if("Object"===i[t].constructor.name&&void 0!==i[t].id)return o+=`-${t}_${i[t].id}`,r+r.trim()+o;"string"!=typeof i[t]&&"number"!=typeof i[t]||(o+=`-${t}_${i[t]}`)}return"-"!=o&&(r+=s+o+" "),void 0!==e.config.classNames[n]&&t.get(`config.classNames.${n}`).forEach(t=>r+=t+" "),void 0!==e.config.classNames[n+o]&&t.get(`config.classNames.${n+o}`).forEach(t=>r+=t+" "),r.trim()},allActions:[],getActions(e){this.allActions.includes(e)||this.allActions.push(e);let n=t.get("config.actions."+e);return void 0===n&&(n=[]),n},isItemInViewport:(t,e,n)=>t.time.start>=e&&t.time.start<n||t.time.end>=e&&t.time.end<n,fillEmptyRowValues(t){let n=0;for(const i in t){const s=t[i];s._internal={parents:[],children:[],items:[]},"number"!=typeof s.height&&(s.height=e.config.list.rowHeight),"boolean"!=typeof s.expanded&&(s.expanded=!1),s.top=n,n+=s.height}return t},generateParents(t,e="parentId"){const n={};for(const i of t){const t=void 0!==i[e]?i[e]:"";void 0===n[t]&&(n[t]={}),n[t][i.id]=i}return n},fastTree(t,e,n=[]){const i=t[e.id];if(e._internal.parents=n,void 0===i)return e._internal.children=[],e;""!==e.id&&(n=[...n,e.id]),e._internal.children=Object.values(i);for(const e in i){const s=i[e];this.fastTree(t,s,n)}return e},makeTreeMap(t,e){const n=this.generateParents(e,"rowId");for(const e of t)e._internal.items=void 0!==n[e.id]?Object.values(n[e.id]):[];const i=this.generateParents(t);return this.fastTree(i,{id:"",_internal:{children:[],parents:[],items:[]}})},getFlatTreeMapById(t,e={}){for(const n of t._internal.children)e[n.id]=n,this.getFlatTreeMapById(n,e);return e},flattenTreeMap(t,e=[]){for(const n of t._internal.children)e.push(n.id),this.flattenTreeMap(n,e);return e},getRowsFromMap:(t,e)=>t.map(t=>e[t.id]),getRowsFromIds(t,e){const n=[];for(const i of t)n.push(e[i]);return n},getRowsWithParentsExpanded(t,e,n){const i=[];t:for(const s of t){for(const t of e[s]._internal.parents){if(!n[t].expanded)continue t}i.push(s)}return i},getRowsHeight(t){let e=0;for(let n of t)e+=n.height;return e},getVisibleRows(t){const n=[];let i=0,s=0;for(const r of t){if(i+r.height>e.config.scroll.top&&i<e.config.scroll.top+e._internal.height&&(r.top=s,s+=r.height,n.push(r)),i>e.config.scroll.top+e._internal.height)break;i+=r.height}return n},normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const s=t.deltaMode,r=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let o=1;switch(s){case 1:o=r;break;case 2:o=window.height}return{x:e*=o,y:n*=o,z:i*=o}},limitScroll(e,n){if("top"===e){const e=t.get("_internal.list.rowsHeight")-t.get("_internal.height");return n<0?n=0:n>e&&(n=e),n}{const e=t.get("_internal.chart.time.totalViewDurationPx")-t.get("_internal.chart.dimensions.width");return n<0?n=0:n>e&&(n=e),n}},time:s(t),getScrollBarHeight(){const t=document.createElement("div");t.style.visibility="hidden",t.style.height="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetHeight;t.style.overflow="scroll";var n=document.createElement("div");n.style.height="100%",t.appendChild(n);var i=n.offsetHeight;return t.parentNode.removeChild(t),e-i+1},destroy(){e=void 0;for(const t of n)t();n=[],i.debug&&delete window.state}};return i.debug&&(window.state=t,window.api=i),i}(e);window.state=e,e.update("",t=>({config:t.config,_internal:st}));Vido(e,n).createApp(it,t.element);return{state:e}};return rt.api=g,rt}));
//# sourceMappingURL=index.umd.js.map
