{"version":3,"file":"highlight-weekends.plugin.esm.js","sources":["../node_modules/@neuronet.io/vido/Action.ts","../src/plugins/highlight-weekends.plugin.ts"],"sourcesContent":["class Action {\n  public isAction: boolean = true;\n}\nAction.prototype.isAction = true;\nexport default Action;\n","/**\n * Weekend highlight plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport Action from '@neuronet.io/vido/Action';\nimport { Api } from '../api/api';\nimport { Vido } from '../gstc';\n\nexport interface Options {\n  weekdays?: number[];\n  className?: string;\n}\n\nexport function Plugin(options: Options = {}) {\n  const weekdays = options.weekdays || [6, 0];\n  let className;\n  let api: Api;\n  let enabled = true;\n\n  class WeekendHighlightAction extends Action {\n    constructor(element, data) {\n      super();\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    update(element, data) {\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    highlight(element, time) {\n      const hasClass = element.classList.contains(className);\n      if (!enabled) {\n        if (hasClass) {\n          element.classList.remove(className);\n        }\n        return;\n      }\n      const isWeekend = weekdays.includes(api.time.date(time).day());\n      if (!hasClass && isWeekend) {\n        element.classList.add(className);\n      } else if (hasClass && !isWeekend) {\n        element.classList.remove(className);\n      }\n    }\n  }\n\n  return function initialize(vidoInstance: Vido) {\n    api = vidoInstance.api;\n    className = options.className || api.getClass('chart-timeline-grid-row-cell') + '--weekend';\n    const destroy = vidoInstance.state.subscribe(\n      '$data.chart.time.format.period',\n      (period) => (enabled = period === 'day')\n    );\n    vidoInstance.state.update('config.actions.chart-timeline-grid-row-cell', (actions) => {\n      actions.push(WeekendHighlightAction);\n      return actions;\n    });\n    return function onDestroy() {\n      destroy();\n    };\n  };\n}\n"],"names":[],"mappings":"AAAA,MAAM,MAAM;IAAZ;QACS,aAAQ,GAAY,IAAI,CAAC;KACjC;CAAA;AACD,MAAM,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI;;ACHhC;;;;;;;;;SAmBgB,MAAM,CAAC,UAAmB,EAAE;IAC1C,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5C,IAAI,SAAS,CAAC;IACd,IAAI,GAAQ,CAAC;IACb,IAAI,OAAO,GAAG,IAAI,CAAC;IAEnB,MAAM,sBAAuB,SAAQ,MAAM;QACzC,YAAY,OAAO,EAAE,IAAI;YACvB,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC/C;QAED,MAAM,CAAC,OAAO,EAAE,IAAI;YAClB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC/C;QAED,SAAS,CAAC,OAAO,EAAE,IAAI;YACrB,MAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,EAAE;gBACZ,IAAI,QAAQ,EAAE;oBACZ,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;iBACrC;gBACD,OAAO;aACR;YACD,MAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAC/D,IAAI,CAAC,QAAQ,IAAI,SAAS,EAAE;gBAC1B,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;aAClC;iBAAM,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;gBACjC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;aACrC;SACF;KACF;IAED,OAAO,SAAS,UAAU,CAAC,YAAkB;QAC3C,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC;QACvB,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,GAAG,CAAC,QAAQ,CAAC,8BAA8B,CAAC,GAAG,WAAW,CAAC;QAC5F,MAAM,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,SAAS,CAC1C,gCAAgC,EAChC,CAAC,MAAM,MAAM,OAAO,GAAG,MAAM,KAAK,KAAK,CAAC,CACzC,CAAC;QACF,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,6CAA6C,EAAE,CAAC,OAAO;YAC/E,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACrC,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;QACH,OAAO,SAAS,SAAS;YACvB,OAAO,EAAE,CAAC;SACX,CAAC;KACH,CAAC;AACJ;;;;"}