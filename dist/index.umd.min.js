!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GSTC=e()}(this,(function(){"use strict";
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const t=t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n};class Directive{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}runPart(t){return this.body(t)}}const e=t=>null!=t&&"boolean"==typeof t.isDirective,n=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,e,n=null,i=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,i),e=n}},s=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},o={},r={},a=`{{lit-${String(Math.random()).slice(2)}}}`,l=`\x3c!--${a}--\x3e`,c=new RegExp(`${a}|${l}`),u="$lit$";
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */class Template{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],s=document.createTreeWalker(e.content,133,null,!1);let o=0,r=-1,l=0;const{strings:d,values:{length:p}}=t;for(;l<p;){const t=s.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)h(e[t].name,u)&&i++;for(;i-- >0;){const e=d[l],n=m.exec(e)[2],i=n.toLowerCase()+u,s=t.getAttribute(i);t.removeAttribute(i);const o=s.split(c);this.parts.push({type:"attribute",index:r,name:n,strings:o}),l+=o.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(a)>=0){const i=t.parentNode,s=e.split(c),o=s.length-1;for(let e=0;e<o;e++){let n,o=s[e];if(""===o)n=f();else{const t=m.exec(o);null!==t&&h(t[2],u)&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-u.length)+t[3]),n=document.createTextNode(o)}i.insertBefore(n,t),this.parts.push({type:"node",index:++r})}""===s[o]?(i.insertBefore(f(),t),n.push(t)):t.data=s[o],l+=o}}else if(8===t.nodeType)if(t.data===a){const e=t.parentNode;null!==t.previousSibling&&r!==o||(r++,e.insertBefore(f(),t)),o=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(n.push(t),r--),l++}else{let e=-1;for(;-1!==(e=t.data.indexOf(a,e+1));)this.parts.push({type:"node",index:-1}),l++}}else s.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const h=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},d=t=>-1!==t.index,p=document.createComment(""),f=()=>p.cloneNode(),m=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class TemplateInstance{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&(n.setValue(t[e]),n.commit()),e++}_clone(){const t=n?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],i=this.template.parts,s=document.createTreeWalker(t,133,null,!1);let o,r=0,a=0,l=s.nextNode();for(;r<i.length;)if(o=i[r],d(o)){for(;a<o.index;)a++,"TEMPLATE"===l.nodeName&&(e.push(l),s.currentNode=l.content),null===(l=s.nextNode())&&(s.currentNode=e.pop(),l=s.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));r++}else this.__parts.push(void 0),r++;return n&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */let g;const v=` ${a} `,y=document.createElement("template");class TemplateResult{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],s=t.lastIndexOf("\x3c!--");n=(s>-1||n)&&-1===t.indexOf("--\x3e",s+1);const o=m.exec(t);e+=null===o?t+(n?v:l):t.substr(0,o.index)+o[1]+o[2]+u+o[3]+a}return e+=this.strings[t]}getTemplateElement(){const t=y.cloneNode();return t.innerHTML=function convertConstantTemplateStringToTrustedHTML(t){const e=window,n=e.trustedTypes||e.TrustedTypes;return n&&!g&&(g=n.createPolicy("lit-html",{createHTML:t=>t})),g?g.createHTML(t):t}(this.getHTML()),t}}class SVGTemplateResult extends TemplateResult{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),i(e,n.firstChild),t}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const b=t=>null===t||!("object"==typeof t||"function"==typeof t),w=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);let _;const x=(t,e,n,i)=>void 0!==_?_(t,e,n,i):t,C=document.createTextNode("");class AttributeCommitter{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new AttributePart(this)}_getValue(){const t=this.strings,e=this.parts,n=t.length-1;if(1===n&&""===t[0]&&""===t[1]&&void 0!==e[0]){const t=e[0].value;if(!w(t))return t}let i="";for(let s=0;s<n;s++){i+=t[s];const n=e[s];if(void 0!==n){const t=n.value;if(b(t)||!w(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[n]}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();"symbol"==typeof(t=x(t,this.name,"attribute",this.element))&&(t=String(t)),this.element.setAttribute(this.name,t)}}}class AttributePart{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===o||b(t)&&t===this.value||(this.value=t,e(t)||(this.committer.dirty=!0))}commit(){for(;e(this.value);){const t=this.value;this.value=o,t.isClass?t.runPart(this):t(this)}this.value!==o&&this.committer.commit()}}class NodePart{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=f()),t.__insert(this.endNode=f())}insertAfterPart(t){t.__insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.runPart(this):t(this)}const t=this.__pendingValue;t!==o&&(b(t)?t!==this.value&&this.__commitText(t):t instanceof TemplateResult?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):w(t)?this.__commitIterable(t):t===r?(this.value=r,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling;if(t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType){const n=x(t,"data","property",e);e.data="string"==typeof n?n:String(n)}else{const e=C.cloneNode();this.__commitNode(e);const n=x(t,"textContent","property",e);e.data="string"==typeof n?n:String(n)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof TemplateInstance&&this.value.template===e)this.value.update(t.values);else{const n=this.endNode.parentNode;if(void 0!==_&&"STYLE"===n.nodeName||"SCRIPT"===n.nodeName)return void this.__commitText("/* lit-html will not write TemplateResults to scripts and styles */");const i=new TemplateInstance(e,t.processor,this.options),s=i._clone();i.update(t.values),this.__commitNode(s),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const s of t)void 0===(n=e[i])&&(n=new NodePart(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(s),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){s(this.startNode.parentNode,t.nextSibling,this.endNode)}}class BooleanAttributePart{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.runPart(this):t(this)}if(this.__pendingValue===o)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=o}}class PropertyCommitter extends AttributeCommitter{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new PropertyPart(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=x(t,this.name,"property",this.element),this.element[this.name]=t}}}class PropertyPart extends AttributePart{}let T=!1;try{const t={get capture(){return T=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class EventPart{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.runPart(this):t(this)}if(this.__pendingValue===o)return;const t=this.__pendingValue,n=this.value,i=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),s=null!=t&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),s&&(this.__options=$(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=o}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const $=t=>t&&(T?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const M=new class DefaultTemplateProcessor{handleAttributeExpressions(t,e,n,i){const s=e[0];if("."===s){return new PropertyCommitter(t,e.slice(1),n).parts}return"@"===s?[new EventPart(t,e.slice(1),i.eventContext)]:"?"===s?[new BooleanAttributePart(t,e.slice(1),n)]:new AttributeCommitter(t,e,n).parts}handleTextExpression(t){return new NodePart(t)}};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */function templateFactory(t){let e=P.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},P.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(a);return void 0===(n=e.keyString.get(i))&&(n=new Template(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const P=new Map,I=new WeakMap,S=(t,e,n)=>{let i=I.get(e);void 0===i&&(s(e,e.firstChild),I.set(e,i=new NodePart(Object.assign({templateFactory:templateFactory},n))),i.appendInto(e)),i.setValue(t),i.commit()};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const A=(t,...e)=>new TemplateResult(t,e,"html",M),E=(t,...e)=>new SVGTemplateResult(t,e,"svg",M);
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
var O=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise((function(i,s){(function settle(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,s,(e=t[n](e)).done,e.value)}))}}};const D=t((t,e)=>async n=>{var i,s;if(!(n instanceof NodePart))throw new Error("asyncAppend can only be used in text bindings");if(t===n.value)return;let o;n.value=t;let r=0;try{for(var a,l=O(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&n.clear(),void 0!==e&&(i=e(i,r));let s=n.startNode;void 0!==o&&(s=f(),o.endNode=s,n.endNode.parentNode.insertBefore(s,n.endNode)),(o=new NodePart(n.options)).insertAfterNode(s),o.setValue(i),o.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(s=l.return)&&await s.call(l)}finally{if(i)throw i.error}}});
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */var R=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise((function(i,s){(function settle(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,s,(e=t[n](e)).done,e.value)}))}}};const L=t((t,e)=>async n=>{var i,s;if(!(n instanceof NodePart))throw new Error("asyncReplace can only be used in text bindings");if(t===n.value)return;const o=new NodePart(n.options);n.value=t;let r=0;try{for(var a,l=R(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&(n.clear(),o.appendIntoPart(n)),void 0!==e&&(i=e(i,r)),o.setValue(i),o.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(s=l.return)&&await s.call(l)}finally{if(i)throw i.error}}}),N=new WeakMap,z=t(t=>e=>{if(!(e instanceof NodePart))throw new Error("cache can only be used in text bindings");let n=N.get(e);void 0===n&&(n=new WeakMap,N.set(e,n));const s=e.value;if(s instanceof TemplateInstance){if(t instanceof TemplateResult&&s.template===e.options.templateFactory(t))return void e.setValue(t);{let t=n.get(s.template);void 0===t&&(t={instance:s,nodes:document.createDocumentFragment()},n.set(s.template,t)),i(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof TemplateResult){const i=e.options.templateFactory(t),s=n.get(i);void 0!==s&&(e.setValue(s.nodes),e.commit(),e.value=s.instance)}e.setValue(t)}),H=new WeakMap,j=t(t=>e=>{if(!(e instanceof AttributePart)||e instanceof PropertyPart||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:n}=e,{element:i}=n;let s=H.get(e);void 0===s&&(i.className=n.strings.join(" "),H.set(e,s=new Set));const{classList:o}=i;s.forEach(e=>{e in t||(o.remove(e),s.delete(e))});for(const e in t){const n=t[e];n!=s.has(e)&&(n?(o.add(e),s.add(e)):(o.remove(e),s.delete(e)))}}),k=new WeakMap,V=t((t,e)=>n=>{const i=k.get(n);if(Array.isArray(t)){if(Array.isArray(i)&&i.length===t.length&&t.every((t,e)=>t===i[e]))return}else if(i===t&&(void 0!==t||k.has(n)))return;n.setValue(e()),k.set(n,Array.isArray(t)?Array.from(t):t)}),W=t(t=>e=>{if(void 0===t&&e instanceof AttributePart){if(t!==e.value){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else e.setValue(t)}),Y=(t,e)=>{const n=t.startNode.parentNode,i=void 0===e?t.endNode:e.startNode,s=n.insertBefore(f(),i);n.insertBefore(f(),i);const o=new NodePart(t.options);return o.insertAfterNode(s),o},F=(t,e)=>(t.setValue(e),t.commit(),t),B=(t,e,n)=>{const s=t.startNode.parentNode,o=n?n.startNode:t.endNode,r=e.endNode.nextSibling;r!==o&&i(s,e.startNode,r,o)},G=t=>{s(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},U=(t,e,n)=>{const i=new Map;for(let s=e;s<=n;s++)i.set(t[s],s);return i},X=new WeakMap,q=new WeakMap,J=t((t,e,n)=>{let i;return void 0===n?n=e:void 0!==e&&(i=e),e=>{if(!(e instanceof NodePart))throw new Error("repeat can only be used in text bindings");const s=X.get(e)||[],o=q.get(e)||[],r=[],a=[],l=[];let c,u,h=0;for(const e of t)l[h]=i?i(e,h):h,a[h]=n(e,h),h++;let d=0,p=s.length-1,f=0,m=a.length-1;for(;d<=p&&f<=m;)if(null===s[d])d++;else if(null===s[p])p--;else if(o[d]===l[f])r[f]=F(s[d],a[f]),d++,f++;else if(o[p]===l[m])r[m]=F(s[p],a[m]),p--,m--;else if(o[d]===l[m])r[m]=F(s[d],a[m]),B(e,s[d],r[m+1]),d++,m--;else if(o[p]===l[f])r[f]=F(s[p],a[f]),B(e,s[p],s[d]),p--,f++;else if(void 0===c&&(c=U(l,f,m),u=U(o,d,p)),c.has(o[d]))if(c.has(o[p])){const t=u.get(l[f]),n=void 0!==t?s[t]:null;if(null===n){const t=Y(e,s[d]);F(t,a[f]),r[f]=t}else r[f]=F(n,a[f]),B(e,n,s[d]),s[t]=null;f++}else G(s[p]),p--;else G(s[d]),d++;for(;f<=m;){const t=Y(e,r[m+1]);F(t,a[f]),r[f++]=t}for(;d<=p;){const t=s[d++];null!==t&&G(t)}X.set(e,r),q.set(e,l)}}),Z=new WeakMap,K=document.createElement("template"),Q=t(t=>e=>{if(!(e instanceof NodePart))throw new Error("unsafeHTML can only be used in text bindings");const n=Z.get(e);if(void 0!==n&&b(t)&&t===n.value&&e.value===n.fragment)return;const i=K.cloneNode();i.innerHTML=t;const s=document.importNode(i.content,!0);e.setValue(s),Z.set(e,{value:t,fragment:s})}),tt=new WeakMap,et=t((...t)=>e=>{let n=tt.get(e);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},tt.set(e,n));const i=n.values;let s=i.length;n.values=t;for(let o=0;o<t.length&&!(o>n.lastRenderedIndex);o++){const r=t[o];if(b(r)||"function"!=typeof r.then){e.setValue(r),n.lastRenderedIndex=o;break}o<s&&r===i[o]||(n.lastRenderedIndex=2147483647,s=0,Promise.resolve(r).then(t=>{const i=n.values.indexOf(r);i>-1&&i<n.lastRenderedIndex&&(n.lastRenderedIndex=i,e.setValue(t),e.commit())}))}});
/**
     * @license
     * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */function schedule(t){let e=0;return function wrapperFn(n){e||(e=requestAnimationFrame((function executeFrame(){e=0,t.apply(void 0,[n])})))}}function isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}function clone(t){if(void 0!==t.actions){const e=t.actions.map(t=>{const e=Object.assign({},t),n=Object.assign({},e.props);return delete n.state,delete n.api,delete e.element,e.props=n,e});t.actions=e}return function mergeDeep(t,...e){const n=e.shift();if(isObject(t)&&isObject(n))for(const e in n)if(isObject(n[e]))void 0===t[e]&&(t[e]={}),t[e]=mergeDeep(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])isObject(i)?t[e].push(mergeDeep({},i)):t[e].push(i)}else t[e]=n[e];return e.length?mergeDeep(t,...e):t}({},t)}var nt=function(){if("undefined"!=typeof Map)return Map;function getIndex(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return(function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(t){var e=getIndex(this.__entries__,t),n=this.__entries__[e];return n&&n[1]},class_1.prototype.set=function(t,e){var n=getIndex(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},class_1.prototype.delete=function(t){var e=this.__entries__,n=getIndex(e,t);~n&&e.splice(n,1)},class_1.prototype.has=function(t){return!!~getIndex(this.__entries__,t)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];t.call(e,s[1],s[0])}},class_1}())}(),it="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,st="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),ot="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(st):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},rt=2;var at=20,lt=["top","right","bottom","left","width","height","size","weight"],ct="undefined"!=typeof MutationObserver,ut=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(t,e){var n=!1,i=!1,s=0;function resolvePending(){n&&(n=!1,t()),i&&proxy()}function timeoutCallback(){ot(resolvePending)}function proxy(){var t=Date.now();if(n){if(t-s<rt)return;i=!0}else n=!0,i=!1,setTimeout(timeoutCallback,e);s=t}return proxy}(this.refresh.bind(this),at)}return ResizeObserverController.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},ResizeObserverController.prototype.connect_=function(){it&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ct?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){it&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;lt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),ht=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},dt=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||st},pt=createRectInit(0,0,0,0);function toFloat(t){return parseFloat(t)||0}function getBordersSize(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+toFloat(t["border-"+n+"-width"])}),0)}function getHTMLElementContentRect(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return pt;var i=dt(t).getComputedStyle(t),s=function getPaddings(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],o=t["padding-"+s];e[s]=toFloat(o)}return e}(i),o=s.left+s.right,r=s.top+s.bottom,a=toFloat(i.width),l=toFloat(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==e&&(a-=getBordersSize(i,"left","right")+o),Math.round(l+r)!==n&&(l-=getBordersSize(i,"top","bottom")+r)),!function isDocumentElement(t){return t===dt(t).document.documentElement}(t)){var c=Math.round(a+o)-e,u=Math.round(l+r)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return createRectInit(s.left,s.top,a,l)}var ft="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof dt(t).SVGGraphicsElement}:function(t){return t instanceof dt(t).SVGElement&&"function"==typeof t.getBBox};function getContentRect(t){return it?ft(t)?function getSVGContentRect(t){var e=t.getBBox();return createRectInit(0,0,e.width,e.height)}(t):getHTMLElementContentRect(t):pt}function createRectInit(t,e,n,i){return{x:t,y:e,width:n,height:i}}var mt=function(){function ResizeObservation(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=t}return ResizeObservation.prototype.isActive=function(){var t=getContentRect(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},ResizeObservation}(),gt=function gt(t,e){var n=function createReadOnlyRect(t){var e=t.x,n=t.y,i=t.width,s=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,r=Object.create(o.prototype);return ht(r,{x:e,y:n,width:i,height:s,top:n,right:e+i,bottom:s+n,left:e}),r}(e);ht(this,{target:t,contentRect:n})},vt=function(){function ResizeObserverSPI(t,e,n){if(this.activeObservations_=[],this.observations_=new nt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return ResizeObserverSPI.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof dt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new mt(t)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof dt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new gt(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),yt="undefined"!=typeof WeakMap?new WeakMap:new nt,bt=function ResizeObserver(t){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=ut.getInstance(),n=new vt(t,e,this);yt.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){bt.prototype[t]=function(){var e;return(e=yt.get(this))[t].apply(e,arguments)}}));var wt=void 0!==st.ResizeObserver?st.ResizeObserver:bt;
/**
     * Main component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function Main(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:r,createComponent:a,html:l,StyleMap:c}=t,u=n.name;let h,d;s(i.subscribe("config.components.List",t=>h=t)),s(i.subscribe("config.components.Chart",t=>d=t));const p=a(h);s(p.destroy);const f=a(d);let m;s(f.destroy),s(i.subscribe("config.plugins",e=>{if(void 0!==e&&Array.isArray(e))for(const n of e){const e=n(t);"function"==typeof e&&s(e)}})),s(i.subscribe("config.wrappers.Main",t=>m=t));const g=n.getActions("");let v,y,b,w=new c({}),_=new c({}),x=new c({}),C=0,T=!1;s(i.subscribe("config.classNames",t=>{const e=i.get("config");v=n.getClass(u,{config:e}),T&&(v+=` ${u}__list-column-header-resizer--active`),y=n.getClass("vertical-scroll",{config:e}),r()})),s(i.subscribeAll(["config.height","config.headerHeight","_internal.scrollBarHeight"],(function heightChange(){const t=i.get("config"),e=i.get("_internal.scrollBarHeight"),n=t.height-t.headerHeight-e;i.update("_internal.height",n),w.style["--height"]=t.height+"px",_.style.height=n+"px",_.style.width=e+"px",_.style["margin-top"]=t.headerHeight+"px",r()}))),s(i.subscribe("_internal.list.columns.resizer.active",(function resizerActiveChange(t){T=t,v=n.getClass(n.name),T&&(v+=` ${n.name}__list-column-header-resizer--active`),r()}))),s(i.subscribeAll(["config.list.rows;","config.chart.items;","config.list.rows.*.parentId","config.chart.items.*.rowId"],(function generateTree(t,e){if(i.get("_internal.flatTreeMap").length&&"subscribe"===e.type)return;const s=i.get("config.list.rows"),o=[];for(const t in s)o.push(s[t]);n.fillEmptyRowValues(o);const a=i.get("config.chart.items"),l=[];for(const t in a)l.push(a[t]);const c=n.makeTreeMap(o,l);i.update("_internal.treeMap",c),i.update("_internal.flatTreeMapById",n.getFlatTreeMapById(c)),i.update("_internal.flatTreeMap",n.flattenTreeMap(c)),r()}),{bulk:!0})),s(i.subscribeAll(["config.list.rows.*.expanded","_internal.treeMap;"],(function prepareExpanded(){const t=i.get("config.list.rows"),e=n.getRowsFromIds(n.getRowsWithParentsExpanded(i.get("_internal.flatTreeMap"),i.get("_internal.flatTreeMapById"),t),t);C=n.getRowsHeight(e),i.update("_internal.list.rowsHeight",C),i.update("_internal.list.rowsWithParentsExpanded",e),r()}),{bulk:!0})),s(i.subscribeAll(["_internal.list.rowsWithParentsExpanded","config.scroll.top"],(function generateVisibleRows(){const{visibleRows:t,compensation:e}=n.getVisibleRowsAndCompensation(i.get("_internal.list.rowsWithParentsExpanded")),s=i.get("_internal.list.visibleRows");let o=!0;if(i.update("config.scroll.compensation",-e),t.length&&(o=t.some((t,e)=>void 0===s[e]||t.id!==s[e].id)),o){i.update("_internal.list.visibleRows",t);const e=[];for(const n of t)for(const t of n._internal.items)e.push(t);i.update("_internal.chart.visibleItems",e)}r()})));let $=0;s(i.subscribe("_internal.list.visibleRows;",(function onVisibleRowsChange(){const t=i.get("config.scroll.top");x.style.width="1px",x.style.height=C+"px",$!==t&&b&&($=t,b.scrollTop=t),r()})));const M=(t,e)=>{const i=[];let s=e.leftGlobal;const o=e.rightGlobal,r=e.timePerPixel;let a=s-n.time.date(s).startOf(t),l=a/r,c=0,u=0;for(;s<o;){const e={sub:a,subPx:l,leftGlobal:s,rightGlobal:n.time.date(s).endOf(t).valueOf(),width:0,leftPx:0,rightPx:0};e.width=(e.rightGlobal-e.leftGlobal+a)/r,u=e.width>u?e.width:u,e.leftPx=c,c+=e.width,e.rightPx=c,i.push(e),s=e.rightGlobal+1,a=0,l=0}e.maxWidth[t]=u,e.dates[t]=i};s(i.subscribeAll(["config.chart.time","_internal.dimensions.width","config.scroll.left","_internal.scrollBarHeight","_internal.list.width","_internal.chart.dimensions"],()=>{const t=i.get("_internal.chart.dimensions.width");let e=n.mergeDeep({},i.get("config.chart.time"));const s=.01*(e=n.time.recalculateFromTo(e)).zoom;let o=i.get("config.scroll.left");if(e.timePerPixel=s+Math.pow(2,e.zoom),e.totalViewDurationMs=n.time.date(e.to).diff(e.from,"milliseconds"),e.totalViewDurationPx=e.totalViewDurationMs/e.timePerPixel,o>e.totalViewDurationPx&&(o=e.totalViewDurationPx-t),e.leftGlobal=o*e.timePerPixel+e.from,e.rightGlobal=e.leftGlobal+t*e.timePerPixel,e.leftInner=e.leftGlobal-e.from,e.rightInner=e.rightGlobal-e.from,e.leftPx=e.leftInner/e.timePerPixel,e.rightPx=e.rightInner/e.timePerPixel,Math.round(e.rightGlobal/e.timePerPixel)>Math.round(e.to/e.timePerPixel)){const t=(e.rightGlobal-e.to)/(e.rightGlobal-e.from);e.timePerPixel=e.timePerPixel-e.timePerPixel*t,e.leftGlobal=o*e.timePerPixel+e.from,e.rightGlobal=e.to,e.rightInner=e.rightGlobal-e.from,e.totalViewDurationMs=e.to-e.from,e.totalViewDurationPx=e.totalViewDurationMs/e.timePerPixel,e.rightInner=e.rightGlobal-e.from,e.rightPx=e.rightInner/e.timePerPixel,e.leftPx=e.leftInner/e.timePerPixel}M("day",e),M("month",e),i.update("_internal.chart.time",e),r()},{bulk:!0}));const P=document.createElement("canvas"),I=P.getContext("2d");function renderIcon(t){return new Promise(e=>{const n=document.createElement("img");n.setAttribute("src","data:image/svg+xml;base64,"+btoa(t)),n.onload=function(){P.width=n.width,P.height=n.height,I.drawImage(n,0,0),e(P.toDataURL("image/png"))}})}!function renderIcons(){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
return function __awaiter(t,e,n,i){return new(n||(n=Promise))((function(s,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i.throw(t))}catch(t){o(t)}}function step(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(fulfilled,rejected)}step((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const t=i.get("config.list.expander.icons"),e={};for(const n in t){const i=t[n];e[n]=yield renderIcon(i)}i.update("_internal.list.expander.icons",e)}))}(),i.update("_internal.scrollBarHeight",n.getScrollBarHeight());let S=0;const A={handleEvent:function handleEvent(t){if("scroll"===t.type){const e=t.target.scrollTop,n=t=>{t.top=e,S=t.top;const n=i.get("_internal.elements.vertical-scroll-inner");if(n){const e=n.clientHeight;t.percent.top=t.top/e}return t};S!==e&&i.update("config.scroll",n,{only:["top","percent.top"]})}else{const e=n.normalizeMouseWheelEvent(t),s=i.get("config.scroll.xMultiplier"),o=i.get("config.scroll.yMultiplier");t.shiftKey&&e.y?i.update("config.scroll.left",t=>n.limitScroll("left",t+=e.y*s)):e.x?i.update("config.scroll.left",t=>n.limitScroll("left",t+=e.x*s)):i.update("config.scroll.top",t=>S=n.limitScroll("top",t+=e.y*o))}},passive:!0,capture:!1};function onScrollStop(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}const E={width:0,height:0};let O;class ResizeAction{constructor(t){O||((O=new wt((e,n)=>{const s=t.clientWidth,o=t.clientHeight;E.width===s&&E.height===o||(E.width=s,E.height=o,i.update("_internal.dimensions",E))})).observe(t),i.update("_internal.elements.main",t))}update(){}destroy(t){O.unobserve(t)}}g.includes(ResizeAction)||g.push(ResizeAction),s(()=>{O.disconnect()});const D=Object.assign(Object.assign({},e),{api:n,state:i}),R=o.create(g,D),L=o.create([t=>{b||(b=t,i.update("_internal.elements.vertical-scroll",t))}]),N=o.create([t=>{i.update("_internal.elements.vertical-scroll-inner",t)}]);return n=>m(l`
        <div
          data-info-url="https://github.com/neuronetio/gantt-schedule-timeline-calendar"
          class=${v}
          style=${w}
          @scroll=${onScrollStop}
          @wheel=${onScrollStop}
          data-actions=${R}
        >
          ${p.html()}${f.html()}
          <div
            class=${y}
            style=${_}
            @scroll=${A}
            @wheel=${A}
            data-action=${L}
          >
            <div style=${x} data-actions=${N} />
          </div>
        </div>
      `,{props:e,vido:t,templateProps:n})}
/**
     * List component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function List(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:r,reuseComponents:a,html:l,schedule:c,StyleMap:u}=t,h=n.getActions("list");let d,p,f,m,g;s(i.subscribe("config.wrappers.List",t=>d=t)),s(i.subscribe("config.components.ListColumn",t=>p=t)),s(i.subscribe("config.list",(function onListChange(){m=i.get("config.list"),g=m.columns.percent,r()}))),s(i.subscribe("config.classNames",()=>{f=n.getClass("list",{list:m}),r()}));let v=[];s(i.subscribe("config.list.columns.data;",(function onListColumnsDataChange(t){a(v,Object.values(t),t=>({columnId:t.id}),p),r()}))),s(()=>{v.forEach(t=>t.destroy())});const y=new u({height:"","--expander-padding-width":"","--expander-size":""});s(i.subscribeAll(["config.height","config.list.expander"],t=>{const e=i.get("config.list.expander");y.style.height=i.get("config.height")+"px",y.style["--expander-padding-width"]=e.padding+"px",y.style["--expander-size"]=e.size+"px",r()}));const b={handleEvent:c((function onScrollHandler(t){if(t.stopPropagation(),t.preventDefault(),"scroll"===t.type)i.update("config.scroll.top",t.target.scrollTop);else{const e=n.normalizeMouseWheelEvent(t);i.update("config.scroll.top",t=>n.limitScroll("top",t+=e.y*i.get("config.scroll.yMultiplier")))}})),passive:!1};let w;function getWidth(t){w||(w=t.clientWidth,0===g&&(w=0),i.update("_internal.list.width",w),i.update("_internal.elements.list",t))}let _="",x=0,C=0,T=0,$=0;function onPointerStart(t){_="xy";const e=n.normalizePointerEvent(t);$=e.x,T=e.y,x=e.x,C=e.y}function onPointerMove(t){if(!_)return;t.stopPropagation();const e=n.normalizePointerEvent(t);return"x"===_||"xy"===_&&Math.abs(e.x-x)>10?(_="x",function handleX(t){let e=t.x-$;i.update("config.list.columns.percent",t=>((t+=e)<0&&(t=0),t>100&&(t=100),t)),T=t.y,$=t.x}(e)):"y"===_||"xy"===_&&Math.abs(e.y-C)>10?(_="y",function handleY(t){let e=t.y-T;e*=i.get("config.scroll.yMultiplier"),Math.abs(t.y-C)<10||(i.update("config.scroll.top",t=>(t-=e,t=n.limitScroll("top",t))),T=t.y,$=t.x)}(e)):void 0}function onPointerEnd(t){_="",T=0,$=0}h.push(t=>(i.update("_internal.elements.list",t),t.addEventListener("touchstart",onPointerStart),document.addEventListener("touchmove",onPointerMove),document.addEventListener("touchend",onPointerEnd),t.addEventListener("mousedown",onPointerStart),document.addEventListener("mousemove",onPointerMove),document.addEventListener("mouseup",onPointerEnd),getWidth(t),{update:getWidth,destroy(t){t.removeEventListener("touchstart",onPointerStart),document.removeEventListener("touchmove",onPointerMove),document.removeEventListener("touchend",onPointerEnd),t.removeEventListener("mousedown",onPointerStart),document.removeEventListener("mousemove",onPointerMove),document.removeEventListener("mouseup",onPointerEnd)}}));const M=o.create(h,Object.assign(Object.assign({},e),{api:n,state:i}));return e=>d(m.columns.percent>0?l`
            <div class=${f} data-actions=${M} style=${y} @scroll=${b} @wheel=${b}>
              ${v.map(t=>t.html())}
            </div>
          `:null,{vido:t,props:{},templateProps:e})}
/**
     * ListColumn component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ListColumn(t,e){const{api:n,state:i,onDestroy:s,onChange:o,Actions:r,update:a,createComponent:l,reuseComponents:c,html:u,StyleMap:h}=t;let d,p,f;s(i.subscribe("config.wrappers.ListColumn",t=>d=t)),s(i.subscribe("config.components.ListColumnRow",t=>p=t)),s(i.subscribe("config.components.ListColumnHeader",t=>f=t));const m=Object.assign(Object.assign({},e),{api:n,state:i}),g=n.getActions("list-column"),v=n.getActions("list-column-rows");let y,b,w;const _=new h({width:"","--width":""}),x=new h({width:"",height:""}),C=new h({width:"",height:""});let T,$,M=`config.list.columns.data.${e.columnId}`,P=i.subscribe(M,(function columnChanged(t){T=t,a()}));function calculateStyle(){const t=i.get("config.list"),e=i.get("config.scroll.compensation");w=t.columns.data[T.id].width*t.columns.percent*.01,$=w;const n=i.get("_internal.height");_.style.width=$+"px",_.style["--width"]=$+"px",x.style.height=n+"px",C.style.height=n+Math.abs(e)+"px",C.style.transform=`translate(0px, ${e}px)`}let I=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${T.id}.width`,"_internal.chart.dimensions.width","_internal.height","config.scroll.compensation","_internal.list.width"],calculateStyle,{bulk:!0});const S=l(f,{columnId:e.columnId});s(S.destroy),o(t=>{e=t;for(const t in e)m[t]=e[t];P&&P(),M=`config.list.columns.data.${e.columnId}`,P=i.subscribe(M,(function columnChanged(t){T=t,a()})),I&&I(),I=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${T.id}.width`,"_internal.chart.dimensions.width","_internal.height","config.scroll.compensation","_internal.list.width"],calculateStyle,{bulk:!0}),S.change(e)}),s(()=>{P(),I()}),s(i.subscribe("config.classNames",t=>{y=n.getClass("list-column"),b=n.getClass("list-column-rows"),a()}));let A=[];function getRowHtml(t){return t.html()}s(i.subscribe("_internal.list.visibleRows;",t=>{c(A,t,t=>t&&{columnId:e.columnId,rowId:t.id,width:$},p),a()})),s((function rowsDestroy(){A.forEach(t=>t.destroy())})),g.push(t=>{i.update("_internal.elements.list-columns",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))});const E=r.create(g,{column:T,state:i,api:n}),O=r.create(v,{api:n,state:i});return n=>d(u`
        <div class=${y} data-actions=${E} style=${_}>
          ${S.html()}
          <div class=${b} style=${x} data-actions=${O}>
            <div class=${b+"--scroll-compensation"} style=${C}>
              ${A.map(getRowHtml)}
            </div>
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ListColumnHeader component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ListColumnHeader(t,e){const{api:n,state:i,onDestroy:s,onChange:o,Actions:r,update:a,createComponent:l,html:c,cache:u,StyleMap:h}=t,d=Object.assign(Object.assign({},e),{api:n,state:i});let p;s(i.subscribe("config.wrappers.ListColumnHeader",t=>p=t));const f=n.getActions("list-column-header");let m;s(i.subscribe("config.components.ListColumnHeaderResizer",t=>m=t));const g=l(m,{columnId:e.columnId});let v;s(g.destroy),s(i.subscribe("config.components.ListExpander",t=>v=t));const y=l(v,{});let b;s(y.destroy);let w,_,x=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{b=t,a()});s(x),o(t=>{e=t;for(const t in e)d[t]=e[t];x&&x(),x=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{b=t,a()})}),s(i.subscribe("config.classNames",()=>{w=n.getClass("list-column-header"),_=n.getClass("list-column-header-content")}));const C=new h({height:"","--height":"","--paddings-count":""});s(i.subscribeAll(["config.headerHeight","config.list.columns.percent"],()=>{const t=i.get("config");C.style.height=t.headerHeight+"px",C.style["--height"]=t.headerHeight+"px",C.style["--paddings-count"]="1",a()}));const T=r.create(f,d);return n=>p(c`
        <div class=${w} style=${C} data-actions=${T}>
          ${u(b.expander?function withExpander(){return c`
      <div class=${_}>
        ${y.html()}${g.html(b)}
      </div>
    `}():function withoutExpander(){return c`
      <div class=${_}>
        ${g.html(b)}
      </div>
    `}())}
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ListColumnHeaderResizer component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ListColumnHeaderResizer(t,e){const{api:n,state:i,onDestroy:s,update:o,html:r,Actions:a,cache:l,StyleMap:c}=t,u="list-column-header-resizer",h=n.getActions(u);let d,p;s(i.subscribe("config.wrappers.ListColumnHeaderResizer",t=>d=t)),s(i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{p=t,o()}));let f,m,g,v,y,b,w=new c({width:""}),_=!1;s(i.subscribe("config.classNames",t=>{f=n.getClass(u,{column:p}),m=n.getClass(u+"-container",{column:p}),g=n.getClass(u+"-dots",{column:p}),v=n.getClass(u+"-dots-dot",{column:p}),y=n.getClass(u+"-line",{column:p}),o()})),s(i.subscribeAll([`config.list.columns.data.${p.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const n=i.get("config.list");b=p.width*n.columns.percent*.01,w.style["--width"]=n.columns.resizer.width+"px",_=n.columns.resizer.inRealTime,i.update("_internal.list.width",b),o()}));let x=[1,2,3,4,5,6,7,8];s(i.subscribe("config.list.columns.resizer.dots",t=>{x=[];for(let e=0;e<t;e++)x.push(e);o()}));let C=!1,T=b;const $=new c({"--display":"none","--left":T+"px"}),M=`config.list.columns.data.${p.id}.width`;function onMouseDown(t){C=!0,i.update("_internal.list.columns.resizer.active",!0),C?($.style.display="block",$.style["--left"]=T+"px"):($.style.display="none",$.style["--left"]="0px")}function onMouseMove(t){if(C){let e=i.get("config.list.columns.minWidth");"number"==typeof p.minWidth&&(e=p.minWidth),(T+=t.movementX)<e&&(T=e),_&&i.update(M,T)}}function onMouseUp(t){C&&(i.update("_internal.list.columns.resizer.active",!1),i.update(M,T),C=!1)}document.body.addEventListener("mousemove",onMouseMove),s(()=>document.body.removeEventListener("mousemove",onMouseMove)),document.body.addEventListener("mouseup",onMouseUp),s(()=>document.body.removeEventListener("mouseup",onMouseUp));const P=a.create(h,{column:p,api:n,state:i});return n=>d(r`
        <div class=${f} data-actions=${P}>
          <div class=${m}>
            ${l(p.header.html?r`
                    ${p.header.html}
                  `:p.header.content)}
          </div>
          <div class=${g} style=${w} @mousedown=${onMouseDown}>
            ${x.map(t=>r`
                  <div class=${v} />
                `)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ListColumnRow component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function saveElement(t,e){e.state.update("_internal.elements.list-column-rows",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}function ListColumnRow(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:r,update:a,html:l,createComponent:c,onChange:u,StyleMap:h,unsafeHTML:d}=t,p=Object.assign(Object.assign({},e),{api:n,state:i});let f=!1;const m=new o(()=>f);let g,v;s(i.subscribe("config.wrappers.ListColumnRow",t=>g=t)),s(i.subscribe("config.components.ListExpander",t=>v=t));let y,b,w=`_internal.flatTreeMapById.${e.rowId}`,_=i.get(w),x=`config.list.columns.data.${e.columnId}`,C=i.get(x),T=new h(C.expander?{height:"",width:"",top:"","--height":"","--expander-padding-width":"","--expander-size":""}:{height:"",width:"",top:"","--height":""},!0);const $=c(v,{row:_});u((t,n)=>{if(n.leave)return f=!0,void a();f=!1,e=t;for(const t in e)p[t]=e[t];const s=e.rowId,o=e.columnId;y&&y(),b&&b(),w=`_internal.flatTreeMapById.${s}`,x=`config.list.columns.data.${o}`,y=i.subscribeAll([w,"config.list.expander"],t=>{_=i.get(w);const e=i.get("config.list.expander");T.style={},T.style.height=_.height+"px",T.style["--height"]=_.height+"px",T.style.width=C.width+"px",C.expander&&(T.style["--expander-padding-width"]=e.padding*(_._internal.parents.length+1)+"px");for(let t of _._internal.parents){const e=i.get(`_internal.flatTreeMapById.${t}`);if("object"==typeof e.style&&"Object"===e.style.constructor.name&&"object"==typeof e.style.children){const t=e.style.children;for(const e in t)T.style[e]=t[e]}}if("object"==typeof _.style&&"Object"===_.style.constructor.name&&"object"==typeof _.style.current){const t=_.style.current;for(const e in t)T.style[e]=t[e]}a()}),$&&$.change({row:_}),b=i.subscribe(x,t=>{C=t,a()})}),s(()=>{$&&$.destroy(),b(),y()});const M=n.getActions("list-column-row");let P;s(i.subscribe("config.classNames",t=>{P=n.getClass("list-column-row"),a()})),M.includes(saveElement)||M.push();const I=r.create(M,p);return n=>g(l`
        <div detach=${m} class=${P} style=${T} data-actions=${I}>
          ${C.expander?$.html():null}
          <div class=${P+"-content"}>
            ${C.isHTML?function getHtml(){return"function"==typeof C.data?d(C.data(_)):d(_[C.data])}():function getText(){return"function"==typeof C.data?C.data(_):_[C.data]}()}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ListExpander component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ListExpander(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,createComponent:l,onChange:c}=t,u=n.getActions("list-expander"),h=Object.assign(Object.assign({},e),{api:n,state:i});let d,p;s(i.subscribe("config.components.ListToggle",t=>p=t));const f=l(p,e.row?{row:e.row}:{});let m;if(s(f.destroy),s(i.subscribe("config.wrappers.ListExpander",t=>m=t)),s(i.subscribe("config.classNames",t=>{d=n.getClass("list-expander"),r()})),e.row){c((function onPropsChange(t){e=t;for(const t in e)h[t]=e[t];f.change(e)})),s((function listExpanderDestroy(){}))}const g=o.create(u,h);return n=>m(a`
        <div class=${d} data-action=${g}>
          ${f.html()}
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ListToggle component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ListToggle(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,onChange:l,cache:c}=t,u=Object.assign(Object.assign({},e),{api:n,state:i});let h;s(i.subscribe("config.wrappers.ListToggle",t=>h=t));const d=n.getActions("list-expander-toggle");let p,f,m,g,v,y,b,w=!1;if(s(i.subscribe("config.classNames",t=>{p=n.getClass("list-expander-toggle"),f=p+"-child",m=p+"-open",g=p+"-closed",r()})),s(i.subscribe("_internal.list.expander.icons",t=>{t&&(v=t.child,y=t.open,b=t.closed),r()})),e.row){function expandedChange(t){w=t,r()}let t;function onPropsChange(n){e=n;for(const t in e)u[t]=e[t];t&&t(),t=i.subscribe(`config.list.rows.${e.row.id}.expanded`,expandedChange)}l(onPropsChange),s((function listToggleDestroy(){t&&t()}))}else{function expandedChange(t){for(const e of t)if(e.value){w=!0;break}r()}s(i.subscribe("config.list.rows.*.expanded",expandedChange,{bulk:!0}))}function toggle(){w=!w,e.row?i.update(`config.list.rows.${e.row.id}.expanded`,w):i.update("config.list.rows",t=>{for(const e in t)t[e].expanded=w;return t},{only:["*.expanded"]})}const _=o.create(d,u);return n=>h(a`
        <div class=${p} data-action=${_} @click=${toggle}>
          ${c((()=>{var t,n,i;return v?0===(null===(i=null===(n=null===(t=e.row)||void 0===t?void 0:t._internal)||void 0===n?void 0:n.children)||void 0===i?void 0:i.length)?a`
          <img class=${f} src=${v} />
        `:w?a`
            <img class=${m} src=${y} />
          `:a`
            <img class=${g} src=${b} />
          `:""})())}
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * Chart component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function Chart(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,StyleMap:l,createComponent:c}=t,u=i.get("config.components.ChartCalendar"),h=i.get("config.components.ChartTimeline");let d;s(i.subscribe("config.wrappers.Chart",t=>d=t));const p=c(u);s(p.destroy);const f=c(h);s(f.destroy);let m,g,v,y,b=new l({}),w=new l({}),_=n.getActions("chart");s(i.subscribe("config.classNames",t=>{m=n.getClass("chart"),g=n.getClass("horizontal-scroll"),v=n.getClass("horizontal-scroll-inner"),r()})),s(i.subscribe("config.scroll.left",t=>{y&&y.scrollLeft!==t&&(y.scrollLeft=t),r()})),s(i.subscribeAll(["_internal.chart.dimensions.width","_internal.chart.time.totalViewDurationPx"],(function horizontalScroll(t,e){b.style.width=i.get("_internal.chart.dimensions.width")+"px",w.style.width=i.get("_internal.chart.time.totalViewDurationPx")+"px",w.style.height="1px",r()})));const x=t=>{let e,s;if("scroll"===t.type)i.update("config.scroll.left",t.target.scrollLeft),e=t.target.scrollLeft;else{const o=n.normalizeMouseWheelEvent(t),r=i.get("config.scroll.xMultiplier"),a=i.get("config.scroll.yMultiplier");t.shiftKey&&o.y?i.update("config.scroll.left",t=>e=n.limitScroll("left",t+=o.y*r)):o.x?i.update("config.scroll.left",t=>e=n.limitScroll("left",t+=o.x*r)):i.update("config.scroll.top",t=>s=n.limitScroll("top",t+=o.y*a))}const o=i.get("_internal.elements.chart"),r=i.get("_internal.elements.horizontal-scroll-inner");if(o){const t=i.get("config.scroll.left");let e=0;t&&(e=Math.round(t/(r.clientWidth-o.clientWidth)*100))>100&&(e=100),i.update("config.scroll.percent.left",e)}},C={handleEvent:x,passive:!0,capture:!1},T={handleEvent:x,passive:!0,capture:!1};let $,M=0;_.push(t=>{$||(($=new wt((e,n)=>{const s=t.clientWidth,o=t.clientHeight,r=s-i.get("_internal.scrollBarHeight");M!==s&&(M=s,i.update("_internal.chart.dimensions",{width:s,innerWidth:r,height:o}))})).observe(t),i.update("_internal.elements.chart",t))}),s(()=>{$.disconnect()});const P=o.create(_,{api:n,state:i}),I=o.create([t=>{y||(y=t,i.update("_internal.elements.horizontal-scroll",t))}]),S=o.create([t=>{i.update("_internal.elements.horizontal-scroll-inner",t)}]);return e=>d(a`
        <div class=${m} data-actions=${P} @wheel=${T}>
          ${p.html()}${f.html()}
          <div class=${g} style=${b} data-actions=${I} @scroll=${C}>
            <div class=${v} style=${w} data-actions=${S} />
          </div>
        </div>
      `,{vido:t,props:{},templateProps:e})}
/**
     * ChartCalendar component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ChartCalendar(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,reuseComponents:a,html:l,StyleMap:c}=t,u=n.getActions("chart-calendar"),h=Object.assign(Object.assign({},e),{api:n,state:i}),d=i.get("config.components.ChartCalendarDate");let p,f;s(i.subscribe("config.wrappers.ChartCalendar",t=>p=t)),s(i.subscribe("config.classNames",t=>{f=n.getClass("chart-calendar"),r()}));let m,g,v=new c({height:"","--headerHeight":""});s(i.subscribe("config.headerHeight",t=>{m=t,v.style.height=m+"px",v.style["--calendar-height"]=m+"px",r()})),s(i.subscribe("config.chart.time.period",t=>g=t));let y=[],b=[];s(i.subscribe("_internal.chart.time.dates",t=>{const e=n.time.date().format("YYYY-MM-DD");"object"==typeof t.day&&Array.isArray(t.day)&&t.day.length&&a(y,t.day,t=>t&&{period:"day",date:t,currentDate:e},d),"object"==typeof t.month&&Array.isArray(t.month)&&t.month.length&&a(b,t.month,t=>t&&{period:"month",date:t,currentDate:e},d),r()})),s(()=>{y.forEach(t=>t.destroy())}),u.push(t=>{i.update("_internal.elements.chart-calendar",t)});const w=o.create(u,h);return n=>p(l`
        <div class=${f} data-actions=${w} style=${v}>
          <div class=${f+"-dates "+f+"-dates--months"}>${b.map(t=>t.html())}</div>
          <div class=${f+"-dates "+f+"-dates--days"}>${y.map(t=>t.html())}</div>
          </div>
        </div>
      `,{props:e,vido:t,templateProps:n})}
/**
     * ChartCalendarDate component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function saveElement$1(t,e){e.state.update("_internal.elements.chart-calendar-dates",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}function ChartCalendarDate(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,onChange:a,html:l,StyleMap:c}=t,u=n.getActions("chart-calendar-date");let h;s(i.subscribe("config.wrappers.ChartCalendarDate",t=>h=t));let d=n.getClass("chart-calendar-date",e),p="";p=n.time.date(e.date.leftGlobal).format("YYYY-MM-DD")===e.currentDate?" current":"";let f,m,g=new c({width:"","margin-left":"",visibility:"visible"}),v=new c({overflow:"hidden","text-align":"left","margin-left":e.date.subPx+8+"px"});const y=()=>{if(!e)return;f=i.get("_internal.chart.time"),g.style.width=e.date.width+"px",g.style["margin-left"]=-e.date.subPx+"px",g.style.visibility="visible",v.style={overflow:"hidden","text-align":"left","margin-left":e.date.subPx+8+"px"};const t=n.time.date(e.date.leftGlobal);p=t.format("YYYY-MM-DD")===e.currentDate?" current":t.subtract(1,"days").format("YYYY-MM-DD")===e.currentDate?" next":t.add(1,"days").format("YYYY-MM-DD")===e.currentDate?" previous":"";const s=f.maxWidth[e.period];switch(e.period){case"month":m=l`
          <div class=${d+"-content "+d+"-content--month"+p} style=${v}>
            ${t.format("MMMM YYYY")}
          </div>
        `,s<=100&&(m=l`
            <div class=${d+"-content "+d+"-content--month"+p}>
              ${t.format("MMM'YY")}
            </div>
          `);break;case"day":if(m=l`
          <div class=${d+"-content "+d+"-content--day _0"+p}>
            <div class=${d+"-content "+d+"-content--day-small"+p}>
              ${t.format("DD")} ${t.format("ddd")}
            </div>
          </div>
        `,s>=40&&s<50)m=l`
            <div class=${d+"-content "+d+"-content--day _40"+p}>
              ${t.format("DD")}
            </div>
            <div class=${d+"-content "+d+"-content--day-word"+p}>
              ${t.format("dd")}
            </div>
          `;else if(s>=50&&s<90)m=l`
            <div class=${d+"-content "+d+"-content--day _50"+p}>
              ${t.format("DD")}
            </div>
            <div class=${d+"-content "+d+"-content--day-word"+p}>
              ${t.format("ddd")}
            </div>
          `;else if(s>=90&&s<180)m=l`
            <div class=${d+"-content "+d+"-content--day _90"+p}>
              ${t.format("DD")}
            </div>
            <div class=${d+"-content "+d+"-content--day-word"+p}>
              ${t.format("dddd")}
            </div>
          `;else if(s>=180&&s<400){const e=[],n=t.startOf("day");for(let t=0;t<12;t++){const i=n.add(2*t,"hours"),s=(n.add(2*t+1,"hours").endOf("hour").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH")})}m=l`
            <div class=${d+"-content "+d+"-content--day _180"+p}>
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class="${d+"-content "+d+"-content--hours-hour"+p}"
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(s>=400&&s<1e3){const e=[],n=t.startOf("day");for(let t=0;t<24;t++){const i=n.add(t,"hours"),s=(n.add(t,"hours").endOf("hour").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH")})}m=l`
            <div class=${d+"-content "+d+"-content--day _400"+p}>
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class=${d+"-content "+d+"-content--hours-hour"+p}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(s>=1e3&&s<2e3){const e=[],n=t.startOf("day");for(let t=0;t<24;t++){const i=n.add(t,"hours"),s=(n.add(t,"hours").endOf("hour").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH:mm")})}m=l`
            <div class=${d+"-content "+d+"-content--day _1000"+p} style=${v}>
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class=${d+"-content "+d+"-content--hours-hour"+p}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(s>=2e3&&s<5e3){const e=[],n=t.startOf("day");for(let t=0;t<48;t++){const i=n.add(30*t,"minutes"),s=(n.add(30*(t+1),"minutes").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH:mm")})}m=l`
            <div class=${d+"-content "+d+"-content--day _2000"+p} style=${v}>
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class=${d+"-content "+d+"-content--hours-hour"+p}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(s>=5e3&&s<2e4){const e=[],n=t.startOf("day");for(let t=0;t<96;t++){const i=n.add(15*t,"minutes"),s=(n.add(15*(t+1),"minutes").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH:mm")})}m=l`
            <div class=${d+"-content "+d+"-content--day _5000"+p} style=${v}>
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class=${d+"-content "+d+"-content--hours-hour"+p}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(s>=2e4){const e=[],n=t.startOf("day");for(let t=0;t<288;t++){const i=n.add(5*t,"minutes"),s=(n.add(5*(t+1),"minutes").valueOf()-i.valueOf())/f.timePerPixel;e.push({width:s,formatted:i.format("HH:mm")})}m=l`
            <div
              class=${d+"-content "+d+"-content--day _20000"+p}
              style=${v}
            >
              ${t.format("DD dddd")}
            </div>
            <div class=${d+"-content "+d+"-content--hours"+p}>
              ${e.map(t=>l`
                    <div
                      class=${d+"-content "+d+"-content--hours-hour"+p}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}}r()};let b;const w={date:e.date,period:e.period,api:n,state:i};a((t,n)=>{if(n.leave)return g.style.visibility="hidden",r();e=t,w.date=e.date,w.period=e.period,b&&b(),b=i.subscribeAll(["_internal.chart.time","config.chart.calendar.vertical.smallFormat"],y,{bulk:!0})}),s(()=>{b()}),u.includes(saveElement$1)||u.push(saveElement$1);const _=o.create(u,w);return n=>h(l`
        <div
          class=${d+" "+d+"--"+e.period+p}
          style=${g}
          data-actions=${_}
        >
          ${m}
        </div>
      `,{props:e,vido:t,templateProps:n})}
/**
     * ChartTimeline component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ChartTimeline(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,createComponent:l,StyleMap:c}=t,u=n.getActions("chart-timeline"),h=Object.assign(Object.assign({},e),{api:n,state:i});let d;s(i.subscribe("config.wrappers.ChartTimeline",t=>d=t));const p=i.get("config.components.ChartTimelineGrid"),f=i.get("config.components.ChartTimelineItems"),m=l(p);s(m.destroy);const g=l(f);let v,y;s(g.destroy),s(i.subscribe("config.classNames",()=>{v=n.getClass("chart-timeline"),y=n.getClass("chart-timeline-inner"),r()}));let b=new c({}),w=new c({});s(i.subscribeAll(["_internal.height","_internal.chart.dimensions.width","_internal.list.rowsHeight","config.scroll.compensation","_internal.chart.time.dates.day"],(function calculateStyle(){const t=i.get("_internal.chart.time.dates.day");if(!t||0===t.length)return;const e=t[0].subPx,n=i.get("config.scroll.compensation"),s=i.get("_internal.chart.dimensions.width"),o=i.get("_internal.list.rowsHeight");b.style.height=i.get("_internal.height")+"px",b.style.width=s?s+"px":"0px",w.style.height=o+"px",w.style.width=s?s+"px":"0px",w.style.transform=`translate(${e}px, ${n}px)`,r()}))),u.push(t=>{i.update("_internal.elements.chart-timeline",t)});const _=o.create(u,h);return i=>d(a`
        <div class=${v} style=${b} data-actions=${_} @wheel=${n.onScroll}>
          <div class=${y} style=${w}>
            ${m.html()}${g.html()}
          </div>
        </div>
      `,{props:e,vido:t,templateProps:i})}
/**
     * ChartTimelineGrid component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function ChartTimelineGrid(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,reuseComponents:l,StyleMap:c}=t,u=n.getActions("chart-timeline-grid"),h={api:n,state:i};let d;s(i.subscribe("config.wrappers.ChartTimelineGrid",t=>d=t));const p=i.get("config.components.ChartTimelineGridRow");let f,m,g;s(i.subscribe("config.classNames",()=>{f=n.getClass("chart-timeline-grid"),r()})),s(i.subscribe("config.chart.time.period",t=>m=t)),s(i.subscribe("config.chart.grid.block.onCreate",t=>g=t));let v=[];const y=[],b=new Map,w=new c({});s(i.subscribeAll(["_internal.list.visibleRows;",`_internal.chart.time.dates.${m};`,"_internal.height","_internal.chart.dimensions.width"],()=>{const t=i.get("_internal.chart.dimensions.width"),e=i.get("_internal.height"),s=i.get(`_internal.chart.time.dates.${m}`),o=i.get("_internal.list.visibleRows");if(!s||0===s.length)return;const r=i.get("config.scroll.compensation");w.style.height=e+Math.abs(r)+"px",w.style.width=t+"px";let a=0;y.length=0;for(const e of o){const i=[];for(const t of s){let s;b.has(t.leftGlobal)?s=b.get(t.leftGlobal):(s=n.time.date(t.leftGlobal).format("YYYY-MM-DD"),b.set(t.leftGlobal,s));let o={id:e.id+":"+s,time:t,row:e,top:a};for(const t of g)o=t(o);i.push(o)}y.push({row:e,blocks:i,top:a,width:t}),a+=e.height}i.update("_internal.chart.grid.rowsWithBlocks",y)},{bulk:!0}));s(i.subscribe("_internal.chart.grid.rowsWithBlocks",t=>{t&&(l(v,t,t=>t,p),r())})),u.includes((function bindElement(t){i.update("_internal.elements.chart-timeline-grid",t)}))||u.push(),s(()=>{v.forEach(t=>t.destroy())});const _=o.create(u,h);return n=>d(a`
        <div class=${f} data-actions=${_} style=${w}>
          ${v.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}
/**
     * ChartTimelineGridRow component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */function bindElementAction(t,e){return e.state.update("_internal.elements.chart-timeline-grid-rows",(function updateGridRows(e){return void 0===e&&(e=[]),e.push(t),e}),{only:null}),{update(){},destroy(t){e.state.update("_internal.elements.chart-timeline-grid-rows",e=>e.filter(e=>e!==t))}}}function ChartTimelineGridRow(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:r,update:a,html:l,reuseComponents:c,onChange:u,StyleMap:h}=t,d=Object.assign(Object.assign({},e),{api:n,state:i});let p;s(i.subscribe("config.wrappers.ChartTimelineGridRow",t=>{p=t,a()}));const f=i.get("config.components.ChartTimelineGridRowBlock"),m=n.getActions("chart-timeline-grid-row");let g=n.getClass("chart-timeline-grid-row"),v=new h({width:e.width+"px",height:e.row.height+"px",overflow:"hidden"},!0),y=!1;const b=new o(()=>y);let w=[];u((t,n)=>{var s,o,r,l,u,h,p;if(n.leave)return y=!0,void a();y=!1,c(w,(e=t).blocks,t=>t,f),v.setStyle({}),v.style.height=e.row.height+"px",v.style.width=e.width+"px";const m=i.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(r=null===(o=null===(s=m[t].style)||void 0===s?void 0:s.grid)||void 0===o?void 0:o.row)||void 0===r?void 0:r.children;if(e)for(const t in e)v.style[t]=e[t]}const g=null===(p=null===(h=null===(u=null===(l=e.row)||void 0===l?void 0:l.style)||void 0===u?void 0:u.grid)||void 0===h?void 0:h.row)||void 0===p?void 0:p.current;if(g)for(const t in g)v.style[t]=g[t];for(const t in e)d[t]=e[t];a()}),s(()=>{w.forEach(t=>t.destroy())}),-1===m.indexOf(bindElementAction)&&m.push(bindElementAction);const _=r.create(m,d);return n=>p(l`
        <div detach=${b} class=${g} data-actions=${_} style=${v}>
          ${w.map(t=>t.html())}
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * ChartTimelineGridRowBlock component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */const _t=(t,e)=>(e.state.update("_internal.elements.chart-timeline-grid-row-blocks",e=>(void 0===e&&(e=[]),e.push(t),e),{only:null}),t=>{e.state.update("_internal.elements.chart-timeline-grid-row-blocks",e=>e.filter(e=>e!==t),{only:[""]})}),xt=(t,e)=>{const{api:n,state:i,onDestroy:s,Detach:o,Actions:r,update:a,html:l,onChange:c,StyleMap:u}=t,h="chart-timeline-grid-row-block",d=Object.assign(Object.assign({},e),{api:n,state:i});let p=!1;const f=new o(()=>p),m=n.getActions(h);let g;s(i.subscribe("config.wrappers.ChartTimelineGridRowBlock",t=>{g=t,a()}));const v=n.time.date().startOf("day").valueOf();let y;function updateClassName(t){y=n.getClass(h),t.leftGlobal===v&&(y+=" current")}updateClassName(e.time);let b=new u({width:"",height:""});c((function onPropsChange(t,n){var s,o,r,l,c,u,h;if(n.leave)return p=!0,a();p=!1,e=t;for(const t in e)d[t]=e[t];updateClassName(e.time),b.setStyle({}),b.style.width=e.time.width+"px",b.style.height=e.row.height+"px";const f=i.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(r=null===(o=null===(s=f[t].style)||void 0===s?void 0:s.grid)||void 0===o?void 0:o.block)||void 0===r?void 0:r.children;e&&b.setStyle(Object.assign(Object.assign({},b.style),e))}const m=null===(h=null===(u=null===(c=null===(l=e.row)||void 0===l?void 0:l.style)||void 0===c?void 0:c.grid)||void 0===u?void 0:u.block)||void 0===h?void 0:h.current;m&&b.setStyle(Object.assign(Object.assign({},b.style),m)),a()})),m.includes(_t)||m.push(_t);const w=r.create(m,d);return n=>g(l`
        <div detach=${f} class=${y} data-actions=${w} style=${b}></div>
      `,{props:e,vido:t,templateProps:n})};
/**
     * ChartTimelineItems component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */
function ChartTimelineItems(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:r,html:a,reuseComponents:l,StyleMap:c}=t,u=n.getActions("chart-timeline-items");let h;s(i.subscribe("config.wrappers.ChartTimelineItems",t=>h=t));const d=i.get("config.components.ChartTimelineItemsRow");let p;s(i.subscribe("config.classNames",()=>{p=n.getClass("chart-timeline-items"),r()}));let f=new c({},!0);s(i.subscribeAll(["_internal.height","_internal.chart.dimensions.width","config.scroll.compensation"],()=>{const t=i.get("_internal.chart.dimensions.width"),e=i.get("_internal.height"),n=i.get("config.scroll.compensation");f.style.width=t+"px",f.style.height=e+Math.abs(n)+"px"}));let m=[];s(i.subscribeAll(["_internal.list.visibleRows","config.chart.items","config.list.rows"],()=>{const t=i.get("_internal.list.visibleRows");m=l(m,t,t=>({row:t}),d),r()},{bulk:!0})),s((function destroyRows(){m.forEach(t=>t.destroy())}));const g=o.create(u,{api:n,state:i});return n=>h(a`
        <div class=${p} style=${f} data-actions=${g}>
          ${m.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}
/**
     * ChartTimelineItemsRow component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */const Ct=(t,e)=>(e.state.update("_internal.elements.chart-timeline-items-rows",e=>(void 0===e&&(e=[]),e.push(t),e),{only:null}),{update(){},destroy(t){e.state.update("_internal.elements.chart-timeline-items-rows",e=>e.filter(e=>e!==t))}}),Tt=(t,e)=>{const{api:n,state:i,onDestroy:s,Detach:o,Actions:r,update:a,html:l,onChange:c,reuseComponents:u,StyleMap:h}=t,d=Object.assign(Object.assign({},e),{api:n,state:i});let p;s(i.subscribe("config.wrappers.ChartTimelineItemsRow",t=>p=t));const f=i.get("config.components.ChartTimelineItemsRowItem");let m,g,v=`_internal.flatTreeMapById.${e.row.id}._internal.items`,y=new h({width:"",height:""},!0),b=[],w=!1;const _=new o(()=>w),x=()=>{const t=i.get("_internal.chart");w=!1,y.style.width=t.dimensions.width+"px",e?(y.style.height=e.row.height+"px",y.style["--row-height"]=e.row.height+"px"):w=!0};c((t,n)=>{if(n.leave)return x(),a();e=t;for(const t in e)d[t]=e[t];(t=>{v=`_internal.flatTreeMapById.${t.id}._internal.items`,"function"==typeof m&&m(),"function"==typeof g&&g(),m=i.subscribe("_internal.chart",(t,e)=>{x(),a()}),g=i.subscribe(v,e=>{b=u(b,e,e=>({row:t,item:e}),f),x(),a()})})(e.row)}),s(()=>{g(),m(),b.forEach(t=>t.destroy())});const C=n.getActions("chart-timeline-items-row");let T;s(i.subscribe("config.classNames",()=>{T=n.getClass("chart-timeline-items-row",e),a()})),C.includes(Ct)||C.push(Ct);const $=r.create(C,d);return n=>p(l`
        <div detach=${_} class=${T} data-actions=${$} style=${y}>
          ${b.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})};
/**
     * ChartTimelineItemsRowItem component
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
     * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
     */
class BindElementAction{constructor(t,e){e.state.update("_internal.elements.chart-timeline-items-row-items",(function updateRowItems(e){return void 0===e&&(e=[]),e.push(t),e}),{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-items-row-items",e=>e.filter(e=>e!==t))}}function ChartTimelineItemsRowItem(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:r,update:a,html:l,onChange:c,unsafeHTML:u,StyleMap:h}=t;let d;s(i.subscribe("config.wrappers.ChartTimelineItemsRowItem",t=>d=t));let p=new h({width:"",height:"",left:""}),f=0,m=0,g=!1;const v={item:e.item,row:e.row,left:f,width:m,api:n,state:i};let y=!1;function updateItem(){var t,s,o,r,l,c,u,h;if(g)return;let d=i.get("_internal.chart.time");f=(e.item.time.start-d.leftGlobal)/d.timePerPixel,f=.1*Math.round(10*f),m=(e.item.time.end-e.item.time.start)/d.timePerPixel,(m-=i.get("config.chart.spacing")||0)&&(m=.1*Math.round(10*m));const v=p.style.width,b=p.style.left;p.setStyle({});const w=n.isItemInViewport(e.item,d.leftGlobal,d.rightGlobal);y=!w,w?(p.style.width=m+"px",p.style.left=f+"px"):(p.style.width=v,p.style.left=b);const _=i.get("config.list.rows");for(const n of e.row._internal.parents){const e=null===(o=null===(s=null===(t=_[n].style)||void 0===t?void 0:t.items)||void 0===s?void 0:s.item)||void 0===o?void 0:o.children;e&&p.setStyle(Object.assign(Object.assign({},p.style),e))}const x=null===(u=null===(c=null===(l=null===(r=e.row)||void 0===r?void 0:r.style)||void 0===l?void 0:l.items)||void 0===c?void 0:c.item)||void 0===u?void 0:u.current;x&&p.setStyle(Object.assign(Object.assign({},p.style),x));const C=null===(h=e.item)||void 0===h?void 0:h.style;C&&p.setStyle(Object.assign(Object.assign({},p.style),C)),a()}c((function onPropsChange(t,n){if(n.leave)return g=!0,y=!0,a();y=!1,g=!1,e=t,v.item=e.item,v.row=e.row,v.left=f,v.width=m,updateItem()}));const b="chart-timeline-items-row-item",w=n.getActions(b);let _,x;s(i.subscribe("config.classNames",()=>{_=n.getClass(b,e),x=n.getClass(b+"-label",e),a()})),s(i.subscribe("_internal.chart.time",t=>{updateItem()})),-1===w.indexOf(BindElementAction)&&w.push(BindElementAction);const C=r.create(w,v),T=new o(()=>y);return n=>d(l`
        <div detach=${T} class=${_} data-actions=${C} style=${p}>
          <div class=${x}>
            ${e.item.isHtml?u(e.item.label):e.item.label}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}
/**
     * Gantt-Schedule-Timeline-Calendar
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0
     */const $t=["","list","list-column","list-column-header","list-expander","list-expander-toggle","list-column-header-resizer","list-column-row","chart","chart-calendar","chart-calendar-date","chart-timeline","chart-timeline-grid","chart-timeline-grid-row","chart-timeline-grid-row-block","chart-timeline-items","chart-timeline-items-row","chart-timeline-items-row-item"];function defaultConfig(){const t=function generateEmptyActions(){const t={};return $t.forEach(e=>t[e]=[]),t}();return{plugins:[],plugin:{},height:740,headerHeight:86,components:{Main:Main,List:List,ListColumn:ListColumn,ListColumnHeader:ListColumnHeader,ListColumnHeaderResizer:ListColumnHeaderResizer,ListColumnRow:ListColumnRow,ListExpander:ListExpander,ListToggle:ListToggle,Chart:Chart,ChartCalendar:ChartCalendar,ChartCalendarDate:ChartCalendarDate,ChartTimeline:ChartTimeline,ChartTimelineGrid:ChartTimelineGrid,ChartTimelineGridRow:ChartTimelineGridRow,ChartTimelineGridRowBlock:xt,ChartTimelineItems:ChartTimelineItems,ChartTimelineItemsRow:Tt,ChartTimelineItemsRowItem:ChartTimelineItemsRowItem},wrappers:{Main:t=>t,List:t=>t,ListColumn:t=>t,ListColumnHeader:t=>t,ListColumnHeaderResizer:t=>t,ListColumnRow:t=>t,ListExpander:t=>t,ListToggle:t=>t,Chart:t=>t,ChartCalendar:t=>t,ChartCalendarDate:t=>t,ChartTimeline:t=>t,ChartTimelineGrid:t=>t,ChartTimelineGridRow:t=>t,ChartTimelineGridRowBlock:t=>t,ChartTimelineItems:t=>t,ChartTimelineItemsRow:t=>t,ChartTimelineItemsRowItem:t=>t},list:{rows:{},rowHeight:40,columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},minWidth:50,data:{}},expander:{padding:18,size:20,icon:{width:16,height:16},icons:{child:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><ellipse ry="4" rx="4" id="svg_1" cy="12" cx="12" fill="#000000B0"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}}},scroll:{top:0,left:0,xMultiplier:3,yMultiplier:3,percent:{top:0,left:0}},chart:{time:{from:0,to:0,zoom:21,period:"day",dates:{},maxWidth:{}},calendar:{vertical:{smallFormat:"YYYY-MM-DD"}},grid:{block:{onCreate:[]}},items:{},spacing:1},classNames:{},actions:t,locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}}}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var Mt=createCommonjsModule((function(t){
/*! Hammer.JS - v2.0.7 - 2016-04-22
     * http://hammerjs.github.io/
     *
     * Copyright (c) 2016 Jorik Tangelder;
     * Licensed under the MIT license */
!function(e,n,i,s){var o,r=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),l="function",c=Math.round,u=Math.abs,h=Date.now;function setTimeoutContext(t,e,n){return setTimeout(bindFn(t,n),e)}function invokeArrayArg(t,e,n){return!!Array.isArray(t)&&(each(t,n[e],n),!0)}function each(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function deprecate(t,n,i){var s="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,s,i),t.apply(this,arguments)}}o="function"!=typeof Object.assign?function assign(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var d=deprecate((function extend(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===s)&&(t[i[o]]=e[i[o]]),o++;return t}),"extend","Use `assign`."),p=deprecate((function merge(t,e){return d(t,e,!0)}),"merge","Use `assign`.");function inherit(t,e,n){var i,s=e.prototype;(i=t.prototype=Object.create(s)).constructor=t,i._super=s,n&&o(i,n)}function bindFn(t,e){return function boundFn(){return t.apply(e,arguments)}}function boolOrFn(t,e){return typeof t==l?t.apply(e&&e[0]||s,e):t}function ifUndefined(t,e){return t===s?e:t}function addEventListeners(t,e,n){each(splitStr(e),(function(e){t.addEventListener(e,n,!1)}))}function removeEventListeners(t,e,n){each(splitStr(e),(function(e){t.removeEventListener(e,n,!1)}))}function hasParent(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function inStr(t,e){return t.indexOf(e)>-1}function splitStr(t){return t.trim().split(/\s+/g)}function inArray(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function toArray(t){return Array.prototype.slice.call(t,0)}function uniqueArray(t,e,n){for(var i=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];inArray(s,r)<0&&i.push(t[o]),s[o]=r,o++}return n&&(i=e?i.sort((function sortUniqueArray(t,n){return t[e]>n[e]})):i.sort()),i}function prefixed(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),a=0;a<r.length;){if((i=(n=r[a])?n+o:e)in t)return i;a++}return s}var f=1;function getWindowForElement(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var m="ontouchstart"in e,g=prefixed(e,"PointerEvent")!==s,v=m&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),y=25,b=1,w=2,_=4,x=8,C=1,T=2,$=4,M=8,P=16,I=T|$,S=M|P,A=I|S,E=["x","y"],O=["clientX","clientY"];function Input(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){boolOrFn(t.options.enable,[t])&&n.handler(e)},this.init()}function inputHandler(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&b&&i-o==0,a=e&(_|x)&&i-o==0;n.isFirst=!!r,n.isFinal=!!a,r&&(t.session={}),n.eventType=e,function computeInputData(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=simpleCloneInputData(e));o>1&&!n.firstMultiple?n.firstMultiple=simpleCloneInputData(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,l=a?a.center:r.center,c=e.center=getCenter(i);e.timeStamp=h(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=getAngle(l,c),e.distance=getDistance(l,c),function computeDeltaXY(t,e){var n=e.center,i=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};e.eventType!==b&&o.eventType!==_||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=s.x+(n.x-i.x),e.deltaY=s.y+(n.y-i.y)}(n,e),e.offsetDirection=getDirection(e.deltaX,e.deltaY);var d=getVelocity(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=u(d.x)>u(d.y)?d.x:d.y,e.scale=a?function getScale(t,e){return getDistance(e[0],e[1],O)/getDistance(t[0],t[1],O)}(a.pointers,i):1,e.rotation=a?function getRotation(t,e){return getAngle(e[1],e[0],O)+getAngle(t[1],t[0],O)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function computeIntervalInputData(t,e){var n,i,o,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=x&&(l>y||a.velocity===s)){var c=e.deltaX-a.deltaX,h=e.deltaY-a.deltaY,d=getVelocity(l,c,h);i=d.x,o=d.y,n=u(d.x)>u(d.y)?d.x:d.y,r=getDirection(c,h),t.lastInterval=e}else n=a.velocity,i=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}(n,e);var p=t.element;hasParent(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function simpleCloneInputData(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:e,center:getCenter(e),deltaX:t.deltaX,deltaY:t.deltaY}}function getCenter(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,i=0,s=0;s<e;)n+=t[s].clientX,i+=t[s].clientY,s++;return{x:c(n/e),y:c(i/e)}}function getVelocity(t,e,n){return{x:e/t||0,y:n/t||0}}function getDirection(t,e){return t===e?C:u(t)>=u(e)?t<0?T:$:e<0?M:P}function getDistance(t,e,n){n||(n=E);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return Math.sqrt(i*i+s*s)}function getAngle(t,e,n){n||(n=E);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return 180*Math.atan2(s,i)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var D={mousedown:b,mousemove:w,mouseup:_},R="mousedown",L="mousemove mouseup";function MouseInput(){this.evEl=R,this.evWin=L,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(t){var e=D[t.type];e&b&&0===t.button&&(this.pressed=!0),e&w&&1!==t.which&&(e=_),this.pressed&&(e&_&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var N={pointerdown:b,pointermove:w,pointerup:_,pointercancel:x,pointerout:x},z={2:"touch",3:"pen",4:"mouse",5:"kinect"},H="pointerdown",j="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=H,this.evWin=j,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(H="MSPointerDown",j="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),s=N[i],o=z[t.pointerType]||t.pointerType,r="touch"==o,a=inArray(e,t.pointerId,"pointerId");s&b&&(0===t.button||r)?a<0&&(e.push(t),a=e.length-1):s&(_|x)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var k={touchstart:b,touchmove:w,touchend:_,touchcancel:x},V="touchstart",W="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=V,this.evWin=W,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(t,e){var n=toArray(t.touches),i=toArray(t.changedTouches);return e&(_|x)&&(n=uniqueArray(n.concat(i),"identifier",!0)),[n,i]}inherit(SingleTouchInput,Input,{handler:function TEhandler(t){var e=k[t.type];if(e===b&&(this.started=!0),this.started){var n=normalizeSingleTouches.call(this,t,e);e&(_|x)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Y={touchstart:b,touchmove:w,touchend:_,touchcancel:x},F="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=F,this.targetIds={},Input.apply(this,arguments)}function getTouches(t,e){var n=toArray(t.touches),i=this.targetIds;if(e&(b|w)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var s,o,r=toArray(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return hasParent(t.target,l)})),e===b)for(s=0;s<o.length;)i[o[s].identifier]=!0,s++;for(s=0;s<r.length;)i[r[s].identifier]&&a.push(r[s]),e&(_|x)&&delete i[r[s].identifier],s++;return a.length?[uniqueArray(o.concat(a),"identifier",!0),a]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(t){var e=Y[t.type],n=getTouches.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var B=2500,G=25;function TouchMouseInput(){Input.apply(this,arguments);var t=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,t),this.mouse=new MouseInput(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(t,e){t&b?(this.primaryTouch=e.changedPointers[0].identifier,setLastTouch.call(this,e)):t&(_|x)&&setLastTouch.call(this,e)}function setLastTouch(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),B)}}function isSyntheticEvent(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var s=this.lastTouches[i],o=Math.abs(e-s.x),r=Math.abs(n-s.y);if(o<=G&&r<=G)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(t,e,n){var i="touch"==n.pointerType,s="mouse"==n.pointerType;if(!(s&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)recordTouches.call(this,e,n);else if(s&&isSyntheticEvent.call(this,n))return;this.callback(t,e,n)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var U=prefixed(a.style,"touchAction"),X=U!==s,q="auto",J="manipulation",Z="none",K="pan-x",Q="pan-y",tt=function getTouchActionProps(){if(!X)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!n||e.CSS.supports("touch-action",i)})),t}();function TouchAction(t,e){this.manager=t,this.set(e)}TouchAction.prototype={set:function(t){"compute"==t&&(t=this.compute()),X&&this.manager.element.style&&tt[t]&&(this.manager.element.style[U]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return each(this.manager.recognizers,(function(e){boolOrFn(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function cleanTouchActions(t){if(inStr(t,Z))return Z;var e=inStr(t,K),n=inStr(t,Q);if(e&&n)return Z;if(e||n)return e?K:Q;if(inStr(t,J))return J;return q}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,s=inStr(i,Z)&&!tt[Z],o=inStr(i,Q)&&!tt[Q],r=inStr(i,K)&&!tt[K];if(s){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!r||!o)return s||o&&n&I||r&&n&S?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var et=1,nt=2,it=4,st=8,ot=st,rt=16;function Recognizer(t){this.options=o({},this.defaults,t||{}),this.id=function uniqueId(){return f++}(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=et,this.simultaneous={},this.requireFail=[]}function stateStr(t){return t&rt?"cancel":t&st?"end":t&it?"move":t&nt?"start":""}function directionStr(t){return t==P?"down":t==M?"up":t==T?"left":t==$?"right":""}function getRecognizerByNameIfManager(t,e){var n=e.manager;return n?n.get(t):t}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(t,e){return(e=e||{}).recognizers=ifUndefined(e.recognizers,Hammer.defaults.preset),new Manager(t,e)}Recognizer.prototype={defaults:{},set:function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(invokeArrayArg(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=getRecognizerByNameIfManager(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return invokeArrayArg(t,"dropRecognizeWith",this)?this:(t=getRecognizerByNameIfManager(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(invokeArrayArg(t,"requireFailure",this))return this;var e=this.requireFail;return-1===inArray(e,t=getRecognizerByNameIfManager(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(invokeArrayArg(t,"dropRequireFailure",this))return this;t=getRecognizerByNameIfManager(t,this);var e=inArray(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function emit(n){e.manager.emit(n,t)}n<st&&emit(e.options.event+stateStr(n)),emit(e.options.event),t.additionalEvent&&emit(t.additionalEvent),n>=st&&emit(e.options.event+stateStr(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|et)))return!1;t++}return!0},recognize:function(t){var e=o({},t);if(!boolOrFn(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ot|rt|32)&&(this.state=et),this.state=this.process(e),this.state&(nt|it|st|rt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(nt|it),s=this.attrTest(t);return i&&(n&x||!s)?e|rt:i||s?n&_?e|st:e&nt?e|it:nt:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:A},getTouchAction:function(){var t=this.options.direction,e=[];return t&I&&e.push(Q),t&S&&e.push(K),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&I?(s=0===o?C:o<0?T:$,n=o!=this.pX,i=Math.abs(t.deltaX)):(s=0===r?C:r<0?M:P,n=r!=this.pY,i=Math.abs(t.deltaY))),t.direction=s,n&&i>e.threshold&&s&e.direction},attrTest:function(t){return AttrRecognizer.prototype.attrTest.call(this,t)&&(this.state&nt||!(this.state&nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=directionStr(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Z]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[q]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(_|x)&&!s)this.reset();else if(t.eventType&b)this.reset(),this._timer=setTimeoutContext((function(){this.state=ot,this.tryEmit()}),e.time,this);else if(t.eventType&_)return ot;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ot&&(t&&t.eventType&_?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Z]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&nt)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:I|S,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(I|S)?e=t.overallVelocity:n&I?e=t.overallVelocityX:n&S&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&t.eventType&_},emit:function(t){var e=directionStr(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[J]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&b&&0===this.count)return this.failTimeout();if(i&&s&&n){if(t.eventType!=_)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||getDistance(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,r&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext((function(){this.state=ot,this.tryEmit()}),e.interval,this),nt):ot}return 32},failTimeout:function(){return this._timer=setTimeoutContext((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ot&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:I}],[PanRecognizer,{direction:I},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(t,e){this.options=o({},Hammer.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function createInputInstance(t){var e=t.options.inputClass;return new(e||(g?PointerEventInput:v?TouchInput:m?TouchMouseInput:MouseInput))(t,inputHandler)}(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function toggleCssProps(t,e){var n,i=t.element;i.style&&(each(t.options.cssProps,(function(s,o){n=prefixed(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=s):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Manager.prototype={set:function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&ot)&&(s=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||s&&n!=s&&!n.canRecognizeWith(s)?n.reset():n.recognize(t),!s&&n.state&(nt|it|st)&&(s=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Recognizer)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(invokeArrayArg(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(invokeArrayArg(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=inArray(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return each(splitStr(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return each(splitStr(t),(function(t){e?n[t]&&n[t].splice(inArray(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function triggerDomEvent(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var s=0;s<i.length;)i[s](e),s++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Hammer,{INPUT_START:b,INPUT_MOVE:w,INPUT_END:_,INPUT_CANCEL:x,STATE_POSSIBLE:et,STATE_BEGAN:nt,STATE_CHANGED:it,STATE_ENDED:st,STATE_RECOGNIZED:ot,STATE_CANCELLED:rt,STATE_FAILED:32,DIRECTION_NONE:C,DIRECTION_LEFT:T,DIRECTION_RIGHT:$,DIRECTION_UP:M,DIRECTION_DOWN:P,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:S,DIRECTION_ALL:A,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:p,extend:d,assign:o,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Hammer,"function"==typeof s&&s.amd?s((function(){return Hammer})):t.exports?t.exports=Hammer:e.Hammer=Hammer}(window,document)})),Pt=createCommonjsModule((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",s="day",o="week",r="month",a="quarter",l="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},p={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(s,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,r),s=e-i<0,o=t.clone().add(n+(s?-1:1),r);return Number(-(n+(e-i)/(s?i-o:o-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:r,y:l,w:o,d:s,h:i,m:n,s:e,ms:t,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",g={};g[m]=f;var v=function(t){return t instanceof _},y=function(t,e,n){var i;if(!t)return m;if("string"==typeof t)g[t]&&(i=t),e&&(g[t]=e,i=t);else{var s=t.name;g[s]=t,i=s}return n||(m=i),i},b=function(t,e,n){if(v(t))return t.clone();var i=e?"string"==typeof e?{format:e,pl:n}:e:{};return i.date=t,new _(i)},w=p;w.l=y,w.i=v,w.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var _=function(){function c(t){this.$L=this.$L||y(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(u);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(e)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return w},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return b(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<b(t)},d.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},d.year=function(t){return this.$g(t,"$y",l)},d.month=function(t){return this.$g(t,"$M",r)},d.day=function(t){return this.$g(t,"$W",s)},d.date=function(t){return this.$g(t,"$D","date")},d.hour=function(t){return this.$g(t,"$H",i)},d.minute=function(t){return this.$g(t,"$m",n)},d.second=function(t){return this.$g(t,"$s",e)},d.millisecond=function(e){return this.$g(e,"$ms",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,a){var c=this,u=!!w.u(a)||a,h=w.p(t),d=function(t,e){var n=w.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return u?n:n.endOf(s)},p=function(t,e){return w.w(c.toDate()[t].apply(c.toDate(),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case l:return u?d(1,0):d(31,11);case r:return u?d(1,m):d(0,m+1);case o:var y=this.$locale().weekStart||0,b=(f<y?f+7:f)-y;return d(u?g-b:g+(6-b),m);case s:case"date":return p(v+"Hours",0);case i:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(o,a){var c,u=w.p(o),h="set"+(this.$u?"UTC":""),d=(c={},c[s]=h+"Date",c.date=h+"Date",c[r]=h+"Month",c[l]=h+"FullYear",c[i]=h+"Hours",c[n]=h+"Minutes",c[e]=h+"Seconds",c[t]=h+"Milliseconds",c)[u],p=u===s?this.$D+(a-this.$W):a;if(u===r||u===l){var f=this.clone().set("date",1);f.$d[d](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else d&&this.$d[d](p);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[w.p(t)]()},d.add=function(t,a){var c,u=this;t=Number(t);var h=w.p(a),d=function(e){var n=b(u);return w.w(n.date(n.date()+Math.round(e*t)),u)};if(h===r)return this.set(r,this.$M+t);if(h===l)return this.set(l,this.$y+t);if(h===s)return d(1);if(h===o)return d(7);var p=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[h]||1,f=this.$d.getTime()+t*p;return w.w(f,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),s=this.$locale(),o=this.$H,r=this.$m,a=this.$M,l=s.weekdays,c=s.months,u=function(t,i,s,o){return t&&(t[i]||t(e,n))||s[i].substr(0,o)},d=function(t){return w.s(o%12||12,t,"0")},p=s.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:u(s.monthsShort,a,c,3),MMMM:c[a]||c(this,n),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:u(s.weekdaysMin,this.$W,l,2),ddd:u(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:w.s(o,2,"0"),h:d(1),hh:d(2),a:p(o,r,!0),A:p(o,r,!1),m:String(r),mm:w.s(r,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||f[t]||i.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,c,u){var h,d=w.p(c),p=b(t),f=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=w.m(this,p);return g=(h={},h[l]=g/12,h[r]=g,h[a]=g/3,h[o]=(m-f)/6048e5,h[s]=(m-f)/864e5,h[i]=m/36e5,h[n]=m/6e4,h[e]=m/1e3,h)[d]||m,u?g:w.a(g)},d.daysInMonth=function(){return this.endOf(r).$D},d.$locale=function(){return g[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=y(t,e,!0),n},d.clone=function(){return w.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return b.prototype=_.prototype,b.extend=function(t,e){return t(e,_,b),b},b.locale=y,b.isDayjs=v,b.unix=function(t){return b(1e3*t)},b.en=g[m],b.Ls=g,b}()}));
/**
     * Gantt-Schedule-Timeline-Calendar
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0
     */
function timeApi(t,e){const n=t.get("config.locale");return Pt.locale(n,null,!0),{date:t=>t?Pt(t).locale(n.name):Pt().locale(n.name),recalculateFromTo(e){0!==(e={...e}).from&&(e.from=this.date(e.from).startOf("day").valueOf()),0!==e.to&&(e.to=this.date(e.to).endOf("day").valueOf());let n=Number.MAX_SAFE_INTEGER,i=0;const s=t.get("config.chart.items");if(0===Object.keys(s).length)return e;if(0===e.from||0===e.to){for(let t in s){const e=s[t];n>e.time.start&&(n=e.time.start),i<e.time.end&&(i=e.time.end)}0===e.from&&(e.from=this.date(n).startOf("day").valueOf()),0===e.to&&(e.to=this.date(i).endOf("day").valueOf())}return e}}}function Matcher(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let n=0,i=t.length;n<i;n+=1){const i=t[n];i===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(i),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}function WildcardObject(t,e,n){this.obj=t,this.delimeter=e,this.wildcard=n}Matcher.prototype.match=function match(match){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===match;const{length:t}=match;if(t<this.minLength||t>this.maxLength)return!1;let e=this.segments.length-1,n=match.length-1,i=!1;for(;;){const t=this.segments[e];if(e-=1,t===this.wchar)i=!0;else{const e=n+1-t.length,s=match.lastIndexOf(t,e);if(-1===s||s>e)return!1;if(i)n=s-1,i=!1;else{if(s!==e)return!1;n-=t.length}}if(0>e)break}return!0},WildcardObject.prototype.simpleMatch=function simpleMatch(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const n=t.indexOf(this.wildcard);if(n>-1){const i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){const t=i.length;return!(t>0)||e.substr(-t)===i}}return!1},WildcardObject.prototype.match=function match(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new Matcher(t).match(e)},WildcardObject.prototype.handleArray=function handleArray(t,e,n,i,s={}){let o=t.indexOf(this.delimeter,n),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(n,o);let l=0;for(const n of e){const e=l.toString(),c=""===i?e:i+this.delimeter+l;(a===this.wildcard||a===e||this.simpleMatch(a,e))&&(r?s[c]=n:this.goFurther(t,n,o+1,c,s)),l++}return s},WildcardObject.prototype.handleObject=function handleObject(t,e,n,i,s={}){let o=t.indexOf(this.delimeter,n),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(n,o);for(let n in e){n=n.toString();const l=""===i?n:i+this.delimeter+n;(a===this.wildcard||a===n||this.simpleMatch(a,n))&&(r?s[l]=e[n]:this.goFurther(t,e[n],o+1,l,s))}return s},WildcardObject.prototype.goFurther=function goFurther(t,e,n,i,s={}){return Array.isArray(e)?this.handleArray(t,e,n,i,s):this.handleObject(t,e,n,i,s)},WildcardObject.prototype.get=function get(t){return this.goFurther(t,this.obj,0,"")};class ObjectPath{static get(t,e,n=null){if(null===n&&(n=t.slice()),0===n.length||void 0===e)return e;const i=n.shift();return e.hasOwnProperty(i)?0===n.length?e[i]:ObjectPath.get(t,e[i],n):void 0}static set(t,e,n,i=null){if(null===i&&(i=t.slice()),0===i.length){for(const t in n)delete n[t];for(const t in e)n[t]=e[t];return}const s=i.shift();0!==i.length?(n.hasOwnProperty(s)||(n[s]={}),ObjectPath.set(t,e,n[s],i)):n[s]=e}}const It={delimeter:".",notRecursive:";",param:":",wildcard:"*",log:function log(t,e){console.debug(t,e)}},St={bulk:!1,debug:!1,source:"",data:void 0},At={only:[],source:"",debug:!1,data:void 0};function DeepState(t={},e=It){this.listeners=new Map,this.data=t,this.options=Object.assign(Object.assign({},It),e),this.id=0,this.pathGet=ObjectPath.get,this.pathSet=ObjectPath.set,this.scan=new WildcardObject(this.data,this.options.delimeter,this.options.wildcard)}DeepState.prototype.getListeners=function getListeners(){return this.listeners},DeepState.prototype.destroy=function destroy(){this.data=void 0,this.listeners=new Map},DeepState.prototype.match=function match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))},DeepState.prototype.getIndicesOf=function getIndicesOf(t,e){const n=t.length;if(0==n)return[];let i,s=0,o=[];for(;(i=e.indexOf(t,s))>-1;)o.push(i),s=i+n;return o},DeepState.prototype.getIndicesCount=function getIndicesCount(t,e){const n=t.length;if(0==n)return 0;let i,s=0,o=0;for(;(i=e.indexOf(t,s))>-1;)o++,s=i+n;return o},DeepState.prototype.cutPath=function cutPath(t,e){t=this.cleanNotRecursivePath(t),e=this.cleanNotRecursivePath(e);const n=this.getIndicesCount(this.options.delimeter,e),i=this.getIndicesOf(this.options.delimeter,t);return t.substr(0,i[n])},DeepState.prototype.trimPath=function trimPath(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimeter?t.substr(1):t},DeepState.prototype.split=function split(t){return""===t?[]:t.split(this.options.delimeter)},DeepState.prototype.isWildcard=function isWildcard(t){return t.includes(this.options.wildcard)},DeepState.prototype.isNotRecursive=function isNotRecursive(t){return t.endsWith(this.options.notRecursive)},DeepState.prototype.cleanNotRecursivePath=function cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t},DeepState.prototype.hasParams=function hasParams(t){return t.includes(this.options.param)},DeepState.prototype.getParamsInfo=function getParamsInfo(t){let e={replaced:"",original:t,params:{}},n=0,i=[];for(const s of this.split(t)){e.params[n]={original:s,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let o=t.exec(s);o?(e.params[n].name=o[1],t.lastIndex=0,e.params[n].replaced=s.replace(t,this.options.wildcard),i.push(e.params[n].replaced),n++):(delete e.params[n],i.push(s),n++)}return e.replaced=i.join(this.options.delimeter),e},DeepState.prototype.getParams=function getParams(t,e){if(!t)return;const n=this.split(e),i={};for(const e in t.params){i[t.params[e].name]=n[e]}return i},DeepState.prototype.subscribeAll=function subscribeAll(t,e,n=St){let i=[];for(const s of t)i.push(this.subscribe(s,e,n));return()=>{for(const t of i)t();i=[]}},DeepState.prototype.getCleanListenersCollection=function getCleanListenersCollection(t={}){return Object.assign({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)},DeepState.prototype.getCleanListener=function getCleanListener(t,e=St){return{fn:t,options:Object.assign(Object.assign({},St),e)}},DeepState.prototype.getListenerCollectionMatch=function getListenerCollectionMatch(t,e,n){t=this.cleanNotRecursivePath(t);const i=this;return function listenerCollectionMatch(s){return e&&(s=i.cutPath(s,t)),!(!n||!i.match(t,s))||t===s}},DeepState.prototype.getListenersCollection=function getListenersCollection(t,e){if(this.listeners.has(t)){let n=this.listeners.get(t);return this.id++,n.listeners.set(this.id,e),n}let n={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(n.path)&&(n.paramsInfo=this.getParamsInfo(n.path),n.path=n.paramsInfo.replaced,n.hasParams=!0),n.isWildcard=this.isWildcard(n.path),this.isNotRecursive(n.path)&&(n.isRecursive=!1);let i=this.getCleanListenersCollection(Object.assign(Object.assign({},n),{match:this.getListenerCollectionMatch(n.path,n.isRecursive,n.isWildcard)}));return this.id++,i.listeners.set(this.id,e),this.listeners.set(n.path,i),i},DeepState.prototype.subscribe=function subscribe(t,e,n=St,i="subscribe"){let s=this.getCleanListener(e,n);const o=this.getListenersCollection(t,s);if(o.count++,t=o.path,o.isWildcard){const r=this.scan.get(this.cleanNotRecursivePath(t));if(n.bulk){const a=[];for(const t in r)a.push({path:t,params:this.getParams(o.paramsInfo,t),value:r[t]});e(a,{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(const a in r)e(r[a],{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(a)},params:this.getParams(o.paramsInfo,a),options:n})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(o.paramsInfo,t),options:n});return this.debugSubscribe(s,o,t),this.unsubscribe(t,this.id)},DeepState.prototype.unsubscribe=function unsubscribe(t,e){const n=this.listeners,i=n.get(t);return function unsub(){i.listeners.delete(e),i.count--,0===i.count&&n.delete(t)}},DeepState.prototype.same=function same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t},DeepState.prototype.notifyListeners=function notifyListeners(t,e=[],n){const i=[];for(const s in t){let{single:o,bulk:r}=t[s];for(const t of o){if(e.includes(t))continue;const s=this.debugTime(t);t.listener.fn(t.value(),t.eventInfo),n&&i.push(t),this.debugListener(s,t)}for(const t of r){if(e.includes(t))continue;const s=this.debugTime(t),o=[];for(const e of t.value)o.push(Object.assign(Object.assign({},e),{value:e.value()}));t.listener.fn(o,t.eventInfo),n&&i.push(t),this.debugListener(s,t)}}return i},DeepState.prototype.getSubscribedListeners=function getSubscribedListeners(t,e,n,i="update",s=null){n=Object.assign(Object.assign({},At),n);const o={};for(let[r,a]of this.listeners)if(o[r]={single:[],bulk:[],bulkData:[]},a.match(t)){const l=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,c=a.isRecursive||a.isWildcard?()=>this.get(this.cutPath(t,r)):()=>e,u=[{value:c,path:t,params:l}];for(const e of a.listeners.values())e.options.bulk?o[r].bulk.push({listener:e,listenersCollection:a,eventInfo:{type:i,listener:e,path:{listener:r,update:s||t,resolved:void 0},params:l,options:n},value:u}):o[r].single.push({listener:e,listenersCollection:a,eventInfo:{type:i,listener:e,path:{listener:r,update:s||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:n},value:c})}return o},DeepState.prototype.notifySubscribedListeners=function notifySubscribedListeners(t,e,n,i="update",s=null){return this.notifyListeners(this.getSubscribedListeners(t,e,n,i,s))},DeepState.prototype.getNestedListeners=function getNestedListeners(t,e,n,i="update",s=null){const o={};for(let[r,a]of this.listeners){o[r]={single:[],bulk:[]};const l=this.cutPath(r,t);if(this.match(l,t)){const c=this.trimPath(r.substr(l.length)),u=new WildcardObject(e,this.options.delimeter,this.options.wildcard).get(c),h=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,d=[],p={};for(const e in u){const l=()=>u[e],c=[t,e].join(this.options.delimeter);for(const[e,u]of a.listeners){const f={type:i,listener:u,listenersCollection:a,path:{listener:r,update:s||t,resolved:this.cleanNotRecursivePath(c)},params:h,options:n};u.options.bulk?(d.push({value:l,path:c,params:h}),p[e]=u):o[r].single.push({listener:u,listenersCollection:a,eventInfo:f,value:l})}}for(const e in p){const s=p[e],l={type:i,listener:s,listenersCollection:a,path:{listener:r,update:t,resolved:void 0},options:n,params:h};o[r].bulk.push({listener:s,listenersCollection:a,eventInfo:l,value:d})}}}return o},DeepState.prototype.notifyNestedListeners=function notifyNestedListeners(t,e,n,i="update",s,o=null){return this.notifyListeners(this.getNestedListeners(t,e,n,i,o),s,!1)},DeepState.prototype.getNotifyOnlyListeners=function getNotifyOnlyListeners(t,e,n,i="update",s=null){const o={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return o;for(const r of n.only){const a=new WildcardObject(e,this.options.delimeter,this.options.wildcard).get(r);o[r]={bulk:[],single:[]};for(const e in a){const l=t+this.options.delimeter+e;for(const[c,u]of this.listeners){const h=u.paramsInfo?this.getParams(u.paramsInfo,l):void 0;if(this.match(c,l)){const d=()=>a[e],p=[{value:d,path:l,params:h}];for(const e of u.listeners.values()){const a={type:i,listener:e,listenersCollection:u,path:{listener:c,update:s||t,resolved:this.cleanNotRecursivePath(l)},params:h,options:n};e.options.bulk?o[r].bulk.some(t=>t.listener===e)||o[r].bulk.push({listener:e,listenersCollection:u,eventInfo:a,value:p}):o[r].single.push({listener:e,listenersCollection:u,eventInfo:a,value:d})}}}}}return o},DeepState.prototype.notifyOnly=function notifyOnly(t,e,n,i="update",s){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,n,i,s))[0]},DeepState.prototype.canBeNested=function canBeNested(t){return"object"==typeof t&&null!==t},DeepState.prototype.getUpdateValues=function getUpdateValues(t,e,n){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}},DeepState.prototype.wildcardUpdate=function wildcardUpdate(t,e,n=At){n=Object.assign(Object.assign({},At),n);const i=this.scan.get(t),s={};for(const t in i){const n=this.split(t),{oldValue:o,newValue:r}=this.getUpdateValues(i[t],n,e);this.same(r,o)||(s[t]=r)}const o=[];for(const e in s){const i=s[e];n.only.length?o.push(this.getNotifyOnlyListeners(e,i,n,"update",t)):(o.push(this.getSubscribedListeners(e,i,n,"update",t)),this.canBeNested(i)&&o.push(this.getNestedListeners(e,i,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:e,newValue:i}),this.pathSet(this.split(e),i,this.data)}let r=[];for(const t of o)r=[...r,...this.notifyListeners(t,r)]},DeepState.prototype.update=function update(t,e,n=At){if(this.isWildcard(t))return this.wildcardUpdate(t,e,n);const i=this.split(t),{oldValue:s,newValue:o}=this.getUpdateValues(this.pathGet(i,this.data),i,e);if(n.debug&&this.options.log(`Updating ${t} ${n.source?`from ${n.source}`:""}`,s,o),this.same(o,s))return o;if(this.pathSet(i,o,this.data),null===(n=Object.assign(Object.assign({},At),n)).only)return o;if(n.only.length)return this.notifyOnly(t,o,n),o;const r=this.notifySubscribedListeners(t,o,n);return this.canBeNested(o)&&this.notifyNestedListeners(t,o,n,"update",r),o},DeepState.prototype.get=function get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)},DeepState.prototype.debugSubscribe=function debugSubscribe(t,e,n){t.options.debug&&this.options.log("listener subscribed",n,t,e)},DeepState.prototype.debugListener=function debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})},DeepState.prototype.debugTime=function debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0};
/**
     * Api functions
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0
     */
const Et="gantt-schedule-timeline-calendar";function isObject$1(t){return t&&"object"==typeof t&&!Array.isArray(t)}function mergeDeep$1(t,...e){const n=e.shift();if(isObject$1(t)&&isObject$1(n))for(const e in n)if(isObject$1(n[e]))void 0===t[e]&&(t[e]={}),t[e]=mergeDeep$1(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])isObject$1(i)?t[e].push(mergeDeep$1({},i)):t[e].push(i)}else t[e]=n[e];return e.length?mergeDeep$1(t,...e):t}const Ot={name:Et,stateFromConfig:function stateFromConfig(t){const e=defaultConfig(),n=function mergeActions(t,e){const n=mergeDeep$1({},e.actions),i=mergeDeep$1({},t.actions);let s=[...Object.keys(n),...Object.keys(i)];s=s.filter(t=>s.includes(t));const o={};for(const t of s)o[t]=[],void 0!==n[t]&&Array.isArray(n[t])&&(o[t]=[...n[t]]),void 0!==i[t]&&Array.isArray(i[t])&&(o[t]=[...o[t],...i[t]]);return delete t.actions,delete e.actions,o}(t,e),i={config:mergeDeep$1({},e,t)};return i.config.actions=n,new DeepState(i,{delimeter:"."})},mergeDeep:mergeDeep$1,Hammer:Mt,date:t=>t?Pt(t):Pt(),dayjs:Pt};
/**
     * Gantt-Schedule-Timeline-Calendar
     *
     * @copyright Rafal Pospiech <https://neuronet.io>
     * @author    Rafal Pospiech <neuronet.io@gmail.com>
     * @package   gantt-schedule-timeline-calendar
     * @license   GPL-3.0
     */
function GSTC(e){const n=e.state,i=function getInternalApi(t){let e=t.get(),n=[];const i={name:Et,debug:!1,log(...t){this.debug&&console.log.call(console,...t)},Hammer:Mt,mergeDeep:mergeDeep$1,getClass(t){let e=`${Et}__${t}`;return t===this.name&&(e=this.name),e},allActions:[],getActions(e){this.allActions.includes(e)||this.allActions.push(e);let n=t.get("config.actions."+e);return void 0===n&&(n=[]),n},isItemInViewport:(t,e,n)=>t.time.start>=e&&t.time.start<n||t.time.end>=e&&t.time.end<n,fillEmptyRowValues(t){let n=0;for(const i in t){const s=t[i];s._internal={parents:[],children:[],items:[]},"number"!=typeof s.height&&(s.height=e.config.list.rowHeight),"boolean"!=typeof s.expanded&&(s.expanded=!1),s.top=n,n+=s.height}return t},generateParents(t,e="parentId"){const n={};for(const i of t){const t=void 0!==i[e]?i[e]:"";void 0===n[t]&&(n[t]={}),n[t][i.id]=i}return n},fastTree(t,e,n=[]){const i=t[e.id];if(e._internal.parents=n,void 0===i)return e._internal.children=[],e;""!==e.id&&(n=[...n,e.id]),e._internal.children=Object.values(i);for(const e in i){const s=i[e];this.fastTree(t,s,n)}return e},makeTreeMap(t,e){const n=this.generateParents(e,"rowId");for(const e of t)e._internal.items=void 0!==n[e.id]?Object.values(n[e.id]):[];const i=this.generateParents(t);return this.fastTree(i,{id:"",_internal:{children:[],parents:[],items:[]}})},getFlatTreeMapById(t,e={}){for(const n of t._internal.children)e[n.id]=n,this.getFlatTreeMapById(n,e);return e},flattenTreeMap(t,e=[]){for(const n of t._internal.children)e.push(n.id),this.flattenTreeMap(n,e);return e},getRowsFromMap:(t,e)=>t.map(t=>e[t.id]),getRowsFromIds(t,e){const n=[];for(const i of t)n.push(e[i]);return n},getRowsWithParentsExpanded(t,e,n){const i=[];t:for(const s of t){for(const t of e[s]._internal.parents){if(!n[t].expanded)continue t}i.push(s)}return i},getRowsHeight(t){let e=0;for(let n of t)e+=n.height;return e},getVisibleRowsAndCompensation(e){const n=[];let i=0,s=0;const o=t.get("config.scroll.top"),r=t.get("_internal.height");let a=0,l=0;for(const t of e)if(a=o+r,i+t.height>=o&&i<=a&&(t.top=s,l=t.top+o-i,s+=t.height,n.push(t)),(i+=t.height)>=a)break;return{visibleRows:n,compensation:l}},normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const s=t.deltaMode,o=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(s){case 1:r=o;break;case 2:r=window.height}return{x:e*=r,y:n*=r,z:i*=r,event:t}},normalizePointerEvent(t){let e=0,n=0;switch(t.type){case"wheel":const i=this.normalizeMouseWheelEvent(t);e=i.x,n=i.y;break;case"touchstart":case"touchmove":e=t.touches[0].screenX,n=t.touches[0].screenY;break;case"touchend":e=t.changedTouches[0].screenX,n=t.changedTouches[0].screenY;break;default:e=t.x,n=t.y}return{x:e,y:n,event:t}},limitScroll(e,n){if("top"===e){const e=t.get("_internal.list.rowsHeight")-t.get("_internal.height");return n<0?n=0:n>e&&(n=e),n}{const e=t.get("_internal.chart.time.totalViewDurationPx")-t.get("_internal.chart.dimensions.width");return n<0?n=0:n>e&&(n=e),n}},time:timeApi(t),getScrollBarHeight(){const t=document.createElement("div");t.style.visibility="hidden",t.style.height="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetHeight;t.style.overflow="scroll";var n=document.createElement("div");n.style.height="100%",t.appendChild(n);var i=n.offsetHeight;return t.parentNode.removeChild(t),e-i+1},getGridBlocksUnderRect(e,n,i,s){if(!t.get("_internal.elements.main"))return[]},destroy(){e=void 0;for(const t of n)t();n=[],i.debug&&delete window.state}};return i.debug&&(window.state=t,window.api=i),i}(n),s={components:{Main:Main},scrollBarHeight:17,height:0,treeMap:{},flatTreeMap:[],flatTreeMapById:{},list:{expandedHeight:0,visibleRows:[],rows:{},width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0},visibleItems:[],time:{dates:{},timePerPixel:0,firstTaskTime:0,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0,maxWidth:{}}},elements:{}};"boolean"==typeof e.debug&&e.debug&&(window.state=n),n.update("",t=>({config:t.config,_internal:s}));const o=function Vido(e,n){let i=0;const s=new Map;let o,r,a=new Map,l=0;const c=Promise.resolve();class ActionsCollector extends Directive{constructor(t){super(),this.instance=t}set(t,e,n=!1){return this.actions=t,this.props=e,n&&console.log(this),this}body(t){const e=t.committer.element;for(const t of this.actions)if(void 0!==t){let n;if(a.has(this.instance))for(const i of a.get(this.instance))if(i.componentAction.create===t&&i.element===e){n=i;break}if(n)n.props=this.props;else{void 0!==e.vido&&delete e.vido;const n={create:t,update(){},destroy(){}},i={instance:this.instance,componentAction:n,element:e,props:this.props};let s=[];a.has(this.instance)&&(s=a.get(this.instance)),s.push(i),a.set(this.instance,s)}}}}class InstanceActionsCollector{constructor(t){this.instance=t}create(t,e){const n=new ActionsCollector(this.instance);return n.set(t,e),n}}class PublicComponentMethods{constructor(t,e,n={}){this.instance=t,this.vidoInstance=e,this.props=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){return this.vidoInstance.debug&&(console.groupCollapsed(`destroying component ${this.instance}`),console.log(clone({components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance)}update(){return this.vidoInstance.debug&&(console.groupCollapsed(`updating component ${this.instance}`),console.log(clone({components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(this.vidoInstance)}change(t,e){this.vidoInstance.debug&&(console.groupCollapsed(`changing component ${this.instance}`),console.log(clone({props:this.props,newProps:t,components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),s.get(this.instance).change(t,e)}html(t={}){return s.get(this.instance).update(t,this.vidoInstance)}}function vido(){this.destroyable=[],this.onChangeFunctions=[],this.debug=!1,this.state=e,this.api=n,this.lastProps={},this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this)}vido.prototype.html=A,vido.prototype.svg=E,vido.prototype.directive=t,vido.prototype.asyncAppend=D,vido.prototype.asyncReplace=L,vido.prototype.cache=z,vido.prototype.classMap=j,vido.prototype.guard=V,vido.prototype.ifDefined=W,vido.prototype.repeat=J,vido.prototype.unsafeHTML=Q,vido.prototype.until=et,vido.prototype.schedule=schedule,vido.prototype.actionsByInstance=(t,e)=>{};const u=[],h=[];vido.prototype.StyleMap=class StyleMap extends Directive{constructor(t,e=!1){super(),this.previous={},this.style=t,this.detach=e}setStyle(t){this.style=t}setDetach(t){this.detach=t}body(t){u.length=0,h.length=0;const e=t.committer.element,n=e.style;let i=this.previous;for(const t in i)void 0===this.style[t]&&u.push(t);for(const t in this.style){const e=this.style[t],n=i[t];void 0!==n&&n===e||h.push(t)}if(u.length||h.length){let t,i;this.detach&&(t=e.parentNode)&&(i=e.nextSibling,e.remove());for(const t of u)n.removeProperty(t);for(const t of h){const e=this.style[t];t.includes("-")?n.setProperty(t,e):n[t]=e}this.detach&&t&&t.insertBefore(e,i),this.previous=Object.assign({},this.style)}}};const d=new WeakMap;vido.prototype.Detach=class Detach extends Directive{constructor(t){super(),this.ifFn=t}body(t){const e=this.ifFn(),n=t.committer.element;if(e){if(!d.has(t)){const e=n.nextSibling;d.set(t,{element:n,nextSibling:e})}n.remove()}else{const e=d.get(t);null!=e&&(e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling),d.delete(t))}}},vido.prototype.onDestroy=function onDestroy(t){this.destroyable.push(t)},vido.prototype.onChange=function onChange(t){this.onChangeFunctions.push(t)},vido.prototype.update=function update(){this.updateTemplate()},vido.prototype.reuseComponents=function reuseComponents(t,e,n,i,s=!0){const o=[],r=t.length,a=e.length;let l=!1,c=0;if(r<a){let s=a-r;for(;s;){const r=e[a-s],l=this.createComponent(i,n(r));t.push(l),o.push(l.instance),s--}}else if(r>a){let e=r-a;for(s&&(l=!0,c=r-e);e;){const n=r-e;s||(o.push(t[n].instance),t[n].destroy()),e--}s||(t.length=a)}let u=0;for(const i of t){const t=e[u];o.includes(i.instance)||i.change(n(t),{leave:l&&u>=c}),u++}return t};class InternalComponentMethods{constructor(t,e,n){this.instance=t,this.vidoInstance=e,this.updateFunction=n}destroy(){this.vidoInstance.debug&&(console.groupCollapsed(`component destroy method fired ${this.instance}`),console.log(clone({props:this.vidoInstance.props,components:s.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:a})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions=[],this.vidoInstance.destroyable=[]}update(t={}){return this.vidoInstance.debug&&(console.groupCollapsed(`component update method fired ${this.instance}`),console.log(clone({components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),this.updateFunction(t)}change(t,e={leave:!1}){const n=t;this.vidoInstance.debug&&(console.groupCollapsed(`component change method fired ${this.instance}`),console.log(clone({props:n,components:s.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:t,actionsByInstance:a})),console.trace(),console.groupEnd());for(const n of this.vidoInstance.onChangeFunctions)n(t,e)}}return vido.prototype.createComponent=function createComponent(t,e={}){const n=t.name+":"+i++;let o;(o=new vido).instance=n,o.Actions=new InstanceActionsCollector(n);const r=new PublicComponentMethods(n,o,e),l=new InternalComponentMethods(n,o,t(o,e));return s.set(n,l),s.get(n).change(e),o.debug&&(console.groupCollapsed(`component created ${n}`),console.log(clone({props:e,components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),r},vido.prototype.destroyComponent=function destroyComponent(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(clone({components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd()),a.has(t))for(const e of a.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);a.delete(t),s.get(t).destroy(),s.delete(t),e.debug&&(console.groupCollapsed(`component destroyed ${t}`),console.log(clone({components:s.keys(),actionsByInstance:a})),console.trace(),console.groupEnd())},vido.prototype.updateTemplate=function updateTemplate(){const t=++l,e=this;c.then((function flush(){t===l&&(l=0,e.render())}))},vido.prototype.createApp=function createApp(t){r=t.element;const e=this.createComponent(t.component,t.props);return o=e.instance,this.render(),e},vido.prototype.executeActions=function executeActions(){var t,e;for(const n of a.values()){for(const i of n)if(void 0===i.element.vido){const n=i.componentAction,s=n.create;if(void 0!==s){let o;void 0!==(o=void 0===(null===(t=s.prototype)||void 0===t?void 0:t.update)&&void 0===(null===(e=s.prototype)||void 0===e?void 0:e.destroy)?s(i.element,i.props):new s(i.element,i.props))&&("function"==typeof o?n.destroy=o:("function"==typeof o.update&&(n.update=o.update.bind(o)),"function"==typeof o.destroy&&(n.destroy=o.destroy.bind(o))))}}else i.element.vido=i.props,"function"==typeof i.componentAction.update&&i.componentAction.update(i.element,i.props);for(const t of n)t.element.vido=t.props}},vido.prototype.render=function renderView(){S(s.get(o).update(),r),this.executeActions()},new vido}(n,i);return{state:n,app:o.createApp({component:Main,props:o,element:e.element})}}return GSTC.api=Ot,GSTC}));
//# sourceMappingURL=index.umd.min.js.map
