!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GSTC=e()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}createCommonjsModule((function(t,e){t.exports=function(){var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function PointerEvent(n,i){i=i||Object.create(null);var o=document.createEvent("Event");o.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var s,r=2;r<t.length;r++)o[s=t[r]]=i[s]||e[r];o.buttons=i.buttons||0;var a=0;return a=void 0!==i.pressure&&o.buttons?i.pressure:o.buttons?.5:0,o.x=o.clientX,o.y=o.clientY,o.pointerId=i.pointerId||0,o.width=i.width||1,o.height=i.height||1,o.pressure=a,o.tiltX=i.tiltX||0,o.tiltY=i.tiltY||0,o.twist=i.twist||0,o.tangentialPressure=i.tangentialPressure||0,o.pointerType=i.pointerType||"",o.hwTimestamp=i.hwTimestamp||0,o.isPrimary=i.isPrimary||!1,o.detail=0,o}var n=window.Map&&window.Map.prototype.forEach?Map:SparseArrayMap;function SparseArrayMap(){this.array=[],this.size=0}SparseArrayMap.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach((function(n,i){t.call(e,n,i,this)}),this)}};var i=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],o=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},r="undefined"!=typeof SVGElementInstance,a={pointermap:new n,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))}),this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e)}),this)},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e)}),this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=new PointerEvent(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),s=0;s<i.length;s++)n[e=i[s]]=t[e]||o[s],!r||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in s?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,o=[];null!=i&&i!==document&&!i.contains(t.relatedTarget);)if(o.push(i),!(i=i.parentNode))return;n&&o.reverse(),o.forEach((function(n){t.target=n,e.call(this,t)}),this)},setCapture:function(t,e,n){this.captureInfo[t]&&this.releaseCapture(t,n),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var i=new PointerEvent("gotpointercapture",{bubbles:!0});i.pointerId=t,i._target=e,n||this.asyncDispatchEvent(i)},releaseCapture:function(t,e){var n=this.captureInfo[t];if(n){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var i=new PointerEvent("lostpointercapture",{bubbles:!0});i.pointerId=t,i._target=n,e||this.asyncDispatchEvent(i)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};a.boundHandler=a.eventHandler.bind(a);var l={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,o,s=t.elementFromPoint(e,n);for(o=this.targetingShadow(s);o;){if(i=o.elementFromPoint(e,n)){var r=this.targetingShadow(i);return this.searchRoot(r,e,n)||i}o=this.olderShadow(o)}return s}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),u=Array.prototype.map.call.bind(Array.prototype.map),p=Array.prototype.slice.call.bind(Array.prototype.slice),f=Array.prototype.filter.call.bind(Array.prototype.filter),m=window.MutationObserver||window.WebKitMutationObserver,v={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function Installer(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),m&&(this.observer=new m(this.mutationWatcher.bind(this)))}function rule(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}Installer.prototype={watchSubtree:function(t){this.observer&&l.canTarget(t)&&this.observer.observe(t,v)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(p(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=u(t,this.findElements,this);return e.push(f(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var b=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],w="",_=window.PointerEvent||window.MSPointerEvent,x=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,T=a.pointermap,P=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var E,O={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){a.listen(t,this.events)},unregister:function(t){a.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,s=0,r=n.length;s<r&&(e=n[s]);s++){var a=Math.abs(i-e.x),l=Math.abs(o-e.y);if(a<=25&&l<=25)return!0}},prepareEvent:function(t){var e=a.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=T.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=T.get(this.POINTER_ID),n=this.prepareEvent(t);C||(n.buttons=P[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),T.set(this.POINTER_ID,t),e&&0!==e.buttons?a.move(n):a.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,T.set(this.POINTER_ID,t),a.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=T.get(this.POINTER_ID),n=this.prepareEvent(t);if(!C){var i=P[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}T.set(this.POINTER_ID,t),n.buttons&=~P[n.button],0===n.buttons?a.up(n):a.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,T.set(this.POINTER_ID,t),a.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,a.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);a.cancel(e),this.deactivateMouse()},deactivateMouse:function(){T.delete(this.POINTER_ID)}},D=a.captureInfo,S=l.findTarget.bind(l),A=l.allShadows.bind(l),I=a.pointermap,N={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){E.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,a.listen(t,this.events),A(t).forEach((function(t){t._scrollType=n,a.listen(t,this.events)}),this))},elementRemoved:function(t){if(I.size>0){var e=this.events;t.addEventListener("touchend",(function(){t._scrollType=void 0,a.unlisten(t,e)}))}else t._scrollType=void 0,a.unlisten(t,this.events);A(t).forEach((function(t){t._scrollType=void 0,a.unlisten(t,this.events)}),this)},elementChanged:function(t,e){var n=t.getAttribute("touch-action"),i=this.touchActionToScrollType(n),o=this.touchActionToScrollType(e);"number"==typeof i&&"number"==typeof o?(t._scrollType=i,A(t).forEach((function(t){t._scrollType=i}),this)):"number"==typeof o?this.elementRemoved(t):"number"==typeof i&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?1:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?2:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?4:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?8:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return 15;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===I.size||1===I.size&&I.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=a.cloneEvent(t),i=n.pointerId=t.identifier+2;if(n.target=D[i]||S(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){const e=Math.tan(t.altitudeAngle),i=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/e)*i,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/e)*i}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var o=this;return n.preventDefault=function(){o.scrolling=!1,o.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(15===n)e=!0;else{var i=t.changedTouches[0],o=i.clientY-this.firstXY.Y,s=Math.abs(o),r=i.clientX-this.firstXY.X,a=Math.abs(r),l=1&n,h=2&n,u=4&n,p=8&n;u&&p?e=a>s:u?e=a>s&&r>0:p&&(e=a>s&&r<0),e||(l&&h?e=a<s:l?e=a<s&&o>0:h&&(e=a<s&&o<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,o=t.length;i<o&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(I.size>=e.length){var n=[];I.forEach((function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){I.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),a.enterOver(t),a.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=I.get(e.pointerId);if(n){var i=n.out,o=n.outTarget;a.move(e),i&&o!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=o,i.target=o,e.target?(a.leaveOut(i),a.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(a.up(t),a.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){a.cancel(t),a.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){I.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=O.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(o,2500)}}};E=new Installer(N.elementAdded,N.elementRemoved,N.elementChanged,N);var L,z,R,G=a.pointermap,Y=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,k={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){a.listen(t,this.events)},unregister:function(t){a.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return Y&&((e=a.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){G.delete(t)},MSPointerDown:function(t){G.set(t.pointerId,t);var e=this.prepareEvent(t);a.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);a.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);a.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);a.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);a.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);a.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=a.makeEvent("lostpointercapture",t);a.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=a.makeEvent("gotpointercapture",t);a.dispatchEvent(e)}};function assertActive(t){if(!a.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function assertConnected(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function inActiveButtonState(t){return 0!==a.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(L=function(t){assertActive(t),assertConnected(this),inActiveButtonState(t)&&(a.setCapture(t,this,!0),this.msSetPointerCapture(t))},z=function(t){assertActive(t),a.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(L=function setPointerCapture(t){assertActive(t),assertConnected(this),inActiveButtonState(t)&&a.setCapture(t,this)},z=function releasePointerCapture(t){assertActive(t),a.releaseCapture(t)}),R=function hasPointerCapture(t){return!!a.captureInfo[t]},function applyAttributeStyles(){if(_){b.forEach((function(t){w+=t.selector+rule(t.value)+"\n",x&&(w+=function shadowSelector(t){return"body /shadow-deep/ "+t}(t.selector)+rule(t.value)+"\n")}));var t=document.createElement("style");t.textContent=w,document.head.appendChild(t)}}(),function applyPolyfill(){if(!window.PointerEvent){if(window.PointerEvent=PointerEvent,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),a.registerSource("ms",k)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),a.registerSource("mouse",O),void 0!==window.ontouchstart&&a.registerSource("touch",N);a.register(document)}}(),function applyPolyfill$1(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:L},releasePointerCapture:{value:z},hasPointerCapture:{value:R}})}(),{dispatcher:a,Installer:Installer,PointerEvent:PointerEvent,PointerMap:n,targetFinding:l}}()}));const directive=t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n};class Directive{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}}const isDirective=t=>null!=t&&"boolean"==typeof t.isDirective,t="undefined"!=typeof window&&(null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback),reparentNodes=(t,e,n=null,i=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,i),e=n}},removeNodes=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},e={},n={},i=`{{lit-${String(Math.random()).slice(2)}}}`,o=`\x3c!--${i}--\x3e`,s=new RegExp(`${i}|${o}`);class Template{constructor(t,e){this.parts=[],this.element=e;const n=[],o=[],r=document.createTreeWalker(e.content,133,null,!1);let l=0,h=-1,u=0;const{strings:p,values:{length:f}}=t;for(;u<f;){const t=r.nextNode();if(null!==t){if(h++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)endsWith(e[t].name,"$lit$")&&i++;for(;i-- >0;){const e=p[u],n=a.exec(e)[2],i=n.toLowerCase()+"$lit$",o=t.getAttribute(i);t.removeAttribute(i);const r=o.split(s);this.parts.push({type:"attribute",index:h,name:n,strings:r,sanitizer:void 0}),u+=r.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(i)>=0){const i=t.parentNode,o=e.split(s),r=o.length-1;for(let e=0;e<r;e++){let n,s=o[e];if(""===s)n=createMarker();else{const t=a.exec(s);null!==t&&endsWith(t[2],"$lit$")&&(s=s.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),n=document.createTextNode(s)}i.insertBefore(n,t),this.parts.push({type:"node",index:++h})}""===o[r]?(i.insertBefore(createMarker(),t),n.push(t)):t.data=o[r],u+=r}}else if(8===t.nodeType)if(t.data===i){const e=t.parentNode;null!==t.previousSibling&&h!==l||(h++,e.insertBefore(createMarker(),t)),l=h,this.parts.push({type:"node",index:h}),null===t.nextSibling?t.data="":(n.push(t),h--),u++}else{let e=-1;for(;-1!==(e=t.data.indexOf(i,e+1));)this.parts.push({type:"node",index:-1}),u++}}else r.currentNode=o.pop()}for(const t of n)t.parentNode.removeChild(t)}}const endsWith=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},isTemplatePartActive=t=>-1!==t.index,r=document.createComment(""),createMarker=()=>r.cloneNode(),a=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class TemplateInstance{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const e=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],i=this.template.parts,o=document.createTreeWalker(e,133,null,!1);let s,r=0,a=0,l=o.nextNode();for(;r<i.length;)if(s=i[r],isTemplatePartActive(s)){for(;a<s.index;)a++,"TEMPLATE"===l.nodeName&&(n.push(l),o.currentNode=l.content),null===(l=o.nextNode())&&(o.currentNode=n.pop(),l=o.nextNode());if("node"===s.type){const t=this.processor.handleTextExpression(this.options,s);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,s.name,s.strings,this.options,s));r++}else this.__parts.push(void 0),r++;return t&&(document.adoptNode(e),customElements.upgrade(e)),e}}let l;const h=` ${i} `,u=document.createElement("template");class TemplateResult{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let s=0;s<t;s++){const t=this.strings[s],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const l=a.exec(t);e+=null===l?t+(n?h:o):t.substr(0,l.index)+l[1]+l[2]+"$lit$"+l[3]+i}return e+=this.strings[t],e}getTemplateElement(){const t=u.cloneNode();return t.innerHTML=function convertConstantTemplateStringToTrustedHTML(t){const e=window,n=e.trustedTypes||e.TrustedTypes;return n&&!l&&(l=n.createPolicy("lit-html",{createHTML:t=>t})),l?l.createHTML(t):t}(this.getHTML()),t}}class SVGTemplateResult extends TemplateResult{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),reparentNodes(e,n.firstChild),t}}const isPrimitive=t=>null===t||!("object"==typeof t||"function"==typeof t),isIterable=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),identityFunction=t=>t,noopSanitizer=(t,e,n)=>identityFunction;let p=noopSanitizer;const f=document.createTextNode("");class AttributeCommitter{constructor(t,e,n,i,o="attribute"){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];let s=i&&i.sanitizer;void 0===s&&(s=p(t,e,o),void 0!==i&&(i.sanitizer=s)),this.sanitizer=s;for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new AttributePart(this)}_getValue(){const t=this.strings,e=this.parts,n=t.length-1;if(1===n&&""===t[0]&&""===t[1]&&void 0!==e[0]){const t=e[0].value;if(!isIterable(t))return t}let i="";for(let o=0;o<n;o++){i+=t[o];const n=e[o];if(void 0!==n){const t=n.value;if(isPrimitive(t)||!isIterable(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[n],i}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),"symbol"==typeof t&&(t=String(t)),this.element.setAttribute(this.name,t)}}}class AttributePart{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===e||isPrimitive(t)&&t===this.value||(this.value=t,isDirective(t)||(this.committer.dirty=!0))}commit(){for(;isDirective(this.value);){const t=this.value;this.value=e,t.isClass?t.body(this):t(this)}this.value!==e&&this.committer.commit()}}class NodePart{constructor(t,e){this.value=void 0,this.__pendingValue=void 0,this.textSanitizer=void 0,this.options=t,this.templatePart=e}appendInto(t){this.startNode=t.appendChild(createMarker()),this.endNode=t.appendChild(createMarker())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=createMarker()),t.__insert(this.endNode=createMarker())}insertAfterPart(t){t.__insert(this.startNode=createMarker()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;isDirective(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=e,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==e&&(isPrimitive(t)?t!==this.value&&this.__commitText(t):t instanceof TemplateResult?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):isIterable(t)?this.__commitIterable(t):t===n?(this.value=n,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling;if(t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType){void 0===this.textSanitizer&&(this.textSanitizer=p(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}else{const e=f.cloneNode();this.__commitNode(e),void 0===this.textSanitizer&&(this.textSanitizer=p(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof TemplateInstance&&this.value.template===e)this.value.update(t.values);else{const n=this.endNode.parentNode;if(p!==noopSanitizer&&"STYLE"===n.nodeName||"SCRIPT"===n.nodeName)return void this.__commitText("/* lit-html will not write TemplateResults to scripts and styles */");const i=new TemplateInstance(e,t.processor,this.options),o=i._clone();i.update(t.values),this.__commitNode(o),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const o of t)n=e[i],void 0===n&&(n=new NodePart(this.options,this.templatePart),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(o),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){removeNodes(this.startNode.parentNode,t.nextSibling,this.endNode)}}class BooleanAttributePart{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;isDirective(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=e,t.isClass?t.body(this):t(this)}if(this.__pendingValue===e)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=e}}class PropertyCommitter extends AttributeCommitter{constructor(t,e,n,i){super(t,e,n,i,"property"),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new PropertyPart(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),this.element[this.name]=t}}}class PropertyPart extends AttributePart{}let m=!1;(()=>{try{const t={get capture(){return m=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class EventPart{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;isDirective(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=e,t.isClass?t.body(this):t(this)}if(this.__pendingValue===e)return;const t=this.__pendingValue,n=this.value,i=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),o=null!=t&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=getOptions(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=e}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const getOptions=t=>t&&(m?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);class DefaultTemplateProcessor{handleAttributeExpressions(t,e,n,i,o){const s=e[0];if("."===s){return new PropertyCommitter(t,e.slice(1),n,o).parts}return"@"===s?[new EventPart(t,e.slice(1),i.eventContext)]:"?"===s?[new BooleanAttributePart(t,e.slice(1),n)]:new AttributeCommitter(t,e,n,o).parts}handleTextExpression(t,e){return new NodePart(t,e)}}const v=new DefaultTemplateProcessor;function templateFactory(t){let e=b.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},b.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const o=t.strings.join(i);return n=e.keyString.get(o),void 0===n&&(n=new Template(t,t.getTemplateElement()),e.keyString.set(o,n)),e.stringsArray.set(t.strings,n),n}const b=new Map,w=new WeakMap,render=(t,e,n)=>{let i=w.get(e);void 0===i&&(removeNodes(e,e.firstChild),w.set(e,i=new NodePart(Object.assign({templateFactory:templateFactory},n),void 0)),i.appendInto(e)),i.setValue(t),i.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.7");const html=(t,...e)=>new TemplateResult(t,e,"html",v),svg=(t,...e)=>new SVGTemplateResult(t,e,"svg",v);var _=Object.freeze({__proto__:null,html:html,svg:svg,DefaultTemplateProcessor:DefaultTemplateProcessor,defaultTemplateProcessor:v,directive:directive,Directive:Directive,isDirective:isDirective,removeNodes:removeNodes,reparentNodes:reparentNodes,noChange:e,nothing:n,AttributeCommitter:AttributeCommitter,AttributePart:AttributePart,BooleanAttributePart:BooleanAttributePart,EventPart:EventPart,isIterable:isIterable,isPrimitive:isPrimitive,NodePart:NodePart,PropertyCommitter:PropertyCommitter,PropertyPart:PropertyPart,get sanitizerFactory(){return p},setSanitizerFactory:t=>{if(p!==noopSanitizer)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");p=t},parts:w,render:render,templateCaches:b,templateFactory:templateFactory,TemplateInstance:TemplateInstance,SVGTemplateResult:SVGTemplateResult,TemplateResult:TemplateResult,createMarker:createMarker,isTemplatePartActive:isTemplatePartActive,Template:Template}),__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise((function(i,o){(function settle(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,o,(e=t[n](e)).done,e.value)}))}}};const x=directive((t,e)=>async n=>{var i,o;if(!(n instanceof NodePart))throw new Error("asyncAppend can only be used in text bindings");if(t===n.value)return;let s;n.value=t;let r=0;try{for(var a,l=__asyncValues(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&n.clear(),void 0!==e&&(i=e(i,r));let o=n.startNode;void 0!==s&&(o=createMarker(),s.endNode=o,n.endNode.parentNode.insertBefore(o,n.endNode)),s=new NodePart(n.options,n.templatePart),s.insertAfterNode(o),s.setValue(i),s.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=l.return)&&await o.call(l)}finally{if(i)throw i.error}}});var __asyncValues$1=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise((function(i,o){(function settle(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,o,(e=t[n](e)).done,e.value)}))}}};const T=directive((t,e)=>async n=>{var i,o;if(!(n instanceof NodePart))throw new Error("asyncReplace can only be used in text bindings");if(t===n.value)return;const s=new NodePart(n.options,n.templatePart);n.value=t;let r=0;try{for(var a,l=__asyncValues$1(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&(n.clear(),s.appendIntoPart(n)),void 0!==e&&(i=e(i,r)),s.setValue(i),s.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=l.return)&&await o.call(l)}finally{if(i)throw i.error}}}),P=new WeakMap,C=directive(t=>e=>{if(!(e instanceof NodePart))throw new Error("cache can only be used in text bindings");let n=P.get(e);void 0===n&&(n=new WeakMap,P.set(e,n));const i=e.value;if(i instanceof TemplateInstance){if(t instanceof TemplateResult&&i.template===e.options.templateFactory(t))return void e.setValue(t);{let t=n.get(i.template);void 0===t&&(t={instance:i,nodes:document.createDocumentFragment()},n.set(i.template,t)),reparentNodes(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof TemplateResult){const i=e.options.templateFactory(t),o=n.get(i);void 0!==o&&(e.setValue(o.nodes),e.commit(),e.value=o.instance)}e.setValue(t)}),E=new WeakMap,O=directive(t=>e=>{if(!(e instanceof AttributePart)||e instanceof PropertyPart||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:n}=e,{element:i}=n;let o=E.get(e);void 0===o&&(i.className=n.strings.join(" "),E.set(e,o=new Set));const{classList:s}=i;o.forEach(e=>{e in t||(s.remove(e),o.delete(e))});for(const e in t){const n=t[e];n!=o.has(e)&&(n?(s.add(e),o.add(e)):(s.remove(e),o.delete(e)))}}),D=new WeakMap,S=directive((t,e)=>n=>{const i=D.get(n);if(Array.isArray(t)){if(Array.isArray(i)&&i.length===t.length&&t.every((t,e)=>t===i[e]))return}else if(i===t&&(void 0!==t||D.has(n)))return;n.setValue(e()),D.set(n,Array.isArray(t)?Array.from(t):t)}),A=directive(t=>e=>{if(void 0===t&&e instanceof AttributePart){if(t!==e.value){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else e.setValue(t)}),createAndInsertPart=(t,e)=>{const n=t.startNode.parentNode,i=null==e?t.endNode:e.startNode,o=n.insertBefore(createMarker(),i);n.insertBefore(createMarker(),i);const s=new NodePart(t.options,void 0);return s.insertAfterNode(o),s},updatePart=(t,e)=>(t.setValue(e),t.commit(),t),insertPartBefore=(t,e,n)=>{const i=t.startNode.parentNode,o=n?n.startNode:t.endNode,s=e.endNode.nextSibling;s!==o&&reparentNodes(i,e.startNode,s,o)},removePart=t=>{removeNodes(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},generateMap=(t,e,n)=>{const i=new Map;for(let o=e;o<=n;o++)i.set(t[o],o);return i},I=new WeakMap,N=new WeakMap,L=directive((t,e,n)=>{let i;return void 0===n?n=e:void 0!==e&&(i=e),e=>{if(!(e instanceof NodePart))throw new Error("repeat can only be used in text bindings");const o=I.get(e)||[],s=N.get(e)||[],r=[],a=[],l=[];let h,u,p=0;for(const e of t)l[p]=i?i(e,p):p,a[p]=n(e,p),p++;let f=0,m=o.length-1,v=0,b=a.length-1;for(;f<=m&&v<=b;)if(null===o[f])f++;else if(null===o[m])m--;else if(s[f]===l[v])r[v]=updatePart(o[f],a[v]),f++,v++;else if(s[m]===l[b])r[b]=updatePart(o[m],a[b]),m--,b--;else if(s[f]===l[b])r[b]=updatePart(o[f],a[b]),insertPartBefore(e,o[f],r[b+1]),f++,b--;else if(s[m]===l[v])r[v]=updatePart(o[m],a[v]),insertPartBefore(e,o[m],o[f]),m--,v++;else if(void 0===h&&(h=generateMap(l,v,b),u=generateMap(s,f,m)),h.has(s[f]))if(h.has(s[m])){const t=u.get(l[v]),n=void 0!==t?o[t]:null;if(null===n){const t=createAndInsertPart(e,o[f]);updatePart(t,a[v]),r[v]=t}else r[v]=updatePart(n,a[v]),insertPartBefore(e,n,o[f]),o[t]=null;v++}else removePart(o[m]),m--;else removePart(o[f]),f++;for(;v<=b;){const t=createAndInsertPart(e,r[b+1]);updatePart(t,a[v]),r[v++]=t}for(;f<=m;){const t=o[f++];null!==t&&removePart(t)}I.set(e,r),N.set(e,l)}}),z=new WeakMap,R=document.createElement("template"),G=directive(t=>e=>{if(!(e instanceof NodePart))throw new Error("unsafeHTML can only be used in text bindings");const n=z.get(e);if(void 0!==n&&isPrimitive(t)&&t===n.value&&e.value===n.fragment)return;const i=R.cloneNode();i.innerHTML=t;const o=document.importNode(i.content,!0);e.setValue(o),z.set(e,{value:t,fragment:o})}),Y=new WeakMap,k=directive((...t)=>e=>{let n=Y.get(e);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},Y.set(e,n));const i=n.values;let o=i.length;n.values=t;for(let s=0;s<t.length&&!(s>n.lastRenderedIndex);s++){const r=t[s];if(isPrimitive(r)||"function"!=typeof r.then){e.setValue(r),n.lastRenderedIndex=s;break}s<o&&r===i[s]||(n.lastRenderedIndex=2147483647,o=0,Promise.resolve(r).then(t=>{const i=n.values.indexOf(r);i>-1&&i<n.lastRenderedIndex&&(n.lastRenderedIndex=i,e.setValue(t),e.commit())}))}}),V=new WeakMap;class Detach extends Directive{constructor(t){super(),this.ifFn=t}body(t){const e=this.ifFn(),n=t.committer.element;if(e){if(!V.has(t)){const e=n.nextSibling;V.set(t,{element:n,nextSibling:e})}n.remove()}else{const e=V.get(t);null!=e&&(e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling),V.delete(t))}}}const j=[],H=[];class StyleMap extends Directive{constructor(t,e=!1){super(),this.previous={},this.style=t,this.detach=e}setStyle(t){this.style=t}setDetach(t){this.detach=t}body(t){j.length=0,H.length=0;const e=t.committer.element,n=e.style;let i=this.previous;for(const t in i)void 0===this.style[t]&&j.push(t);for(const t in this.style){const e=this.style[t],n=i[t];void 0!==n&&n===e||H.push(t)}if(j.length||H.length){let t,i;this.detach&&(t=e.parentNode,t&&(i=e.nextSibling,e.remove()));for(const t of j)n.removeProperty(t);for(const t of H){const e=this.style[t];t.includes("-")?n.setProperty(t,e):n[t]=e}this.detach&&t&&t.insertBefore(e,i),this.previous=Object.assign({},this.style)}}}class Action{constructor(){this.isAction=!0}}Action.prototype.isAction=!0;const W={element:document.createTextNode(""),axis:"xy",threshold:10,onDown(t){},onMove(t){},onUp(t){},onWheel(t){}},X="undefined"!=typeof PointerEvent;let F=0;class PointerAction extends Action{constructor(t,e){super(),this.moving="",this.initialX=0,this.initialY=0,this.lastY=0,this.lastX=0,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),this.element=t,this.id=++F,this.options=Object.assign(Object.assign({},W),e.pointerOptions),X?(t.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)):(t.addEventListener("touchstart",this.onPointerDown),document.addEventListener("touchmove",this.onPointerMove,{passive:!1}),document.addEventListener("touchend",this.onPointerUp),document.addEventListener("touchcancel",this.onPointerUp),t.addEventListener("mousedown",this.onPointerDown),document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp))}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const o=t.deltaMode,s=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(o){case 1:r=s;break;case 2:r=window.height}return e*=r,n*=r,i*=r,{x:e,y:n,z:i,event:t}}onWheel(t){const e=this.normalizeMouseWheelEvent(t);this.options.onWheel(e)}normalizePointerEvent(t){let e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,event:t};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e}onPointerDown(t){if("mousedown"===t.type&&0!==t.button)return;this.moving="xy";const e=this.normalizePointerEvent(t);this.lastX=e.x,this.lastY=e.y,this.initialX=e.x,this.initialY=e.y,this.options.onDown(e)}handleX(t){let e=t.x-this.lastX;return this.lastY=t.y,this.lastX=t.x,e}handleY(t){let e=t.y-this.lastY;return this.lastY=t.y,this.lastX=t.x,e}onPointerMove(t){if(""===this.moving||"mousemove"===t.type&&0!==t.button)return;const e=this.normalizePointerEvent(t);if("x|y"===this.options.axis){let n=0,i=0;("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",n=this.handleX(e)),("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("xy"===this.options.axis){let n=0,i=0;Math.abs(e.x-this.initialX)>this.options.threshold&&(n=this.handleX(e)),Math.abs(e.y-this.initialY)>this.options.threshold&&(i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("x"===this.options.axis)("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",this.options.onMove({movementX:this.handleX(e),movementY:0,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}));else if("y"===this.options.axis){let n=0;("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",n=this.handleY(e)),this.options.onMove({movementX:0,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}}onPointerUp(t){this.moving="";const e=this.normalizePointerEvent(t);this.options.onUp({movementX:0,movementY:0,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}),this.lastY=0,this.lastX=0}destroy(t){X?(t.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)):(t.removeEventListener("mousedown",this.onPointerDown),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerUp),t.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("touchcancel",this.onPointerUp))}}function schedule(t){let e=0;return function wrapperFn(n){e||(e=requestAnimationFrame((function executeFrame(){e=0,t.apply(void 0,[n])})))}}function isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}function clone(t){if(void 0!==t.actions){const e=t.actions.map(t=>{const e=Object.assign({},t),n=Object.assign({},e.props);return delete n.state,delete n.api,delete e.element,e.props=n,e});t.actions=e}return function mergeDeep(t,...e){const n=e.shift();if(isObject(t)&&isObject(n))for(const e in n)if(isObject(n[e]))void 0===t[e]&&(t[e]={}),t[e]=mergeDeep(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])isObject(i)?t[e].push(mergeDeep({},i)):t[e].push(i)}else t[e]=n[e];return e.length?mergeDeep(t,...e):t}({},t)}function Vido(t,e){let n=0;const i=new Map;let o,s,r=new Map,a=0;const l=Promise.resolve(),h={},u=function getActionsCollector(t){return class ActionsCollector extends Directive{constructor(t){super(),this.instance=t}set(t,e){return this.actions=t,this.props=e,this}body(e){const n=e.committer.element;for(const e of this.actions)if(void 0!==e){let i;if(t.has(this.instance))for(const o of t.get(this.instance))if(o.componentAction.create===e&&o.element===n){i=o;break}if(i)i.props=this.props;else{void 0!==n.vido&&delete n.vido;const i={create:e,update(){},destroy(){}},o={instance:this.instance,componentAction:i,element:n,props:this.props};let s=[];t.has(this.instance)&&(s=t.get(this.instance)),s.push(o),t.set(this.instance,s)}}}}}(r);class InstanceActionsCollector{constructor(t){this.instance=t}create(t,e){const n=new u(this.instance);return n.set(t,e),n}}const p=function getPublicComponentMethods(t,e,n){return class PublicComponentMethods{constructor(t,e,n={}){this.instance=t,this.name=e.name,this.vidoInstance=e,this.props=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){return this.vidoInstance.debug&&(console.groupCollapsed(`destroying component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance)}update(){return this.vidoInstance.debug&&(console.groupCollapsed(`updating component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(this.vidoInstance)}change(i,o){this.vidoInstance.debug&&(console.groupCollapsed(`changing component ${this.instance}`),console.log(n({props:this.props,newProps:i,components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),t.get(this.instance).change(i,o)}html(e={}){const n=t.get(this.instance);if(n)return n.update(e,this.vidoInstance)}_getComponents(){return t}_getActions(){return e}}}(i,r,clone),f=function getInternalComponentMethods(t,e,n){return class InternalComponentMethods{constructor(t,e,n,i){this.instance=t,this.vidoInstance=e,this.renderFunction=n,this.content=i}destroy(){var i;this.vidoInstance.debug&&(console.groupCollapsed(`component destroy method fired ${this.instance}`),console.log(n({props:this.vidoInstance.props,components:t.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:e})),console.trace(),console.groupEnd()),"function"==typeof(null===(i=this.content)||void 0===i?void 0:i.destroy)&&this.content.destroy();for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions=[],this.vidoInstance.destroyable=[],this.vidoInstance.update()}update(i={}){return this.vidoInstance.debug&&(console.groupCollapsed(`component update method fired ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.renderFunction(i)}change(i,o={leave:!1}){const s=i;this.vidoInstance.debug&&(console.groupCollapsed(`component change method fired ${this.instance}`),console.log(n({props:s,components:t.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:i,actionsByInstance:e})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.onChangeFunctions)t(i,o)}}}(i,r,clone);class vido{constructor(){this.destroyable=[],this.onChangeFunctions=[],this.debug=!1,this.state=t,this.api=e,this.lastProps={},this.html=html,this.svg=svg,this.directive=directive,this.asyncAppend=x,this.asyncReplace=T,this.cache=C,this.classMap=O,this.guard=S,this.ifDefined=A,this.repeat=L,this.unsafeHTML=G,this.until=k,this.schedule=schedule,this.actionsByInstance=(t,e)=>{},this.StyleMap=StyleMap,this.Detach=Detach,this.PointerAction=PointerAction,this.Action=Action,this._components=i,this._actions=r,this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this);for(const t in h)this[t]=h[t]}addMethod(t,e){h[t]=e}onDestroy(t){this.destroyable.push(t)}onChange(t){this.onChangeFunctions.push(t)}update(t){return this.updateTemplate(t)}reuseComponents(t,e,n,i,o=!0){const s=[],r=t.length,a=e.length;let l=!1;!o||void 0!==e&&0!==e.length||(l=!0);let h=0;if(r<a){let o=a-r;for(;o;){const r=e[a-o],l=this.createComponent(i,n(r));t.push(l),s.push(l.instance),o--}}else if(r>a){let e=r-a;for(o&&(l=!0,h=r-e);e;){const n=r-e;o||(s.push(t[n].instance),t[n].destroy()),e--}o||(t.length=a)}let u=0;for(const i of t){const t=e[u];s.includes(i.instance)||i.change(n(t),{leave:l&&u>=h}),u++}}createComponent(t,e={},o=null){const s=t.name+":"+n++;let a;a=new vido,a.instance=s,a.name=t.name,a.Actions=new InstanceActionsCollector(s);const l=new p(s,a,e),h=new f(s,a,t(a,e,o),o);return i.set(s,h),i.get(s).change(e),a.debug&&(console.groupCollapsed(`component created ${s}`),console.log(clone({props:e,components:i.keys(),actionsByInstance:r})),console.trace(),console.groupEnd()),l}destroyComponent(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(clone({components:i.keys(),actionsByInstance:r})),console.trace(),console.groupEnd()),r.has(t))for(const e of r.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);r.delete(t);const n=i.get(t);n.update(),n.destroy(),i.delete(t),e.debug&&(console.groupCollapsed(`component destroyed ${t}`),console.log(clone({components:i.keys(),actionsByInstance:r})),console.trace(),console.groupEnd())}executeActions(){var t,e,n;for(const i of r.values()){for(const o of i)if(void 0===o.element.vido){const i=o.componentAction,s=i.create;if(void 0!==s){let r;r=!0!==(null===(t=s.prototype)||void 0===t?void 0:t.isAction)&&void 0===s.isAction&&void 0===(null===(e=s.prototype)||void 0===e?void 0:e.update)&&void 0===(null===(n=s.prototype)||void 0===n?void 0:n.destroy)?s(o.element,o.props):new s(o.element,o.props),void 0!==r&&("function"==typeof r?i.destroy=r:("function"==typeof r.update&&(i.update=r.update.bind(r)),"function"==typeof r.destroy&&(i.destroy=r.destroy.bind(r))))}}else o.element.vido=o.props,"function"==typeof o.componentAction.update&&o.componentAction.update(o.element,o.props);for(const t of i)t.element.vido=t.props}}updateTemplate(t){return new Promise(e=>{const n=++a,i=this;l.then((function flush(){n===a&&(a=0,i.render(),"function"==typeof t&&t(),e())}))})}createApp(t){s=t.element;const e=this.createComponent(t.component,t.props);return o=e.instance,this.render(),e}render(){const t=i.get(o);t?(render(t.update(),s),this.executeActions()):s&&s.remove()}}return new vido}Vido.prototype.lithtml=_,Vido.prototype.Action=Action,Vido.prototype.Directive=Directive,Vido.prototype.schedule=schedule,Vido.prototype.Detach=Detach,Vido.prototype.StyleMap=StyleMap,Vido.prototype.PointerAction=PointerAction,Vido.prototype.asyncAppend=x,Vido.prototype.asyncReplace=T,Vido.prototype.cache=C,Vido.prototype.classMap=O,Vido.prototype.guard=S,Vido.prototype.ifDefined=A,Vido.prototype.repeat=L,Vido.prototype.unsafeHTML=G,Vido.prototype.unti=k;var B=function(){if("undefined"!=typeof Map)return Map;function getIndex(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(t){var e=getIndex(this.__entries__,t),n=this.__entries__[e];return n&&n[1]},class_1.prototype.set=function(t,e){var n=getIndex(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},class_1.prototype.delete=function(t){var e=this.__entries__,n=getIndex(e,t);~n&&e.splice(n,1)},class_1.prototype.has=function(t){return!!~getIndex(this.__entries__,t)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];t.call(e,o[1],o[0])}},class_1}()}(),U="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,K="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Z="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(K):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var q=["top","right","bottom","left","width","height","size","weight"],J="undefined"!=typeof MutationObserver,Q=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(t,e){var n=!1,i=!1,o=0;function resolvePending(){n&&(n=!1,t()),i&&proxy()}function timeoutCallback(){Z(resolvePending)}function proxy(){var t=Date.now();if(n){if(t-o<2)return;i=!0}else n=!0,i=!1,setTimeout(timeoutCallback,e);o=t}return proxy}(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},ResizeObserverController.prototype.connect_=function(){U&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),J?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){U&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;q.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},getWindowOf=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||K},tt=createRectInit(0,0,0,0);function toFloat(t){return parseFloat(t)||0}function getBordersSize(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+toFloat(t["border-"+n+"-width"])}),0)}function getHTMLElementContentRect(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return tt;var i=getWindowOf(t).getComputedStyle(t),o=function getPaddings(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n],s=t["padding-"+o];e[o]=toFloat(s)}return e}(i),s=o.left+o.right,r=o.top+o.bottom,a=toFloat(i.width),l=toFloat(i.height);if("border-box"===i.boxSizing&&(Math.round(a+s)!==e&&(a-=getBordersSize(i,"left","right")+s),Math.round(l+r)!==n&&(l-=getBordersSize(i,"top","bottom")+r)),!function isDocumentElement(t){return t===getWindowOf(t).document.documentElement}(t)){var h=Math.round(a+s)-e,u=Math.round(l+r)-n;1!==Math.abs(h)&&(a-=h),1!==Math.abs(u)&&(l-=u)}return createRectInit(o.left,o.top,a,l)}var et="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof getWindowOf(t).SVGGraphicsElement}:function(t){return t instanceof getWindowOf(t).SVGElement&&"function"==typeof t.getBBox};function getContentRect(t){return U?et(t)?function getSVGContentRect(t){var e=t.getBBox();return createRectInit(0,0,e.width,e.height)}(t):getHTMLElementContentRect(t):tt}function createRectInit(t,e,n,i){return{x:t,y:e,width:n,height:i}}var nt=function(){function ResizeObservation(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=t}return ResizeObservation.prototype.isActive=function(){var t=getContentRect(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},ResizeObservation}(),it=function it(t,e){var n=function createReadOnlyRect(t){var e=t.x,n=t.y,i=t.width,o=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,r=Object.create(s.prototype);return defineConfigurable(r,{x:e,y:n,width:i,height:o,top:n,right:e+i,bottom:o+n,left:e}),r}(e);defineConfigurable(this,{target:t,contentRect:n})},ot=function(){function ResizeObserverSPI(t,e,n){if(this.activeObservations_=[],this.observations_=new B,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return ResizeObserverSPI.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof getWindowOf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new nt(t)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof getWindowOf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new it(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),st="undefined"!=typeof WeakMap?new WeakMap:new B,rt=function ResizeObserver(t){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Q.getInstance(),n=new ot(t,e,this);st.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){rt.prototype[t]=function(){var e;return(e=st.get(this))[t].apply(e,arguments)}}));var at=void 0!==K.ResizeObserver?K.ResizeObserver:rt;function Main(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,createComponent:a,html:l,StyleMap:h,schedule:u}=t,p=n.name;o(i.subscribe("config.plugins",e=>{if(void 0!==e&&Array.isArray(e))for(const n of e){const e=n(t);"function"==typeof e?o(e):e&&e.hasOwnProperty("destroy")&&e.destroy()}}));const f=[];let m,v;f.push(i.subscribe("config.components.List",t=>m=t)),f.push(i.subscribe("config.components.Chart",t=>v=t));const b=a(m);o(b.destroy);const w=a(v);let _;o(w.destroy),o(()=>{f.forEach(t=>t())}),o(i.subscribe("config.wrappers.Main",t=>_=t));const x=n.getActions("main");let T;const P=new h({});let C=0,E=!1;function generateTree(t,e){if(i.get("_internal.flatTreeMap").length&&"subscribe"===e.type)return;const o=i.get("config.list.rows"),s=[];for(const t in o)s.push(o[t]);n.fillEmptyRowValues(s);const a=i.get("config.chart.items"),l=[];for(const t in a)l.push(a[t]);n.prepareItems(l);const h=n.makeTreeMap(s,l),u=n.getFlatTreeMapById(h),p=n.flattenTreeMap(h);i.update("_internal",t=>(t.treeMap=h,t.flatTreeMapById=u,t.flatTreeMap=p,t)),r()}o(i.subscribe("config.classNames",t=>{const e=i.get("config");T=n.getClass(p,{config:e}),E&&(T+=` ${p}__list-column-header-resizer--active`),r()})),o(i.subscribeAll(["config.height","config.headerHeight","config.scroll.horizontal.size"],(function heightChange(){const t=i.get("config"),e=i.get("config.scroll.horizontal.size"),n=t.height-t.headerHeight-e;i.update("_internal.innerHeight",n),P.style["--height"]=t.height+"px",r()}))),o(i.subscribe("_internal.list.columns.resizer.active",(function resizerActiveChange(t){E=t,T=n.getClass(n.name),E&&(T+=` ${n.name}__list-column-header-resizer--active`),r()}))),o(i.subscribeAll(["config.list.rows;","config.chart.items;"],generateTree)),o(i.subscribeAll(["config.list.rows.*.parentId","config.chart.items.*.rowId"],generateTree,{bulk:!0})),o(i.subscribeAll(["config.list.rows.*.expanded","_internal.treeMap;","config.list.rows.*.height"],(function prepareExpanded(){const t=i.get("config.list.rows"),e=n.getRowsFromIds(n.getRowsWithParentsExpanded(i.get("_internal.flatTreeMap"),i.get("_internal.flatTreeMapById"),t),t);C=n.getRowsHeight(e),i.update("_internal.list",t=>(t.rowsHeight=C,t.rowsWithParentsExpanded=e,t)),r()}),{bulk:!0})),o(i.subscribeAll(["_internal.list.rowsWithParentsExpanded;","_internal.innerHeight","_internal.list.rowsHeight"],()=>{const t=i.get("_internal.list.rowsWithParentsExpanded"),e=i.get("_internal.list.rowsHeight"),n=function getLastPageRowsHeight(t,e){if(0===e.length)return 0;let n=0;for(let i=e.length-1;i>=0;i--){const o=e[i];if(n+=o.height,n>=t){n-=o.height;break}}return i.update("config.scroll.vertical.lastPageSize",n),n}(i.get("_internal.innerHeight"),t);i.update("config.scroll.vertical.area",e-n)})),o(i.subscribeAll(["_internal.list.rowsWithParentsExpanded;","config.scroll.vertical.data","config.chart.items"],(function generateVisibleRowsAndItems(){const t=n.getVisibleRows(i.get("_internal.list.rowsWithParentsExpanded")),e=i.get("_internal.list.visibleRows");let o=!0;t.length!==e.length?o=!0:t.length&&(o=t.some((t,n)=>void 0===e[n]||t.id!==e[n].id)),o&&i.update("_internal.list.visibleRows",t);const s=[];for(const e of t)for(const t of e._internal.items)s.push(t);i.update("_internal.chart.visibleItems",s),r()}),{bulk:!0}));const generatePeriodDates=(e,i,o,s)=>{const r=e.period,a=[];let l=i.finalFrom,h=n.time.date(l);const u=i.timePerPixel;if(!u)return[];let p=0;const f=Math.ceil(n.time.date(i.finalTo).endOf(r).diff(h,r,!0)),m=n.getClass("chart-calendar-date"),v=n.time.date().startOf(r);for(let n=0;n<f;n++){const n=h.endOf(r);let l={leftGlobal:h.valueOf(),leftGlobalDate:h,rightGlobalDate:n,rightGlobal:n.valueOf(),width:0,leftPx:0,rightPx:0,period:r,formatted:null,current:h.valueOf()===v.valueOf(),previous:h.add(1,r).valueOf()===v.valueOf(),next:h.subtract(1,r).valueOf()===v.valueOf()};l.formatted=e.format({timeStart:h,timeEnd:n,vido:t,className:m,props:{date:l}}),i.onLevelDate.forEach(t=>{l=t(l,r,o,s)});const f=l.rightGlobalDate.diff(l.leftGlobalDate,"millisecond");l.width=f/u,l.leftPx=p,p+=l.width,l.rightPx=p,a.push(l),h=h.add(1,r).startOf(r)}return a};function triggerLoadedEvent(){i.get("_internal.loadedEventTriggered")||(Promise.resolve().then(()=>{const t=i.get("_internal.elements.main"),e=t.parentNode,n=new Event("gstc-loaded");t.dispatchEvent(n),e.dispatchEvent(n)}),i.update("_internal.loadedEventTriggered",!0))}function guessPeriod(t,e){if(!t.zoom)return t;for(const n of e){const e=n.formats.find(e=>+t.zoom<=+e.zoomTo);e&&n.main&&(t.period=e.period)}return t}function calculateDatesPercents(t,e){const n=function getLastPageDatesWidth(t,e){if(0===e.length)return 0;let n=0;for(let i=e.length-1;i>=0;i--){const o=e[i];if(n+=o.width,n>=t){n-=o.width;break}}return i.update("config.scroll.horizontal.lastPageSize",n),n}(e,t);let o=0;for(const e of t)o+=e.width;const s=o-n;for(const e of t)e.leftPercent=e.leftPx/s,e.rightPercent=e.rightPx/s;return s}function generateAllDates(t,e,n){if(!t.zoom)return 0;t.allDates=[];let i=0;for(const n of e){const e=n.formats.find(e=>+t.zoom<=+e.zoomTo);let o=generatePeriodDates(e,t,n,i);t.onLevelDates.forEach(s=>{o=s(o,e,t,n,i)}),t.allDates.push(o),i++}return t.onAllLevelDates.forEach(e=>{t.allDates=e(t.allDates,t)}),calculateDatesPercents(t.allDates[t.level],n)}function getPeriodDates(t,e){if(!t.length)return[];const i=t.filter(t=>t.leftGlobal>=e.leftGlobal&&t.leftGlobal<=e.rightGlobal||t.rightGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal||t.leftGlobal<=e.leftGlobal&&t.rightGlobal>=e.rightGlobal||t.leftGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal);if(!i.length)return[];let o=0;i[0].period!==e.period&&e.leftGlobal>i[0].leftGlobal&&(o=n.time.getDatesDiffPx(e.leftGlobal,i[0].leftGlobal,e.allDates[e.level]));let s=0;return i.map(t=>(t.currentView={leftPx:s,rightPx:t.rightPx,width:t.width},o<0&&(t.currentView.width=t.width+o,t.currentView.leftPx=0,o=0),t.currentView.rightPx=t.currentView.leftPx+t.currentView.width,s+=t.currentView.width,t))}function calculateTotalViewDuration(t){let e=0,n=0;for(const i of t.allDates[t.level])e+=i.width,n+=i.rightGlobal-i.leftGlobal;t.totalViewDurationPx=e,t.totalViewDurationMs=n}function calculateRightGlobal(t,e,i){const o=n.time.findDateAtTime(t,i),s=i.indexOf(o);let r=o.leftGlobal,a=0;for(let t=s,n=i.length;t<n;t++){const n=i[t];if(r=n.leftGlobal,a+=n.width,a>=e)break}return r}let O=!1;function recalculateTimes(t){if(O)return;const e=i.get("_internal.chart.dimensions.width");if(!e)return;const o=i.get("config.chart.time"),s=i.get("config.chart.calendar"),a=Object.assign({},i.get("_internal.chart.time"));let l=n.mergeDeep({},o);if(!(l.from&&l.to||Object.keys(i.get("config.chart.items")).length))return;l.fromDate=n.time.date(l.from),l.toDate=n.time.date(l.to);const h=s.levels.find(t=>t.main);if(!h)throw new Error("Main calendar level not found (config.chart.calendar.levels).");const u=s.levels.indexOf(h);if(l.level=u,!l.calculatedZoomMode){if(l.period!==a.period){let t=h.formats.find(t=>t.period===l.period&&t.default);t&&(l.zoom=t.zoomTo)}guessPeriod(l,s.levels)}const p=["leftGlobal","centerGlobal","rightGlobal","from","to"].includes(t.name);p&&(l=Object.assign(Object.assign({},l),{leftGlobal:o.leftGlobal,leftGlobalDate:n.time.date(o.leftGlobal),centerGlobal:o.centerGlobal,centerGlobalDate:n.time.date(o.centerGlobal),rightGlobal:o.rightGlobal,rightGlobalDate:n.time.date(o.rightGlobal),from:o.from,fromDate:n.time.date(o.from),to:o.to,toDate:n.time.date(o.to)}));let f=i.get("config.scroll.horizontal"),m=0;if(l.calculatedZoomMode&&e){if(l.finalFrom=l.from,l.finalTo=l.to,l.totalViewDurationMs=n.time.date(l.finalTo).diff(l.finalFrom,"milliseconds"),l.timePerPixel=l.totalViewDurationMs/e,l.zoom=Math.log(l.timePerPixel)/Math.log(2),guessPeriod(l,s.levels),a.zoom!==l.zoom||0===l.allDates.length||l.forceUpdate){m=generateAllDates(l,s.levels,e),calculateTotalViewDuration(l);const t=l.allDates[l.level];l.finalTo=t[t.length-1].leftGlobal}l.leftGlobal=l.from,l.leftGlobalDate=n.time.date(l.leftGlobal),l.rightGlobal=l.to,l.rightGlobalDate=n.time.date(l.rightGlobal)}else if(l.timePerPixel=Math.pow(2,l.zoom),l=n.time.recalculateFromTo(l),a.zoom!==l.zoom||0===l.allDates.length||l.forceUpdate){m=generateAllDates(l,s.levels,e),calculateTotalViewDuration(l);const t=l.allDates[l.level];l.finalTo=t[t.length-1].leftGlobal}else l.totalViewDurationPx=a.totalViewDurationPx,l.totalViewDurationMs=a.totalViewDurationMs;m&&(f.area=m),l.finalFromDate=n.time.date(l.finalFrom),l.finalToDate=n.time.date(l.finalTo);const v=l.allDates[u];let b=!1;if(!p&&!l.calculatedZoomMode)if(l.zoom!==a.zoom&&a.centerGlobal){const t=e*l.timePerPixel,i=Math.round(t/2),o=Math.ceil(a.centerGlobalDate.diff(a.centerGlobal+i,l.period,!0));l.leftGlobalDate=a.centerGlobalDate.add(o,l.period);const s=l.leftGlobalDate.valueOf();let r=n.time.findDateAtTime(s,v);if(r||(r=v[0]),l.leftGlobal=r.leftGlobal,l.leftGlobalDate=r.leftGlobalDate,l.rightGlobal=calculateRightGlobal(l.leftGlobal,e,v),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobalDate.valueOf(),v.length){let t=n.time.findDateAtTime(l.leftGlobal,v);t||(t=v[0]),f.data=t}}else{let t=f.data;t||(t=v[0]),l.leftGlobalDate=t.leftGlobalDate.clone(),l.leftGlobal=l.leftGlobalDate.valueOf(),l.rightGlobal=calculateRightGlobal(l.leftGlobal,e,v),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobal.valueOf(),b=!0}!function limitGlobalAndSetCenter(t,e=!0,i){return t.leftGlobal<t.finalFrom&&(t.leftGlobal=t.finalFrom),t.rightGlobal>t.finalTo&&(t.rightGlobal=t.finalTo),t.leftGlobalDate=n.time.date(t.leftGlobal).startOf(t.period),t.leftGlobal=t.leftGlobalDate.valueOf(),t.rightGlobalDate=n.time.date(t.rightGlobal).endOf(t.period),t.rightGlobal=t.rightGlobalDate.valueOf(),e?(t.centerGlobal=t.leftGlobal+Math.round((t.rightGlobal-t.leftGlobal)/2),t.centerGlobalDate=n.time.date(t.centerGlobal),t.centerGlobal=t.centerGlobalDate.valueOf()):(t.centerGlobal=i.centerGlobal,t.centerGlobalDate=i.centerGlobalDate),t}(l,b,a),l.leftInner=l.leftGlobal-l.finalFrom,l.rightInner=l.rightGlobal-l.finalFrom,l.leftPx=0,l.rightPx=e,l.width=e;const w=l.levels[l.level];w&&w.length&&(l.leftPx=w[0].leftPx,l.rightPx=w[w.length-1].leftPx),function updateLevels(t,e){t.levels=[];let n=0;for(const i of e){const e=i.formats.find(e=>+t.zoom<=+e.zoomTo);if(i.main&&(t.format=e,t.level=n),e){let o=getPeriodDates(t.allDates[n],t);t.onCurrentViewLevelDates.forEach(s=>{o=s(o,e,t,i,n)}),t.levels.push(o)}n++}}(l,s.levels),i.update("_internal.chart.time",l),i.update("config.chart.time",t=>(t.zoom=l.zoom,t.period=l.format.period,t.leftGlobal=l.leftGlobal,t.centerGlobal=l.centerGlobal,t.rightGlobal=l.rightGlobal,t.from=l.from,t.to=l.to,t.finalFrom=l.finalFrom,t.finalTo=l.finalTo,t.allDates=l.allDates,t.forceUpdate=!1,t)),i.update("config.scroll.horizontal",f),r().then(()=>{i.get("_internal.loaded.time")||i.update("_internal.loaded.time",!0)}),O=!1}const D={initialized:!1,zoom:0,period:"",scrollItem:0,chartWidth:0,leftGlobal:0,centerGlobal:0,rightGlobal:0,from:0,to:0};if(o(i.subscribeAll(["config.chart.time","config.chart.calendar.levels","config.scroll.horizontal.data","_internal.chart.dimensions.width"],()=>{let t=function recalculationIsNeeded(){const t=i.get("config.chart.time"),e=i.get("config.scroll.horizontal.data"),n=i.get("_internal.chart.dimensions.width"),o=Object.assign({},D);return D.zoom=t.zoom,D.period=t.period,D.leftGlobal=t.leftGlobal,D.centerGlobal=t.centerGlobal,D.rightGlobal=t.rightGlobal,D.from=t.from,D.to=t.to,D.scrollItem=e,D.chartWidth=n,D.initialized?!0===t.forceUpdate?{name:"forceUpdate"}:t.zoom!==o.zoom?{name:"zoom",oldValue:o.zoom,newValue:t.zoom}:t.period!==o.period?{name:"period",oldValue:o.period,newValue:t.period}:t.leftGlobal!==o.leftGlobal?{name:"leftGlobal",oldValue:o.leftGlobal,newValue:t.leftGlobal}:t.centerGlobal!==o.centerGlobal?{name:"centerGlobal",oldValue:o.centerGlobal,newValue:t.centerGlobal}:t.rightGlobal!==o.rightGlobal?{name:"rightGlobal",oldValue:o.rightGlobal,newValue:t.rightGlobal}:t.from!==o.from?{name:"from",oldValue:o.from,newValue:t.from}:t.to!==o.to?{name:"to",oldValue:o.to,newValue:t.to}:e!==o.scrollItem?{name:"scroll",oldValue:o.scrollItem,newValue:e}:n!==o.chartWidth&&{name:"chartWidth",oldValue:o.chartWidth,newValue:n}:(D.initialized=!0,{name:"all"})}();t&&recalculateTimes(t)},{bulk:!0})),o(i.subscribe("config.chart.items.*.time",t=>{recalculateTimes({name:"items"})},{bulk:!0})),!(!0!==i.get("config.usageStatistics")||""!==location.port||""===location.host||location.host.startsWith("localhost")||location.host.startsWith("127.")||location.host.startsWith("192.")||location.host.endsWith(".test")||location.host.endsWith(".local")))try{const t=new XMLHttpRequest;t.open("POST","https://gstc-us.neuronet.io/"),t.send(JSON.stringify({location:{href:location.href,host:location.host}}))}catch(t){}const S={width:0,height:0};let A;class ResizeAction{constructor(t){A||(A=new at((e,n)=>{const o=t.clientWidth,s=t.clientHeight;S.width===o&&S.height===s||(S.width=o,S.height=s,i.update("_internal.dimensions",S))}),A.observe(t),i.update("_internal.elements.main",t))}update(){}destroy(t){A.unobserve(t)}}function LoadedEventAction(){i.update("_internal.loaded.main",!0)}x.includes(ResizeAction)||x.push(ResizeAction),o(()=>{A.disconnect()}),o(i.subscribeAll(["_internal.loaded","_internal.chart.time.totalViewDurationPx"],()=>{if(i.get("_internal.loadedEventTriggered"))return;const t=i.get("_internal.loaded");if(t.main&&t.chart&&t.time&&t["horizontal-scroll-inner"]){const t=i.get("_internal.elements.horizontal-scroll-inner"),e=i.get("_internal.chart.time.totalViewDurationPx");t&&t.clientWidth===Math.round(e)&&setTimeout(triggerLoadedEvent,0)}})),x.includes(LoadedEventAction)||x.push(LoadedEventAction);const I=Object.assign(Object.assign({},e),{api:n,state:i}),N=s.create(x,I);return n=>_(l`
        <div
          data-info-url="https://github.com/neuronetio/gantt-schedule-timeline-calendar"
          class=${T}
          style=${P}
          data-actions=${N}
        >
          ${b.html()}${w.html()}
        </div>
      `,{props:e,vido:t,templateProps:n})}class Action$1{constructor(){this.isAction=!0}}function ScrollBar(t,e){const{onDestroy:n,state:i,api:o,html:s,StyleMap:r,Actions:a,update:l,schedule:h}=t;let u,p,f,m="",v="";n(i.subscribe("config.classNames",()=>{u=o.getClass("scroll-bar"),p=o.getClass("scroll-bar-inner")}));const b="horizontal"===e.type?"height":"width",w="height"===b?"width":"height",_="horizontal"===e.type?"movementX":"movementY",x="horizontal"===e.type?"left":"top",T=new r({}),P=new r({});let C=0,E=0,O=[],D=[],S=[],A=[],I=0;let N=!1;n(i.subscribeAll("horizontal"===e.type?[`config.scroll.${e.type}.size`,"_internal.chart.dimensions.width","_internal.chart.time"]:[`config.scroll.${e.type}.size`,"_internal.innerHeight","_internal.list.rowsWithParentsExpanded",`config.scroll.${e.type}.area`],()=>{if(N)return;N=!0;const t=i.get("_internal.chart.time"),n=i.get(`config.scroll.${e.type}`),o=i.get("_internal.chart.dimensions.width"),s=i.get("_internal.innerHeight");f=n.size;let r="horizontal"===e.type?o:s;r=r||0,"horizontal"===e.type?r-=f:r+=f,r<0&&(r=0),T.style[b]=f+"px",T.style[w]=r+"px","vertical"===e.type&&(T.style.top=i.get("config.headerHeight")+"px"),P.style[b]="100%";let a=r,h=0;if("horizontal"===e.type)t.allDates&&t.allDates[t.level]?(O=t.allDates[t.level],E=O.length):O=[];else{const t=i.get("_internal.list.rowsWithParentsExpanded");D=t||[],D.length?(E=D.length,function generateRowsOffsets(){const t=D.length;if(S=[],A=[],!t)return;let e=0;for(let n=0;n<t;n++){const t=D[n];S.push(e),e+=t.height}const n=i.get("config.scroll.vertical.area");for(const t of S)A.push(t/n)}()):S=[]}const u=function getFullSize(){return"vertical"===e.type?S.length?S[S.length-1]+D[D.length-1].height:0:O.length?O[O.length-1].rightPx:0}();u<=a||n.lastPageSize===u?(a=0,h=0):(n.lastPageSize&&u?h=n.lastPageSize/u*r:(h=0,a=0),h<n.minInnerSize&&(h=n.minInnerSize)),P.style[w]=h+"px",C=r,I=C/E,i.update(`config.scroll.${e.type}.maxPosPx`,C),l(),N=!1})),n(i.subscribe(`config.scroll.${e.type}.posPx`,t=>{P.style[x]=t+"px",l()}));const L=o.getActions("scroll-bar");L.push(class OuterAction extends Action$1{constructor(t){super(),i.update(`_internal.elements.scroll-bar--${e.type}`,t)}update(){}destroy(){}});const z=a.create(L,{api:o,state:i,props:e}),R=[class InnerAction extends Action$1{constructor(t){super(),this.moving=!1,this.initialPos=0,this.currentPos=0,i.update(`_internal.elements.scroll-bar-inner--${e.type}`,t),this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this);const n=this.pointerMove.bind(this);this.pointerMove=h(t=>n(t)),t.addEventListener("pointerdown",this.pointerDown),window.addEventListener("pointermove",this.pointerMove),window.addEventListener("pointerup",this.pointerUp)}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),window.removeEventListener("pointermove",this.pointerMove),window.removeEventListener("pointerup",this.pointerUp)}limitPosition(t){return t<0?0:t>C?C:t}pointerDown(t){t.preventDefault(),t.stopPropagation(),this.moving=!0,this.initialPos="horizontal"===e.type?t.screenX:t.screenY,v=" "+o.getClass("scroll-bar")+"-inner--active",m=" "+o.getClass("scroll-bar")+"--active",l()}pointerUp(t){this.moving&&(t.preventDefault(),t.stopPropagation()),this.moving=!1,v="",m="",l()}pointerMove(t){if(this.moving){t.preventDefault(),t.stopPropagation(),this.currentPos=this.limitPosition(this.currentPos+t[_]);const n=this.currentPos/C;let o;if("horizontal"===e.type){const t=O.find(t=>t.leftPercent>=n);o=O.indexOf(t)}else for(let t=0,e=A.length;t<e;t++){if(A[t]>=n){o=t;break}}o||(o=0),"horizontal"===e.type?function setScrollLeft(t,e){void 0===t&&(t=0);const n=O[t],o=i.get("config.scroll.horizontal");o.data&&o.data.leftGlobal===n.leftGlobal||i.update("config.scroll.horizontal",e=>(e.data=n,e.posPx=t*I,e))}(o,this.currentPos):function setScrollTop(t,e){void 0===t&&(t=0);const n=i.get("config.scroll.vertical");n.data&&n.data.id===D[t].id||i.update("config.scroll.vertical",e=>(e.data=D[t],e.posPx=t*I,e))}(o,this.currentPos)}}}],G=a.create(R,{api:o,state:i,props:e});return()=>s`
      <div
        data-actions=${z}
        class=${u+" "+u+"--"+e.type+m}
        style=${T}
      >
        <div
          data-actions=${G}
          class=${p+" "+p+"--"+e.type+v}
          style=${P}
        ></div>
      </div>
    `}function List(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,reuseComponents:a,html:l,schedule:h,StyleMap:u,cache:p}=t,f=n.getActions("list");let m,v;o(i.subscribe("config.wrappers.List",t=>m=t));const b=i.subscribe("config.components.ListColumn",t=>v=t);let w,_,x;!function renderExpanderIcons(){const t=i.get("config.list.expander.icons"),e={};for(const i in t){const o=t[i];e[i]=n.getSVGIconSrc(o)}i.update("_internal.list.expander.icons",e)}(),function renderToggleIcons(){const t={open:"",close:""},e=i.get("config.list.toggle.icons");for(const i in e){const o=e[i];t[i]=n.getSVGIconSrc(o)}i.update("_internal.list.toggle.icons",t)}(),o(i.subscribe("config.list",(function onListChange(){_=i.get("config.list"),x=_.columns.percent,r()}))),o(i.subscribe("config.classNames",()=>{w=n.getClass("list",{list:_}),r()}));let T=[];o(i.subscribe("config.list.columns.data;",(function onListColumnsDataChange(t){const e=a(T,Object.values(t),t=>({columnId:t.id}),v);return r(),e})));const P=new u({height:"","--expander-padding-width":"","--expander-size":""});function onWheel(t){}let C;function getWidth(t){C||(C=t.clientWidth,0===x&&(C=0),i.update("_internal.list.width",C))}o(i.subscribeAll(["config.height","config.list.expander"],t=>{const e=i.get("config.list.expander");P.style.height=i.get("config.height")+"px",P.style["--expander-padding-width"]=e.padding+"px",P.style["--expander-size"]=e.size+"px",r()})),o(()=>{T.forEach(t=>t.destroy()),b()});f.push(class ListAction{constructor(t,e){e.state.update("_internal.elements.list",t),getWidth(t)}update(t){return getWidth(t)}});const E=s.create(f,Object.assign(Object.assign({},e),{api:n,state:i}));return e=>m(p(_.columns.percent>0?l`
              <div class=${w} data-actions=${E} style=${P} @wheel=${onWheel}>
                ${T.map(t=>t.html())}
              </div>
            `:""),{vido:t,props:{},templateProps:e})}Action$1.prototype.isAction=!0;class BindElementAction{constructor(t,e){let n=!1,i=e.state.get("_internal.elements.list-columns");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("_internal.elements.list-columns",i)}destroy(t,e){e.state.update("_internal.elements.list-columns",e=>e.filter(e=>e!==t))}}function ListColumn(t,e){const{api:n,state:i,onDestroy:o,onChange:s,Actions:r,update:a,createComponent:l,reuseComponents:h,html:u,StyleMap:p}=t;let f;o(i.subscribe("config.wrappers.ListColumn",t=>f=t));const m=[];let v,b;m.push(i.subscribe("config.components.ListColumnRow",t=>v=t)),m.push(i.subscribe("config.components.ListColumnHeader",t=>b=t));const w=Object.assign(Object.assign({},e),{api:n,state:i}),_=n.getActions("list-column"),x=n.getActions("list-column-rows");let T,P,C;const E=new p({width:"","--width":""}),O=new p({width:"",height:""});let D,S,A=`config.list.columns.data.${e.columnId}`,I=i.subscribe(A,(function columnChanged(t){D=t,a()}));function calculateStyle(){const t=i.get("config.list");C=t.columns.data[D.id].width*t.columns.percent*.01,S=C;const e=i.get("_internal.innerHeight");E.style.width=S+"px",E.style["--width"]=S+"px",O.style.height=e+"px"}let N=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${D.id}.width`,"_internal.chart.dimensions.width","_internal.innerHeight","_internal.list.width"],calculateStyle,{bulk:!0});const L=l(b,{columnId:e.columnId});o(L.destroy),s(t=>{e=t;for(const t in e)w[t]=e[t];I&&I(),L.change({columnId:e.columnId}),A=`config.list.columns.data.${e.columnId}`,I=i.subscribe(A,(function columnChanged(t){D=t,a()})),N&&N(),N=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${D.id}.width`,"_internal.chart.dimensions.width","_internal.innerHeight","_internal.list.width"],calculateStyle,{bulk:!0}),L.change(e)}),o(()=>{I(),N()}),o(i.subscribe("config.classNames",t=>{T=n.getClass("list-column"),P=n.getClass("list-column-rows"),a()}));const z=[];function getRowHtml(t){return t.html()}o(i.subscribe("_internal.list.visibleRows;",t=>{const n=h(z,t||[],t=>t&&{columnId:e.columnId,rowId:t.id,width:S},v);return a(),n})),o(()=>{z.forEach(t=>t.destroy()),m.forEach(t=>t())}),_.push(BindElementAction);const R=r.create(_,{column:D,state:i,api:n}),G=r.create(x,{api:n,state:i});return n=>f(u`
        <div class=${T} data-actions=${R} style=${E}>
          ${L.html()}
          <div class=${P} style=${O} data-actions=${G}>
            ${z.map(getRowHtml)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function ListColumnHeader(t,e){const{api:n,state:i,onDestroy:o,onChange:s,Actions:r,update:a,createComponent:l,html:h,cache:u,StyleMap:p}=t,f=Object.assign(Object.assign({},e),{api:n,state:i});let m;o(i.subscribe("config.wrappers.ListColumnHeader",t=>m=t));const v=n.getActions("list-column-header"),b=[];let w;b.push(i.subscribe("config.components.ListColumnHeaderResizer",t=>w=t));const _=l(w,{columnId:e.columnId});let x;b.push(i.subscribe("config.components.ListColumnRowExpander",t=>x=t));const T=l(x,{});let P;o(()=>{_.destroy(),T.destroy(),b.forEach(t=>t())});let C,E,O=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{P=t,a()});o(O),s(t=>{e=t;for(const t in e)f[t]=e[t];O&&O(),O=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{P=t,a()})}),o(i.subscribe("config.classNames",()=>{C=n.getClass("list-column-header"),E=n.getClass("list-column-header-content")}));const D=new p({height:"","--height":"","--paddings-count":""});o(i.subscribe("config.headerHeight",()=>{const t=i.get("config");D.style.height=t.headerHeight+"px",D.style["--height"]=t.headerHeight+"px",D.style["--paddings-count"]="1",a()}));const S=r.create(v,f);return n=>m(h`
        <div class=${C} style=${D} data-actions=${S}>
          ${u(P.expander?function withExpander(){return h`
      <div class=${E}>
        ${T.html()}${_.html(P)}
      </div>
    `}():function withoutExpander(){return h`
      <div class=${E}>
        ${_.html(P)}
      </div>
    `}())}
        </div>
      `,{vido:t,props:e,templateProps:n})}function ListColumnHeaderResizer(t,e){const{api:n,state:i,onDestroy:o,update:s,html:r,schedule:a,Actions:l,PointerAction:h,cache:u,StyleMap:p}=t,f="list-column-header-resizer",m=n.getActions(f),v=n.getActions(f+"-dots");let b,w,_,x,T,P,C;o(i.subscribe("config.wrappers.ListColumnHeaderResizer",t=>b=t)),o(i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{w=t,s()}));const E=new p({width:""});let O=!1;o(i.subscribe("config.classNames",t=>{_=n.getClass(f,{column:w}),x=n.getClass(f+"-container",{column:w}),T=n.getClass(f+"-dots",{column:w}),P=n.getClass(f+"-dots-dot",{column:w}),s()})),o(i.subscribeAll([`config.list.columns.data.${w.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const n=i.get("config.list");C=w.width*n.columns.percent*.01,E.style["--width"]=n.columns.resizer.width+"px",O=n.columns.resizer.inRealTime,i.update("_internal.list.width",C),s()}));let D=[1,2,3,4,5,6,7,8];o(i.subscribe("config.list.columns.resizer.dots",t=>{D=[];for(let e=0;e<t;e++)D.push(e);s()}));let S=C;const A=`config.list.columns.data.${w.id}.width`,I={column:w,api:n,state:i,pointerOptions:{axis:"x",onMove:function onMove({movementX:t}){let e=i.get("config.list.columns.minWidth");"number"==typeof w.minWidth&&(e=w.minWidth),S+=t,S<e&&(S=e),O&&i.update(A,S)}}};m.push(h);const N=l.create(m,I),L=l.create(v,I);return n=>b(r`
        <div class=${_} data-actions=${N}>
          <div class=${x}>
            ${u(w.header.html?r`
                    ${w.header.html}
                  `:w.header.content)}
          </div>
          <div class=${T} style=${E} data-actions=${L}>
            ${D.map(t=>r`
                  <div class=${P} />
                `)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}class BindElementAction$1{constructor(t,e){let n=e.state.get("_internal.elements.list-column-rows"),i=!1;void 0===n&&(i=!0,n=[]),n.includes(t)||(n.push(t),i=!0),i&&e.state.update("_internal.elements.list-column-rows",n)}destroy(t,e){e.state.update("_internal.elements.list-column-rows",e=>e.filter(e=>e!==t))}}function ListColumnRow(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,createComponent:h,onChange:u,StyleMap:p,unsafeHTML:f,PointerAction:m}=t,v=Object.assign(Object.assign({},e),{api:n,state:i});let b=!1;const w=new s(()=>b);let _,x;o(i.subscribe("config.wrappers.ListColumnRow",t=>_=t)),o(i.subscribe("config.components.ListColumnRowExpander",t=>x=t));let T=`_internal.flatTreeMapById.${e.rowId}`,P=i.get(T),C=`config.list.columns.data.${e.columnId}`,E=i.get(C);const O=new p(E.expander?{height:"",top:"","--height":"","--expander-padding-width":"","--expander-size":""}:{height:"",top:"","--height":""},!0);let D,S;const A=h(x,{row:P});u((t,n)=>{if(n.leave||void 0===t.rowId||void 0===t.columnId)return b=!0,D&&D(),S&&S(),void a();b=!1,e=t;for(const t in e)v[t]=e[t];const o=e.rowId,s=e.columnId;D&&D(),S&&S(),T=`_internal.flatTreeMapById.${o}`,C=`config.list.columns.data.${s}`,D=i.subscribeAll([T,C,"config.list.expander"],t=>{if(E=i.get(C),P=i.get(T),void 0===E||void 0===P)return b=!0,void a();if(void 0===E||void 0===P)return;const e=i.get("config.list.expander");O.setStyle({}),O.style.height=P.height+"px",O.style["--height"]=P.height+"px",E.expander&&(O.style["--expander-padding-width"]=e.padding*(P._internal.parents.length+1)+"px");for(const t of P._internal.parents){const e=i.get(`_internal.flatTreeMapById.${t}`);if("object"==typeof e.style&&"Object"===e.style.constructor.name&&"object"==typeof e.style.children){const t=e.style.children;for(const e in t)O.style[e]=t[e]}}if("object"==typeof P.style&&"Object"===P.style.constructor.name&&"object"==typeof P.style.current){const t=P.style.current;for(const e in t)O.style[e]=t[e]}a()},{bulk:!0}),A&&A.change({row:P}),S=i.subscribe(C,t=>{E=t,a()})}),o(()=>{A&&A.destroy(),S(),D()});const I=n.getActions("list-column-row");let N;o(i.subscribe("config.classNames",t=>{N=n.getClass("list-column-row"),a()})),I.includes(BindElementAction$1)||I.push(BindElementAction$1),v.pointerOptions={axis:"x|y",onMove({event:t,movementX:e,movementY:n}){t.stopPropagation(),t.preventDefault(),e&&i.update("config.list.columns.percent",t=>((t+=e)<0&&(t=0),t>100&&(t=100),t))}},I.push(m);const L=r.create(I,v);return n=>_(l`
        <div detach=${w} class=${N} style=${O} data-actions=${L}>
          ${E.expander?A.html():null}
          <div class=${N+"-content"}>
            ${E.isHTML?function getHtml(){return void 0===P?null:"function"==typeof E.data?f(E.data(P)):f(P[E.data])}():function getText(){return void 0===P?null:"function"==typeof E.data?E.data(P):P[E.data]}()}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function ListColumnRowExpander(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,createComponent:l,onChange:h}=t,u=n.getActions("list-column-row-expander"),p=Object.assign(Object.assign({},e),{api:n,state:i});let f,m;const v=i.subscribe("config.components.ListColumnRowExpanderToggle",t=>m=t),b=l(m,e.row?{row:e.row}:{});let w;if(o(()=>{b.destroy(),v()}),o(i.subscribe("config.wrappers.ListColumnRowExpander",t=>w=t)),o(i.subscribe("config.classNames",t=>{f=n.getClass("list-column-row-expander"),r()})),e.row){h((function onPropsChange(t){e=t;for(const t in e)p[t]=e[t];b.change(e)}))}const _=s.create(u,p);return n=>w(a`
        <div class=${f} data-action=${_}>
          ${b.html()}
        </div>
      `,{vido:t,props:e,templateProps:n})}function ListColumnRowExpanderToggle(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,onChange:l,cache:h}=t,u=Object.assign(Object.assign({},e),{api:n,state:i});let p;o(i.subscribe("config.wrappers.ListColumnRowExpanderToggle",t=>p=t));const f=n.getActions("list-column-row-expander-toggle");let m,v,b,w,_,x,T,P=!1;if(o(i.subscribe("config.classNames",t=>{m=n.getClass("list-column-row-expander-toggle"),v=m+"-child",b=m+"-open",w=m+"-closed",r()})),o(i.subscribe("_internal.list.expander.icons",t=>{t&&(_=t.child,x=t.open,T=t.closed),r()})),e.row){function expandedChange(t){P=t,r()}let t;l((function onPropsChange(n){var o,s;e=n;for(const t in e)u[t]=e[t];t&&t(),(null===(s=null===(o=e)||void 0===o?void 0:o.row)||void 0===s?void 0:s.id)&&(t=i.subscribe(`config.list.rows.${e.row.id}.expanded`,expandedChange))})),o((function listToggleDestroy(){t&&t()}))}else{function expandedChange(t){for(const e of t)if(e.value){P=!0;break}r()}o(i.subscribe("config.list.rows.*.expanded",expandedChange,{bulk:!0}))}function toggle(){P=!P,e.row?i.update(`config.list.rows.${e.row.id}.expanded`,P):i.update("config.list.rows",t=>{for(const e in t)t[e].expanded=P;return t},{only:["*.expanded"]})}const C=s.create(f,u);return n=>{return p(a`
        <div class=${m} data-action=${C} @click=${toggle}>
          ${h(_?0===(null===(s=null===(o=null===(i=e.row)||void 0===i?void 0:i._internal)||void 0===o?void 0:o.children)||void 0===s?void 0:s.length)?a`
          <img width="16" height="16" class=${v} src=${_} />
        `:P?a`
            <img width="16" height="16" class=${b} src=${x} />
          `:a`
            <img width="16" height="16" class=${w} src=${T} />
          `:"")}
        </div>
      `,{vido:t,props:e,templateProps:n});var i,o,s}}function ListToggle(t,e={}){const{html:n,onDestroy:i,api:o,state:s,update:r}=t;let a,l;i(s.subscribe("config.classNames",t=>{a=o.getClass("list-toggle")})),i(s.subscribe("config.wrappers.ListToggle",t=>l=t));let h={open:"",close:""};i(s.subscribe("_internal.list.toggle.icons",t=>{t&&(h=t,r())}));let u=!0;function toggle(t){s.update("config.list.columns.percent",t=>0===t?100:0)}return i(s.subscribe("config.list.columns.percent",t=>u=0!==t)),i=>l(n`
        <div class=${a} @click=${toggle}><img src=${u?h.close:h.open} /></div>
      `,{props:e,vido:t,templateProps:i})}function Chart(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,createComponent:l}=t,h=[];let u,p,f;h.push(i.subscribe("config.components.ChartCalendar",t=>u=t)),h.push(i.subscribe("config.components.ChartTimeline",t=>p=t)),h.push(i.subscribe("config.components.ScrollBar",t=>f=t));const m=l(u);o(m.destroy);const v=l(p);o(v.destroy);const b=l(f,{type:"horizontal"});o(b.destroy);const w=l(f,{type:"vertical"});let _,x,T,P;o(w.destroy),o(()=>{h.forEach(t=>t())}),o(i.subscribe("config.wrappers.Chart",t=>_=t));const C=n.getActions("chart");let E=!1;o(i.subscribe("config.chart.time.calculatedZoomMode",t=>E=t)),o(i.subscribe("config.classNames",()=>{x=n.getClass("chart"),T=n.getClass("horizontal-scroll"),P=n.getClass("horizontal-scroll-inner"),r()}));const O={handleEvent:function onWheelHandler(t){t.type},passive:!1,capture:!1};let D,S=0;C.push((function bindElement(t){D||(D=new at((e,n)=>{const o=t.clientWidth,s=t.clientHeight,r=o-i.get("config.scroll.horizontal.size");S!==o&&(S=o,i.update("_internal.chart.dimensions",{width:o,innerWidth:r,height:s}))}),D.observe(t),i.update("_internal.elements.chart",t),i.update("_internal.loaded.chart",!0))})),o(()=>{D.disconnect()});const A=s.create(C,{api:n,state:i});return e=>_(a`
        <div class=${x} data-actions=${A} @wheel=${O}>
          ${m.html()}${v.html()}${w.html()}${E?null:b.html()}
        </div>
      `,{vido:t,props:{},templateProps:e})}function ChartCalendar(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,reuseComponents:a,html:l,StyleMap:h}=t,u=n.getActions("chart-calendar"),p=Object.assign(Object.assign({},e),{api:n,state:i}),f=i.get("config.components.ChartCalendarDate");let m,v,b;o(i.subscribe("config.wrappers.ChartCalendar",t=>m=t)),o(i.subscribe("config.classNames",t=>{v=n.getClass("chart-calendar"),r()}));const w=new h({height:"","--headerHeight":"","margin-left":""});o(i.subscribe("config.headerHeight",t=>{b=t,w.style.height=b+"px",w.style["--calendar-height"]=b+"px",r()}));const _=[[],[]];o(i.subscribe("_internal.chart.time.levels",t=>{let e=0;for(const i of t){if(!i.length)continue;let t="YYYY-MM-DD HH";switch(i[0].period){case"day":t="YYYY-MM-DD";break;case"week":t="YYYY-MM-ww";break;case"month":t="YYYY-MM";break;case"year":t="YYYY"}const o=n.time.date().format(t);a(_[e],i,n=>n&&{level:e,date:n,currentDate:o,currentDateFormat:t},f),e++}r()})),o(()=>{_.forEach(t=>t.forEach(t=>t.destroy()))}),u.push(t=>{i.update("_internal.elements.chart-calendar",t)});const x=s.create(u,p);return n=>m(l`
        <div class=${v} data-actions=${x} style=${w}>
          ${_.map((t,e)=>l`
              <div class=${v+"-dates "+v+`-dates--level-${e}`}>
                ${t.map(t=>t.html())}
              </div>
            `)}
        </div>
      `,{props:e,vido:t,templateProps:n})}class BindElementAction$2 extends Action$1{constructor(t,e){super(),e.state.update("_internal.elements.chart-calendar-dates",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}}function ChartCalendarDay(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,onChange:a,html:l,StyleMap:h,Detach:u}=t,p=n.getActions("chart-calendar-date");let f,m;o(i.subscribe("config.wrappers.ChartCalendarDate",t=>f=t)),o(i.subscribe("config.classNames",()=>{m=n.getClass("chart-calendar-date")}));let v,b,w="";const _=new h({width:"0px"});let x="";function updateDate(){if(!e)return;const t=i.get(`config.chart.calendar.levels.${e.level}`);_.style.width=e.date.currentView.width+"px",v=i.get("_internal.chart.time");const n=t.formats.find(t=>+v.zoom<=+t.zoomTo);w=e.date.current?" gstc-current":e.date.next?" gstc-next":e.date.previous?" gstc-previous":"";let o=m+"-content "+m+`-content--${e.date.period}`+w;n.className?(o+=" "+n.className,x=" "+n.className):x="",b=l`
      <div class=${o}>
        ${e.date.formatted}
      </div>
    `,r()}let T=!1;const P=new u(()=>T);let C;const E={date:e.date,period:e.period,api:n,state:i};a((t,n)=>{if(n.leave)return T=!0,r();T=!1,e=t,E.date=e.date,E.period=e.period,C&&C(),C=i.subscribeAll(["_internal.chart.time","config.chart.calendar.levels"],updateDate,{bulk:!0})}),o(()=>{C()}),p.includes(BindElementAction$2)||p.push(BindElementAction$2);const O=s.create(p,E);return n=>f(l`
        <div
          detach=${P}
          class=${m+" "+m+`--${e.date.period}`+" "+m+`--level-${e.level}`+w+x}
          style=${_}
          data-actions=${O}
        >
          ${b}
        </div>
      `,{props:e,vido:t,templateProps:n})}function ChartTimeline(t,e){const{api:n,state:i,onDestroy:o,Action:s,Actions:r,update:a,html:l,createComponent:h,StyleMap:u}=t,p=n.getActions("chart-timeline"),f=Object.assign(Object.assign({},e),{api:n,state:i});let m;o(i.subscribe("config.wrappers.ChartTimeline",t=>m=t));const v=i.get("config.components.ChartTimelineGrid"),b=i.get("config.components.ChartTimelineItems"),w=i.get("config.components.ListToggle"),_=h(v);o(_.destroy);const x=h(b);o(x.destroy);const T=h(w);let P,C,E;o(T.destroy),o(i.subscribe("config.classNames",()=>{P=n.getClass("chart-timeline"),C=n.getClass("chart-timeline-inner"),a()})),o(i.subscribe("config.list.toggle.display",t=>E=t));const O=new u({}),D=new u({});o(i.subscribeAll(["_internal.innerHeight","_internal.chart.dimensions.width","_internal.list.rowsHeight","_internal.chart.time.dates.day"],(function calculateStyle(){const t=i.get("_internal.chart.dimensions.width"),e=i.get("_internal.list.rowsHeight");O.style.height=i.get("_internal.innerHeight")+"px",O.style["--height"]=O.style.height,t?(O.style.width=t+"px",O.style["--width"]=t+"px"):(O.style.width="0px",O.style["--width"]="0px"),D.style.height=e+"px",D.style.width=t?t+"px":"0px",a()}))),p.push(class BindElementAction extends s{constructor(t){super(),i.get("_internal.elements.chart-timeline")!==t&&i.update("_internal.elements.chart-timeline",t)}});const S=r.create(p,f);return i=>m(l`
        <div class=${P} style=${O} data-actions=${S} @wheel=${n.onScroll}>
          <div class=${C} style=${D}>
            ${_.html()}${x.html()}${E?T.html():""}
          </div>
        </div>
      `,{props:e,vido:t,templateProps:i})}class BindElementAction$3{constructor(t,e){e.state.get("_internal.elements.chart-timeline-grid")!==t&&e.state.update("_internal.elements.chart-timeline-grid",t)}destroy(t,e){e.state.update("_internal.elements",t=>(delete t["chart-timeline-grid"],t))}}function ChartTimelineGrid(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,reuseComponents:l,StyleMap:h}=t,u=n.getActions("chart-timeline-grid"),p={api:n,state:i};let f;o(i.subscribe("config.wrappers.ChartTimelineGrid",t=>f=t));const m=i.get("config.components.ChartTimelineGridRow");let v,b;o(i.subscribe("config.classNames",()=>{v=n.getClass("chart-timeline-grid"),r()})),o(i.subscribe("config.chart.grid.block.onCreate",t=>b=t));const w=[],_=[],x=new Map,T=new h({});o(i.subscribeAll(["_internal.list.visibleRows;","_internal.chart.time.levels","_internal.innerHeight","_internal.chart.dimensions.width"],(function generateBlocks(){const t=i.get("_internal.chart.dimensions.width"),e=i.get("_internal.innerHeight"),o=i.get("_internal.chart.time"),s=i.get(`_internal.chart.time.levels.${o.level}`);if(!s||0===s.length)return void i.update("_internal.chart.grid.rowsWithBlocks",[]);const r=i.get("_internal.list.visibleRows");T.style.height=e+"px",T.style.width=t+"px";let a=0;_.length=0;for(const e of r){const i=[];for(const t of s){let o;x.has(t.leftGlobal)?o=x.get(t.leftGlobal):(o=n.time.date(t.leftGlobal).format("YYYY-MM-DD HH:mm"),x.set(t.leftGlobal,o));let s={id:e.id+":"+o,time:t,row:e,top:a};for(const t of b)s=t(s);i.push(s)}_.push({row:e,blocks:i,top:a,width:t}),a+=e.height}i.update("_internal.chart.grid.rowsWithBlocks",_)}),{bulk:!0})),o(i.subscribe("_internal.chart.grid.rowsWithBlocks",(function generateRowsComponents(t){l(w,t||[],t=>t,m),r()}))),o(()=>{w.forEach(t=>t.destroy())}),u.push(BindElementAction$3);const P=s.create(u,p);return n=>f(a`
        <div class=${v} data-actions=${P} style=${T}>
          ${w.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class BindElementAction$4{constructor(t,e){let n=!1,i=e.state.get("_internal.elements.chart-timeline-grid-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-grid-rows",i,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-grid-rows",e=>e.filter(e=>e!==t))}}function ChartTimelineGridRow(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,reuseComponents:h,onChange:u,StyleMap:p}=t,f=Object.assign(Object.assign({},e),{api:n,state:i});let m;o(i.subscribe("config.wrappers.ChartTimelineGridRow",t=>{m=t,a()}));const v=i.get("config.components.ChartTimelineGridRowBlock"),b=n.getActions("chart-timeline-grid-row");let w;o(i.subscribe("config.classNames",()=>{w=n.getClass("chart-timeline-grid-row")}));const _=new p({width:e.width+"px",height:e.row.height+"px",overflow:"hidden"},!0);let x=!1;const T=new s(()=>x),P=[];u((function onPropsChange(t,n){var o,s,r,l,u,p,m,b,w;if(n.leave||void 0===t.row)return x=!0,h(P,[],t=>t,v),void a();x=!1,h(P,(e=t).blocks,t=>t,v),_.setStyle({}),_.style.height=e.row.height+"px",_.style.width=e.width+"px";const T=i.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(l=null===(r=null===(s=null===(o=T[t])||void 0===o?void 0:o.style)||void 0===s?void 0:s.grid)||void 0===r?void 0:r.row)||void 0===l?void 0:l.children;if(e)for(const t in e)_.style[t]=e[t]}const C=null===(w=null===(b=null===(m=null===(p=null===(u=e)||void 0===u?void 0:u.row)||void 0===p?void 0:p.style)||void 0===m?void 0:m.grid)||void 0===b?void 0:b.row)||void 0===w?void 0:w.current;if(C)for(const t in C)_.style[t]=C[t];for(const t in e)f[t]=e[t];a()})),o((function destroy(){P.forEach(t=>t.destroy())})),-1===b.indexOf(BindElementAction$4)&&b.push(BindElementAction$4);const C=r.create(b,f);return n=>m(l`
        <div detach=${T} class=${w} data-actions=${C} style=${_}>
          ${P.map(t=>t.html())}
        </div>
      `,{vido:t,props:e,templateProps:n})}class BindElementAction$5{constructor(t,e){let n=!1,i=e.state.get("_internal.elements.chart-timeline-grid-row-blocks");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-grid-row-blocks",i,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-grid-row-blocks",e=>e.filter(e=>e!==t),{only:[""]})}}const ChartTimelineGridRowBlock=(t,e)=>{const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,onChange:h,StyleMap:u}=t,p=Object.assign(Object.assign({},e),{api:n,state:i});let f=!1;const m=new s(()=>f),v=n.getActions("chart-timeline-grid-row-block");let b,w;function updateClassName(t){w=n.getClass("chart-timeline-grid-row-block"),t.current&&(w+=" current")}o(i.subscribe("config.wrappers.ChartTimelineGridRowBlock",t=>{b=t,a()})),updateClassName(e.time);const _=new u({width:"",height:""});h((function onPropsChange(t,n){var o,s,r,l,h,u,m,v,b,w,x,T,P;if(n.leave||void 0===t.row)return f=!0,a();f=!1,e=t;for(const t in e)p[t]=e[t];updateClassName(e.time),_.setStyle({}),_.style.width=((null===(s=null===(o=e)||void 0===o?void 0:o.time)||void 0===s?void 0:s.width)||0)+"px",_.style.height=((null===(l=null===(r=e)||void 0===r?void 0:r.row)||void 0===l?void 0:l.height)||0)+"px";const C=i.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(v=null===(m=null===(u=null===(h=C[t])||void 0===h?void 0:h.style)||void 0===u?void 0:u.grid)||void 0===m?void 0:m.block)||void 0===v?void 0:v.children;e&&_.setStyle(Object.assign(Object.assign({},_.style),e))}const E=null===(P=null===(T=null===(x=null===(w=null===(b=e)||void 0===b?void 0:b.row)||void 0===w?void 0:w.style)||void 0===x?void 0:x.grid)||void 0===T?void 0:T.block)||void 0===P?void 0:P.current;E&&_.setStyle(Object.assign(Object.assign({},_.style),E)),a()})),v.push(BindElementAction$5);const x=r.create(v,p);return n=>b(l`
        <div detach=${m} class=${w} data-actions=${x} style=${_}></div>
      `,{props:e,vido:t,templateProps:n})};function ChartTimelineItems(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,reuseComponents:l,StyleMap:h}=t,u=n.getActions("chart-timeline-items");let p,f,m;o(i.subscribe("config.wrappers.ChartTimelineItems",t=>p=t)),o(i.subscribe("config.components.ChartTimelineItemsRow",t=>f=t)),o(i.subscribe("config.classNames",()=>{m=n.getClass("chart-timeline-items"),r()}));const v=new h({},!0);o(i.subscribeAll(["_internal.innerHeight","_internal.chart.dimensions.width"],(function calculateStyle(){const t=i.get("_internal.chart.dimensions.width"),e=i.get("_internal.innerHeight");v.style.width=t+"px",v.style.height=e+"px"})));const b=[];o(i.subscribeAll(["_internal.list.visibleRows;","config.chart.items"],(function createRowComponents(){const t=i.get("_internal.list.visibleRows");l(b,t||[],t=>({row:t}),f),r()}))),o(()=>{b.forEach(t=>t.destroy())});const w=s.create(u,{api:n,state:i});return n=>p(a`
        <div class=${m} style=${v} data-actions=${w}>
          ${b.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class BindElementAction$6{constructor(t,e){let n=!1,i=e.state.get("_internal.elements.chart-timeline-items-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-items-rows",i,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-items-rows",e=>e.filter(e=>e!==t))}}const ChartTimelineItemsRow=(t,e)=>{const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,onChange:h,reuseComponents:u,StyleMap:p}=t,f=Object.assign(Object.assign({},e),{api:n,state:i});let m,v;o(i.subscribe("config.wrappers.ChartTimelineItemsRow",t=>m=t)),o(i.subscribe("config.components.ChartTimelineItemsRowItem",t=>v=t));let b,w,_=`_internal.flatTreeMapById.${e.row.id}._internal.items`;const x=[],T=new p({width:"",height:""},!0);let P=!1;const C=new s(()=>P),updateDom=()=>{const t=i.get("_internal.chart");P=!1,T.style.width=t.dimensions.width+"px",e?(T.style.height=e.row.height+"px",T.style["--row-height"]=e.row.height+"px"):P=!0};h((t,n)=>{if(n.leave||void 0===t.row)return P=!0,u(x,[],t=>({row:void 0,item:t}),v),a();e=t;for(const t in e)f[t]=e[t];!function updateRow(t){_=`_internal.flatTreeMapById.${t.id}._internal.items`,"function"==typeof b&&b(),"function"==typeof w&&w(),b=i.subscribe("_internal.chart",t=>{if(void 0===t)return P=!0,a();updateDom(),a()}),w=i.subscribe(_,e=>{if(void 0===e)return P=!0,u(x,[],e=>({row:t,item:e}),v),a();u(x,e,e=>({row:t,item:e}),v),updateDom(),a()})}(e.row)}),o(()=>{w(),b(),x.forEach(t=>t.destroy())});const E=n.getActions("chart-timeline-items-row");let O;o(i.subscribe("config.classNames",()=>{O=n.getClass("chart-timeline-items-row",e),a()})),E.push(BindElementAction$6);const D=r.create(E,f);return n=>m(l`
        <div detach=${C} class=${O} data-actions=${D} style=${T}>
          ${x.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})};class BindElementAction$7{constructor(t,e){let n=!1,i=e.state.get("_internal.elements.chart-timeline-items-row-items");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-items-row-items",i,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-items-row-items",e=>e.filter(e=>e!==t))}}function ChartTimelineItemsRowItem(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,svg:h,onChange:u,unsafeHTML:p,StyleMap:f}=t;let m;o(i.subscribe("config.wrappers.ChartTimelineItemsRowItem",t=>m=t));let v=0,b=0,w=!1;const _=new f({width:"",height:"",left:""}),x=new f({}),T=new f({}),P={item:e.item,row:e.row,left:v,width:b,api:n,state:i};let C=!1;function updateItem(t=i.get("_internal.chart.time")){var o,s,r,l,h,u,p,f,m,E,O;if(w||0===t.levels.length||!t.levels[t.level]||0===t.levels[t.level].length)return void(C=!0);v=n.time.getOffsetPxFromDates(n.time.date(e.item.time.start),t.levels[t.level],t.period,t);const D=n.time.getOffsetPxFromDates(n.time.date(e.item.time.end),t.levels[t.level],t.period,t);if(b=D-v,b-=i.get("config.chart.spacing")||0,e.item.time.start<t.leftGlobal){t.leftGlobal,e.item.time.start,t.timePerPixel;x.style.display="block"}else x.style.display="none";if(e.item.time.end>t.rightGlobal){e.item.time.end,t.rightGlobal,t.timePerPixel;T.style.display="block"}else T.style.display="none";const S=_.style.width,A=_.style.left;_.setStyle({});const I=n.isItemInViewport(e.item,t.leftGlobal,t.rightGlobal);C=!I,I?(_.style.width=b+"px",_.style.left=v+"px"):(_.style.width=S,_.style.left=A);const N=i.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(l=null===(r=null===(s=null===(o=N[t])||void 0===o?void 0:o.style)||void 0===s?void 0:s.items)||void 0===r?void 0:r.item)||void 0===l?void 0:l.children;e&&_.setStyle(Object.assign(Object.assign({},_.style),e))}const L=null===(m=null===(f=null===(p=null===(u=null===(h=e)||void 0===h?void 0:h.row)||void 0===u?void 0:u.style)||void 0===p?void 0:p.items)||void 0===f?void 0:f.item)||void 0===m?void 0:m.current;L&&_.setStyle(Object.assign(Object.assign({},_.style),L));const z=null===(O=null===(E=e)||void 0===E?void 0:E.item)||void 0===O?void 0:O.style;z&&_.setStyle(Object.assign(Object.assign({},_.style),z)),P.left=v,P.width=b,a()}const E="chart-timeline-items-row-item",O=n.getClass(E)+"-cut";u((function onPropsChange(t,n){if(n.leave||void 0===t.row||void 0===t.item)return w=!0,C=!0,a();C=!1,w=!1,e=t,P.item=e.item,P.row=e.row,updateItem()}));const D=n.getActions(E);let S,A;o(i.subscribe("config.classNames",()=>{S=n.getClass(E,e),A=n.getClass(E+"-label",e),a()})),o(i.subscribe("_internal.chart.time",updateItem)),D.push(BindElementAction$7);const I=r.create(D,P),N=new s(()=>C);return n=>m(l`
        <div detach=${N} class=${S} data-actions=${I} style=${_}>
          ${l`
    <div class=${O} style=${x}>
      ${h`<svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 18 16" width="16">
        <path fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>`}
    </div>
  `}
          <div class=${A} title=${e.item.isHtml?null:e.item.label}>
            ${e.item.isHtml?p(e.item.label):e.item.label}
          </div>
          ${l`
    <div class=${O} style=${T}>
      ${h`<svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 4 16" width="16">
        <path transform="rotate(-180 2.5,8) " fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>`}
    </div>
  `}
        </div>
      `,{vido:t,props:e,templateProps:n})}const lt=["main","scroll-bar","list","list-column","list-column-header","list-column-header-resizer","list-column-header-resizer-dots","list-column-row","list-column-row-expander","list-column-row-expander-toggle","list-toggle","chart","chart-calendar","chart-calendar-date","chart-timeline","chart-timeline-grid","chart-timeline-grid-row","chart-timeline-grid-row-block","chart-timeline-items","chart-timeline-items-row","chart-timeline-items-row-item"];function defaultConfig(){const t=function generateEmptyActions(){const t={};return lt.forEach(e=>t[e]=[]),t}(),e=function generateEmptySlots(){const t={};return lt.forEach(e=>{t[e]={before:[],after:[]}}),t}();return{plugins:[],plugin:{},innerHeight:822,headerHeight:72,components:{Main:Main,ScrollBar:ScrollBar,List:List,ListColumn:ListColumn,ListColumnHeader:ListColumnHeader,ListColumnHeaderResizer:ListColumnHeaderResizer,ListColumnRow:ListColumnRow,ListColumnRowExpander:ListColumnRowExpander,ListColumnRowExpanderToggle:ListColumnRowExpanderToggle,ListToggle:ListToggle,Chart:Chart,ChartCalendar:ChartCalendar,ChartCalendarDate:ChartCalendarDay,ChartTimeline:ChartTimeline,ChartTimelineGrid:ChartTimelineGrid,ChartTimelineGridRow:ChartTimelineGridRow,ChartTimelineGridRowBlock:ChartTimelineGridRowBlock,ChartTimelineItems:ChartTimelineItems,ChartTimelineItemsRow:ChartTimelineItemsRow,ChartTimelineItemsRowItem:ChartTimelineItemsRowItem},wrappers:{Main:t=>t,ScrollBar:t=>t,List:t=>t,ListColumn:t=>t,ListColumnHeader:t=>t,ListColumnHeaderResizer:t=>t,ListColumnRow:t=>t,ListColumnRowExpander:t=>t,ListColumnRowExpanderToggle:t=>t,ListToggle:t=>t,Chart:t=>t,ChartCalendar:t=>t,ChartCalendarDate:t=>t,ChartTimeline:t=>t,ChartTimelineGrid:t=>t,ChartTimelineGridRow:t=>t,ChartTimelineGridRowBlock:t=>t,ChartTimelineItems:t=>t,ChartTimelineItemsRow:t=>t,ChartTimelineItemsRowItem:t=>t},list:{rows:{},rowHeight:40,columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},minWidth:50,data:{}},expander:{padding:18,size:20,icon:{width:16,height:16},icons:{child:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><ellipse ry="4" rx="4" id="svg_1" cy="12" cx="12" fill="#000000B0"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}},toggle:{display:!0,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path stroke="null" d="m16.406954,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m-0.343497,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path transform="rotate(-180 4.392796516418457,12) " stroke="null" d="m1.153809,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m9.773297,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>'}}},scroll:{horizontal:{size:12,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0},vertical:{size:10,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0}},chart:{time:{period:"day",from:0,to:0,finalFrom:0,finalTo:0,zoom:21,leftGlobal:0,centerGlobal:0,rightGlobal:0,levels:[],calculatedZoomMode:!1,onLevelDate:[],onLevelDates:[],onAllLevelDates:[],onCurrentViewLevelDates:[],allDates:[]},calendar:{expand:!0,levels:[{formats:[{zoomTo:17,period:"day",className:"gstc-date-medium gstc-date-left",format:({timeStart:t})=>t.format("DD MMMM YYYY (dddd)")},{zoomTo:23,period:"month",format:({timeStart:t})=>t.format("MMMM YYYY")},{zoomTo:24,period:"month",format:({timeStart:t,className:e,vido:n})=>t.format("MMMM 'YY")},{zoomTo:25,period:"month",format:({timeStart:t})=>t.format("MMM YYYY")},{zoomTo:27,period:"year",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:100,period:"year",default:!0,format:()=>null}]},{main:!0,formats:[{zoomTo:16,period:"hour",format:({timeStart:t})=>t.format("HH:mm")},{zoomTo:17,period:"hour",default:!0,format:({timeStart:t})=>t.format("HH")},{zoomTo:19,period:"day",className:"gstc-date-medium",format:({timeStart:t,className:e,vido:n})=>n.html`<span class="${e}-content gstc-date-bold">${t.format("DD")}</span> <span class="${e}-content gstc-date-thin">${t.format("dddd")}</span>`},{zoomTo:20,period:"day",default:!0,format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("dddd")}</div>`},{zoomTo:21,period:"day",format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("ddd")}</div>`},{zoomTo:22,period:"day",className:"gstc-date-vertical",format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("DD")}</div><div class="${e}-content gstc-date-extra-small">${t.format("ddd")}</div>`},{zoomTo:23,period:"week",default:!0,format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top">${t.format("DD")} - ${e.format("DD")}</div><div class="${n}-content gstc-date-small gstc-date-thin">${t.format("ddd")} - ${e.format("dd")}</div>`},{zoomTo:25,period:"week",className:"gstc-date-vertical",format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top gstc-date-small gstc-date-normal">${t.format("DD")}</div><div class="gstc-dash gstc-date-small">-</div><div class="${n}-content gstc-date-small gstc-date-normal">${e.format("DD")}</div>`},{zoomTo:26,period:"month",default:!0,className:"gstc-date-month-level-1",format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("MMM")}</div><div class="${n}-content gstc-date-small gstc-date-bottom">${t.format("MM")}</div>`},{zoomTo:27,period:"month",className:"gstc-date-vertical",format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("MM")}</div><div class="${e}-content gstc-date-extra-small">${t.format("MMM")}</div>`},{zoomTo:28,period:"year",default:!0,className:"gstc-date-big",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:29,period:"year",className:"gstc-date-medium",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:30,period:"year",className:"gstc-date-medium",format:({timeStart:t})=>t.format("YY")},{zoomTo:100,period:"year",default:!0,format:()=>null}]}]},grid:{block:{onCreate:[]}},items:{},spacing:1},slots:e,classNames:{},actions:t,locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}},utcMode:!1,usageStatistics:!0}}var ct=createCommonjsModule((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",o="day",s="week",r="month",a="quarter",l="year",h=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,u=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},p={s:c,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+c(i,2,"0")+":"+c(o,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,r),o=e-i<0,s=t.clone().add(n+(o?-1:1),r);return Number(-(n+(e-i)/(o?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:r,y:l,w:s,d:o,D:"date",h:i,m:n,s:e,ms:t,Q:a}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",v={};v[m]=f;var y=function(t){return t instanceof w},M=function(t,e,n){var i;if(!t)return m;if("string"==typeof t)v[t]&&(i=t),e&&(v[t]=e,i=t);else{var o=t.name;v[o]=t,i=o}return!n&&i&&(m=i),i||!n&&m},g=function(t,e,n){if(y(t))return t.clone();var i=e?"string"==typeof e?{format:e,pl:n}:e:{};return i.date=t,new w(i)},b=p;b.l=M,b.i=y,b.w=function(t,e){return g(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var p=c.prototype;return p.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(h);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(e)}(t),this.init()},p.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},p.$utils=function(){return b},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(t,e){var n=g(t);return this.startOf(e)<=n&&n<=this.endOf(e)},p.isAfter=function(t,e){return g(t)<this.startOf(e)},p.isBefore=function(t,e){return this.endOf(e)<g(t)},p.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},p.year=function(t){return this.$g(t,"$y",l)},p.month=function(t){return this.$g(t,"$M",r)},p.day=function(t){return this.$g(t,"$W",o)},p.date=function(t){return this.$g(t,"$D","date")},p.hour=function(t){return this.$g(t,"$H",i)},p.minute=function(t){return this.$g(t,"$m",n)},p.second=function(t){return this.$g(t,"$s",e)},p.millisecond=function(e){return this.$g(e,"$ms",t)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(t,a){var h=this,u=!!b.u(a)||a,p=b.p(t),d=function(t,e){var n=b.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return u?n:n.endOf(o)},$=function(t,e){return b.w(h.toDate()[t].apply(h.toDate(),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},f=this.$W,m=this.$M,v=this.$D,w="set"+(this.$u?"UTC":"");switch(p){case l:return u?d(1,0):d(31,11);case r:return u?d(1,m):d(0,m+1);case s:var _=this.$locale().weekStart||0,x=(f<_?f+7:f)-_;return d(u?v-x:v+(6-x),m);case o:case"date":return $(w+"Hours",0);case i:return $(w+"Minutes",1);case n:return $(w+"Seconds",2);case e:return $(w+"Milliseconds",3);default:return this.clone()}},p.endOf=function(t){return this.startOf(t,!1)},p.$set=function(s,a){var h,u=b.p(s),p="set"+(this.$u?"UTC":""),f=(h={},h[o]=p+"Date",h.date=p+"Date",h[r]=p+"Month",h[l]=p+"FullYear",h[i]=p+"Hours",h[n]=p+"Minutes",h[e]=p+"Seconds",h[t]=p+"Milliseconds",h)[u],m=u===o?this.$D+(a-this.$W):a;if(u===r||u===l){var v=this.clone().set("date",1);v.$d[f](m),v.init(),this.$d=v.set("date",Math.min(this.$D,v.daysInMonth())).toDate()}else f&&this.$d[f](m);return this.init(),this},p.set=function(t,e){return this.clone().$set(t,e)},p.get=function(t){return this[b.p(t)]()},p.add=function(t,a){var h,u=this;t=Number(t);var p=b.p(a),d=function(e){var n=g(u);return b.w(n.date(n.date()+Math.round(e*t)),u)};if(p===r)return this.set(r,this.$M+t);if(p===l)return this.set(l,this.$y+t);if(p===o)return d(1);if(p===s)return d(7);var f=(h={},h[n]=6e4,h[i]=36e5,h[e]=1e3,h)[p]||1,m=this.$d.getTime()+t*f;return b.w(m,this)},p.subtract=function(t,e){return this.add(-1*t,e)},p.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),o=this.$locale(),s=this.$H,r=this.$m,a=this.$M,l=o.weekdays,h=o.months,c=function(t,i,o,s){return t&&(t[i]||t(e,n))||o[i].substr(0,s)},d=function(t){return b.s(s%12||12,t,"0")},p=o.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:c(o.monthsShort,a,h,3),MMMM:h[a]||h(this,n),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:c(o.weekdaysMin,this.$W,l,2),ddd:c(o.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:b.s(s,2,"0"),h:d(1),hh:d(2),a:p(s,r,!0),A:p(s,r,!1),m:String(r),mm:b.s(r,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return n.replace(u,(function(t,e){return e||f[t]||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(t,h,u){var p,f=b.p(h),m=g(t),v=6e4*(m.utcOffset()-this.utcOffset()),w=this-m,_=b.m(this,m);return _=(p={},p[l]=_/12,p[r]=_,p[a]=_/3,p[s]=(w-v)/6048e5,p[o]=(w-v)/864e5,p[i]=w/36e5,p[n]=w/6e4,p[e]=w/1e3,p)[f]||w,u?_:b.a(_)},p.daysInMonth=function(){return this.endOf(r).$D},p.$locale=function(){return v[this.$L]},p.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=M(t,e,!0);return i&&(n.$L=i),n},p.clone=function(){return b.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=w.prototype,g.extend=function(t,e){return t(e,w,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=v[m],g.Ls=v,g}()})),ht=createCommonjsModule((function(t,e){t.exports=function(t,e,n){var i=(new Date).getTimezoneOffset(),o=e.prototype;n.utc=function(t,n){return new e({date:t,utc:!0,format:n})},o.utc=function(){return n(this.toDate(),{locale:this.$L,utc:!0})},o.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var r=o.init;o.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var a=o.utcOffset;o.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?a.call(this):this.$offset;var n,o=Math.abs(t)<=16?60*t:t;return 0!==t?(n=this.local().add(o+i,"minute")).$offset=o:n=this.utc(),n};var l=o.format;o.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},o.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+i;return this.$d.valueOf()-6e4*t},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()}}})),dt=createCommonjsModule((function(t,e){t.exports=function(t,e,n){var i=e.prototype,o=i.format;n.en.ordinal=function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"},i.format=function(t){var e=this,n=this.$locale(),i=this.$utils(),s=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|gggg|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return i.s(e.week(),"w"===t?1:2,"0");case"k":case"kk":return i.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();default:return t}}));return o.bind(this)(s)}}})),ut=createCommonjsModule((function(t,e){var n,i;t.exports=(n="week",i="year",function(t,e){var o=e.prototype;o.week=function(t){if(void 0===t&&(t=null),null!==t)return this.add(7*(t-this.week()),"day");var e=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var o=this.startOf(i).add(1,i).date(e),s=this.endOf(n);if(o.isBefore(s))return 1}var r=this.startOf(i).date(e).startOf(n).subtract(1,"millisecond"),a=this.diff(r,n,!0);return a<0?this.startOf("week").week():Math.ceil(a)},o.weeks=function(t){return void 0===t&&(t=null),this.week(t)}})}));ct.extend(dt),ct.extend(ut);class TimeApi{constructor(t){this.utcMode=!1,this.state=t,this.locale=t.get("config.locale"),this.utcMode=t.get("config.utcMode"),this.utcMode&&ct.extend(ht),ct.locale(this.locale,null,!0)}date(t){const e=this.utcMode?ct.utc:ct;return t?e(t).locale(this.locale.name):e().locale(this.locale.name)}addAdditionalSpace(t){if(t.additionalSpaces&&t.additionalSpaces[t.period]){const e=t.additionalSpaces[t.period];e.before&&(t.finalFrom=this.date(t.from).subtract(e.before,e.period).valueOf()),e.after&&(t.finalTo=this.date(t.to).add(e.after,e.period).valueOf())}return t}recalculateFromTo(t){const e=t.period;(t=Object.assign({},t)).from=+t.from,t.to=+t.to;let n=Number.MAX_SAFE_INTEGER,i=0;const o=this.state.get("config.chart.items");if(Object.keys(o).length>0&&(0===t.from||0===t.to)){for(const t in o){const e=o[t];e.time.start<n&&e.time.start&&(n=e.time.start),e.time.end>i&&(i=e.time.end)}0===t.from&&(t.from=this.date(n).startOf(e).valueOf()),0===t.to&&(t.to=this.date(i).endOf(e).valueOf())}return t.finalFrom=t.fromDate.startOf(e).valueOf(),t.finalTo=t.toDate.startOf(e).valueOf(),t=this.addAdditionalSpace(t)}getCenter(t){return t.leftGlobal+(t.rightGlobal-t.leftGlobal)/2}getOffsetPxFromDates(t,e,n,i){const o=t.valueOf();let s;for(let t=0,n=e.length;t<n;t++){if(e[t].rightGlobal>=o){s=e[t];break}}if(s){let e=o-s.leftGlobal;const r=Math.floor(s.leftGlobalDate.startOf(n).diff(t.startOf(n),n,!0));r&&(e=t.add(r,n).valueOf()-s.leftGlobal);const a=Math.round(e/i.timePerPixel);return s.currentView.leftPx+a}return t.valueOf()<i.leftGlobal?0:i.width}findDateAtOffsetPx(t,e){return e.find(e=>e.leftPx>=t)}findDateAtTime(t,e){return e.find(e=>e.rightGlobal>=t)}calculateScrollPosPxFromTime(t,e,n){if(n||(n=this.state.get("config.scroll.horizontal")),!n.maxPosPx)return 0;e||(e=this.state.get("_internal.chart.time"));const i=this.findDateAtTime(t,e.allDates[e.level]);return Math.round(n.maxPosPx*i.leftPercent)}getDatesDiffPx(t,e,n,i=!0){if(t===e&&i)return 0;let o=0,s=!1,r=!1;if(e<t){const n=t;t=e,e=n,r=!0}for(const i of n){if(i.leftGlobal>=t&&(s=!0),i.rightGlobal>=e)break;s&&(o+=i.width)}return r?-o:o}}function Matcher(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let n=0,i=t.length;n<i;n+=1){const i=t[n];i===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(i),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}function WildcardObject(t,e,n){this.obj=t,this.delimeter=e,this.wildcard=n}Matcher.prototype.match=function match(match){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===match;const{length:t}=match;if(t<this.minLength||t>this.maxLength)return!1;let e=this.segments.length-1,n=match.length-1,i=!1;for(;;){const t=this.segments[e];if(e-=1,t===this.wchar)i=!0;else{const e=n+1-t.length,o=match.lastIndexOf(t,e);if(-1===o||o>e)return!1;if(i)n=o-1,i=!1;else{if(o!==e)return!1;n-=t.length}}if(0>e)break}return!0},WildcardObject.prototype.simpleMatch=function simpleMatch(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const n=t.indexOf(this.wildcard);if(n>-1){const i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){const t=i.length;return!(t>0)||e.substr(-t)===i}}return!1},WildcardObject.prototype.match=function match(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new Matcher(t).match(e)},WildcardObject.prototype.handleArray=function handleArray(t,e,n,i,o={}){let s=t.indexOf(this.delimeter,n),r=!1;-1===s&&(r=!0,s=t.length);const a=t.substring(n,s);let l=0;for(const n of e){const e=l.toString(),h=""===i?e:i+this.delimeter+l;(a===this.wildcard||a===e||this.simpleMatch(a,e))&&(r?o[h]=n:this.goFurther(t,n,s+1,h,o)),l++}return o},WildcardObject.prototype.handleObject=function handleObject(t,e,n,i,o={}){let s=t.indexOf(this.delimeter,n),r=!1;-1===s&&(r=!0,s=t.length);const a=t.substring(n,s);for(let n in e){n=n.toString();const l=""===i?n:i+this.delimeter+n;(a===this.wildcard||a===n||this.simpleMatch(a,n))&&(r?o[l]=e[n]:this.goFurther(t,e[n],s+1,l,o))}return o},WildcardObject.prototype.goFurther=function goFurther(t,e,n,i,o={}){return Array.isArray(e)?this.handleArray(t,e,n,i,o):this.handleObject(t,e,n,i,o)},WildcardObject.prototype.get=function get(t){return this.goFurther(t,this.obj,0,"")};class ObjectPath{static get(t,e,n=null){if(null===n&&(n=t.slice()),0===n.length||void 0===e)return e;const i=n.shift();return e.hasOwnProperty(i)?0===n.length?e[i]:ObjectPath.get(t,e[i],n):void 0}static set(t,e,n,i=null){if(null===i&&(i=t.slice()),0===i.length){for(const t in n)delete n[t];for(const t in e)n[t]=e[t];return}const o=i.shift();0!==i.length?(n||(n={}),n.hasOwnProperty(o)||(n[o]={}),ObjectPath.set(t,e,n[o],i)):n[o]=e}}const pt={delimeter:".",notRecursive:";",param:":",wildcard:"*",log:function log(t,e){console.debug(t,e)}},ft={bulk:!1,debug:!1,source:"",data:void 0},mt={only:[],source:"",debug:!1,data:void 0,updateAfter:!1};class DeepState{constructor(t={},e=pt){this.listeners=new Map,this.waitingListeners=new Map,this.data=t,this.options=Object.assign(Object.assign({},pt),e),this.id=0,this.pathGet=ObjectPath.get,this.pathSet=ObjectPath.set,this.scan=new WildcardObject(this.data,this.options.delimeter,this.options.wildcard)}getListeners(){return this.listeners}destroy(){this.data=void 0,this.listeners=new Map}match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))}getIndicesOf(t,e){const n=t.length;if(0==n)return[];let i,o=0,s=[];for(;(i=e.indexOf(t,o))>-1;)s.push(i),o=i+n;return s}getIndicesCount(t,e){const n=t.length;if(0==n)return 0;let i,o=0,s=0;for(;(i=e.indexOf(t,o))>-1;)s++,o=i+n;return s}cutPath(t,e){t=this.cleanNotRecursivePath(t),e=this.cleanNotRecursivePath(e);const n=this.getIndicesCount(this.options.delimeter,e),i=this.getIndicesOf(this.options.delimeter,t);return t.substr(0,i[n])}trimPath(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimeter?t.substr(1):t}split(t){return""===t?[]:t.split(this.options.delimeter)}isWildcard(t){return t.includes(this.options.wildcard)}isNotRecursive(t){return t.endsWith(this.options.notRecursive)}cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t}hasParams(t){return t.includes(this.options.param)}getParamsInfo(t){let e={replaced:"",original:t,params:{}},n=0,i=[];for(const o of this.split(t)){e.params[n]={original:o,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let s=t.exec(o);s?(e.params[n].name=s[1],t.lastIndex=0,e.params[n].replaced=o.replace(t,this.options.wildcard),i.push(e.params[n].replaced),n++):(delete e.params[n],i.push(o),n++)}return e.replaced=i.join(this.options.delimeter),e}getParams(t,e){if(!t)return;const n=this.split(e),i={};for(const e in t.params){i[t.params[e].name]=n[e]}return i}waitForAll(t,e){const n={};for(let e of t)n[e]={dirty:!1},this.hasParams(e)&&(n[e].paramsInfo=this.getParamsInfo(e)),n[e].isWildcard=this.isWildcard(e),n[e].isRecursive=!this.isNotRecursive(e);return this.waitingListeners.set(t,{fn:e,paths:n}),e(n),function unsubscribe(){this.waitingListeners.delete(t)}}executeWaitingListeners(t){for(const e of this.waitingListeners.values()){const{fn:n,paths:i}=e;let o=0,s=0;for(let e in i){const n=i[e];let r=!1;n.isRecursive&&(t=this.cutPath(t,e)),n.isWildcard&&this.match(e,t)&&(r=!0),t===e&&(r=!0),r&&(n.dirty=!0),n.dirty&&o++,s++}o===s&&n(i)}}subscribeAll(t,e,n=ft){let i=[];for(const o of t)i.push(this.subscribe(o,e,n));return function unsubscribe(){for(const t of i)t()}}getCleanListenersCollection(t={}){return Object.assign({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)}getCleanListener(t,e=ft){return{fn:t,options:Object.assign(Object.assign({},ft),e)}}getListenerCollectionMatch(t,e,n){t=this.cleanNotRecursivePath(t);const i=this;return function listenerCollectionMatch(o){return e&&(o=i.cutPath(o,t)),!(!n||!i.match(t,o))||t===o}}getListenersCollection(t,e){if(this.listeners.has(t)){let n=this.listeners.get(t);return n.listeners.set(++this.id,e),n}let n={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(n.path)&&(n.paramsInfo=this.getParamsInfo(n.path),n.path=n.paramsInfo.replaced,n.hasParams=!0),n.isWildcard=this.isWildcard(n.path),this.isNotRecursive(n.path)&&(n.isRecursive=!1);let i=this.getCleanListenersCollection(Object.assign(Object.assign({},n),{match:this.getListenerCollectionMatch(n.path,n.isRecursive,n.isWildcard)}));return this.id++,i.listeners.set(this.id,e),this.listeners.set(n.path,i),i}subscribe(t,e,n=ft,i="subscribe"){let o=this.getCleanListener(e,n);const s=this.getListenersCollection(t,o);if(s.count++,t=s.path,s.isWildcard){const r=this.scan.get(this.cleanNotRecursivePath(t));if(n.bulk){const a=[];for(const t in r)a.push({path:t,params:this.getParams(s.paramsInfo,t),value:r[t]});e(a,{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(const a in r)e(r[a],{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(a)},params:this.getParams(s.paramsInfo,a),options:n})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(s.paramsInfo,t),options:n});return this.debugSubscribe(o,s,t),this.unsubscribe(t,this.id)}unsubscribe(t,e){const n=this.listeners,i=n.get(t);return function unsub(){i.listeners.delete(e),i.count--,0===i.count&&n.delete(t)}}same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t}notifyListeners(t,e=[],n=!0){const i=[];for(const o in t){let{single:s,bulk:r}=t[o];for(const t of s){if(e.includes(t))continue;const o=this.debugTime(t);t.listener.fn(t.value(),t.eventInfo),n&&i.push(t),this.debugListener(o,t)}for(const t of r){if(e.includes(t))continue;const o=this.debugTime(t),s=[];for(const e of t.value)s.push(Object.assign(Object.assign({},e),{value:e.value()}));t.listener.fn(s,t.eventInfo),n&&i.push(t),this.debugListener(o,t)}}return i}getSubscribedListeners(t,e,n,i="update",o=null){n=Object.assign(Object.assign({},mt),n);const s={};for(let[r,a]of this.listeners)if(s[r]={single:[],bulk:[],bulkData:[]},a.match(t)){const l=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,h=a.isRecursive||a.isWildcard?()=>this.get(this.cutPath(t,r)):()=>e,u=[{value:h,path:t,params:l}];for(const e of a.listeners.values())e.options.bulk?s[r].bulk.push({listener:e,listenersCollection:a,eventInfo:{type:i,listener:e,path:{listener:r,update:o||t,resolved:void 0},params:l,options:n},value:u}):s[r].single.push({listener:e,listenersCollection:a,eventInfo:{type:i,listener:e,path:{listener:r,update:o||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:n},value:h})}return s}notifySubscribedListeners(t,e,n,i="update",o=null){return this.notifyListeners(this.getSubscribedListeners(t,e,n,i,o))}getNestedListeners(t,e,n,i="update",o=null){const s={};for(let[r,a]of this.listeners){s[r]={single:[],bulk:[]};const l=this.cutPath(r,t);if(this.match(l,t)){const h=this.trimPath(r.substr(l.length)),u=new WildcardObject(e,this.options.delimeter,this.options.wildcard).get(h),p=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,f=[],m={};for(const e in u){const value=()=>u[e],l=[t,e].join(this.options.delimeter);for(const[e,h]of a.listeners){const u={type:i,listener:h,listenersCollection:a,path:{listener:r,update:o||t,resolved:this.cleanNotRecursivePath(l)},params:p,options:n};h.options.bulk?(f.push({value:value,path:l,params:p}),m[e]=h):s[r].single.push({listener:h,listenersCollection:a,eventInfo:u,value:value})}}for(const e in m){const o=m[e],l={type:i,listener:o,listenersCollection:a,path:{listener:r,update:t,resolved:void 0},options:n,params:p};s[r].bulk.push({listener:o,listenersCollection:a,eventInfo:l,value:f})}}}return s}notifyNestedListeners(t,e,n,i="update",o,s=null){return this.notifyListeners(this.getNestedListeners(t,e,n,i,s),o,!1)}getNotifyOnlyListeners(t,e,n,i="update",o=null){const s={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return s;for(const r of n.only){const a=new WildcardObject(e,this.options.delimeter,this.options.wildcard).get(r);s[r]={bulk:[],single:[]};for(const e in a){const l=t+this.options.delimeter+e;for(const[h,u]of this.listeners){const p=u.paramsInfo?this.getParams(u.paramsInfo,l):void 0;if(this.match(h,l)){const value=()=>a[e],f=[{value:value,path:l,params:p}];for(const e of u.listeners.values()){const a={type:i,listener:e,listenersCollection:u,path:{listener:h,update:o||t,resolved:this.cleanNotRecursivePath(l)},params:p,options:n};e.options.bulk?s[r].bulk.some(t=>t.listener===e)||s[r].bulk.push({listener:e,listenersCollection:u,eventInfo:a,value:f}):s[r].single.push({listener:e,listenersCollection:u,eventInfo:a,value:value})}}}}}return s}notifyOnly(t,e,n,i="update",o=""){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,n,i,o))[0]}canBeNested(t){return"object"==typeof t&&null!==t}getUpdateValues(t,e,n){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}}wildcardUpdate(t,e,n=mt){n=Object.assign(Object.assign({},mt),n);const i=this.scan.get(t),o={};for(const t in i){const n=this.split(t),{oldValue:s,newValue:r}=this.getUpdateValues(i[t],n,e);this.same(r,s)||(o[t]=r)}const s=[],r=[];for(const e in o){const i=o[e];n.only.length?s.push(this.getNotifyOnlyListeners(e,i,n,"update",t)):(s.push(this.getSubscribedListeners(e,i,n,"update",t)),this.canBeNested(i)&&s.push(this.getNestedListeners(e,i,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:e,newValue:i}),this.pathSet(this.split(e),i,this.data),r.push(e)}let a=[];for(const t of s)a=[...a,...this.notifyListeners(t,a)];for(const t of r)this.executeWaitingListeners(t)}update(t,e,n=mt){if(this.isWildcard(t))return this.wildcardUpdate(t,e,n);const i=this.split(t),{oldValue:o,newValue:s}=this.getUpdateValues(this.pathGet(i,this.data),i,e);if(n.debug&&this.options.log(`Updating ${t} ${n.source?`from ${n.source}`:""}`,{oldValue:o,newValue:s}),this.same(s,o))return s;if(n.updateAfter||this.pathSet(i,s,this.data),null===(n=Object.assign(Object.assign({},mt),n)).only)return s;if(n.only.length)return this.notifyOnly(t,s,n),this.executeWaitingListeners(t),s;const r=this.notifySubscribedListeners(t,s,n);return this.canBeNested(s)&&this.notifyNestedListeners(t,s,n,"update",r),this.executeWaitingListeners(t),n.updateAfter&&this.pathSet(i,s,this.data),s}get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)}debugSubscribe(t,e,n){t.options.debug&&this.options.log("listener subscribed",{listenerPath:n,listener:t,listenersCollection:e})}debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})}debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0}}function isObject$1(t){return t&&"object"==typeof t&&!Array.isArray(t)}function mergeDeep$1(t,...e){const n=e.shift();if(isObject$1(t)&&isObject$1(n))for(const e in n)if(isObject$1(n[e]))void 0===t[e]&&(t[e]={}),t[e]=mergeDeep$1(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])isObject$1(i)?t[e].push(mergeDeep$1({},i)):t[e].push(i)}else t[e]=n[e];return e.length?mergeDeep$1(t,...e):t}const gt="gantt-schedule-timeline-calendar";const vt={name:gt,stateFromConfig:function stateFromConfig(t){const e=defaultConfig(),n=function mergeActions(t,e){const n=mergeDeep$1({},e.actions),i=mergeDeep$1({},t.actions);let o=[...Object.keys(n),...Object.keys(i)];o=o.filter(t=>o.includes(t));const s={};for(const t of o)s[t]=[],void 0!==n[t]&&Array.isArray(n[t])&&(s[t]=[...n[t]]),void 0!==i[t]&&Array.isArray(i[t])&&(s[t]=[...s[t],...i[t]]);return delete t.actions,delete e.actions,s}(t,e),i={config:mergeDeep$1({},e,t)};return i.config.actions=n,this.state=new DeepState(i,{delimeter:"."})},mergeDeep:mergeDeep$1,date:t=>t?ct(t):ct(),setPeriod(t){return this.state.update("config.chart.time.period",t),this.state.get("config.chart.time.zoom")},dayjs:ct};function GSTC(t){const e=t.state,n=function getInternalApi(t){let e=t.get(),n=[];const i={},o={name:gt,debug:!1,setVido(t){},log(...t){this.debug&&console.log.call(console,...t)},mergeDeep:mergeDeep$1,getClass(t){let e=`${gt}__${t}`;return t===this.name&&(e=this.name),e},allActions:[],getActions(e){this.allActions.includes(e)||this.allActions.push(e);let n=t.get("config.actions."+e);return void 0===n&&(n=[]),n.slice()},isItemInViewport:(t,e,n)=>t.time.start>=e&&t.time.start<n||t.time.end>=e&&t.time.end<n||t.time.start<=e&&t.time.end>=n,prepareItems(t){for(const e of t)e.time.start=+e.time.start,e.time.end=+e.time.end,e.id=String(e.id);return t},fillEmptyRowValues(t){let n=0;for(const i in t){const o=t[i];o._internal={parents:[],children:[],items:[]},"number"!=typeof o.height&&(o.height=e.config.list.rowHeight),"boolean"!=typeof o.expanded&&(o.expanded=!1),o.top=n,n+=o.height}return t},generateParents(t,e="parentId"){const n={};for(const i of t){const t=void 0!==i[e]&&null!==i[e]?i[e]:"";void 0===n[t]&&(n[t]={}),n[t][i.id]=i}return n},fastTree(t,e,n=[]){const i=t[e.id];if(e._internal.parents=n,void 0===i)return e._internal.children=[],e;""!==e.id&&(n=[...n,e.id]),e._internal.children=Object.values(i);for(const e in i){const o=i[e];this.fastTree(t,o,n)}return e},makeTreeMap(t,e){const n=this.generateParents(e,"rowId");for(const e of t)e._internal.items=void 0!==n[e.id]?Object.values(n[e.id]):[];const i=this.generateParents(t);return this.fastTree(i,{id:"",_internal:{children:[],parents:[],items:[]}})},getFlatTreeMapById(t,e={}){for(const n of t._internal.children)e[n.id]=n,this.getFlatTreeMapById(n,e);return e},flattenTreeMap(t,e=[]){for(const n of t._internal.children)e.push(n.id),this.flattenTreeMap(n,e);return e},getRowsFromMap:(t,e)=>t.map(t=>e[t.id]),getRowsFromIds(t,e){const n=[];for(const i of t)n.push(e[i]);return n},getRowsWithParentsExpanded(t,e,n){if(!t||!e||!n||0===t.length||0===e.length||0===Object.keys(n).length)return[];const i=[];t:for(const o of t){for(const t of e[o]._internal.parents){const e=n[t];if(!e||!e.expanded)continue t}i.push(o)}return i},getRowsHeight(t){let e=0;for(const n of t)n&&(e+=n.height);return e},getVisibleRows(e){if(0===e.length)return[];const n=[];let i=t.get("config.scroll.vertical.data");i||(i=e[0]);const o=t.get("_internal.innerHeight");let s=e.find(t=>t.id===i.id),r=e.indexOf(s);if(void 0===r)return[];let a=0;for(let t=e.length;r<=t;r++){const t=e[r];if(void 0!==t&&(a<=o&&(t.top=a,n.push(t)),a+=t.height,a>=o))break}return n},normalizeMouseWheelEvent(e){let n=e.deltaX||0,i=e.deltaY||0,o=e.deltaZ||0;const s=e.deltaMode,r=t.get("config.list.rowHeight");let a=1;switch(s){case 1:r&&(a=r);break;case 2:a=window.height}return n*=a,i*=a,o*=a,{x:n,y:i,z:o,event:e}},normalizePointerEvent(t){const e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e},limitScrollLeft(t,e,n){const i=t-e;return n<0?n=0:n>i&&(n=i),Math.round(n)},limitScrollTop(t,e,n){const i=t-e;return n<0?n=0:n>i&&(n=i),Math.round(n)},time:new TimeApi(t),scrollToTime(e,n=!0){const i=t.get("_internal.chart.time");t.update("config.scroll.horizontal",o=>{let s=e;if(n){const n=t.get("_internal.chart.dimensions.width")/2*i.timePerPixel;s=e-n}return o.data=this.time.findDateAtTime(s,i.allDates[i.level]),o.posPx=this.time.calculateScrollPosPxFromTime(o.data.leftGlobal,i,o),o})},getSVGIconSrc:t=>"string"==typeof i[t]?i[t]:(i[t]="data:image/svg+xml;base64,"+btoa(t),i[t]),destroy(){e=void 0;for(const t of n)t();n=[],o.debug&&delete window.state}};return o.debug&&(window.state=t,window.api=o),o}(e),i={components:{Main:Main},height:0,treeMap:{},flatTreeMap:[],flatTreeMapById:{},list:{expandedHeight:0,visibleRows:[],rows:{},width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0},visibleItems:[],time:{levels:[],timePerPixel:0,firstTaskTime:0,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0,maxWidth:{}}},elements:{},cache:{calendar:{}},loaded:{}};"boolean"==typeof t.debug&&t.debug&&(window.state=e),e.update("",t=>({config:t.config,_internal:i}));const o=new Vido(e,n);n.setVido(o);const s=o.createApp({component:Main,props:{},element:t.element});return{state:e,app:s,api:s.vidoInstance.api}}return GSTC.api=vt,GSTC}));
