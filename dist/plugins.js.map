{"version":3,"file":"plugins.js","sources":["../src/plugins/ItemHold.plugin.ts","../src/plugins/ItemMovement.plugin.ts","../src/plugins/SaveAsImage.plugin.ts","../src/plugins/Selection.plugin.ts","../src/plugins/CalendarScroll.plugin.ts","../src/plugins/plugins.ts"],"sourcesContent":["/**\n * ItemHold plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport interface Options {\n  time?: number;\n  movementThreshold?: number;\n  action?: (element: HTMLElement, data: any) => void;\n}\n\nexport default function ItemHold(options: Options = {}) {\n  let api;\n  const defaultOptions = {\n    time: 1000,\n    movementThreshold: 2,\n    action(element, data) {}\n  };\n  options = { ...defaultOptions, ...options };\n\n  const holding = {};\n  const pointer = { x: 0, y: 0 };\n\n  function onPointerDown(item, element, event) {\n    if (typeof holding[item.id] === 'undefined') {\n      const normalized = api.normalizePointerEvent(event);\n      holding[item.id] = { x: normalized.x, y: normalized.y };\n      event.stopPropagation();\n      event.preventDefault();\n      setTimeout(() => {\n        if (typeof holding[item.id] !== 'undefined') {\n          let exec = true;\n          const xMovement = Math.abs(holding[item.id].x - pointer.x);\n          const yMovement = Math.abs(holding[item.id].y - pointer.y);\n          if (xMovement > options.movementThreshold) {\n            exec = false;\n          }\n          if (yMovement > options.movementThreshold) {\n            exec = false;\n          }\n          delete holding[item.id];\n          if (exec) {\n            options.action(element, item);\n          }\n        }\n      }, options.time);\n    }\n  }\n\n  function onPointerUp(itemId) {\n    if (typeof holding[itemId] !== 'undefined') {\n      delete holding[itemId];\n    }\n  }\n\n  function action(element, data) {\n    function elementPointerDown(event) {\n      onPointerDown(data.item, element, event);\n    }\n    element.addEventListener('mousedown', elementPointerDown);\n    element.addEventListener('touchstart', elementPointerDown);\n    function pointerUp() {\n      onPointerUp(data.item.id);\n    }\n\n    document.addEventListener('mouseup', pointerUp);\n    document.addEventListener('touchend', pointerUp);\n    function onPointerMove(event) {\n      const normalized = api.normalizePointerEvent(event);\n      pointer.x = normalized.x;\n      pointer.y = normalized.y;\n    }\n\n    document.addEventListener('mousemove', onPointerMove);\n    document.addEventListener('touchmove', onPointerMove);\n    return {\n      update(element, changedData) {\n        data = changedData;\n      },\n      destroy(element, data) {\n        document.removeEventListener('mouseup', onPointerUp);\n        document.removeEventListener('mousemove', onPointerMove);\n        element.removeEventListener('mousedown', elementPointerDown);\n        document.removeEventListener('touchend', onPointerUp);\n        document.removeEventListener('touchmove', onPointerMove);\n        element.removeEventListener('touchstart', elementPointerDown);\n      }\n    };\n  }\n\n  return function initialize(vido) {\n    api = vido.api;\n    vido.state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n","/**\n * ItemMovement plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport interface Options {\n  moveable?: boolean | string;\n  resizeable?: boolean | string;\n  resizerContent?: string;\n  collisionDetection?: boolean;\n  outOfBorders?: boolean;\n  snapStart?: (timeStart: number, startDiff: number, item: object) => number;\n  snapEnd?: (timeEnd: number, endDiff: number, item: object) => number;\n  ghostNode?: boolean;\n}\n\nexport default function ItemMovement(options: Options = {}) {\n  const defaultOptions = {\n    moveable: true,\n    resizeable: true,\n    resizerContent: '',\n    collisionDetection: true,\n    outOfBorders: false,\n    snapStart(timeStart, startDiff) {\n      return timeStart + startDiff;\n    },\n    snapEnd(timeEnd, endDiff) {\n      return timeEnd + endDiff;\n    },\n    ghostNode: true\n  };\n  options = { ...defaultOptions, ...options };\n\n  const movementState = {};\n\n  /**\n   * Add moving functionality to items as action\n   *\n   * @param {HTMLElement} node DOM Node\n   * @param {Object} data\n   */\n  function action(element: HTMLElement, data) {\n    if (!options.moveable && !options.resizeable) {\n      return;\n    }\n    let state;\n    let api;\n\n    function isMoveable(data) {\n      let moveable = options.moveable;\n      if (data.item.hasOwnProperty('moveable') && moveable) {\n        moveable = data.item.moveable;\n      }\n      if (data.row.hasOwnProperty('moveable') && moveable) {\n        moveable = data.row.moveable;\n      }\n      return moveable;\n    }\n\n    function isResizeable(data) {\n      let resizeable = options.resizeable && (!data.item.hasOwnProperty('resizeable') || data.item.resizeable === true);\n      if (data.row.hasOwnProperty('resizeable') && resizeable) {\n        resizeable = data.row.resizeable;\n      }\n      return resizeable;\n    }\n\n    function getMovement(data) {\n      const itemId = data.item.id;\n      if (typeof movementState[itemId] === 'undefined') {\n        movementState[itemId] = { moving: false, resizing: false };\n      }\n      return movementState[itemId];\n    }\n\n    function createGhost(data, ev, ganttLeft, ganttTop) {\n      const movement = getMovement(data);\n      if (!options.ghostNode || typeof movement.ghost !== 'undefined') {\n        return;\n      }\n      const ghost = element.cloneNode(true) as HTMLElement;\n      const style = getComputedStyle(element);\n      const compensation = state.get('config.scroll.compensation');\n      ghost.style.position = 'absolute';\n      ghost.style.left = ev.x - ganttLeft - movement.itemLeftCompensation + 'px';\n      const itemTop = ev.y - ganttTop - element.offsetTop - compensation + parseInt(style['margin-top']);\n      movement.itemTop = itemTop;\n      ghost.style.top = ev.y - ganttTop - itemTop + 'px';\n      ghost.style.width = style.width;\n      ghost.style['box-shadow'] = '10px 10px 6px #00000020';\n      const height = element.clientHeight + 'px';\n      ghost.style.height = height;\n      ghost.style['line-height'] = element.clientHeight - 18 + 'px';\n      ghost.style.opacity = '0.6';\n      ghost.style.transform = 'scale(1.05, 1.05)';\n      state.get('_internal.elements.chart-timeline').appendChild(ghost);\n      movement.ghost = ghost;\n      return ghost;\n    }\n\n    function moveGhost(data, ev) {\n      if (options.ghostNode) {\n        const movement = getMovement(data);\n        const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n        movement.ghost.style.left = left + 'px';\n        movement.ghost.style.top =\n          ev.y - movement.ganttTop - movement.itemTop + parseInt(getComputedStyle(element)['margin-top']) + 'px';\n      }\n    }\n\n    function destroyGhost(itemId) {\n      if (!options.ghostNode) {\n        return;\n      }\n      if (typeof movementState[itemId] !== 'undefined' && typeof movementState[itemId].ghost !== 'undefined') {\n        state.get('_internal.elements.chart-timeline').removeChild(movementState[itemId].ghost);\n        delete movementState[itemId].ghost;\n      }\n    }\n\n    function getSnapStart(data) {\n      let snapStart = options.snapStart;\n      if (typeof data.item.snapStart === 'function') {\n        snapStart = data.item.snapStart;\n      }\n      return snapStart;\n    }\n\n    function getSnapEnd(data) {\n      let snapEnd = options.snapEnd;\n      if (typeof data.item.snapEnd === 'function') {\n        snapEnd = data.item.snapEnd;\n      }\n      return snapEnd;\n    }\n\n    state = data.state;\n    api = data.api;\n\n    const resizerHTML = `<div class=\"${api.getClass('chart-timeline-items-row-item-resizer')}\">${\n      options.resizerContent\n    }</div>`;\n    // @ts-ignore\n    element.insertAdjacentHTML('beforeend', resizerHTML);\n    const resizerEl = element.querySelector(\n      '.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-resizer'\n    ) as HTMLElement;\n    if (!isResizeable(data)) {\n      resizerEl.style.visibility = 'hidden';\n    } else {\n      resizerEl.style.visibility = 'visible';\n    }\n\n    function labelMouseDown(ev) {\n      ev.stopPropagation();\n      if (ev.button !== 0) {\n        return;\n      }\n      const movement = getMovement(data);\n      movement.moving = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.chart-timeline').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = Math.round((item.time.start - chartLeftTime) / timePerPixel);\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n      createGhost(data, ev, ganttRect.left, ganttRect.top);\n    }\n\n    function resizerMouseDown(ev) {\n      ev.stopPropagation();\n      if (ev.button !== 0) {\n        return;\n      }\n      const movement = getMovement(data);\n      movement.resizing = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.chart-timeline').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = (item.time.end - chartLeftTime) / timePerPixel;\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n    }\n\n    function isCollision(rowId, itemId, start, end) {\n      if (!options.collisionDetection) {\n        return false;\n      }\n      const time = state.get('_internal.chart.time');\n      if (options.outOfBorders && (start < time.from || end > time.to)) {\n        return true;\n      }\n      let diff = api.time.date(end).diff(start, 'milliseconds');\n      if (Math.sign(diff) === -1) {\n        diff = -diff;\n      }\n      if (diff <= 1) {\n        return true;\n      }\n      const row = state.get('config.list.rows.' + rowId);\n      for (const rowItem of row._internal.items) {\n        if (rowItem.id !== itemId) {\n          if (start >= rowItem.time.start && start <= rowItem.time.end) {\n            return true;\n          }\n          if (end >= rowItem.time.start && end <= rowItem.time.end) {\n            return true;\n          }\n          if (start <= rowItem.time.start && end >= rowItem.time.end) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    function movementX(ev, row, item, zoom, timePerPixel) {\n      const movement = getMovement(data);\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      moveGhost(data, ev);\n      const leftMs = state.get('_internal.chart.time.leftGlobal') + left * timePerPixel;\n      const add = leftMs - item.time.start;\n      const originalStart = item.time.start;\n      const finalStartTime = getSnapStart(data)(item.time.start, add, item);\n      const finalAdd = finalStartTime - originalStart;\n      const collision = isCollision(row.id, item.id, item.time.start + finalAdd, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, function moveItem(time) {\n          time.start += finalAdd;\n          time.end = getSnapEnd(data)(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function resizeX(ev, row, item, zoom, timePerPixel) {\n      if (!isResizeable(data)) {\n        return;\n      }\n      const time = state.get('_internal.chart.time');\n      const movement = getMovement(data);\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      const leftMs = time.leftGlobal + left * timePerPixel;\n      const add = leftMs - item.time.end;\n      if (item.time.end + add < item.time.start) {\n        return;\n      }\n      const originalEnd = item.time.end;\n      const finalEndTime = getSnapEnd(data)(item.time.end, add, item) - 1;\n      const finalAdd = finalEndTime - originalEnd;\n      const collision = isCollision(row.id, item.id, item.time.start, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, time => {\n          time.start = getSnapStart(data)(time.start, 0, item);\n          time.end = getSnapEnd(data)(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function movementY(ev, row, item, zoom, timePerPixel) {\n      moveGhost(data, ev);\n      const movement = getMovement(data);\n      const top = ev.y - movement.ganttTop;\n      const visibleRows = state.get('_internal.list.visibleRows');\n      const compensation = state.get('config.scroll.compensation');\n      let index = 0;\n      for (const currentRow of visibleRows) {\n        if (currentRow.top + compensation > top) {\n          if (index > 0) {\n            return index - 1;\n          }\n          return 0;\n        }\n        index++;\n      }\n      return index;\n    }\n\n    function documentMouseMove(ev) {\n      const movement = getMovement(data);\n      let item, rowId, row, zoom, timePerPixel;\n      if (movement.moving || movement.resizing) {\n        item = state.get(`config.chart.items.${data.item.id}`);\n        rowId = state.get(`config.chart.items.${data.item.id}.rowId`);\n        row = state.get(`config.list.rows.${rowId}`);\n        zoom = state.get('config.chart.time.zoom');\n        timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      }\n      const moveable = isMoveable(data);\n      if (movement.moving) {\n        if (moveable === true || moveable === 'x' || (Array.isArray(moveable) && moveable.includes(rowId))) {\n          movementX(ev, row, item, zoom, timePerPixel);\n        }\n        if (!moveable || moveable === 'x') {\n          return;\n        }\n        let visibleRowsIndex = movementY(ev, row, item, zoom, timePerPixel);\n        const visibleRows = state.get('_internal.list.visibleRows');\n        if (typeof visibleRows[visibleRowsIndex] === 'undefined') {\n          if (visibleRowsIndex > 0) {\n            visibleRowsIndex = visibleRows.length - 1;\n          } else if (visibleRowsIndex < 0) {\n            visibleRowsIndex = 0;\n          }\n        }\n        const newRow = visibleRows[visibleRowsIndex];\n        const newRowId = newRow.id;\n        const collision = isCollision(newRowId, item.id, item.time.start, item.time.end);\n        if (newRowId !== item.rowId && !collision) {\n          if (!Array.isArray(moveable) || moveable.includes(newRowId)) {\n            if (!newRow.hasOwnProperty('moveable') || newRow.moveable) {\n              state.update(`config.chart.items.${item.id}.rowId`, newRowId);\n            }\n          }\n        }\n      } else if (movement.resizing && (typeof item.resizeable === 'undefined' || item.resizeable === true)) {\n        resizeX(ev, row, item, zoom, timePerPixel);\n      }\n    }\n\n    function documentMouseUp(ev) {\n      const movement = getMovement(data);\n      if (movement.moving || movement.resizing) {\n        ev.stopPropagation();\n      }\n      movement.moving = false;\n      movement.resizing = false;\n      for (const itemId in movementState) {\n        movementState[itemId].moving = false;\n        movementState[itemId].resizing = false;\n        destroyGhost(itemId);\n      }\n    }\n    element.addEventListener('mousedown', labelMouseDown);\n    resizerEl.addEventListener('mousedown', resizerMouseDown, { capture: true });\n    document.addEventListener('mousemove', documentMouseMove, { capture: true, passive: true });\n    document.addEventListener('mouseup', documentMouseUp, { capture: true, passive: true });\n\n    return {\n      update(node, changedData) {\n        if (!isResizeable(data) && resizerEl.style.visibility === 'visible') {\n          resizerEl.style.visibility = 'hidden';\n        } else if (isResizeable(data) && resizerEl.style.visibility === 'hidden') {\n          resizerEl.style.visibility = 'visible';\n        }\n      },\n      destroy(node, data) {\n        element.removeEventListener('mousedown', labelMouseDown);\n        resizerEl.removeEventListener('mousedown', resizerMouseDown);\n        document.removeEventListener('mousemove', documentMouseMove);\n        document.removeEventListener('mouseup', documentMouseUp);\n        resizerEl.remove();\n      }\n    };\n  }\n\n  return function initialize(vido) {\n    vido.state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n","/**\n * SaveAsImage plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\n// @ts-nocheck\nexport default function SaveAsImage(options = {}) {\n  const defaultOptions = {\n    style: 'font-family: sans-serif;',\n    filename: 'gantt-schedule-timeline-calendar.jpeg'\n  };\n  options = { ...defaultOptions, options };\n  function downloadImage(data, filename) {\n    const a = document.createElement('a');\n    a.href = data;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n  }\n\n  function saveAsImage(ev) {\n    const element = ev.target;\n    const width = element.clientWidth;\n    const height = element.clientHeight;\n    const html = unescape(encodeURIComponent(element.outerHTML));\n    let style = '';\n    for (const styleSheet of document.styleSheets) {\n      if (styleSheet.title === 'gstc') {\n        for (const rule of styleSheet.rules) {\n          style += rule.cssText;\n        }\n      }\n    }\n    style = `<style>* {${options.style}} ${style}</style>`;\n    const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\">\n      <foreignObject x=\"0\" y=\"0\" width=\"${width}\" height=\"${height}\">\n        <div xmlns=\"http://www.w3.org/1999/xhtml\">\n          ${style}\n          ${html}\n        </div>\n      </foreignObject>\n    </svg>`;\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, width, height);\n    const svg64 = 'data:image/svg+xml;base64,' + btoa(svg);\n    const img = new Image();\n    img.onload = function onLoad() {\n      ctx.drawImage(img, 0, 0);\n      const jpeg = canvas.toDataURL('image/jpeg', 1.0);\n      downloadImage(jpeg, options.filename);\n    };\n    img.src = svg64;\n  }\n\n  return function initialize(vido) {\n    vido.state.subscribe('_internal.elements.main', main => {\n      if (main) {\n        main.addEventListener('save-as-image', saveAsImage);\n      }\n    });\n  };\n}\n","/**\n * Selection plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport interface RectStyle {\n  [key: string]: any;\n}\n\nexport interface Options {\n  grid?: boolean;\n  items?: boolean;\n  rows?: boolean;\n  horizontal?: boolean;\n  vertical?: boolean;\n  rectStyle?: RectStyle;\n  selecting?: (data, type: string) => void;\n  deselecting?: (data, type: string) => void;\n  selected?: (data, type) => void;\n  deselected?: (data, type) => void;\n  canSelect?: (type, state, all) => any[];\n  canDeselect?: (type, state, all) => any[];\n  getApi?: (api: any) => void;\n}\n\nexport interface Items {\n  [key: string]: string[];\n}\n\ninterface SelectingData {\n  fromX?: number;\n  fromY?: number;\n  toX?: number;\n  toY?: number;\n  startX?: number;\n  startY?: number;\n  startCell?: any;\n  selecting?: boolean;\n  selected?: Items;\n}\n\nexport interface SelectState {\n  selecting?: Items;\n  selected?: Items;\n}\n\nexport default function Selection(options: Options = {}) {\n  let vido, state, api, schedule;\n  const path = 'config.plugin.selection';\n  const rectClassName = 'gantt-schedule-timeline-caledar__plugin-selection-rect';\n  const rect = document.createElement('div');\n  rect.classList.add(rectClassName);\n  rect.style.visibility = 'hidden';\n  rect.style.left = '0px';\n  rect.style.top = '0px';\n  rect.style.width = '0px';\n  rect.style.height = '0px';\n  rect.style.background = 'rgba(0, 119, 192, 0.2)';\n  rect.style.border = '2px dashed rgba(0, 119, 192, 0.75)';\n  rect.style.position = 'absolute';\n  rect.style['user-select'] = 'none';\n  rect.style['pointer-events'] = 'none';\n\n  const defaultOptions: Options = {\n    grid: false,\n    items: true,\n    rows: false,\n    horizontal: true,\n    vertical: true,\n    rectStyle: {},\n    selecting() {},\n    deselecting() {},\n    selected() {},\n    deselected() {},\n    canSelect(type, currently, all) {\n      return currently;\n    },\n    canDeselect(type, currently, all) {\n      return [];\n    },\n    getApi() {}\n  };\n  options = { ...defaultOptions, ...options } as Options;\n  for (const styleProp in options.rectStyle) {\n    rect.style[styleProp] = options.rectStyle[styleProp];\n  }\n  let selecting: SelectingData = {\n    fromX: -1,\n    fromY: -1,\n    toX: -1,\n    toY: -1,\n    startX: -1,\n    startY: -1,\n    startCell: false,\n    selecting: false\n  };\n  const selectionTypesIdGetters = {\n    'chart-timeline-grid-row': props => props.row.id,\n    'chart-timeline-grid-row-block': props => props.id,\n    'chart-timeline-items-row': props => props.row.id,\n    'chart-timeline-items-row-item': props => props.item.id\n  };\n\n  /**\n   * Selection action class\n   */\n  class SelectionAction {\n    chartTimeline: Element;\n    mouseDown: (ev: MouseEvent) => void;\n    mouseMove: (ev: MouseEvent) => void;\n    mouseUp: (ev: MouseEvent) => void;\n    left: number;\n    top: number;\n\n    /**\n     * Selection action constructor\n     * @param {Element} element\n     * @param {object|any} data\n     */\n    constructor(element: Element, data: any) {\n      let previousSelect,\n        api = {} as any;\n      this.chartTimeline = state.get('_internal.elements.chart-timeline');\n      if (!this.chartTimeline.querySelector('.' + rectClassName)) {\n        this.chartTimeline.insertAdjacentElement('beforeend', rect);\n        const bounding = this.chartTimeline.getBoundingClientRect();\n        this.left = bounding.left;\n        this.top = bounding.top;\n      }\n\n      /**\n       * Clear selection\n       * @param {boolean} force\n       */\n      function clearSelection(force: boolean = false) {\n        let selectingState;\n        state.update(path, currently => {\n          selectingState = {\n            selecting: {\n              'chart-timeline-grid-rows': [],\n              'chart-timeline-grid-row-blocks': [],\n              'chart-timeline-items-rows': [],\n              'chart-timeline-items-row-items': []\n            },\n            selected: {\n              'chart-timeline-grid-rows': force\n                ? []\n                : options.canDeselect(\n                    'chart-timeline-grid-rows',\n                    currently.selected['chart-timeline-grid-rows'],\n                    currently\n                  ),\n              'chart-timeline-grid-row-blocks': force\n                ? []\n                : options.canDeselect(\n                    'chart-timeline-grid-row-blocks',\n                    currently.selected['chart-timeline-grid-row-blocks'],\n                    currently\n                  ),\n              'chart-timeline-items-rows': force\n                ? []\n                : options.canDeselect(\n                    'chart-timeline-items-rows',\n                    currently.selected['chart-timeline-items-rows'],\n                    currently\n                  ),\n              'chart-timeline-items-row-items': force\n                ? []\n                : options.canDeselect(\n                    'chart-timeline-items-rows',\n                    currently.selected['chart-timeline-items-rows'],\n                    currently\n                  )\n            }\n          };\n          return selectingState;\n        });\n        state.update('_internal.chart.grid.rowsWithBlocks', function clearRowsWithBlocks(rowsWithBlocks) {\n          for (const row of rowsWithBlocks) {\n            for (const block of row.blocks) {\n              block.selected = selectingState.selected['chart-timeline-grid-row-blocks'].includes(block.id);\n              block.selecting = false;\n            }\n          }\n          return rowsWithBlocks;\n        });\n      }\n      api.clearSelection = clearSelection;\n\n      /**\n       * Clone current selection state\n       * @param {object} currentSelect\n       * @returns {object} currentSelect cloned\n       */\n      function cloneSelection(currentSelect) {\n        const result: SelectingData = {};\n        result.selecting = { ...currentSelect.selecting };\n        result.selecting['chart-timeline-grid-rows'] = currentSelect.selecting['chart-timeline-grid-rows'].slice();\n        result.selecting['chart-timeline-grid-row-blocks'] = currentSelect.selecting[\n          'chart-timeline-grid-row-blocks'\n        ].slice();\n        result.selecting['chart-timeline-items-rows'] = currentSelect.selecting['chart-timeline-items-rows'].slice();\n        result.selecting['chart-timeline-items-row-items'] = currentSelect.selecting[\n          'chart-timeline-items-row-items'\n        ].slice();\n        result.selected = { ...currentSelect.selected };\n        result.selected['chart-timeline-grid-rows'] = currentSelect.selected['chart-timeline-grid-rows'].slice();\n        result.selected['chart-timeline-grid-row-blocks'] = currentSelect.selected[\n          'chart-timeline-grid-row-blocks'\n        ].slice();\n        result.selected['chart-timeline-items-rows'] = currentSelect.selected['chart-timeline-items-rows'].slice();\n        result.selected['chart-timeline-items-row-items'] = currentSelect.selected[\n          'chart-timeline-items-row-items'\n        ].slice();\n        return result;\n      }\n\n      /**\n       * Save and swap coordinates if needed\n       * @param {MouseEvent} ev\n       */\n      const saveAndSwapIfNeeded = (ev: MouseEvent) => {\n        const currentX = ev.x - this.left;\n        const currentY = ev.y - this.top;\n        if (currentX <= selecting.startX) {\n          selecting.fromX = currentX;\n          selecting.toX = selecting.startX;\n        } else {\n          selecting.fromX = selecting.startX;\n          selecting.toX = currentX;\n        }\n        if (currentY <= selecting.startY) {\n          selecting.fromY = currentY;\n          selecting.toY = selecting.startY;\n        } else {\n          selecting.fromY = selecting.startY;\n          selecting.toY = currentY;\n        }\n      };\n\n      /**\n       * Is rectangle inside other rectangle ?\n       * @param {DOMRect} boundingRect\n       * @param {DOMRect} rectBoundingRect\n       * @returns {boolean}\n       */\n      const isInside = (boundingRect: DOMRect, rectBoundingRect: DOMRect) => {\n        let horizontal = false;\n        let vertical = false;\n        if (\n          (boundingRect.left > rectBoundingRect.left && boundingRect.left < rectBoundingRect.right) ||\n          (boundingRect.right > rectBoundingRect.left && boundingRect.right < rectBoundingRect.right) ||\n          (boundingRect.left <= rectBoundingRect.left && boundingRect.right >= rectBoundingRect.right)\n        ) {\n          horizontal = true;\n        }\n        if (\n          (boundingRect.top > rectBoundingRect.top && boundingRect.top < rectBoundingRect.bottom) ||\n          (boundingRect.bottom > rectBoundingRect.top && boundingRect.bottom < rectBoundingRect.bottom) ||\n          (boundingRect.top <= rectBoundingRect.top && boundingRect.bottom >= rectBoundingRect.bottom)\n        ) {\n          vertical = true;\n        }\n        return horizontal && vertical;\n      };\n\n      /**\n       * Get selecting elements\n       * @param {DOMRect} rectBoundingRect\n       * @param {Element[]} elements\n       * @param {string} type\n       * @returns {string[]}\n       */\n      const getSelecting = (rectBoundingRect: DOMRect, elements: Element[], type: string, getId: (any) => string) => {\n        const selectingResult = [];\n        const currentlySelectingData = [];\n        const all = elements[type + 's'];\n        const currentAll = state.get(path);\n        const currentSelecting = currentAll.selecting[type + 's'];\n        for (const element of all) {\n          const boundingRect = element.getBoundingClientRect();\n          if (isInside(boundingRect, rectBoundingRect)) {\n            currentlySelectingData.push(element.vido);\n            const canSelect = options.canSelect(type, currentlySelectingData, currentAll);\n            if (canSelect.includes(element.vido)) {\n              if (!currentSelecting.includes(getId(element.vido))) {\n                options.selecting(element.vido, type);\n              }\n              selectingResult.push(getId(element.vido));\n            } else {\n              currentlySelectingData.unshift();\n            }\n          } else {\n            if (currentSelecting.includes(getId(element.vido))) {\n              options.deselecting(element.vido, type);\n            }\n          }\n        }\n        return selectingResult;\n      };\n\n      /**\n       * Select\n       * @param {Event} ev\n       */\n      const select = ev => {\n        if (!selecting.selecting) {\n          return;\n        }\n        clearSelection();\n        saveAndSwapIfNeeded(ev);\n        rect.style.left = selecting.fromX + 'px';\n        rect.style.top = selecting.fromY + 'px';\n        rect.style.visibility = 'visible';\n        rect.style.width = selecting.toX - selecting.fromX + 'px';\n        rect.style.height = selecting.toY - selecting.fromY + 'px';\n        const rectBoundingRect = rect.getBoundingClientRect();\n        const elements = state.get('_internal.elements');\n        const nowSelecting = {};\n        for (const type in selectionTypesIdGetters) {\n          nowSelecting[type + 's'] = getSelecting(rectBoundingRect, elements, type, selectionTypesIdGetters[type]);\n        }\n\n        state.update(`${path}.selecting`, nowSelecting);\n\n        state.update(\n          'config.chart.items',\n          function updateItems(items) {\n            const now = nowSelecting['chart-timeline-items-row-items'];\n            for (const itemId in items) {\n              const item = items[itemId];\n              if (now.includes(item.id)) {\n                item.selecting = true;\n              } else {\n                item.selecting = false;\n              }\n            }\n            return items;\n          },\n          { only: ['selecting'] }\n        );\n\n        state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n          const nowBlocks = nowSelecting['chart-timeline-grid-row-blocks'];\n          const nowRows = nowSelecting['chart-timeline-grid-rows'];\n          for (const row of rowsWithBlocks) {\n            if (nowRows.includes(row.id)) {\n              row.selecting = true;\n            } else {\n              row.selecting = false;\n            }\n            for (const block of row.blocks) {\n              if (nowBlocks.includes(block.id)) {\n                block.selecting = true;\n              } else {\n                block.selecting = false;\n              }\n            }\n          }\n          return rowsWithBlocks;\n        });\n      };\n\n      /**\n       * End select\n       * @param {Event} ev\n       */\n      const endSelect = ev => {\n        if (selecting.selecting) {\n          ev.stopPropagation();\n          if (selecting.fromX === ev.x - this.left && selecting.fromY === ev.y - this.top) {\n            selecting.selecting = false;\n            rect.style.visibility = 'hidden';\n            return;\n          }\n        } else {\n          clearSelection();\n          return;\n        }\n\n        selecting.selecting = false;\n        rect.style.visibility = 'hidden';\n        const currentSelect = state.get(path);\n        const select: SelectState = {};\n        state.update(path, value => {\n          select.selected = { ...value.selecting };\n          select.selecting = {\n            'chart-timeline-grid-rows': [],\n            'chart-timeline-grid-row-blocks': [],\n            'chart-timeline-items-rows': [],\n            'chart-timeline-items-row-items': []\n          } as Items;\n          return select;\n        });\n        const elements = state.get('_internal.elements');\n        for (const type in selectionTypesIdGetters) {\n          for (const element of elements[type + 's']) {\n            if (currentSelect.selecting[type + 's'].includes(element.vido.id)) {\n              options.deselecting(element.vido, type);\n            }\n          }\n        }\n        state.update('config.chart.items', function updateItems(items) {\n          const now = currentSelect.selecting['chart-timeline-items-row-items'];\n          for (const itemId in items) {\n            const item = items[itemId];\n            if (now.includes(item.id)) {\n              item.selecting = true;\n            } else {\n              item.selecting = false;\n            }\n          }\n          return items;\n        });\n        state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n          for (const row of rowsWithBlocks) {\n            for (const block of row.blocks) {\n              if (currentSelect.selecting['chart-timeline-grid-row-blocks'].includes(block.id)) {\n                if (typeof block.selected === 'undefined' || !block.selected) {\n                  options.selected(block, 'chart-timeline-grid-row-block');\n                }\n                block.selected = true;\n              } else {\n                if (previousSelect.selected['chart-timeline-grid-row-blocks'].includes(block.id)) {\n                  options.deselected(block, 'chart-timeline-grid-row-block');\n                }\n                block.selected = false;\n              }\n            }\n          }\n          return rowsWithBlocks;\n        });\n      };\n\n      /**\n       * Mouse down event handler\n       * @param {MouseEvent} ev\n       */\n      this.mouseDown = ev => {\n        if (ev.button !== 0) {\n          return;\n        }\n        selecting.selecting = true;\n        selecting.fromX = ev.x - this.left;\n        selecting.fromY = ev.y - this.top;\n        selecting.startX = selecting.fromX;\n        selecting.startY = selecting.fromY;\n        previousSelect = cloneSelection(state.get(path));\n        clearSelection();\n      };\n\n      /**\n       * Mouse move event handler\n       * @param {MouseEvent} ev\n       */\n      this.mouseMove = ev => {\n        select(ev);\n      };\n\n      /**\n       * Mouse up event handler\n       * @param {MouseEvent} ev\n       */\n      this.mouseUp = ev => {\n        if (selecting.selecting) {\n          endSelect(ev);\n        }\n      };\n\n      element.addEventListener('mousedown', this.mouseDown);\n      document.addEventListener('mousemove', schedule(this.mouseMove));\n      document.addEventListener('mouseup', this.mouseUp);\n      options.getApi(api);\n    }\n    update() {\n      const bounding = this.chartTimeline.getBoundingClientRect();\n      this.left = bounding.left;\n      this.top = bounding.top;\n    }\n    destroy(element) {\n      document.removeEventListener('mouseup', this.mouseUp);\n      document.removeEventListener('mousemove', this.mouseMove);\n      element.removeEventListener('mousedown', this.mouseDown);\n    }\n  }\n\n  /**\n   * Update selection\n   * @param {any} data\n   * @param {HTMLElement} element\n   * @param {string[]} selecting\n   * @param {string[]} selected\n   * @param {string} classNameSelecting\n   * @param {string} classNameSelected\n   */\n  function updateSelection(\n    element: HTMLElement,\n    selecting: string[],\n    selected: string[],\n    classNameSelecting: string,\n    classNameSelected: string\n  ) {\n    if (selecting && !element.classList.contains(classNameSelecting)) {\n      element.classList.add(classNameSelecting);\n    } else if (!selecting && element.classList.contains(classNameSelecting)) {\n      element.classList.remove(classNameSelecting);\n    }\n    if (selected && !element.classList.contains(classNameSelected)) {\n      element.classList.add(classNameSelected);\n    } else if (!selected && element.classList.contains(classNameSelected)) {\n      element.classList.remove(classNameSelected);\n    }\n  }\n\n  /**\n   * Grid row block action\n   * @param {HTMLElement} element\n   * @param {object} data\n   * @returns {object} with update and destroy functions\n   */\n  class GridBlockAction {\n    classNameSelecting: string;\n    classNameSelected: string;\n\n    constructor(element: HTMLElement, data: any) {\n      this.classNameSelecting = api.getClass('chart-timeline-grid-row-block') + '--selecting';\n      this.classNameSelected = api.getClass('chart-timeline-grid-row-block') + '--selected';\n      updateSelection(element, data.selecting, data.selected, this.classNameSelecting, this.classNameSelected);\n    }\n\n    update(element: HTMLElement, data: any) {\n      updateSelection(element, data.selecting, data.selected, this.classNameSelecting, this.classNameSelected);\n    }\n\n    destroy(element: Element, changedData: any) {\n      element.classList.remove(this.classNameSelecting);\n      element.classList.remove(this.classNameSelected);\n    }\n  }\n\n  /**\n   * Item action\n   * @param {Element} element\n   * @param {object} data\n   * @returns {object} with update and destroy functions\n   */\n  class ItemAction {\n    classNameSelecting: string;\n    classNameSelected: string;\n\n    constructor(element: HTMLElement, data: any) {\n      this.classNameSelecting = api.getClass('chart-timeline-items-row-item') + '--selecting';\n      this.classNameSelected = api.getClass('chart-timeline-items-row-item') + '--selected';\n      updateSelection(\n        element,\n        data.item.selecting,\n        data.item.selected,\n        this.classNameSelecting,\n        this.classNameSelected\n      );\n    }\n\n    update(element: HTMLElement, data: any) {\n      updateSelection(\n        element,\n        data.item.selecting,\n        data.item.selected,\n        this.classNameSelecting,\n        this.classNameSelected\n      );\n    }\n\n    destroy(element: HTMLElement, data: any) {\n      element.classList.remove(this.classNameSelecting);\n      element.classList.remove(this.classNameSelected);\n    }\n  }\n\n  /**\n   * On block create handler\n   * @param {object} block\n   * @returns {object} block\n   */\n  function onBlockCreate(block) {\n    const selectedBlocks = state.get('config.plugin.selection.selected.chart-timeline-grid-row-blocks');\n    for (const selectedBlock of selectedBlocks) {\n      if (selectedBlock === block.id) {\n        block.selected = true;\n        return block;\n      }\n    }\n    block.selected = false;\n    block.selecting = false;\n    return block;\n  }\n\n  return function initialize(mainVido) {\n    vido = mainVido;\n    state = vido.state;\n    api = vido.api;\n    schedule = vido.schedule;\n    if (typeof state.get(path) === 'undefined') {\n      state.update(path, {\n        selecting: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        },\n        selected: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        }\n      });\n    }\n    state.update('config.chart.items', items => {\n      for (const itemId in items) {\n        const item = items[itemId];\n        if (typeof item.selecting === 'undefined') {\n          item.selecting = false;\n        }\n        if (typeof item.selected === 'undefined') {\n          item.selected = false;\n        }\n      }\n      return items;\n    });\n    state.update('config.actions.chart-timeline', actions => {\n      actions.push(SelectionAction);\n      return actions;\n    });\n    state.update('config.actions.chart-timeline-grid-row-block', actions => {\n      actions.push(GridBlockAction);\n      return actions;\n    });\n    state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(ItemAction);\n      return actions;\n    });\n    state.update('config.chart.grid.block.onCreate', onCreate => {\n      onCreate.push(onBlockCreate);\n      return onCreate;\n    });\n  };\n}\n","/**\n * CalendarScroll plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport default function CalendarScroll(options = {}) {\n  let state, api, schedule;\n  const defaultOptions = {\n    speed: 1,\n    hideScroll: false,\n    onChange(time) {}\n  };\n  options = { ...defaultOptions, ...options };\n\n  class CalendarScrollAction {\n    isMoving: boolean = false;\n    lastX: number = 0;\n    mc: any;\n\n    constructor(element: HTMLElement) {\n      this.onPointerStart = this.onPointerStart.bind(this);\n      this.onPointerMove = this.onPointerMove.bind(this);\n      this.onPointerEnd = this.onPointerEnd.bind(this);\n      element.addEventListener('touchstart', this.onPointerStart);\n      document.addEventListener('touchmove', this.onPointerMove);\n      document.addEventListener('touchend', this.onPointerEnd);\n      element.addEventListener('mousedown', this.onPointerStart);\n      document.addEventListener('mousemove', this.onPointerMove);\n      document.addEventListener('mouseup', this.onPointerEnd);\n      element.style.cursor = 'move';\n      const horizontalScroll = state.get('_internal.elements.horizontal-scroll');\n      // @ts-ignore\n      if (options.hideScroll && horizontalScroll) {\n        horizontalScroll.style.visibility = 'hidden';\n      }\n    }\n\n    onPointerStart(ev) {\n      if (ev.type === 'mousedown' && ev.button !== 0) return;\n      ev.stopPropagation();\n      this.isMoving = true;\n      const normalized = api.normalizePointerEvent(ev);\n      this.lastX = normalized.x;\n    }\n\n    onPointerMove(ev) {\n      schedule(() => {\n        if (!this.isMoving) return;\n        const normalized = api.normalizePointerEvent(ev);\n        const movedX = normalized.x - this.lastX;\n        const time = state.get('_internal.chart.time');\n        // @ts-ignore\n        const movedTime = -Math.round(movedX * time.timePerPixel * options.speed);\n        state.update('config.chart.time', configTime => {\n          if (configTime.from === 0) configTime.from = time.from;\n          if (configTime.to === 0) configTime.to = time.to;\n          configTime.from += movedTime;\n          configTime.to += movedTime;\n          // @ts-ignore\n          options.onChange(configTime);\n          return configTime;\n        });\n        this.lastX = normalized.x;\n      })();\n    }\n\n    onPointerEnd(ev) {\n      this.isMoving = false;\n      this.lastX = 0;\n    }\n\n    destroy(element: HTMLElement, data: any) {\n      element.removeEventListener('touchstart', this.onPointerStart);\n      document.removeEventListener('touchmove', this.onPointerMove);\n      document.removeEventListener('touchend', this.onPointerEnd);\n      element.removeEventListener('mousedown', this.onPointerStart);\n      document.removeEventListener('mousemove', this.onPointerMove);\n      document.removeEventListener('mouseup', this.onPointerEnd);\n    }\n  }\n\n  return function initialize(vido) {\n    api = vido.api;\n    state = vido.state;\n    schedule = vido.schedule;\n    state.update('config.actions.chart-calendar', actions => {\n      actions.push(CalendarScrollAction);\n      return actions;\n    });\n  };\n}\n","import ItemHold from './ItemHold.plugin';\nimport ItemMovement from './ItemMovement.plugin';\nimport SaveAsImage from './SaveAsImage.plugin';\nimport Selection from './Selection.plugin';\nimport CalendarScroll from './CalendarScroll.plugin';\n\nexport default { ItemHold, ItemMovement, SaveAsImage, Selection, CalendarScroll };\n"],"names":[],"mappings":"AAAA;;;;;;;;;AAgBA,SAAwB,QAAQ,CAAC,UAAmB,EAAE;IACpD,IAAI,GAAG,CAAC;IACR,MAAM,cAAc,GAAG;QACrB,IAAI,EAAE,IAAI;QACV,iBAAiB,EAAE,CAAC;QACpB,MAAM,CAAC,OAAO,EAAE,IAAI,KAAI;KACzB,CAAC;IACF,OAAO,mCAAQ,cAAc,GAAK,OAAO,CAAE,CAAC;IAE5C,MAAM,OAAO,GAAG,EAAE,CAAC;IACnB,MAAM,OAAO,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;IAE/B,SAAS,aAAa,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK;QACzC,IAAI,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,WAAW,EAAE;YAC3C,MAAM,UAAU,GAAG,GAAG,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;YACpD,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC;YACxD,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,UAAU,CAAC;gBACT,IAAI,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,WAAW,EAAE;oBAC3C,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC3D,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC3D,IAAI,SAAS,GAAG,OAAO,CAAC,iBAAiB,EAAE;wBACzC,IAAI,GAAG,KAAK,CAAC;qBACd;oBACD,IAAI,SAAS,GAAG,OAAO,CAAC,iBAAiB,EAAE;wBACzC,IAAI,GAAG,KAAK,CAAC;qBACd;oBACD,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACxB,IAAI,IAAI,EAAE;wBACR,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;qBAC/B;iBACF;aACF,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;SAClB;KACF;IAED,SAAS,WAAW,CAAC,MAAM;QACzB,IAAI,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,WAAW,EAAE;YAC1C,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC;SACxB;KACF;IAED,SAAS,MAAM,CAAC,OAAO,EAAE,IAAI;QAC3B,SAAS,kBAAkB,CAAC,KAAK;YAC/B,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;SAC1C;QACD,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC;QAC1D,OAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,kBAAkB,CAAC,CAAC;QAC3D,SAAS,SAAS;YAChB,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC3B;QAED,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACjD,SAAS,aAAa,CAAC,KAAK;YAC1B,MAAM,UAAU,GAAG,GAAG,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;YACpD,OAAO,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;YACzB,OAAO,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;SAC1B;QAED,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;QACtD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;QACtD,OAAO;YACL,MAAM,CAAC,OAAO,EAAE,WAAW;gBACzB,IAAI,GAAG,WAAW,CAAC;aACpB;YACD,OAAO,CAAC,OAAO,EAAE,IAAI;gBACnB,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;gBACrD,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;gBACzD,OAAO,CAAC,mBAAmB,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC;gBAC7D,QAAQ,CAAC,mBAAmB,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;gBACtD,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;gBACzD,OAAO,CAAC,mBAAmB,CAAC,YAAY,EAAE,kBAAkB,CAAC,CAAC;aAC/D;SACF,CAAC;KACH;IAED,OAAO,SAAS,UAAU,CAAC,IAAI;QAC7B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACf,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,8CAA8C,EAAE,OAAO;YACvE,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrB,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;KACJ,CAAC;CACH;;ACtGD;;;;;;;;;AAqBA,SAAwB,YAAY,CAAC,UAAmB,EAAE;IACxD,MAAM,cAAc,GAAG;QACrB,QAAQ,EAAE,IAAI;QACd,UAAU,EAAE,IAAI;QAChB,cAAc,EAAE,EAAE;QAClB,kBAAkB,EAAE,IAAI;QACxB,YAAY,EAAE,KAAK;QACnB,SAAS,CAAC,SAAS,EAAE,SAAS;YAC5B,OAAO,SAAS,GAAG,SAAS,CAAC;SAC9B;QACD,OAAO,CAAC,OAAO,EAAE,OAAO;YACtB,OAAO,OAAO,GAAG,OAAO,CAAC;SAC1B;QACD,SAAS,EAAE,IAAI;KAChB,CAAC;IACF,OAAO,mCAAQ,cAAc,GAAK,OAAO,CAAE,CAAC;IAE5C,MAAM,aAAa,GAAG,EAAE,CAAC;;;;;;;IAQzB,SAAS,MAAM,CAAC,OAAoB,EAAE,IAAI;QACxC,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;YAC5C,OAAO;SACR;QACD,IAAI,KAAK,CAAC;QACV,IAAI,GAAG,CAAC;QAER,SAAS,UAAU,CAAC,IAAI;YACtB,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;YAChC,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,QAAQ,EAAE;gBACpD,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;aAC/B;YACD,IAAI,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,QAAQ,EAAE;gBACnD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;aAC9B;YACD,OAAO,QAAQ,CAAC;SACjB;QAED,SAAS,YAAY,CAAC,IAAI;YACxB,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,CAAC;YAClH,IAAI,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,UAAU,EAAE;gBACvD,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;aAClC;YACD,OAAO,UAAU,CAAC;SACnB;QAED,SAAS,WAAW,CAAC,IAAI;YACvB,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YAC5B,IAAI,OAAO,aAAa,CAAC,MAAM,CAAC,KAAK,WAAW,EAAE;gBAChD,aAAa,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;aAC5D;YACD,OAAO,aAAa,CAAC,MAAM,CAAC,CAAC;SAC9B;QAED,SAAS,WAAW,CAAC,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ;YAChD,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,OAAO,QAAQ,CAAC,KAAK,KAAK,WAAW,EAAE;gBAC/D,OAAO;aACR;YACD,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAgB,CAAC;YACrD,MAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAC;YACxC,MAAM,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC7D,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YAClC,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,SAAS,GAAG,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC;YAC3E,MAAM,OAAO,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,OAAO,CAAC,SAAS,GAAG,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;YACnG,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;YAC3B,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,OAAO,GAAG,IAAI,CAAC;YACnD,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YAChC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,yBAAyB,CAAC;YACtD,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;YAC3C,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YAC5B,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;YAC9D,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YAC5B,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,mBAAmB,CAAC;YAC5C,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAClE,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;YACvB,OAAO,KAAK,CAAC;SACd;QAED,SAAS,SAAS,CAAC,IAAI,EAAE,EAAE;YACzB,IAAI,OAAO,CAAC,SAAS,EAAE;gBACrB,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;gBACnC,MAAM,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,oBAAoB,CAAC;gBACvE,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;gBACxC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG;oBACtB,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC;aAC1G;SACF;QAED,SAAS,YAAY,CAAC,MAAM;YAC1B,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBACtB,OAAO;aACR;YACD,IAAI,OAAO,aAAa,CAAC,MAAM,CAAC,KAAK,WAAW,IAAI,OAAO,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,WAAW,EAAE;gBACtG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;gBACxF,OAAO,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC;aACpC;SACF;QAED,SAAS,YAAY,CAAC,IAAI;YACxB,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;YAClC,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,KAAK,UAAU,EAAE;gBAC7C,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;aACjC;YACD,OAAO,SAAS,CAAC;SAClB;QAED,SAAS,UAAU,CAAC,IAAI;YACtB,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;YAC9B,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,UAAU,EAAE;gBAC3C,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;aAC7B;YACD,OAAO,OAAO,CAAC;SAChB;QAED,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACnB,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QAEf,MAAM,WAAW,GAAG,eAAe,GAAG,CAAC,QAAQ,CAAC,uCAAuC,CAAC,KACtF,OAAO,CAAC,cACV,QAAQ,CAAC;;QAET,OAAO,CAAC,kBAAkB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;QACrD,MAAM,SAAS,GAAG,OAAO,CAAC,aAAa,CACrC,0EAA0E,CAC5D,CAAC;QACjB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;YACvB,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;SACvC;aAAM;YACL,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;SACxC;QAED,SAAS,cAAc,CAAC,EAAE;YACxB,EAAE,CAAC,eAAe,EAAE,CAAC;YACrB,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;gBACnB,OAAO;aACR;YACD,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;YACvB,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;YAC7D,MAAM,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;YACnE,MAAM,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;YACpE,MAAM,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC,qBAAqB,EAAE,CAAC;YACzF,QAAQ,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAClC,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;YACpC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,aAAa,IAAI,YAAY,CAAC,CAAC;YAC9E,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC3E,WAAW,CAAC,IAAI,EAAE,EAAE,EAAE,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;SACtD;QAED,SAAS,gBAAgB,CAAC,EAAE;YAC1B,EAAE,CAAC,eAAe,EAAE,CAAC;YACrB,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;gBACnB,OAAO;aACR;YACD,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;YAC7D,MAAM,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;YACnE,MAAM,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;YACpE,MAAM,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC,qBAAqB,EAAE,CAAC;YACzF,QAAQ,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAClC,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;YACpC,QAAQ,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,aAAa,IAAI,YAAY,CAAC;YAChE,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;SAC5E;QAED,SAAS,WAAW,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG;YAC5C,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE;gBAC/B,OAAO,KAAK,CAAC;aACd;YACD,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;YAC/C,IAAI,OAAO,CAAC,YAAY,KAAK,KAAK,GAAG,IAAI,CAAC,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE;gBAChE,OAAO,IAAI,CAAC;aACb;YACD,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;YAC1D,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;gBAC1B,IAAI,GAAG,CAAC,IAAI,CAAC;aACd;YACD,IAAI,IAAI,IAAI,CAAC,EAAE;gBACb,OAAO,IAAI,CAAC;aACb;YACD,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,mBAAmB,GAAG,KAAK,CAAC,CAAC;YACnD,KAAK,MAAM,OAAO,IAAI,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE;gBACzC,IAAI,OAAO,CAAC,EAAE,KAAK,MAAM,EAAE;oBACzB,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;wBAC5D,OAAO,IAAI,CAAC;qBACb;oBACD,IAAI,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;wBACxD,OAAO,IAAI,CAAC;qBACb;oBACD,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;wBAC1D,OAAO,IAAI,CAAC;qBACb;iBACF;aACF;YACD,OAAO,KAAK,CAAC;SACd;QAED,SAAS,SAAS,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY;YAClD,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,MAAM,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,oBAAoB,CAAC;YACvE,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACpB,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,iCAAiC,CAAC,GAAG,IAAI,GAAG,YAAY,CAAC;YAClF,MAAM,GAAG,GAAG,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YACrC,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YACtC,MAAM,cAAc,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YACtE,MAAM,QAAQ,GAAG,cAAc,GAAG,aAAa,CAAC;YAChD,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC;YACrG,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;gBAC1B,KAAK,CAAC,MAAM,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,SAAS,QAAQ,CAAC,IAAI;oBAC5E,IAAI,CAAC,KAAK,IAAI,QAAQ,CAAC;oBACvB,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC1D,OAAO,IAAI,CAAC;iBACb,CAAC,CAAC;aACJ;SACF;QAED,SAAS,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY;YAChD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;gBACvB,OAAO;aACR;YACD,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;YAC/C,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,MAAM,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,oBAAoB,CAAC;YACvE,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,YAAY,CAAC;YACrD,MAAM,GAAG,GAAG,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACnC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACzC,OAAO;aACR;YACD,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YAClC,MAAM,YAAY,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YACpE,MAAM,QAAQ,GAAG,YAAY,GAAG,WAAW,CAAC;YAC5C,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC;YAC1F,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;gBAC1B,KAAK,CAAC,MAAM,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI;oBAC1D,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;oBACrD,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC1D,OAAO,IAAI,CAAC;iBACb,CAAC,CAAC;aACJ;SACF;QAED,SAAS,SAAS,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY;YAClD,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACpB,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,MAAM,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC;YACrC,MAAM,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC5D,MAAM,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC7D,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;gBACpC,IAAI,UAAU,CAAC,GAAG,GAAG,YAAY,GAAG,GAAG,EAAE;oBACvC,IAAI,KAAK,GAAG,CAAC,EAAE;wBACb,OAAO,KAAK,GAAG,CAAC,CAAC;qBAClB;oBACD,OAAO,CAAC,CAAC;iBACV;gBACD,KAAK,EAAE,CAAC;aACT;YACD,OAAO,KAAK,CAAC;SACd;QAED,SAAS,iBAAiB,CAAC,EAAE;YAC3B,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,IAAI,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,YAAY,CAAC;YACzC,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBACxC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;gBACvD,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,CAAC;gBAC9D,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,oBAAoB,KAAK,EAAE,CAAC,CAAC;gBAC7C,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;gBAC3C,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;aAC/D;YACD,MAAM,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,QAAQ,CAAC,MAAM,EAAE;gBACnB,IAAI,QAAQ,KAAK,IAAI,IAAI,QAAQ,KAAK,GAAG,KAAK,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;oBAClG,SAAS,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;iBAC9C;gBACD,IAAI,CAAC,QAAQ,IAAI,QAAQ,KAAK,GAAG,EAAE;oBACjC,OAAO;iBACR;gBACD,IAAI,gBAAgB,GAAG,SAAS,CAAC,EAAE,AAA+B,CAAC,CAAC;gBACpE,MAAM,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;gBAC5D,IAAI,OAAO,WAAW,CAAC,gBAAgB,CAAC,KAAK,WAAW,EAAE;oBACxD,IAAI,gBAAgB,GAAG,CAAC,EAAE;wBACxB,gBAAgB,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;qBAC3C;yBAAM,IAAI,gBAAgB,GAAG,CAAC,EAAE;wBAC/B,gBAAgB,GAAG,CAAC,CAAC;qBACtB;iBACF;gBACD,MAAM,MAAM,GAAG,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC7C,MAAM,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC;gBAC3B,MAAM,SAAS,GAAG,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACjF,IAAI,QAAQ,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,SAAS,EAAE;oBACzC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;wBAC3D,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,QAAQ,EAAE;4BACzD,KAAK,CAAC,MAAM,CAAC,sBAAsB,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;yBAC/D;qBACF;iBACF;aACF;iBAAM,IAAI,QAAQ,CAAC,QAAQ,KAAK,OAAO,IAAI,CAAC,UAAU,KAAK,WAAW,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,EAAE;gBACpG,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;aAC5C;SACF;QAED,SAAS,eAAe,CAAC,EAAE;YACzB,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;YACnC,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBACxC,EAAE,CAAC,eAAe,EAAE,CAAC;aACtB;YACD,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;YACxB,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;YAC1B,KAAK,MAAM,MAAM,IAAI,aAAa,EAAE;gBAClC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrC,aAAa,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACvC,YAAY,CAAC,MAAM,CAAC,CAAC;aACtB;SACF;QACD,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC;QACtD,SAAS,CAAC,gBAAgB,CAAC,WAAW,EAAE,gBAAgB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAC7E,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,iBAAiB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAC5F,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,eAAe,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAExF,OAAO;YACL,MAAM,CAAC,IAAI,EAAE,WAAW;gBACtB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,KAAK,SAAS,EAAE;oBACnE,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;iBACvC;qBAAM,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,KAAK,QAAQ,EAAE;oBACxE,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;iBACxC;aACF;YACD,OAAO,CAAC,IAAI,EAAE,IAAI;gBAChB,OAAO,CAAC,mBAAmB,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC;gBACzD,SAAS,CAAC,mBAAmB,CAAC,WAAW,EAAE,gBAAgB,CAAC,CAAC;gBAC7D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;gBAC7D,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;gBACzD,SAAS,CAAC,MAAM,EAAE,CAAC;aACpB;SACF,CAAC;KACH;IAED,OAAO,SAAS,UAAU,CAAC,IAAI;QAC7B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,8CAA8C,EAAE,OAAO;YACvE,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrB,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;KACJ,CAAC;CACH;;ACpXD;;;;;;;;;;AAWA,SAAwB,WAAW,CAAC,OAAO,GAAG,EAAE;IAC9C,MAAM,cAAc,GAAG;QACrB,KAAK,EAAE,0BAA0B;QACjC,QAAQ,EAAE,uCAAuC;KAClD,CAAC;IACF,OAAO,mCAAQ,cAAc,KAAE,OAAO,GAAE,CAAC;IACzC,SAAS,aAAa,CAAC,IAAI,EAAE,QAAQ;QACnC,MAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;QACd,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACtB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC7B,CAAC,CAAC,KAAK,EAAE,CAAC;KACX;IAED,SAAS,WAAW,CAAC,EAAE;QACrB,MAAM,OAAO,GAAG,EAAE,CAAC,MAAM,CAAC;QAC1B,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,CAAC;QAClC,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC;QACpC,MAAM,IAAI,GAAG,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;QAC7D,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,MAAM,UAAU,IAAI,QAAQ,CAAC,WAAW,EAAE;YAC7C,IAAI,UAAU,CAAC,KAAK,KAAK,MAAM,EAAE;gBAC/B,KAAK,MAAM,IAAI,IAAI,UAAU,CAAC,KAAK,EAAE;oBACnC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC;iBACvB;aACF;SACF;QACD,KAAK,GAAG,aAAa,OAAO,CAAC,KAAK,KAAK,KAAK,UAAU,CAAC;QACvD,MAAM,GAAG,GAAG,kDAAkD,KAAK,aAAa,MAAM,kBAAkB,KAAK,IAAI,MAAM;0CACjF,KAAK,aAAa,MAAM;;YAEtD,KAAK;YACL,IAAI;;;WAGL,CAAC;QACR,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QAClC,MAAM,KAAK,GAAG,4BAA4B,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;QACvD,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,GAAG,CAAC,MAAM,GAAG,SAAS,MAAM;YAC1B,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACzB,MAAM,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YACjD,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;SACvC,CAAC;QACF,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC;KACjB;IAED,OAAO,SAAS,UAAU,CAAC,IAAI;QAC7B,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,yBAAyB,EAAE,IAAI;YAClD,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,WAAW,CAAC,CAAC;aACrD;SACF,CAAC,CAAC;KACJ,CAAC;CACH;;ACtED;;;;;;;;;AAmDA,SAAwB,SAAS,CAAC,UAAmB,EAAE;IACrD,IAAI,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC;IAC/B,MAAM,IAAI,GAAG,yBAAyB,CAAC;IACvC,MAAM,aAAa,GAAG,wDAAwD,CAAC;IAC/E,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC3C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAClC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;IACjC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;IACxB,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC;IACvB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;IACzB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;IAC1B,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,wBAAwB,CAAC;IACjD,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,oCAAoC,CAAC;IACzD,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;IACjC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC;IACnC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;IAEtC,MAAM,cAAc,GAAY;QAC9B,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,IAAI;QACX,IAAI,EAAE,KAAK;QACX,UAAU,EAAE,IAAI;QAChB,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,EAAE;QACb,SAAS,MAAK;QACd,WAAW,MAAK;QAChB,QAAQ,MAAK;QACb,UAAU,MAAK;QACf,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,GAAG;YAC5B,OAAO,SAAS,CAAC;SAClB;QACD,WAAW,CAAC,IAAI,EAAE,SAAS,EAAE,GAAG;YAC9B,OAAO,EAAE,CAAC;SACX;QACD,MAAM,MAAK;KACZ,CAAC;IACF,OAAO,GAAG,gCAAK,cAAc,GAAK,OAAO,CAAa,CAAC;IACvD,KAAK,MAAM,SAAS,IAAI,OAAO,CAAC,SAAS,EAAE;QACzC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;KACtD;IACD,IAAI,SAAS,GAAkB;QAC7B,KAAK,EAAE,CAAC,CAAC;QACT,KAAK,EAAE,CAAC,CAAC;QACT,GAAG,EAAE,CAAC,CAAC;QACP,GAAG,EAAE,CAAC,CAAC;QACP,MAAM,EAAE,CAAC,CAAC;QACV,MAAM,EAAE,CAAC,CAAC;QACV,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,KAAK;KACjB,CAAC;IACF,MAAM,uBAAuB,GAAG;QAC9B,yBAAyB,EAAE,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;QAChD,+BAA+B,EAAE,KAAK,IAAI,KAAK,CAAC,EAAE;QAClD,0BAA0B,EAAE,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;QACjD,+BAA+B,EAAE,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;KACxD,CAAC;;;;IAKF,MAAM,eAAe;;;;;;QAanB,YAAY,OAAgB,EAAE,IAAS;YACrC,IAAI,cAAc,EAChB,GAAG,GAAG,EAAS,CAAC;YAClB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;YACpE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,GAAG,GAAG,aAAa,CAAC,EAAE;gBAC1D,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBAC5D,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;gBAC5D,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC1B,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC;aACzB;;;;;YAMD,SAAS,cAAc,CAAC,QAAiB,KAAK;gBAC5C,IAAI,cAAc,CAAC;gBACnB,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS;oBAC1B,cAAc,GAAG;wBACf,SAAS,EAAE;4BACT,0BAA0B,EAAE,EAAE;4BAC9B,gCAAgC,EAAE,EAAE;4BACpC,2BAA2B,EAAE,EAAE;4BAC/B,gCAAgC,EAAE,EAAE;yBACrC;wBACD,QAAQ,EAAE;4BACR,0BAA0B,EAAE,KAAK;kCAC7B,EAAE;kCACF,OAAO,CAAC,WAAW,CACjB,0BAA0B,EAC1B,SAAS,CAAC,QAAQ,CAAC,0BAA0B,CAAC,EAC9C,SAAS,CACV;4BACL,gCAAgC,EAAE,KAAK;kCACnC,EAAE;kCACF,OAAO,CAAC,WAAW,CACjB,gCAAgC,EAChC,SAAS,CAAC,QAAQ,CAAC,gCAAgC,CAAC,EACpD,SAAS,CACV;4BACL,2BAA2B,EAAE,KAAK;kCAC9B,EAAE;kCACF,OAAO,CAAC,WAAW,CACjB,2BAA2B,EAC3B,SAAS,CAAC,QAAQ,CAAC,2BAA2B,CAAC,EAC/C,SAAS,CACV;4BACL,gCAAgC,EAAE,KAAK;kCACnC,EAAE;kCACF,OAAO,CAAC,WAAW,CACjB,2BAA2B,EAC3B,SAAS,CAAC,QAAQ,CAAC,2BAA2B,CAAC,EAC/C,SAAS,CACV;yBACN;qBACF,CAAC;oBACF,OAAO,cAAc,CAAC;iBACvB,CAAC,CAAC;gBACH,KAAK,CAAC,MAAM,CAAC,qCAAqC,EAAE,SAAS,mBAAmB,CAAC,cAAc;oBAC7F,KAAK,MAAM,GAAG,IAAI,cAAc,EAAE;wBAChC,KAAK,MAAM,KAAK,IAAI,GAAG,CAAC,MAAM,EAAE;4BAC9B,KAAK,CAAC,QAAQ,GAAG,cAAc,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;4BAC9F,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;yBACzB;qBACF;oBACD,OAAO,cAAc,CAAC;iBACvB,CAAC,CAAC;aACJ;YACD,GAAG,CAAC,cAAc,GAAG,cAAc,CAAC;;;;;;YAOpC,SAAS,cAAc,CAAC,aAAa;gBACnC,MAAM,MAAM,GAAkB,EAAE,CAAC;gBACjC,MAAM,CAAC,SAAS,qBAAQ,aAAa,CAAC,SAAS,CAAE,CAAC;gBAClD,MAAM,CAAC,SAAS,CAAC,0BAA0B,CAAC,GAAG,aAAa,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC3G,MAAM,CAAC,SAAS,CAAC,gCAAgC,CAAC,GAAG,aAAa,CAAC,SAAS,CAC1E,gCAAgC,CACjC,CAAC,KAAK,EAAE,CAAC;gBACV,MAAM,CAAC,SAAS,CAAC,2BAA2B,CAAC,GAAG,aAAa,CAAC,SAAS,CAAC,2BAA2B,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC7G,MAAM,CAAC,SAAS,CAAC,gCAAgC,CAAC,GAAG,aAAa,CAAC,SAAS,CAC1E,gCAAgC,CACjC,CAAC,KAAK,EAAE,CAAC;gBACV,MAAM,CAAC,QAAQ,qBAAQ,aAAa,CAAC,QAAQ,CAAE,CAAC;gBAChD,MAAM,CAAC,QAAQ,CAAC,0BAA0B,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzG,MAAM,CAAC,QAAQ,CAAC,gCAAgC,CAAC,GAAG,aAAa,CAAC,QAAQ,CACxE,gCAAgC,CACjC,CAAC,KAAK,EAAE,CAAC;gBACV,MAAM,CAAC,QAAQ,CAAC,2BAA2B,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC3G,MAAM,CAAC,QAAQ,CAAC,gCAAgC,CAAC,GAAG,aAAa,CAAC,QAAQ,CACxE,gCAAgC,CACjC,CAAC,KAAK,EAAE,CAAC;gBACV,OAAO,MAAM,CAAC;aACf;;;;;YAMD,MAAM,mBAAmB,GAAG,CAAC,EAAc;gBACzC,MAAM,QAAQ,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;gBAClC,MAAM,QAAQ,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC;gBACjC,IAAI,QAAQ,IAAI,SAAS,CAAC,MAAM,EAAE;oBAChC,SAAS,CAAC,KAAK,GAAG,QAAQ,CAAC;oBAC3B,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC;iBAClC;qBAAM;oBACL,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,MAAM,CAAC;oBACnC,SAAS,CAAC,GAAG,GAAG,QAAQ,CAAC;iBAC1B;gBACD,IAAI,QAAQ,IAAI,SAAS,CAAC,MAAM,EAAE;oBAChC,SAAS,CAAC,KAAK,GAAG,QAAQ,CAAC;oBAC3B,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC;iBAClC;qBAAM;oBACL,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,MAAM,CAAC;oBACnC,SAAS,CAAC,GAAG,GAAG,QAAQ,CAAC;iBAC1B;aACF,CAAC;;;;;;;YAQF,MAAM,QAAQ,GAAG,CAAC,YAAqB,EAAE,gBAAyB;gBAChE,IAAI,UAAU,GAAG,KAAK,CAAC;gBACvB,IAAI,QAAQ,GAAG,KAAK,CAAC;gBACrB,IACE,CAAC,YAAY,CAAC,IAAI,GAAG,gBAAgB,CAAC,IAAI,IAAI,YAAY,CAAC,IAAI,GAAG,gBAAgB,CAAC,KAAK;qBACvF,YAAY,CAAC,KAAK,GAAG,gBAAgB,CAAC,IAAI,IAAI,YAAY,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC;qBAC1F,YAAY,CAAC,IAAI,IAAI,gBAAgB,CAAC,IAAI,IAAI,YAAY,CAAC,KAAK,IAAI,gBAAgB,CAAC,KAAK,CAAC,EAC5F;oBACA,UAAU,GAAG,IAAI,CAAC;iBACnB;gBACD,IACE,CAAC,YAAY,CAAC,GAAG,GAAG,gBAAgB,CAAC,GAAG,IAAI,YAAY,CAAC,GAAG,GAAG,gBAAgB,CAAC,MAAM;qBACrF,YAAY,CAAC,MAAM,GAAG,gBAAgB,CAAC,GAAG,IAAI,YAAY,CAAC,MAAM,GAAG,gBAAgB,CAAC,MAAM,CAAC;qBAC5F,YAAY,CAAC,GAAG,IAAI,gBAAgB,CAAC,GAAG,IAAI,YAAY,CAAC,MAAM,IAAI,gBAAgB,CAAC,MAAM,CAAC,EAC5F;oBACA,QAAQ,GAAG,IAAI,CAAC;iBACjB;gBACD,OAAO,UAAU,IAAI,QAAQ,CAAC;aAC/B,CAAC;;;;;;;;YASF,MAAM,YAAY,GAAG,CAAC,gBAAyB,EAAE,QAAmB,EAAE,IAAY,EAAE,KAAsB;gBACxG,MAAM,eAAe,GAAG,EAAE,CAAC;gBAC3B,MAAM,sBAAsB,GAAG,EAAE,CAAC;gBAClC,MAAM,GAAG,GAAG,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;gBACjC,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACnC,MAAM,gBAAgB,GAAG,UAAU,CAAC,SAAS,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;gBAC1D,KAAK,MAAM,OAAO,IAAI,GAAG,EAAE;oBACzB,MAAM,YAAY,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;oBACrD,IAAI,QAAQ,CAAC,YAAY,EAAE,gBAAgB,CAAC,EAAE;wBAC5C,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;wBAC1C,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,sBAAsB,EAAE,UAAU,CAAC,CAAC;wBAC9E,IAAI,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;4BACpC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE;gCACnD,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;6BACvC;4BACD,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;yBAC3C;6BAAM;4BACL,sBAAsB,CAAC,OAAO,EAAE,CAAC;yBAClC;qBACF;yBAAM;wBACL,IAAI,gBAAgB,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE;4BAClD,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;yBACzC;qBACF;iBACF;gBACD,OAAO,eAAe,CAAC;aACxB,CAAC;;;;;YAMF,MAAM,MAAM,GAAG,EAAE;gBACf,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;oBACxB,OAAO;iBACR;gBACD,cAAc,EAAE,CAAC;gBACjB,mBAAmB,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;gBACzC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;gBAC1D,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;gBAC3D,MAAM,gBAAgB,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBACtD,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;gBACjD,MAAM,YAAY,GAAG,EAAE,CAAC;gBACxB,KAAK,MAAM,IAAI,IAAI,uBAAuB,EAAE;oBAC1C,YAAY,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,YAAY,CAAC,gBAAgB,EAAE,QAAQ,EAAE,IAAI,EAAE,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC;iBAC1G;gBAED,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,YAAY,EAAE,YAAY,CAAC,CAAC;gBAEhD,KAAK,CAAC,MAAM,CACV,oBAAoB,EACpB,SAAS,WAAW,CAAC,KAAK;oBACxB,MAAM,GAAG,GAAG,YAAY,CAAC,gCAAgC,CAAC,CAAC;oBAC3D,KAAK,MAAM,MAAM,IAAI,KAAK,EAAE;wBAC1B,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;wBAC3B,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;4BACzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;yBACvB;6BAAM;4BACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;yBACxB;qBACF;oBACD,OAAO,KAAK,CAAC;iBACd,EACD,EAAE,IAAI,EAAE,CAAC,WAAW,CAAC,EAAE,CACxB,CAAC;gBAEF,KAAK,CAAC,MAAM,CAAC,qCAAqC,EAAE,SAAS,oBAAoB,CAAC,cAAc;oBAC9F,MAAM,SAAS,GAAG,YAAY,CAAC,gCAAgC,CAAC,CAAC;oBACjE,MAAM,OAAO,GAAG,YAAY,CAAC,0BAA0B,CAAC,CAAC;oBACzD,KAAK,MAAM,GAAG,IAAI,cAAc,EAAE;wBAChC,IAAI,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;4BAC5B,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;yBACtB;6BAAM;4BACL,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;yBACvB;wBACD,KAAK,MAAM,KAAK,IAAI,GAAG,CAAC,MAAM,EAAE;4BAC9B,IAAI,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;gCAChC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;6BACxB;iCAAM;gCACL,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;6BACzB;yBACF;qBACF;oBACD,OAAO,cAAc,CAAC;iBACvB,CAAC,CAAC;aACJ,CAAC;;;;;YAMF,MAAM,SAAS,GAAG,EAAE;gBAClB,IAAI,SAAS,CAAC,SAAS,EAAE;oBACvB,EAAE,CAAC,eAAe,EAAE,CAAC;oBACrB,IAAI,SAAS,CAAC,KAAK,KAAK,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC,KAAK,KAAK,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE;wBAC/E,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;wBAC5B,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;wBACjC,OAAO;qBACR;iBACF;qBAAM;oBACL,cAAc,EAAE,CAAC;oBACjB,OAAO;iBACR;gBAED,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;gBACjC,MAAM,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACtC,MAAM,MAAM,GAAgB,EAAE,CAAC;gBAC/B,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK;oBACtB,MAAM,CAAC,QAAQ,qBAAQ,KAAK,CAAC,SAAS,CAAE,CAAC;oBACzC,MAAM,CAAC,SAAS,GAAG;wBACjB,0BAA0B,EAAE,EAAE;wBAC9B,gCAAgC,EAAE,EAAE;wBACpC,2BAA2B,EAAE,EAAE;wBAC/B,gCAAgC,EAAE,EAAE;qBAC5B,CAAC;oBACX,OAAO,MAAM,CAAC;iBACf,CAAC,CAAC;gBACH,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;gBACjD,KAAK,MAAM,IAAI,IAAI,uBAAuB,EAAE;oBAC1C,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE;wBAC1C,IAAI,aAAa,CAAC,SAAS,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;4BACjE,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;yBACzC;qBACF;iBACF;gBACD,KAAK,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,WAAW,CAAC,KAAK;oBAC3D,MAAM,GAAG,GAAG,aAAa,CAAC,SAAS,CAAC,gCAAgC,CAAC,CAAC;oBACtE,KAAK,MAAM,MAAM,IAAI,KAAK,EAAE;wBAC1B,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;wBAC3B,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;4BACzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;yBACvB;6BAAM;4BACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;yBACxB;qBACF;oBACD,OAAO,KAAK,CAAC;iBACd,CAAC,CAAC;gBACH,KAAK,CAAC,MAAM,CAAC,qCAAqC,EAAE,SAAS,oBAAoB,CAAC,cAAc;oBAC9F,KAAK,MAAM,GAAG,IAAI,cAAc,EAAE;wBAChC,KAAK,MAAM,KAAK,IAAI,GAAG,CAAC,MAAM,EAAE;4BAC9B,IAAI,aAAa,CAAC,SAAS,CAAC,gCAAgC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;gCAChF,IAAI,OAAO,KAAK,CAAC,QAAQ,KAAK,WAAW,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oCAC5D,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,+BAA+B,CAAC,CAAC;iCAC1D;gCACD,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;6BACvB;iCAAM;gCACL,IAAI,cAAc,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;oCAChF,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE,+BAA+B,CAAC,CAAC;iCAC5D;gCACD,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;6BACxB;yBACF;qBACF;oBACD,OAAO,cAAc,CAAC;iBACvB,CAAC,CAAC;aACJ,CAAC;;;;;YAMF,IAAI,CAAC,SAAS,GAAG,EAAE;gBACjB,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;oBACnB,OAAO;iBACR;gBACD,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;gBAC3B,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;gBACnC,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC;gBAClC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC;gBACnC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC;gBACnC,cAAc,GAAG,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;gBACjD,cAAc,EAAE,CAAC;aAClB,CAAC;;;;;YAMF,IAAI,CAAC,SAAS,GAAG,EAAE;gBACjB,MAAM,CAAC,EAAE,CAAC,CAAC;aACZ,CAAC;;;;;YAMF,IAAI,CAAC,OAAO,GAAG,EAAE;gBACf,IAAI,SAAS,CAAC,SAAS,EAAE;oBACvB,SAAS,CAAC,EAAE,CAAC,CAAC;iBACf;aACF,CAAC;YAEF,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YACtD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACjE,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACnD,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACrB;QACD,MAAM;YACJ,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;YAC1B,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC;SACzB;QACD,OAAO,CAAC,OAAO;YACb,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACtD,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAC1D,OAAO,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SAC1D;KACF;;;;;;;;;;IAWD,SAAS,eAAe,CACtB,OAAoB,EACpB,SAAmB,EACnB,QAAkB,EAClB,kBAA0B,EAC1B,iBAAyB;QAEzB,IAAI,SAAS,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;YAChE,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;SAC3C;aAAM,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;YACvE,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;SAC9C;QACD,IAAI,QAAQ,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE;YAC9D,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;SAC1C;aAAM,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE;YACrE,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;SAC7C;KACF;;;;;;;IAQD,MAAM,eAAe;QAInB,YAAY,OAAoB,EAAE,IAAS;YACzC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC,QAAQ,CAAC,+BAA+B,CAAC,GAAG,aAAa,CAAC;YACxF,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,QAAQ,CAAC,+BAA+B,CAAC,GAAG,YAAY,CAAC;YACtF,eAAe,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;SAC1G;QAED,MAAM,CAAC,OAAoB,EAAE,IAAS;YACpC,eAAe,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;SAC1G;QAED,OAAO,CAAC,OAAgB,EAAE,WAAgB;YACxC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAClD,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;SAClD;KACF;;;;;;;IAQD,MAAM,UAAU;QAId,YAAY,OAAoB,EAAE,IAAS;YACzC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC,QAAQ,CAAC,+BAA+B,CAAC,GAAG,aAAa,CAAC;YACxF,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,QAAQ,CAAC,+BAA+B,CAAC,GAAG,YAAY,CAAC;YACtF,eAAe,CACb,OAAO,EACP,IAAI,CAAC,IAAI,CAAC,SAAS,EACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAClB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACvB,CAAC;SACH;QAED,MAAM,CAAC,OAAoB,EAAE,IAAS;YACpC,eAAe,CACb,OAAO,EACP,IAAI,CAAC,IAAI,CAAC,SAAS,EACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAClB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACvB,CAAC;SACH;QAED,OAAO,CAAC,OAAoB,EAAE,IAAS;YACrC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAClD,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;SAClD;KACF;;;;;;IAOD,SAAS,aAAa,CAAC,KAAK;QAC1B,MAAM,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,iEAAiE,CAAC,CAAC;QACpG,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE;YAC1C,IAAI,aAAa,KAAK,KAAK,CAAC,EAAE,EAAE;gBAC9B,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACtB,OAAO,KAAK,CAAC;aACd;SACF;QACD,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;QACvB,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACxB,OAAO,KAAK,CAAC;KACd;IAED,OAAO,SAAS,UAAU,CAAC,QAAQ;QACjC,IAAI,GAAG,QAAQ,CAAC;QAChB,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACnB,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACf,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,WAAW,EAAE;YAC1C,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE;gBACjB,SAAS,EAAE;oBACT,0BAA0B,EAAE,EAAE;oBAC9B,gCAAgC,EAAE,EAAE;oBACpC,2BAA2B,EAAE,EAAE;oBAC/B,gCAAgC,EAAE,EAAE;iBACrC;gBACD,QAAQ,EAAE;oBACR,0BAA0B,EAAE,EAAE;oBAC9B,gCAAgC,EAAE,EAAE;oBACpC,2BAA2B,EAAE,EAAE;oBAC/B,gCAAgC,EAAE,EAAE;iBACrC;aACF,CAAC,CAAC;SACJ;QACD,KAAK,CAAC,MAAM,CAAC,oBAAoB,EAAE,KAAK;YACtC,KAAK,MAAM,MAAM,IAAI,KAAK,EAAE;gBAC1B,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;gBAC3B,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,WAAW,EAAE;oBACzC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;iBACxB;gBACD,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,WAAW,EAAE;oBACxC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;iBACvB;aACF;YACD,OAAO,KAAK,CAAC;SACd,CAAC,CAAC;QACH,KAAK,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO;YACnD,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC9B,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,MAAM,CAAC,8CAA8C,EAAE,OAAO;YAClE,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC9B,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,MAAM,CAAC,8CAA8C,EAAE,OAAO;YAClE,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACzB,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,MAAM,CAAC,kCAAkC,EAAE,QAAQ;YACvD,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC7B,OAAO,QAAQ,CAAC;SACjB,CAAC,CAAC;KACJ,CAAC;CACH;;AC3oBD;;;;;;;;;AAUA,SAAwB,cAAc,CAAC,OAAO,GAAG,EAAE;IACjD,IAAI,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC;IACzB,MAAM,cAAc,GAAG;QACrB,KAAK,EAAE,CAAC;QACR,UAAU,EAAE,KAAK;QACjB,QAAQ,CAAC,IAAI,KAAI;KAClB,CAAC;IACF,OAAO,mCAAQ,cAAc,GAAK,OAAO,CAAE,CAAC;IAE5C,MAAM,oBAAoB;QAKxB,YAAY,OAAoB;YAJhC,aAAQ,GAAY,KAAK,CAAC;YAC1B,UAAK,GAAW,CAAC,CAAC;YAIhB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjD,OAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAC5D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3D,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACzD,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAC3D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3D,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACxD,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YAC9B,MAAM,gBAAgB,GAAG,KAAK,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;;YAE3E,IAAI,OAAO,CAAC,UAAU,IAAI,gBAAgB,EAAE;gBAC1C,gBAAgB,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;aAC9C;SACF;QAED,cAAc,CAAC,EAAE;YACf,IAAI,EAAE,CAAC,IAAI,KAAK,WAAW,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC;gBAAE,OAAO;YACvD,EAAE,CAAC,eAAe,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,MAAM,UAAU,GAAG,GAAG,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;YACjD,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC;SAC3B;QAED,aAAa,CAAC,EAAE;YACd,QAAQ,CAAC;gBACP,IAAI,CAAC,IAAI,CAAC,QAAQ;oBAAE,OAAO;gBAC3B,MAAM,UAAU,GAAG,GAAG,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;gBACjD,MAAM,MAAM,GAAG,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;gBACzC,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;;gBAE/C,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;gBAC1E,KAAK,CAAC,MAAM,CAAC,mBAAmB,EAAE,UAAU;oBAC1C,IAAI,UAAU,CAAC,IAAI,KAAK,CAAC;wBAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;oBACvD,IAAI,UAAU,CAAC,EAAE,KAAK,CAAC;wBAAE,UAAU,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;oBACjD,UAAU,CAAC,IAAI,IAAI,SAAS,CAAC;oBAC7B,UAAU,CAAC,EAAE,IAAI,SAAS,CAAC;;oBAE3B,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;oBAC7B,OAAO,UAAU,CAAC;iBACnB,CAAC,CAAC;gBACH,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC;aAC3B,CAAC,EAAE,CAAC;SACN;QAED,YAAY,CAAC,EAAE;YACb,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;SAChB;QAED,OAAO,CAAC,OAAoB,EAAE,IAAS;YACrC,OAAO,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAC/D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC9D,QAAQ,CAAC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAC5D,OAAO,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAC9D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC9D,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;SAC5D;KACF;IAED,OAAO,SAAS,UAAU,CAAC,IAAI;QAC7B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACf,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACnB,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,KAAK,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO;YACnD,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YACnC,OAAO,OAAO,CAAC;SAChB,CAAC,CAAC;KACJ,CAAC;CACH;;ACzFD,cAAe,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,SAAS,EAAE,cAAc,EAAE,CAAC;;;;"}