{"version":3,"file":"plugins.js","sources":["../src/plugins/ItemHold.plugin.js","../src/plugins/ItemMovement.plugin.js","../src/plugins/SaveAsImage.plugin.js","../node_modules/raf-schd/dist/raf-schd.esm.js","../src/plugins/Selection.plugin.js"],"sourcesContent":["/**\n * ItemHold plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport default function ItemHold(options = {}) {\n  const defaultOptions = {\n    time: 1000,\n    movementThreshold: 2,\n    action(element, data) {}\n  };\n  options = { ...defaultOptions, ...options };\n\n  const holding = {};\n  const mouse = { x: 0, y: 0 };\n\n  function onMouseDown(item, element, event) {\n    if (typeof holding[item.id] === 'undefined') {\n      holding[item.id] = { x: event.x, y: event.y };\n      setTimeout(() => {\n        if (typeof holding[item.id] !== 'undefined') {\n          let exec = true;\n          let xMovement = holding[item.id].x - mouse.x;\n          if (Math.sign(xMovement) === -1) {\n            xMovement = -xMovement;\n          }\n          let yMovement = holding[item.id].y - mouse.y;\n          if (Math.sign(yMovement) === -1) {\n            yMovement = -yMovement;\n          }\n          if (xMovement > options.movementThreshold) {\n            exec = false;\n          }\n          if (yMovement > options.movementThreshold) {\n            exec = false;\n          }\n          delete holding[item.id];\n          if (exec) {\n            options.action(element, item);\n          }\n        }\n      }, options.time);\n    }\n  }\n\n  function onMouseUp(itemId) {\n    if (typeof holding[itemId] !== 'undefined') {\n      delete holding[itemId];\n    }\n  }\n\n  function action(element, data) {\n    function elementMouseDown(event) {\n      onMouseDown(data.item, element, event);\n    }\n    element.addEventListener('mousedown', elementMouseDown);\n    function mouseUp() {\n      onMouseUp(data.item.id);\n    }\n\n    document.addEventListener('mouseup', mouseUp);\n    function onMouseMove(event) {\n      mouse.x = event.x;\n      mouse.y = event.y;\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    return {\n      update(element, changedData) {\n        data = changedData;\n      },\n      destroy(element, data) {\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        element.removeEventListener('mousedown', elementMouseDown);\n      }\n    };\n  }\n\n  return function initialize(vido) {\n    vido.state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n","/**\n * ItemMovement plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport default function ItemMovement(options = {}) {\n  const defaultOptions = {\n    moveable: true,\n    resizeable: true,\n    resizerContent: '',\n    collisionDetection: true,\n    outOfBorders: false,\n    snapStart: (timeStart, startDiff) => timeStart + startDiff,\n    snapEnd: (timeEnd, endDiff) => timeEnd + endDiff,\n    ghostNode: true\n  };\n  options = { ...defaultOptions, ...options };\n\n  const movementState = {};\n\n  /**\n   * Add moving functionality to items as action\n   *\n   * @param {Node} node DOM Node\n   * @param {Object} data\n   */\n  function action(node, data) {\n    // @ts-ignore\n    let element = node.querySelector('.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-content');\n    if (!options.moveable && !options.resizeable) {\n      return;\n    }\n    let state;\n    let api;\n\n    function isMoveable(data) {\n      let moveable = options.moveable;\n      if (data.item.hasOwnProperty('moveable') && moveable) {\n        moveable = data.item.moveable;\n      }\n      if (data.row.hasOwnProperty('moveable') && moveable) {\n        moveable = data.row.moveable;\n      }\n      return moveable;\n    }\n\n    function isResizeable(data) {\n      let resizeable = options.resizeable && (!data.item.hasOwnProperty('resizeable') || data.item.resizeable === true);\n      if (data.row.hasOwnProperty('resizeable') && resizeable) {\n        resizeable = data.row.resizeable;\n      }\n      return resizeable;\n    }\n\n    function getMovement(data) {\n      const itemId = data.item.id;\n      if (typeof movementState[itemId] === 'undefined') {\n        movementState[itemId] = { moving: false, resizing: false };\n      }\n      return movementState[itemId];\n    }\n\n    function createGhost(data, ev, ganttLeft, ganttTop) {\n      const movement = getMovement(data);\n      if (!options.ghostNode || typeof movement.ghost !== 'undefined') {\n        return;\n      }\n      const ghost = element.cloneNode(true);\n      const style = getComputedStyle(element);\n      ghost.style.position = 'absolute';\n      ghost.style.left = ev.x - ganttLeft - movement.itemLeftCompensation + 'px';\n      const itemTop = ev.y - ganttTop - data.row.top - element.offsetTop;\n      movement.itemTop = itemTop;\n      ghost.style.top = ev.y - ganttTop - itemTop + 'px';\n      ghost.style.width = style.width;\n      ghost.style['box-shadow'] = '10px 10px 6px #00000020';\n      const height = element.clientHeight + 'px';\n      ghost.style.height = height;\n      ghost.style['line-height'] = height;\n      ghost.style.opacity = '0.75';\n      state.get('_internal.elements.chart-timeline').appendChild(ghost);\n      movement.ghost = ghost;\n      return ghost;\n    }\n\n    function moveGhost(data, ev) {\n      if (options.ghostNode) {\n        const movement = getMovement(data);\n        const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n        const compensation = state.get('config.scroll.compensation');\n        movement.ghost.style.left = left + 'px';\n        movement.ghost.style.top = ev.y - movement.ganttTop - movement.itemTop + compensation + 'px';\n      }\n    }\n\n    function destroyGhost(itemId) {\n      if (!options.ghostNode) {\n        return;\n      }\n      if (typeof movementState[itemId] !== 'undefined' && typeof movementState[itemId].ghost !== 'undefined') {\n        state.get('_internal.elements.chart-timeline').removeChild(movementState[itemId].ghost);\n        delete movementState[itemId].ghost;\n      }\n      element.style.opacity = '1';\n    }\n\n    function getSnapStart(data) {\n      let snapStart = options.snapStart;\n      if (typeof data.item.snapStart === 'function') {\n        snapStart = data.item.snapStart;\n      }\n      return snapStart;\n    }\n\n    function getSnapEnd(data) {\n      let snapEnd = options.snapEnd;\n      if (typeof data.item.snapEnd === 'function') {\n        snapEnd = data.item.snapEnd;\n      }\n      return snapEnd;\n    }\n\n    state = data.state;\n    api = data.api;\n\n    const resizerHTML = `<div class=\"${api.getClass('chart-timeline-items-row-item-content-resizer')}\">${\n      options.resizerContent\n    }</div>`;\n    // @ts-ignore\n    element.insertAdjacentHTML('beforeend', resizerHTML);\n    const resizerEl = element.querySelector(\n      '.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-content-resizer'\n    );\n    if (!isResizeable(data)) {\n      resizerEl.style.visibility = 'hidden';\n    } else {\n      resizerEl.style.visibility = 'visible';\n    }\n\n    function labelMouseDown(ev) {\n      ev.stopPropagation();\n      if (ev.button !== 0) {\n        return;\n      }\n      // @ts-ignore\n      element = node.querySelector('.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-content');\n      const movement = getMovement(data);\n      movement.moving = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.chart-timeline').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = Math.round((item.time.start - chartLeftTime) / timePerPixel);\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n      createGhost(data, ev, ganttRect.left, ganttRect.top);\n    }\n\n    function resizerMouseDown(ev) {\n      ev.stopPropagation();\n      if (ev.button !== 0) {\n        return;\n      }\n      const movement = getMovement(data);\n      movement.resizing = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.chart-timeline').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = (item.time.end - chartLeftTime) / timePerPixel;\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n    }\n\n    function isCollision(rowId, itemId, start, end) {\n      if (!options.collisionDetection) {\n        return false;\n      }\n      const time = state.get('_internal.chart.time');\n      if (options.outOfBorders && (start < time.from || end > time.to)) {\n        return true;\n      }\n      let diff = api.time.date(end).diff(start, 'milliseconds');\n      if (Math.sign(diff) === -1) {\n        diff = -diff;\n      }\n      if (diff <= 1) {\n        return true;\n      }\n      const row = state.get('config.list.rows.' + rowId);\n      for (const rowItem of row._internal.items) {\n        if (rowItem.id !== itemId) {\n          if (start >= rowItem.time.start && start <= rowItem.time.end) {\n            return true;\n          }\n          if (end >= rowItem.time.start && end <= rowItem.time.end) {\n            return true;\n          }\n          if (start <= rowItem.time.start && end >= rowItem.time.end) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    function movementX(ev, row, item, zoom, timePerPixel) {\n      ev.stopPropagation();\n      const movement = getMovement(data);\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      moveGhost(data, ev);\n      const leftMs = state.get('_internal.chart.time.leftGlobal') + left * timePerPixel;\n      const add = leftMs - item.time.start;\n      const originalStart = item.time.start;\n      const finalStartTime = getSnapStart(data)(item.time.start, add, item);\n      const finalAdd = finalStartTime - originalStart;\n      const collision = isCollision(row.id, item.id, item.time.start + finalAdd, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, function moveItem(time) {\n          time.start += finalAdd;\n          time.end = getSnapEnd(data)(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function resizeX(ev, row, item, zoom, timePerPixel) {\n      ev.stopPropagation();\n      if (!isResizeable(data)) {\n        return;\n      }\n      const time = state.get('_internal.chart.time');\n      const movement = getMovement(data);\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      const leftMs = time.leftGlobal + left * timePerPixel;\n      const add = leftMs - item.time.end;\n      if (item.time.end + add < item.time.start) {\n        return;\n      }\n      const originalEnd = item.time.end;\n      const finalEndTime = getSnapEnd(data)(item.time.end, add, item) - 1;\n      const finalAdd = finalEndTime - originalEnd;\n      const collision = isCollision(row.id, item.id, item.time.start, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, time => {\n          time.start = getSnapStart(data)(time.start, 0, item);\n          time.end = getSnapEnd(data)(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function movementY(ev, row, item, zoom, timePerPixel) {\n      ev.stopPropagation();\n      moveGhost(data, ev);\n      const movement = getMovement(data);\n      const top = ev.y - movement.ganttTop;\n      const visibleRows = state.get('_internal.list.visibleRows');\n      const compensation = state.get('config.scroll.compensation');\n      let index = 0;\n      for (const currentRow of visibleRows) {\n        if (currentRow.top + compensation > top) {\n          if (index > 0) {\n            return index - 1;\n          }\n          return 0;\n        }\n        index++;\n      }\n      return index;\n    }\n\n    function documentMouseMove(ev) {\n      const movement = getMovement(data);\n      let item, rowId, row, zoom, timePerPixel;\n      if (movement.moving || movement.resizing) {\n        ev.stopPropagation();\n        item = state.get(`config.chart.items.${data.item.id}`);\n        rowId = state.get(`config.chart.items.${data.item.id}.rowId`);\n        row = state.get(`config.list.rows.${rowId}`);\n        zoom = state.get('config.chart.time.zoom');\n        timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      }\n      const moveable = isMoveable(data);\n      if (movement.moving) {\n        if (moveable === true || moveable === 'x' || (Array.isArray(moveable) && moveable.includes(rowId))) {\n          movementX(ev, row, item, zoom, timePerPixel);\n        }\n        if (!moveable || moveable === 'x') {\n          return;\n        }\n        let visibleRowsIndex = movementY(ev, row, item, zoom, timePerPixel);\n        const visibleRows = state.get('_internal.list.visibleRows');\n        if (typeof visibleRows[visibleRowsIndex] === 'undefined') {\n          if (visibleRowsIndex > 0) {\n            visibleRowsIndex = visibleRows.length - 1;\n          } else if (visibleRowsIndex < 0) {\n            visibleRowsIndex = 0;\n          }\n        }\n        const newRow = visibleRows[visibleRowsIndex];\n        const newRowId = newRow.id;\n        const collision = isCollision(newRowId, item.id, item.time.start, item.time.end);\n        if (newRowId !== item.rowId && !collision) {\n          if (!Array.isArray(moveable) || moveable.includes(newRowId)) {\n            if (!newRow.hasOwnProperty('moveable') || newRow.moveable) {\n              state.update(`config.chart.items.${item.id}.rowId`, newRowId);\n            }\n          }\n        }\n      } else if (movement.resizing && (typeof item.resizeable === 'undefined' || item.resizeable === true)) {\n        resizeX(ev, row, item, zoom, timePerPixel);\n      }\n    }\n\n    function documentMouseUp(ev) {\n      const movement = getMovement(data);\n      if (movement.moving || movement.resizing) {\n        ev.stopPropagation();\n      }\n      movement.moving = false;\n      movement.resizing = false;\n      for (const itemId in movementState) {\n        movementState[itemId].moving = false;\n        movementState[itemId].resizing = false;\n        destroyGhost(itemId);\n      }\n    }\n    element.addEventListener('mousedown', labelMouseDown);\n    resizerEl.addEventListener('mousedown', resizerMouseDown, { capture: true });\n    document.addEventListener('mousemove', documentMouseMove, { capture: true, passive: true });\n    document.addEventListener('mouseup', documentMouseUp, { capture: true, passive: true });\n    return {\n      update(node, changedData) {\n        data = changedData;\n        if (!isResizeable(data)) {\n          resizerEl.style.visibility = 'hidden';\n        } else {\n          resizerEl.style.visibility = 'visible';\n        }\n      },\n      destroy(node, data) {\n        element.removeEventListener('mousedown', labelMouseDown);\n        resizerEl.removeEventListener('mousedown', resizerMouseDown);\n        document.removeEventListener('mousemove', documentMouseMove);\n        document.removeEventListener('mouseup', documentMouseUp);\n        resizerEl.remove();\n      }\n    };\n  }\n\n  return function initialize(vido) {\n    vido.state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n","/**\n * SaveAsImage plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\n// @ts-nocheck\nexport default function SaveAsImage(options = {}) {\n  const defaultOptions = {\n    style: 'font-family: sans-serif;',\n    filename: 'gantt-schedule-timeline-calendar.jpeg'\n  };\n  options = { ...defaultOptions, options };\n  function downloadImage(data, filename) {\n    const a = document.createElement('a');\n    a.href = data;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n  }\n\n  function saveAsImage(ev) {\n    const element = ev.target;\n    const width = element.clientWidth;\n    const height = element.clientHeight;\n    const html = unescape(encodeURIComponent(element.outerHTML));\n    let style = '';\n    for (const styleSheet of document.styleSheets) {\n      if (styleSheet.title === 'gstc') {\n        for (const rule of styleSheet.rules) {\n          style += rule.cssText;\n        }\n      }\n    }\n    style = `<style>* {${options.style}} ${style}</style>`;\n    const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\">\n      <foreignObject x=\"0\" y=\"0\" width=\"${width}\" height=\"${height}\">\n        <div xmlns=\"http://www.w3.org/1999/xhtml\">\n          ${style}\n          ${html}\n        </div>\n      </foreignObject>\n    </svg>`;\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, width, height);\n    const svg64 = 'data:image/svg+xml;base64,' + btoa(svg);\n    const img = new Image();\n    img.onload = function onLoad() {\n      ctx.drawImage(img, 0, 0);\n      const jpeg = canvas.toDataURL('image/jpeg', 1.0);\n      downloadImage(jpeg, options.filename);\n    };\n    img.src = svg64;\n  }\n\n  return function initialize(vido) {\n    vido.state.subscribe('_internal.elements.main', main => {\n      if (main) {\n        main.addEventListener('save-as-image', saveAsImage);\n      }\n    });\n  };\n}\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","/**\n * Selection plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport schedule from 'raf-schd';\nexport default function Selection(options = {}) {\n  let vido, state, api;\n  const defaultOptions = {\n    grid: false,\n    items: true,\n    rows: false,\n    horizontal: true,\n    vertical: true,\n    selecting() {},\n    deselecting() {},\n    selected() {},\n    deselected() {}\n  };\n  options = { ...defaultOptions, ...options };\n  let chartTimeline, top, left;\n  let selecting = { fromX: -1, fromY: -1, toX: -1, toY: -1, startX: -1, startY: -1, selecting: false };\n  const path = 'config.plugin.selection';\n  const rectClassName = 'gantt-schedule-timeline-caledar__plugin-selection-rect';\n  const rect = document.createElement('div');\n  rect.classList.add(rectClassName);\n  rect.style.visibility = 'hidden';\n  rect.style.left = '0px';\n  rect.style.top = '0px';\n  rect.style.width = '0px';\n  rect.style.height = '0px';\n  rect.style.background = 'rgba(0, 119, 192, 0.2)';\n  rect.style.border = '2px dashed rgba(0, 119, 192, 0.75)';\n  rect.style.position = 'absolute';\n  rect.style['user-select'] = 'none';\n  rect.style['pointer-events'] = 'none';\n  if (options.rectStyle) {\n    for (const styleProp in options.rectStyle) {\n      rect.style[styleProp] = options.rectStyle[styleProp];\n    }\n  }\n\n  /**\n   * Rect selection action\n   * @param {Element} element\n   * @param {object|any} data\n   * @returns {object} with update and destroy\n   */\n  function rectSelectionAction(element, data) {\n    let previousSelect;\n    chartTimeline = state.get('_internal.elements.chart-timeline');\n    if (!chartTimeline.querySelector('.' + rectClassName)) {\n      chartTimeline.insertAdjacentElement('beforeend', rect);\n      const bounding = chartTimeline.getBoundingClientRect();\n      left = bounding.left;\n      top = bounding.top;\n    }\n\n    /**\n     * Clear selection\n     */\n    function clearSelection() {\n      state.update(path, {\n        selecting: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        },\n        selected: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        }\n      });\n      state.update('_internal.chart.grid.rowsWithBlocks', rowsWithBlocks => {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            block.selected = false;\n            block.selecting = false;\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    /**\n     * Clone current selection state\n     * @param {object} currentSelect\n     * @returns {object} currentSelect cloned\n     */\n    function cloneSelection(currentSelect) {\n      const result = {};\n      result.selecting = { ...currentSelect.selecting };\n      result.selecting['chart-timeline-grid-rows'] = currentSelect.selecting['chart-timeline-grid-rows'].slice();\n      result.selecting['chart-timeline-grid-row-blocks'] = currentSelect.selecting[\n        'chart-timeline-grid-row-blocks'\n      ].slice();\n      result.selecting['chart-timeline-items-rows'] = currentSelect.selecting['chart-timeline-items-rows'].slice();\n      result.selecting['chart-timeline-items-row-items'] = currentSelect.selecting[\n        'chart-timeline-items-row-items'\n      ].slice();\n      result.selected = { ...currentSelect.selected };\n      result.selected['chart-timeline-grid-rows'] = currentSelect.selected['chart-timeline-grid-rows'].slice();\n      result.selected['chart-timeline-grid-row-blocks'] = currentSelect.selected[\n        'chart-timeline-grid-row-blocks'\n      ].slice();\n      result.selected['chart-timeline-items-rows'] = currentSelect.selected['chart-timeline-items-rows'].slice();\n      result.selected['chart-timeline-items-row-items'] = currentSelect.selected[\n        'chart-timeline-items-row-items'\n      ].slice();\n      return result;\n    }\n\n    /**\n     * Mouse down event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseDown(ev) {\n      if (ev.button !== 0) {\n        return;\n      }\n      selecting.selecting = true;\n      selecting.fromX = ev.x - left;\n      selecting.fromY = ev.y - top;\n      selecting.startX = selecting.fromX;\n      selecting.startY = selecting.fromY;\n      previousSelect = cloneSelection(state.get(path));\n      clearSelection();\n    }\n\n    /**\n     * Save and swap coordinates if needed\n     * @param {MouseEvent} ev\n     */\n    function saveAndSwapIfNeeded(ev) {\n      const currentX = ev.x - left;\n      const currentY = ev.y - top;\n      if (currentX <= selecting.startX) {\n        selecting.fromX = currentX;\n        selecting.toX = selecting.startX;\n      } else {\n        selecting.fromX = selecting.startX;\n        selecting.toX = currentX;\n      }\n      if (currentY <= selecting.startY) {\n        selecting.fromY = currentY;\n        selecting.toY = selecting.startY;\n      } else {\n        selecting.fromY = selecting.startY;\n        selecting.toY = currentY;\n      }\n    }\n\n    /**\n     * Is rectangle inside other rectangle ?\n     * @param {DOMRect} boundingRect\n     * @param {DOMRect} rectBoundingRect\n     * @returns {boolean}\n     */\n    function isInside(boundingRect, rectBoundingRect) {\n      let horizontal = false;\n      let vertical = false;\n      if (\n        (boundingRect.left >= rectBoundingRect.left && boundingRect.left <= rectBoundingRect.right) ||\n        (boundingRect.right >= rectBoundingRect.left && boundingRect.right <= rectBoundingRect.right) ||\n        (boundingRect.left <= rectBoundingRect.left && boundingRect.right >= rectBoundingRect.right)\n      ) {\n        horizontal = true;\n      }\n      if (\n        (boundingRect.top >= rectBoundingRect.top && boundingRect.top <= rectBoundingRect.bottom) ||\n        (boundingRect.bottom >= rectBoundingRect.top && boundingRect.bottom <= rectBoundingRect.bottom) ||\n        (boundingRect.top <= rectBoundingRect.top && boundingRect.bottom >= rectBoundingRect.bottom)\n      ) {\n        vertical = true;\n      }\n      return horizontal && vertical;\n    }\n\n    /**\n     * Get selecting elements\n     * @param {DOMRect} rectBoundingRect\n     * @param {Element[]} elements\n     * @param {string} type\n     * @returns {string[]}\n     */\n    function getSelecting(rectBoundingRect, elements, type) {\n      const selectingResult = [];\n      const all = elements[type + 's'];\n      const currentSelecting = state.get(`${path}.selecting.${type}s`);\n      for (const element of all) {\n        const boundingRect = element.getBoundingClientRect();\n        if (isInside(boundingRect, rectBoundingRect)) {\n          selectingResult.push(element.vido.id);\n          if (!currentSelecting.includes(element.vido.id)) {\n            options.selecting(element.vido, type);\n          }\n        } else {\n          if (currentSelecting.includes(element.vido.id)) {\n            options.deselecting(element.vido, type);\n          }\n        }\n      }\n      return selectingResult;\n    }\n\n    /**\n     * Mouse move event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseMove(ev) {\n      if (!selecting.selecting) {\n        return;\n      }\n      if (ev.x - left === selecting.fromX || ev.y - top === selecting.fromY) {\n        return;\n      }\n      ev.stopPropagation();\n      saveAndSwapIfNeeded(ev);\n      rect.style.left = selecting.fromX + 'px';\n      rect.style.top = selecting.fromY + 'px';\n      rect.style.visibility = 'visible';\n      rect.style.width = selecting.toX - selecting.fromX + 'px';\n      rect.style.height = selecting.toY - selecting.fromY + 'px';\n      const rectBoundingRect = rect.getBoundingClientRect();\n      const elements = state.get('_internal.elements');\n      const selectingGridRowBlocks = getSelecting(rectBoundingRect, elements, 'chart-timeline-grid-row-block');\n      state.update(`${path}.selecting`, {\n        'chart-timeline-grid-rows': [],\n        'chart-timeline-grid-row-blocks': selectingGridRowBlocks,\n        'chart-timeline-items-rows': [],\n        'chart-timeline-items-row-items': []\n      });\n      state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            // @ts-ignore\n            if (selectingGridRowBlocks.includes(block.id)) {\n              block.selecting = true;\n            } else {\n              block.selecting = false;\n            }\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    /**\n     * Mouse up event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseUp(ev) {\n      if (selecting.selecting) {\n        ev.stopPropagation();\n      } else {\n        return;\n      }\n      selecting.selecting = false;\n      rect.style.visibility = 'hidden';\n      const currentSelect = state.get(path);\n      const select = {};\n      state.update(path, value => {\n        select.selected = { ...value.selecting };\n        select.selecting = {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        };\n        return select;\n      });\n      const elements = state.get('_internal.elements');\n      for (const element of elements['chart-timeline-grid-row-blocks']) {\n        if (currentSelect.selecting['chart-timeline-grid-row-blocks'].includes(element.vido.id)) {\n          options.deselecting(element.vido, 'chart-timeline-grid-row-block');\n        }\n      }\n      state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            if (currentSelect.selecting['chart-timeline-grid-row-blocks'].includes(block.id)) {\n              if (typeof block.selected === 'undefined' || !block.selected) {\n                options.selected(block, 'chart-timeline-grid-row-block');\n              }\n              block.selected = true;\n            } else {\n              if (previousSelect.selected['chart-timeline-grid-row-blocks'].includes(block.id)) {\n                options.deselected(block, 'chart-timeline-grid-row-block');\n              }\n              block.selected = false;\n            }\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    element.addEventListener('mousedown', mouseDown);\n    document.addEventListener('mousemove', schedule(mouseMove));\n    document.body.addEventListener('mouseup', mouseUp);\n    return {\n      update() {},\n      destroy() {\n        document.body.removeEventListener('mouseup', mouseUp);\n        document.removeEventListener('mousemove', mouseMove);\n        element.removeEventListener('mousedown', mouseDown);\n      }\n    };\n  }\n\n  /**\n   * Grid row block action\n   * @param {Element} element\n   * @param {object} data\n   * @returns {object} with update and destroy functions\n   */\n  function gridBlockAction(element, data) {\n    const classNameSelecting = api.getClass('chart-timeline-grid-row-block') + '--selecting';\n    const classNameSelected = api.getClass('chart-timeline-grid-row-block') + '--selected';\n    if (data.selecting) {\n      element.classList.add(classNameSelecting);\n    } else {\n      element.classList.remove(classNameSelecting);\n    }\n    if (data.selected) {\n      element.classList.add(classNameSelected);\n    } else {\n      element.classList.remove(classNameSelected);\n    }\n    return {\n      update(element, data) {\n        if (data.selecting) {\n          element.classList.add(classNameSelecting);\n        } else {\n          element.classList.remove(classNameSelecting);\n        }\n        if (data.selected) {\n          element.classList.add(classNameSelected);\n        } else {\n          element.classList.remove(classNameSelected);\n        }\n      },\n      destroy(element, changedData) {\n        element.classList.remove(classNameSelecting);\n        element.classList.remove(classNameSelected);\n      }\n    };\n  }\n\n  /**\n   * On block create handler\n   * @param {object} block\n   * @returns {object} block\n   */\n  function onBlockCreate(block) {\n    const select = state.get('config.plugin.selection');\n    if (select.selected['chart-timeline-grid-row-blocks'].find(id => id === block.id)) {\n      block.selected = true;\n    } else {\n      block.selected = false;\n    }\n    return block;\n  }\n\n  return function initialize(mainVido) {\n    vido = mainVido;\n    state = vido.state;\n    api = vido.api;\n    if (typeof state.get(path) === 'undefined') {\n      state.update(path, {\n        selecting: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        },\n        selected: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        }\n      });\n    }\n    state.update('config.actions.chart-timeline', actions => {\n      actions.push(rectSelectionAction);\n      return actions;\n    });\n    state.update('config.actions.chart-timeline-grid-row-block', actions => {\n      actions.push(gridBlockAction);\n      return actions;\n    });\n    state.update('config.chart.grid.block.onCreate', onCreate => {\n      onCreate.push(onBlockCreate);\n      return onCreate;\n    });\n  };\n}\n"],"names":["schedule"],"mappings":"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"}