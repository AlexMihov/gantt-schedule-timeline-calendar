{"version":3,"file":"timeline-pointer.plugin.umd.js","sources":["../node_modules/@neuronet.io/vido/src/helpers.ts","../src/plugins/timeline-pointer.plugin.ts"],"sourcesContent":["/**\n * Schedule - a throttle function that uses requestAnimationFrame to limit the rate at which a function is called.\n *\n * @param {function} fn\n * @returns {function}\n */\nexport function schedule(fn: (argument) => void | any) {\n  let frameId = 0;\n  function wrapperFn(argument) {\n    if (frameId) {\n      return;\n    }\n    function executeFrame() {\n      frameId = 0;\n      fn.apply(undefined, [argument]);\n    }\n    frameId = requestAnimationFrame(executeFrame);\n  }\n  return wrapperFn;\n}\n\n/**\n * Is object - helper function to determine if specified variable is an object\n *\n * @param {any} item\n * @returns {boolean}\n */\nfunction isObject(item) {\n  return item && typeof item === 'object' && item.constructor && item.constructor.name === 'Object';\n}\n\n/**\n * Merge deep - helper function which will merge objects recursively - creating brand new one - like clone\n *\n * @param {object} target\n * @params {[object]} sources\n * @returns {object}\n */\nexport function mergeDeep(target, ...sources) {\n  const source = sources.shift();\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (typeof source[key].clone === 'function') {\n          target[key] = source[key].clone();\n        } else {\n          if (typeof target[key] === 'undefined') {\n            target[key] = {};\n          }\n          target[key] = mergeDeep(target[key], source[key]);\n        }\n      } else if (Array.isArray(source[key])) {\n        target[key] = new Array(source[key].length);\n        let index = 0;\n        for (let item of source[key]) {\n          if (isObject(item)) {\n            if (typeof item.clone === 'function') {\n              target[key][index] = item.clone();\n            } else {\n              target[key][index] = mergeDeep({}, item);\n            }\n          } else {\n            target[key][index] = item;\n          }\n          index++;\n        }\n      } else {\n        target[key] = source[key];\n      }\n    }\n  }\n  if (!sources.length) {\n    return target;\n  }\n  return mergeDeep(target, ...sources);\n}\n\n/**\n * Clone helper function\n *\n * @param source\n * @returns {object} cloned source\n */\nexport function clone(source) {\n  if (typeof source.actions !== 'undefined') {\n    const actns = source.actions.map((action) => {\n      const result = { ...action };\n      const props = { ...result.props };\n      delete props.state;\n      delete props.api;\n      delete result.element;\n      result.props = props;\n      return result;\n    });\n    source.actions = actns;\n  }\n  return mergeDeep({}, source);\n}\n\nexport default {\n  mergeDeep,\n  clone,\n  schedule,\n};\n","/**\n * TimelinePointer plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport DeepState from 'deep-state-observer';\nimport { Api } from '../api/api';\nimport { Vido } from '../gstc';\nimport { mergeDeep } from '@neuronet.io/vido/src/helpers';\n\nexport const CELL = 'chart-timeline-grid-row-cell';\nexport type CELL_TYPE = 'chart-timeline-grid-row-cell';\nexport const ITEM = 'chart-timeline-items-row-item';\nexport type ITEM_TYPE = 'chart-timeline-items-row-item';\nexport type SELECTION_TYPE = typeof CELL | typeof ITEM;\n\nexport interface PointerEvents {\n  down: PointerEvent | null;\n  move: PointerEvent | null;\n  up: PointerEvent | null;\n}\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport type PointerState = 'up' | 'down' | 'move';\n\nexport interface CaptureEvents {\n  up?: boolean;\n  down?: boolean;\n  move?: boolean;\n}\n\nexport interface Options {\n  enabled?: boolean;\n  captureEvents?: CaptureEvents;\n}\n\nexport interface Offset {\n  top: number;\n  left: number;\n}\n\nexport interface PluginData extends Options {\n  isMoving: boolean;\n  pointerState: PointerState;\n  currentTarget: HTMLElement | null;\n  realTarget: HTMLElement | null;\n  targetType: ITEM_TYPE | CELL_TYPE | '';\n  targetData: any | null;\n  events: PointerEvents;\n  offset: Offset;\n  initialPosition: Point;\n  currentPosition: Point;\n}\n\nfunction generateEmptyData(options: Options = {}): PluginData {\n  const result: PluginData = {\n    enabled: true,\n    isMoving: false,\n    pointerState: 'up',\n    currentTarget: null,\n    realTarget: null,\n    targetType: '',\n    targetData: null,\n    offset: { top: 0, left: 0 },\n    captureEvents: {\n      down: false,\n      up: false,\n      move: false,\n    },\n    initialPosition: { x: 0, y: 0 },\n    currentPosition: { x: 0, y: 0 },\n    events: {\n      down: null,\n      move: null,\n      up: null,\n    },\n  };\n  if (options.captureEvents) {\n    result.captureEvents = {\n      ...result.captureEvents,\n      ...options.captureEvents,\n    };\n  }\n  return result;\n}\n\nconst pluginPath = 'config.plugin.TimelinePointer';\n\nclass TimelinePointer {\n  private element: HTMLElement;\n  private vido: Vido;\n  private api: Api;\n  private state: DeepState;\n  private data: PluginData;\n  private unsub = [];\n  private classNames = {\n    cell: '',\n    item: '',\n  };\n\n  constructor(options: Options, vido: Vido) {\n    this.vido = vido;\n    this.api = vido.api;\n    this.state = vido.state;\n    this.element = this.state.get(`$data.elements.chart-timeline`);\n    this.pointerDown = this.pointerDown.bind(this);\n    this.pointerMove = this.pointerMove.bind(this);\n    this.pointerUp = this.pointerUp.bind(this);\n    this.data = generateEmptyData(options);\n    this.classNames.cell = this.api.getClass(CELL);\n    this.classNames.item = this.api.getClass(ITEM);\n    this.destroy = this.destroy.bind(this);\n    this.element.addEventListener('pointerdown', this.pointerDown /*, this.data.captureEvents.down*/);\n    document.addEventListener('pointerup', this.pointerUp /*, this.data.captureEvents.up*/);\n    document.addEventListener('pointermove', this.pointerMove /*, this.data.captureEvents.move*/);\n    this.unsub.push(this.state.subscribe(pluginPath, (value) => (this.data = value)));\n    this.unsub.push(\n      this.state.subscribe('config.scroll.vertical.offset', (offset) => {\n        this.data.offset.left = offset;\n        this.updateData();\n      })\n    );\n  }\n\n  public destroy() {\n    this.element.removeEventListener('pointerdown', this.pointerDown);\n    document.removeEventListener('pointerup', this.pointerUp);\n    document.removeEventListener('pointermove', this.pointerMove);\n  }\n\n  private updateData() {\n    this.state.update(pluginPath, () => ({ ...this.data }));\n  }\n\n  private getRealTarget(ev: PointerEvent) {\n    let realTarget: HTMLElement = (ev.target as HTMLElement).closest('.' + this.classNames.item) as HTMLElement;\n    if (realTarget) {\n      return realTarget;\n    }\n    realTarget = (ev.target as HTMLElement).closest('.' + this.classNames.cell) as HTMLElement;\n    if (realTarget) {\n      return realTarget;\n    }\n    return null;\n  }\n\n  private getRealPosition(ev: PointerEvent): Point {\n    const pos = { x: 0, y: 0 };\n    if (this.element) {\n      const bounding = this.element.getBoundingClientRect();\n      pos.x = ev.x - bounding.x;\n      pos.y = ev.y - bounding.y;\n      const scrollOffsetTop = this.state.get('config.scroll.vertical.offset') || 0;\n      pos.y += scrollOffsetTop;\n    }\n    return pos;\n  }\n\n  private pointerDown(ev: PointerEvent) {\n    if (!this.data.enabled) return;\n    this.data.pointerState = 'down';\n    this.data.currentTarget = ev.target as HTMLElement;\n    this.data.realTarget = this.getRealTarget(ev);\n    if (this.data.realTarget) {\n      if (this.data.realTarget.classList.contains(this.classNames.item)) {\n        this.data.targetType = ITEM;\n        // @ts-ignore\n        this.data.targetData = this.data.realTarget.vido.item;\n      } else if (this.data.realTarget.classList.contains(this.classNames.cell)) {\n        this.data.targetType = CELL;\n        // @ts-ignore\n        this.data.targetData = this.data.realTarget.vido;\n      } else {\n        this.data.targetType = '';\n      }\n    } else {\n      this.data.targetType = '';\n      this.data.targetData = null;\n    }\n    this.data.isMoving = !!this.data.realTarget;\n    this.data.events.down = ev;\n    this.data.events.move = ev;\n    const realPosition = this.getRealPosition(ev);\n    this.data.initialPosition = realPosition;\n    this.data.currentPosition = realPosition;\n    this.updateData();\n  }\n\n  private pointerUp(ev: PointerEvent) {\n    if (!this.data.enabled) return;\n    this.data.pointerState = 'up';\n    this.data.isMoving = false;\n    this.data.events.up = ev;\n    this.data.currentPosition = this.getRealPosition(ev);\n    this.updateData();\n  }\n\n  private pointerMove(ev: PointerEvent) {\n    if (!this.data.enabled || !this.data.isMoving) return;\n    this.data.pointerState = 'move';\n    this.data.events.move = ev;\n    this.data.currentPosition = this.getRealPosition(ev);\n    this.updateData();\n  }\n}\n\nexport function Plugin(options: Options) {\n  return function initialize(vidoInstance: Vido) {\n    const currentOptions = vidoInstance.state.get(pluginPath);\n    if (currentOptions) {\n      options = mergeDeep(mergeDeep({}, options), currentOptions);\n    }\n    const subs = [];\n    const defaultData = generateEmptyData(options);\n    // for other plugins that are initialized before elements are saved\n    vidoInstance.state.update(pluginPath, defaultData);\n\n    // initialize only if chart element is mounted\n    let timelinePointerDestroy;\n    subs.push(\n      vidoInstance.state.subscribe('$data.elements.chart-timeline', (timelineElement: HTMLElement) => {\n        if (timelineElement) {\n          if (timelinePointerDestroy) timelinePointerDestroy();\n          const timelinePointer = new TimelinePointer(options, vidoInstance);\n          timelinePointerDestroy = timelinePointer.destroy;\n        }\n      })\n    );\n    return function destroy() {\n      subs.forEach((unsub) => unsub());\n      if (timelinePointerDestroy) timelinePointerDestroy();\n    };\n  };\n}\n"],"names":[],"mappings":"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"}