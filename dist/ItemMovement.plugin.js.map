{"version":3,"file":"ItemMovement.plugin.js","sources":["../src/plugins/ItemMovement.plugin.js"],"sourcesContent":["/**\n * ItemMovement plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0\n */\n\n//- @ts-nocheck\nexport default function ItemMovement(options = {}) {\n  const defaultOptions = {\n    moveable: true,\n    resizeable: true,\n    resizerContent: '',\n    collisionDetection: true,\n    outOfBorders: false,\n    snapStart: (timeStart, startDiff) => timeStart + startDiff,\n    snapEnd: (timeEnd, endDiff) => timeEnd + endDiff,\n    ghostNode: true\n  };\n  options = { ...defaultOptions, ...options };\n  const movementState = {};\n\n  /**\n   * Add moving functionality to items as action\n   *\n   * @param {Node} node DOM Node\n   * @param {Object} data\n   */\n  function action(node, data) {\n    const element = node.querySelector('.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-content');\n    if (!options.moveable && !options.resizeable) {\n      return;\n    }\n    let moveable = options.moveable;\n    if (data.item.hasOwnProperty('moveable') && moveable) {\n      moveable = data.item.moveable;\n    }\n    if (data.row.hasOwnProperty('moveable') && moveable) {\n      moveable = data.row.moveable;\n    }\n    let resizeable = options.resizeable && (!data.item.hasOwnProperty('resizeable') || data.item.resizeable === true);\n    if (data.row.hasOwnProperty('resizeable') && resizeable) {\n      resizeable = data.row.resizeable;\n    }\n    const api = data.api;\n    let snapStart = options.snapStart;\n    if (typeof data.item.snapStart === 'function') {\n      snapStart = data.item.snapStart;\n    }\n    let snapEnd = options.snapEnd;\n    if (typeof data.item.snapEnd === 'function') {\n      snapEnd = data.item.snapEnd;\n    }\n\n    if (resizeable) {\n      const resizerHTML = `<div class=\"${api.getClass('chart-timeline-items-row-item-content-resizer')}\">${\n        options.resizerContent\n      }</div>`;\n      // @ts-ignore\n      element.insertAdjacentHTML('beforeend', resizerHTML);\n    }\n\n    const el = element;\n    const resizerEl = el.querySelector(\n      '.gantt-schedule-timeline-calendar__chart-timeline-items-row-item-content-resizer'\n    );\n    const state = data.state;\n\n    function getMovement() {\n      const itemId = data.item.id;\n      if (typeof movementState[itemId] === 'undefined') {\n        movementState[itemId] = { moving: false, resizing: false };\n      }\n      return movementState[itemId];\n    }\n\n    function createGhost(itemId, ev, ganttLeft, ganttTop) {\n      const movement = getMovement();\n      if (!options.ghostNode || typeof movement.ghost !== 'undefined') {\n        return;\n      }\n      const ghost = element.cloneNode(true);\n      const style = getComputedStyle(element);\n      ghost.style.position = 'absolute';\n      ghost.style.left = ev.x - ganttLeft - movement.itemLeftCompensation + 'px';\n      const itemTop = ev.y - ganttTop - data.row.top - element.offsetTop;\n      movement.itemTop = itemTop;\n      ghost.style.top = ev.y - ganttTop - itemTop + 'px';\n      ghost.style.width = style.width;\n      ghost.style['box-shadow'] = '10px 10px 6px #00000020';\n      const height = element.clientHeight + 'px';\n      ghost.style.height = height;\n      ghost.style['line-height'] = height;\n      ghost.style.opacity = '0.75';\n      state.get('_internal.elements.gantt').appendChild(ghost);\n      movement.ghost = ghost;\n      return ghost;\n    }\n\n    function moveGhost(ev) {\n      if (options.ghostNode) {\n        const movement = getMovement();\n        const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n        movement.ghost.style.left = left + 'px';\n        movement.ghost.style.top = ev.y - movement.ganttTop - movement.itemTop + 'px';\n      }\n    }\n\n    function destroyGhost(itemId) {\n      if (!options.ghostNode) {\n        return;\n      }\n      if (typeof movementState[itemId] !== 'undefined' && typeof movementState[itemId].ghost !== 'undefined') {\n        state.get('_internal.elements.gantt').removeChild(movementState[itemId].ghost);\n        delete movementState[itemId].ghost;\n      }\n      element.style.opacity = '1';\n    }\n\n    function labelMouseDown(ev) {\n      if (ev.button !== 0) {\n        return;\n      }\n      const movement = getMovement();\n      movement.moving = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.gantt').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = Math.round((item.time.start - chartLeftTime) / timePerPixel);\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n      createGhost(data.item.id, ev, ganttRect.left, ganttRect.top);\n    }\n\n    function resizerMouseDown(ev) {\n      if (ev.button !== 0) {\n        return;\n      }\n      ev.stopPropagation();\n      const movement = getMovement();\n      movement.resizing = true;\n      const item = state.get(`config.chart.items.${data.item.id}`);\n      const chartLeftTime = state.get('_internal.chart.time.leftGlobal');\n      const timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      const ganttRect = state.get('_internal.elements.gantt').getBoundingClientRect();\n      movement.ganttTop = ganttRect.top;\n      movement.ganttLeft = ganttRect.left;\n      movement.itemX = (item.time.end - chartLeftTime) / timePerPixel;\n      movement.itemLeftCompensation = ev.x - movement.ganttLeft - movement.itemX;\n    }\n\n    function isCollision(rowId, itemId, start, end) {\n      if (!options.collisionDetection) {\n        return false;\n      }\n      const time = state.get('_internal.chart.time');\n      if (options.outOfBorders && (start < time.from || end > time.to)) {\n        return true;\n      }\n      let diff = api.time.date(end).diff(start, 'milliseconds');\n      if (Math.sign(diff) === -1) {\n        diff = -diff;\n      }\n      if (diff <= 1) {\n        return true;\n      }\n      const row = state.get('config.list.rows.' + rowId);\n      for (const rowItem of row._internal.items) {\n        if (rowItem.id !== itemId) {\n          if (start >= rowItem.time.start && start <= rowItem.time.end) {\n            return true;\n          }\n          if (end >= rowItem.time.start && end <= rowItem.time.end) {\n            return true;\n          }\n          if (start <= rowItem.time.start && end >= rowItem.time.end) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    function movementX(ev, row, item, zoom, timePerPixel) {\n      const movement = getMovement();\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      moveGhost(ev);\n      const leftMs = state.get('_internal.chart.time.leftGlobal') + left * timePerPixel;\n      const add = leftMs - item.time.start;\n      const originalStart = item.time.start;\n      const finalStartTime = snapStart(item.time.start, add, item);\n      const finalAdd = finalStartTime - originalStart;\n      const collision = isCollision(row.id, item.id, item.time.start + finalAdd, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, function moveItem(time) {\n          time.start += finalAdd;\n          time.end = snapEnd(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function resizeX(ev, row, item, zoom, timePerPixel) {\n      const time = state.get('_internal.chart.time');\n      const movement = getMovement();\n      const left = ev.x - movement.ganttLeft - movement.itemLeftCompensation;\n      const leftMs = time.leftGlobal + left * timePerPixel;\n      const add = leftMs - item.time.end;\n      if (item.time.end + add < item.time.start) {\n        return;\n      }\n      const originalEnd = item.time.end;\n      const finalEndTime = snapEnd(item.time.end, add, item) - 1;\n      const finalAdd = finalEndTime - originalEnd;\n      const collision = isCollision(row.id, item.id, item.time.start, item.time.end + finalAdd);\n      if (finalAdd && !collision) {\n        state.update(`config.chart.items.${data.item.id}.time`, time => {\n          time.start = snapStart(time.start, 0, item);\n          time.end = snapEnd(time.end, finalAdd, item) - 1;\n          return time;\n        });\n      }\n    }\n\n    function movementY(ev, row, item, zoom, timePerPixel) {\n      moveGhost(ev);\n      const movement = getMovement();\n      const top = ev.y - movement.ganttTop;\n      const visibleRows = state.get('_internal.list.visibleRows');\n      let index = 0;\n      for (const currentRow of visibleRows) {\n        if (currentRow.top > top) {\n          if (index > 0) {\n            return index - 1;\n          }\n          return 0;\n        }\n        index++;\n      }\n      return index;\n    }\n\n    function documentMouseMove(ev) {\n      const movement = getMovement();\n      let item, rowId, row, zoom, timePerPixel;\n      if (movement.moving || movement.resizing) {\n        item = state.get(`config.chart.items.${data.item.id}`);\n        rowId = state.get(`config.chart.items.${data.item.id}.rowId`);\n        row = state.get(`config.list.rows.${rowId}`);\n        zoom = state.get('config.chart.time.zoom');\n        timePerPixel = state.get('_internal.chart.time.timePerPixel');\n      }\n      if (movement.moving) {\n        if (moveable === true || moveable === 'x' || (Array.isArray(moveable) && moveable.includes(rowId))) {\n          movementX(ev, row, item, zoom, timePerPixel);\n        }\n        if (!moveable || moveable === 'x') {\n          return;\n        }\n        let visibleRowsIndex = movementY(ev, row, item, zoom, timePerPixel);\n        const visibleRows = state.get('_internal.list.visibleRows');\n        if (typeof visibleRows[visibleRowsIndex] === 'undefined') {\n          if (visibleRowsIndex > 0) {\n            visibleRowsIndex = visibleRows.length - 1;\n          } else if (visibleRowsIndex < 0) {\n            visibleRowsIndex = 0;\n          }\n        }\n        const newRow = visibleRows[visibleRowsIndex];\n        const newRowId = newRow.id;\n        const collision = isCollision(newRowId, item.id, item.time.start, item.time.end);\n        if (newRowId !== item.rowId && !collision) {\n          if (!Array.isArray(moveable) || moveable.includes(newRowId)) {\n            if (!newRow.hasOwnProperty('moveable') || newRow.moveable) {\n              state.update(`config.chart.items.${item.id}.rowId`, newRowId);\n            }\n          }\n        }\n      } else if (movement.resizing && (typeof item.resizeable === 'undefined' || item.resizeable === true)) {\n        resizeX(ev, row, item, zoom, timePerPixel);\n      }\n    }\n\n    function documentMouseUp(ev) {\n      const movement = getMovement();\n      movement.moving = false;\n      movement.resizing = false;\n      for (const itemId in movementState) {\n        movementState[itemId].moving = false;\n        movementState[itemId].resizing = false;\n        destroyGhost(itemId);\n      }\n    }\n    if (moveable) el.addEventListener('mousedown', labelMouseDown);\n    if (resizeable) resizerEl.addEventListener('mousedown', resizerMouseDown);\n    document.addEventListener('mousemove', documentMouseMove);\n    document.addEventListener('mouseup', documentMouseUp);\n\n    return {\n      update(node, changedData) {\n        data = changedData;\n      },\n      destroy(node, data) {\n        if (moveable) el.removeEventListener('mousedown', labelMouseDown);\n        if (resizeable) resizerEl.removeEventListener('mousedown', resizerMouseDown);\n        document.removeEventListener('mousemove', documentMouseMove);\n        document.removeEventListener('mouseup', documentMouseUp);\n        if (resizeable) element.removeChild(resizerEl);\n      }\n    };\n  }\n\n  return function initializePlugin(state, api) {\n    state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n"],"names":[],"mappings":"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"}