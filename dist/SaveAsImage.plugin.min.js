!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).SaveAsImage=t()}(this,(function(){"use strict";
/**
   * SaveAsImage plugin
   *
   * @copyright Rafal Pospiech <https://neuronet.io>
   * @author    Rafal Pospiech <neuronet.io@gmail.com>
   * @package   gantt-schedule-timeline-calendar
   * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
   * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
   */return function SaveAsImage(e={}){function saveAsImage(t){const n=t.target,i=n.clientWidth,o=n.clientHeight,s=unescape(encodeURIComponent(n.outerHTML));let a="";for(const e of document.styleSheets)if("gstc"===e.title)for(const t of e.rules)a+=t.cssText;const c=`<svg xmlns="http://www.w3.org/2000/svg" width="${i}" height="${o}" viewBox="0 0 ${i} ${o}">\n      <foreignObject x="0" y="0" width="${i}" height="${o}">\n        <div xmlns="http://www.w3.org/1999/xhtml">\n          ${a=`<style>* {${e.style}} ${a}</style>`}\n          ${s}\n        </div>\n      </foreignObject>\n    </svg>`,l=document.createElement("canvas");l.width=i,l.height=o;const d=l.getContext("2d");d.fillStyle="white",d.fillRect(0,0,i,o);const f="data:image/svg+xml;base64,"+btoa(c),g=new Image;g.onload=function onLoad(){d.drawImage(g,0,0),function downloadImage(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()}(l.toDataURL("image/jpeg",1),e.filename)},g.src=f}return e=Object.assign(Object.assign({},{style:"font-family: sans-serif;",filename:"gantt-schedule-timeline-calendar.jpeg"}),{options:e}),function initialize(e){e.state.subscribe("_internal.elements.main",e=>{e&&e.addEventListener("save-as-image",saveAsImage)})}}}));
//# sourceMappingURL=SaveAsImage.plugin.min.js.map
