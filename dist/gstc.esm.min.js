"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t,e){return t(e={exports:{}},e.exports),e.exports}t((function(t,e){t.exports=function(){var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,i){i=i||Object.create(null);var s=document.createEvent("Event");s.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var o,a=2;a<t.length;a++)s[o=t[a]]=i[o]||e[a];s.buttons=i.buttons||0;var r=0;return r=void 0!==i.pressure&&s.buttons?i.pressure:s.buttons?.5:0,s.x=s.clientX,s.y=s.clientY,s.pointerId=i.pointerId||0,s.width=i.width||1,s.height=i.height||1,s.pressure=r,s.tiltX=i.tiltX||0,s.tiltY=i.tiltY||0,s.twist=i.twist||0,s.tangentialPressure=i.tangentialPressure||0,s.pointerType=i.pointerType||"",s.hwTimestamp=i.hwTimestamp||0,s.isPrimary=i.isPrimary||!1,s.detail=0,s}var i=window.Map&&window.Map.prototype.forEach?Map:s;function s(){this.array=[],this.size=0}s.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach((function(n,i){t.call(e,n,i,this)}),this)}};var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},l="undefined"!=typeof SVGElementInstance,c={pointermap:new i,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))}),this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e)}),this)},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e)}),this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=new n(t,e);return e.preventDefault&&(i.preventDefault=e.preventDefault),i._target=i._target||e.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<o.length;i++)n[e=o[i]]=t[e]||a[i],!l||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in r?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,s=[];null!=i&&i!==document&&!i.contains(t.relatedTarget);)if(s.push(i),!(i=i.parentNode))return;n&&s.reverse(),s.forEach((function(n){t.target=n,e.call(this,t)}),this)},setCapture:function(t,e,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var s=new n("gotpointercapture",{bubbles:!0});s.pointerId=t,s._target=e,i||this.asyncDispatchEvent(s)},releaseCapture:function(t,e){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var s=new n("lostpointercapture",{bubbles:!0});s.pointerId=t,s._target=i,e||this.asyncDispatchEvent(s)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};c.boundHandler=c.eventHandler.bind(c);var d={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,s,o=t.elementFromPoint(e,n);for(s=this.targetingShadow(o);s;){if(i=s.elementFromPoint(e,n)){var a=this.targetingShadow(i);return this.searchRoot(a,e,n)||i}s=this.olderShadow(s)}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),u=Array.prototype.map.call.bind(Array.prototype.map),p=Array.prototype.slice.call.bind(Array.prototype.slice),f=Array.prototype.filter.call.bind(Array.prototype.filter),m=window.MutationObserver||window.WebKitMutationObserver,g={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function v(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),m&&(this.observer=new m(this.mutationWatcher.bind(this)))}function b(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}v.prototype={watchSubtree:function(t){this.observer&&d.canTarget(t)&&this.observer.observe(t,g)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(p(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=u(t,this.findElements,this);return e.push(f(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var y=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],w="",$=window.PointerEvent||window.MSPointerEvent,x=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,P=c.pointermap,T=[1,4,2,8,16],M=!1;try{M=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var D,_={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,s=t.clientY,o=0,a=n.length;o<a&&(e=n[o]);o++){var r=Math.abs(i-e.x),l=Math.abs(s-e.y);if(r<=25&&l<=25)return!0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=P.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);M||(n.buttons=T[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),P.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),c.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);if(!M){var i=T[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}P.set(this.POINTER_ID,t),n.buttons&=~T[n.button],0===n.buttons?c.up(n):c.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),c.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse()},deactivateMouse:function(){P.delete(this.POINTER_ID)}},E=c.captureInfo,O=d.findTarget.bind(d),S=d.allShadows.bind(d),C=c.pointermap,I={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){D.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,c.listen(t,this.events),S(t).forEach((function(t){t._scrollType=n,c.listen(t,this.events)}),this))},elementRemoved:function(t){if(C.size>0){var e=this.events;t.addEventListener("touchend",(function(){t._scrollType=void 0,c.unlisten(t,e)}))}else t._scrollType=void 0,c.unlisten(t,this.events);S(t).forEach((function(t){t._scrollType=void 0,c.unlisten(t,this.events)}),this)},elementChanged:function(t,e){var n=t.getAttribute("touch-action"),i=this.touchActionToScrollType(n),s=this.touchActionToScrollType(e);"number"==typeof i&&"number"==typeof s?(t._scrollType=i,S(t).forEach((function(t){t._scrollType=i}),this)):"number"==typeof s?this.elementRemoved(t):"number"==typeof i&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?1:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?2:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?4:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?8:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return 15;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===C.size||1===C.size&&C.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),i=n.pointerId=t.identifier+2;if(n.target=E[i]||O(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){const e=Math.tan(t.altitudeAngle),i=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/e)*i,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/e)*i}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var s=this;return n.preventDefault=function(){s.scrolling=!1,s.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,s=0;s<n.length;s++)i=n[s],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(15===n)e=!0;else{var i=t.changedTouches[0],s=i.clientY-this.firstXY.Y,o=Math.abs(s),a=i.clientX-this.firstXY.X,r=Math.abs(a),l=1&n,c=2&n,d=4&n,h=8&n;d&&h?e=r>o:d?e=r>o&&a>0:h&&(e=r>o&&a<0),e||(l&&c?e=r<o:l?e=r<o&&s>0:c&&(e=r<o&&s<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,s=t.length;i<s&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(C.size>=e.length){var n=[];C.forEach((function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var s=t.out;n.push(s)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){C.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=C.get(e.pointerId);if(n){var i=n.out,s=n.outTarget;c.move(e),i&&s!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=s,i.target=s,e.target?(c.leaveOut(i),c.enterOver(e)):(e.target=s,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){C.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=_.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var s=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(s,2500)}}};D=new v(I.elementAdded,I.elementRemoved,I.elementChanged,I);var N,A,L,z=c.pointermap,G=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,Y={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return G&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){z.delete(t)},MSPointerDown:function(t){z.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e)}};function R(t){if(!c.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function H(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function k(t){return 0!==c.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(N=function(t){R(t),H(this),k(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t))},A=function(t){R(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(N=function(t){R(t),H(this),k(t)&&c.setCapture(t,this)},A=function(t){R(t),c.releaseCapture(t)}),L=function(t){return!!c.captureInfo[t]},function(){if($){y.forEach((function(t){w+=t.selector+b(t.value)+"\n",x&&(w+=function(t){return"body /shadow-deep/ "+t}(t.selector)+b(t.value)+"\n")}));var t=document.createElement("style");t.textContent=w,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",Y)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",_),void 0!==window.ontouchstart&&c.registerSource("touch",I);c.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:N},releasePointerCapture:{value:A},hasPointerCapture:{value:L}}),{dispatcher:c,Installer:v,PointerEvent:n,PointerMap:i,targetFinding:d}}()}));const e=t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n};class n{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}}const i=t=>null!=t&&"boolean"==typeof t.isDirective,s="undefined"!=typeof window&&(null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback),o=(t,e,n=null,i=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,i),e=n}},a=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},r={},l={},c=`{{lit-${String(Math.random()).slice(2)}}}`,d=`\x3c!--${c}--\x3e`,h=new RegExp(`${c}|${d}`);class u{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],s=document.createTreeWalker(e.content,133,null,!1);let o=0,a=-1,r=0;const{strings:l,values:{length:d}}=t;for(;r<d;){const t=s.nextNode();if(null!==t){if(a++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)p(e[t].name,"$lit$")&&i++;for(;i-- >0;){const e=l[r],n=v.exec(e)[2],i=n.toLowerCase()+"$lit$",s=t.getAttribute(i);t.removeAttribute(i);const o=s.split(h);this.parts.push({type:"attribute",index:a,name:n,strings:o,sanitizer:void 0}),r+=o.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(c)>=0){const i=t.parentNode,s=e.split(h),o=s.length-1;for(let e=0;e<o;e++){let n,o=s[e];if(""===o)n=g();else{const t=v.exec(o);null!==t&&p(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),n=document.createTextNode(o)}i.insertBefore(n,t),this.parts.push({type:"node",index:++a})}""===s[o]?(i.insertBefore(g(),t),n.push(t)):t.data=s[o],r+=o}}else if(8===t.nodeType)if(t.data===c){const e=t.parentNode;null!==t.previousSibling&&a!==o||(a++,e.insertBefore(g(),t)),o=a,this.parts.push({type:"node",index:a}),null===t.nextSibling?t.data="":(n.push(t),a--),r++}else{let e=-1;for(;-1!==(e=t.data.indexOf(c,e+1));)this.parts.push({type:"node",index:-1}),r++}}else s.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const p=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},f=t=>-1!==t.index,m=document.createComment(""),g=()=>m.cloneNode(),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class b{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let o,a=0,r=0,l=i.nextNode();for(;a<n.length;)if(o=n[a],f(o)){for(;r<o.index;)r++,"TEMPLATE"===l.nodeName&&(e.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=e.pop(),l=i.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options,o);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options,o));a++}else this.__parts.push(void 0),a++;return s&&(document.adoptNode(t),customElements.upgrade(t)),t}}let y;const w=` ${c} `,$=document.createElement("template");class x{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],s=t.lastIndexOf("\x3c!--");n=(s>-1||n)&&-1===t.indexOf("--\x3e",s+1);const o=v.exec(t);e+=null===o?t+(n?w:d):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+c}return e+=this.strings[t],e}getTemplateElement(){const t=$.cloneNode();return t.innerHTML=function(t){const e=window,n=e.trustedTypes||e.TrustedTypes;return n&&!y&&(y=n.createPolicy("lit-html",{createHTML:t=>t})),y?y.createHTML(t):t}(this.getHTML()),t}}class P extends x{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),o(e,n.firstChild),t}}const T=t=>null===t||!("object"==typeof t||"function"==typeof t),M=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),D=t=>t,_=(t,e,n)=>D;let E=_;const O=document.createTextNode("");class S{constructor(t,e,n,i,s="attribute"){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];let o=i&&i.sanitizer;void 0===o&&(o=E(t,e,s),void 0!==i&&(i.sanitizer=o)),this.sanitizer=o;for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new C(this)}_getValue(){const t=this.strings,e=this.parts,n=t.length-1;if(1===n&&""===t[0]&&""===t[1]&&void 0!==e[0]){const t=e[0].value;if(!M(t))return t}let i="";for(let s=0;s<n;s++){i+=t[s];const n=e[s];if(void 0!==n){const t=n.value;if(T(t)||!M(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[n],i}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),"symbol"==typeof t&&(t=String(t)),this.element.setAttribute(this.name,t)}}}class C{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===r||T(t)&&t===this.value||(this.value=t,i(t)||(this.committer.dirty=!0))}commit(){for(;i(this.value);){const t=this.value;this.value=r,t.isClass?t.body(this):t(this)}this.value!==r&&this.committer.commit()}}class I{constructor(t,e){this.value=void 0,this.__pendingValue=void 0,this.textSanitizer=void 0,this.options=t,this.templatePart=e}appendInto(t){this.startNode=t.appendChild(g()),this.endNode=t.appendChild(g())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=g()),t.__insert(this.endNode=g())}insertAfterPart(t){t.__insert(this.startNode=g()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==r&&(T(t)?t!==this.value&&this.__commitText(t):t instanceof x?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):M(t)?this.__commitIterable(t):t===l?(this.value=l,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling;if(t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType){void 0===this.textSanitizer&&(this.textSanitizer=E(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}else{const e=O.cloneNode();this.__commitNode(e),void 0===this.textSanitizer&&(this.textSanitizer=E(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof b&&this.value.template===e)this.value.update(t.values);else{const n=this.endNode.parentNode;if(E!==_&&"STYLE"===n.nodeName||"SCRIPT"===n.nodeName)return void this.__commitText("/* lit-html will not write TemplateResults to scripts and styles */");const i=new b(e,t.processor,this.options),s=i._clone();i.update(t.values),this.__commitNode(s),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const s of t)n=e[i],void 0===n&&(n=new I(this.options,this.templatePart),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(s),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){a(this.startNode.parentNode,t.nextSibling,this.endNode)}}class N{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}if(this.__pendingValue===r)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=r}}class A extends S{constructor(t,e,n,i){super(t,e,n,i,"property"),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new L(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),this.element[this.name]=t}}}class L extends C{}let z=!1;(()=>{try{const t={get capture(){return z=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class G{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}if(this.__pendingValue===r)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),s=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),s&&(this.__options=Y(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=r}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const Y=t=>t&&(z?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);class R{handleAttributeExpressions(t,e,n,i,s){const o=e[0];if("."===o){return new A(t,e.slice(1),n,s).parts}return"@"===o?[new G(t,e.slice(1),i.eventContext)]:"?"===o?[new N(t,e.slice(1),n)]:new S(t,e,n,s).parts}handleTextExpression(t,e){return new I(t,e)}}const H=new R;function k(t){let e=j.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},j.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(c);return n=e.keyString.get(i),void 0===n&&(n=new u(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const j=new Map,V=new WeakMap,F=(t,e,n)=>{let i=V.get(e);void 0===i&&(a(e,e.firstChild),V.set(e,i=new I(Object.assign({templateFactory:k},n),void 0)),i.appendInto(e)),i.setValue(t),i.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.7");const W=(t,...e)=>new x(t,e,"html",H),X=(t,...e)=>new P(t,e,"svg",H);var B=Object.freeze({__proto__:null,html:W,svg:X,DefaultTemplateProcessor:R,defaultTemplateProcessor:H,directive:e,Directive:n,isDirective:i,removeNodes:a,reparentNodes:o,noChange:r,nothing:l,AttributeCommitter:S,AttributePart:C,BooleanAttributePart:N,EventPart:G,isIterable:M,isPrimitive:T,NodePart:I,PropertyCommitter:A,PropertyPart:L,get sanitizerFactory(){return E},setSanitizerFactory:t=>{if(E!==_)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");E=t},parts:V,render:F,templateCaches:j,templateFactory:k,TemplateInstance:b,SVGTemplateResult:P,TemplateResult:x,createMarker:g,isTemplatePartActive:f,Template:u}),U=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,s){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,s,(e=t[n](e)).done,e.value)}))}}};const q=e((t,e)=>async n=>{var i,s;if(!(n instanceof I))throw new Error("asyncAppend can only be used in text bindings");if(t===n.value)return;let o;n.value=t;let a=0;try{for(var r,l=U(t);!(r=await l.next()).done;){let i=r.value;if(n.value!==t)break;0===a&&n.clear(),void 0!==e&&(i=e(i,a));let s=n.startNode;void 0!==o&&(s=g(),o.endNode=s,n.endNode.parentNode.insertBefore(s,n.endNode)),o=new I(n.options,n.templatePart),o.insertAfterNode(s),o.setValue(i),o.commit(),a++}}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=l.return)&&await s.call(l)}finally{if(i)throw i.error}}});var K=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,s){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,s,(e=t[n](e)).done,e.value)}))}}};const Q=e((t,e)=>async n=>{var i,s;if(!(n instanceof I))throw new Error("asyncReplace can only be used in text bindings");if(t===n.value)return;const o=new I(n.options,n.templatePart);n.value=t;let a=0;try{for(var r,l=K(t);!(r=await l.next()).done;){let i=r.value;if(n.value!==t)break;0===a&&(n.clear(),o.appendIntoPart(n)),void 0!==e&&(i=e(i,a)),o.setValue(i),o.commit(),a++}}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=l.return)&&await s.call(l)}finally{if(i)throw i.error}}}),J=new WeakMap,Z=e(t=>e=>{if(!(e instanceof I))throw new Error("cache can only be used in text bindings");let n=J.get(e);void 0===n&&(n=new WeakMap,J.set(e,n));const i=e.value;if(i instanceof b){if(t instanceof x&&i.template===e.options.templateFactory(t))return void e.setValue(t);{let t=n.get(i.template);void 0===t&&(t={instance:i,nodes:document.createDocumentFragment()},n.set(i.template,t)),o(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof x){const i=e.options.templateFactory(t),s=n.get(i);void 0!==s&&(e.setValue(s.nodes),e.commit(),e.value=s.instance)}e.setValue(t)}),tt=new WeakMap,et=e(t=>e=>{if(!(e instanceof C)||e instanceof L||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:n}=e,{element:i}=n;let s=tt.get(e);void 0===s&&(i.className=n.strings.join(" "),tt.set(e,s=new Set));const{classList:o}=i;s.forEach(e=>{e in t||(o.remove(e),s.delete(e))});for(const e in t){const n=t[e];n!=s.has(e)&&(n?(o.add(e),s.add(e)):(o.remove(e),s.delete(e)))}}),nt=new WeakMap,it=e((t,e)=>n=>{const i=nt.get(n);if(Array.isArray(t)){if(Array.isArray(i)&&i.length===t.length&&t.every((t,e)=>t===i[e]))return}else if(i===t&&(void 0!==t||nt.has(n)))return;n.setValue(e()),nt.set(n,Array.isArray(t)?Array.from(t):t)}),st=e(t=>e=>{if(void 0===t&&e instanceof C){if(t!==e.value){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else e.setValue(t)}),ot=(t,e)=>{const n=t.startNode.parentNode,i=null==e?t.endNode:e.startNode,s=n.insertBefore(g(),i);n.insertBefore(g(),i);const o=new I(t.options,void 0);return o.insertAfterNode(s),o},at=(t,e)=>(t.setValue(e),t.commit(),t),rt=(t,e,n)=>{const i=t.startNode.parentNode,s=n?n.startNode:t.endNode,a=e.endNode.nextSibling;a!==s&&o(i,e.startNode,a,s)},lt=t=>{a(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},ct=(t,e,n)=>{const i=new Map;for(let s=e;s<=n;s++)i.set(t[s],s);return i},dt=new WeakMap,ht=new WeakMap,ut=e((t,e,n)=>{let i;return void 0===n?n=e:void 0!==e&&(i=e),e=>{if(!(e instanceof I))throw new Error("repeat can only be used in text bindings");const s=dt.get(e)||[],o=ht.get(e)||[],a=[],r=[],l=[];let c,d,h=0;for(const e of t)l[h]=i?i(e,h):h,r[h]=n(e,h),h++;let u=0,p=s.length-1,f=0,m=r.length-1;for(;u<=p&&f<=m;)if(null===s[u])u++;else if(null===s[p])p--;else if(o[u]===l[f])a[f]=at(s[u],r[f]),u++,f++;else if(o[p]===l[m])a[m]=at(s[p],r[m]),p--,m--;else if(o[u]===l[m])a[m]=at(s[u],r[m]),rt(e,s[u],a[m+1]),u++,m--;else if(o[p]===l[f])a[f]=at(s[p],r[f]),rt(e,s[p],s[u]),p--,f++;else if(void 0===c&&(c=ct(l,f,m),d=ct(o,u,p)),c.has(o[u]))if(c.has(o[p])){const t=d.get(l[f]),n=void 0!==t?s[t]:null;if(null===n){const t=ot(e,s[u]);at(t,r[f]),a[f]=t}else a[f]=at(n,r[f]),rt(e,n,s[u]),s[t]=null;f++}else lt(s[p]),p--;else lt(s[u]),u++;for(;f<=m;){const t=ot(e,a[m+1]);at(t,r[f]),a[f++]=t}for(;u<=p;){const t=s[u++];null!==t&&lt(t)}dt.set(e,a),ht.set(e,l)}}),pt=new WeakMap,ft=document.createElement("template"),mt=e(t=>e=>{if(!(e instanceof I))throw new Error("unsafeHTML can only be used in text bindings");const n=pt.get(e);if(void 0!==n&&T(t)&&t===n.value&&e.value===n.fragment)return;const i=ft.cloneNode();i.innerHTML=t;const s=document.importNode(i.content,!0);e.setValue(s),pt.set(e,{value:t,fragment:s})}),gt=new WeakMap,vt=e((...t)=>e=>{let n=gt.get(e);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},gt.set(e,n));const i=n.values;let s=i.length;n.values=t;for(let o=0;o<t.length&&!(o>n.lastRenderedIndex);o++){const a=t[o];if(T(a)||"function"!=typeof a.then){e.setValue(a),n.lastRenderedIndex=o;break}o<s&&a===i[o]||(n.lastRenderedIndex=2147483647,s=0,Promise.resolve(a).then(t=>{const i=n.values.indexOf(a);i>-1&&i<n.lastRenderedIndex&&(n.lastRenderedIndex=i,e.setValue(t),e.commit())}))}}),bt=new WeakMap;class yt extends n{constructor(t){super(),this.ifFn=t}body(t){const e=this.ifFn(),n=t.committer.element;if(e){if(!bt.has(t)){const e=n.nextSibling;bt.set(t,{element:n,nextSibling:e})}n.remove()}else{const e=bt.get(t);null!=e&&(e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling),bt.delete(t))}}}const wt=[],$t=[];class xt extends n{constructor(t,e=!1){super(),this.previous={},this.style=t,this.detach=e}setStyle(t){this.style=t}setDetach(t){this.detach=t}body(t){wt.length=0,$t.length=0;const e=t.committer.element,n=e.style;let i=this.previous;for(const t in i)void 0===this.style[t]&&wt.push(t);for(const t in this.style){const e=this.style[t],n=i[t];void 0!==n&&n===e||$t.push(t)}if(wt.length||$t.length){let t,i;this.detach&&(t=e.parentNode,t&&(i=e.nextSibling,e.remove()));for(const t of wt)n.removeProperty(t);for(const t of $t){const e=this.style[t];t.includes("-")?n.setProperty(t,e):n[t]=e}this.detach&&t&&t.insertBefore(e,i),this.previous=Object.assign({},this.style)}}}class Pt{constructor(){this.isAction=!0}}Pt.prototype.isAction=!0;const Tt={element:document.createTextNode(""),axis:"xy",threshold:10,onDown(t){},onMove(t){},onUp(t){},onWheel(t){}},Mt="undefined"!=typeof PointerEvent;let Dt=0;class _t extends Pt{constructor(t,e){super(),this.moving="",this.initialX=0,this.initialY=0,this.lastY=0,this.lastX=0,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),this.element=t,this.id=++Dt,this.options=Object.assign(Object.assign({},Tt),e.pointerOptions),Mt?(t.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)):(t.addEventListener("touchstart",this.onPointerDown),document.addEventListener("touchmove",this.onPointerMove,{passive:!1}),document.addEventListener("touchend",this.onPointerUp),document.addEventListener("touchcancel",this.onPointerUp),t.addEventListener("mousedown",this.onPointerDown),document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp))}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const s=t.deltaMode,o=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let a=1;switch(s){case 1:a=o;break;case 2:a=window.height}return e*=a,n*=a,i*=a,{x:e,y:n,z:i,event:t}}onWheel(t){const e=this.normalizeMouseWheelEvent(t);this.options.onWheel(e)}normalizePointerEvent(t){let e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,event:t};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e}onPointerDown(t){if("mousedown"===t.type&&0!==t.button)return;this.moving="xy";const e=this.normalizePointerEvent(t);this.lastX=e.x,this.lastY=e.y,this.initialX=e.x,this.initialY=e.y,this.options.onDown(e)}handleX(t){let e=t.x-this.lastX;return this.lastY=t.y,this.lastX=t.x,e}handleY(t){let e=t.y-this.lastY;return this.lastY=t.y,this.lastX=t.x,e}onPointerMove(t){if(""===this.moving||"mousemove"===t.type&&0!==t.button)return;const e=this.normalizePointerEvent(t);if("x|y"===this.options.axis){let n=0,i=0;("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",n=this.handleX(e)),("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("xy"===this.options.axis){let n=0,i=0;Math.abs(e.x-this.initialX)>this.options.threshold&&(n=this.handleX(e)),Math.abs(e.y-this.initialY)>this.options.threshold&&(i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("x"===this.options.axis)("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",this.options.onMove({movementX:this.handleX(e),movementY:0,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}));else if("y"===this.options.axis){let n=0;("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",n=this.handleY(e)),this.options.onMove({movementX:0,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}}onPointerUp(t){this.moving="";const e=this.normalizePointerEvent(t);this.options.onUp({movementX:0,movementY:0,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}),this.lastY=0,this.lastX=0}destroy(t){Mt?(t.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)):(t.removeEventListener("mousedown",this.onPointerDown),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerUp),t.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("touchcancel",this.onPointerUp))}}function Et(t){let e=0;return function(n){e||(e=requestAnimationFrame((function(){e=0,t.apply(void 0,[n])})))}}function Ot(t){return t&&"object"==typeof t&&!Array.isArray(t)}function St(t,...e){const n=e.shift();if(Ot(t)&&Ot(n))for(const e in n)if(Ot(n[e]))void 0===t[e]&&(t[e]={}),t[e]=St(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let i of n[e])Ot(i)?t[e].push(St({},i)):t[e].push(i)}else t[e]=n[e];return e.length?St(t,...e):t}function Ct(t){if(void 0!==t.actions){const e=t.actions.map(t=>{const e=Object.assign({},t),n=Object.assign({},e.props);return delete n.state,delete n.api,delete e.element,e.props=n,e});t.actions=e}return St({},t)}var It=St;function Nt(t,i){let s=0;const o=new Map;let a,r,l=new Map,c=0;const d=Promise.resolve(),h={},u=function(t){return class extends n{constructor(t){super(),this.instance=t}set(t,e){return this.actions=t,this.props=e,this}body(e){const n=e.committer.element;for(const e of this.actions)if(void 0!==e){let i;if(t.has(this.instance))for(const s of t.get(this.instance))if(s.componentAction.create===e&&s.element===n){i=s;break}if(i)i.props=this.props;else{void 0!==n.vido&&delete n.vido;const i={create:e,update(){},destroy(){}},s={instance:this.instance,componentAction:i,element:n,props:this.props};let o=[];t.has(this.instance)&&(o=t.get(this.instance)),o.push(s),t.set(this.instance,o)}}}}}(l);class p{constructor(t){this.instance=t}create(t,e){const n=new u(this.instance);return n.set(t,e),n}}const f=function(t,e,n){return class{constructor(t,e,n={}){this.instance=t,this.name=e.name,this.vidoInstance=e,this.props=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){return this.vidoInstance.debug&&(console.groupCollapsed(`destroying component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance)}update(){return this.vidoInstance.debug&&(console.groupCollapsed(`updating component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(this.vidoInstance)}change(i,s){this.vidoInstance.debug&&(console.groupCollapsed(`changing component ${this.instance}`),console.log(n({props:this.props,newProps:i,components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),t.get(this.instance).change(i,s)}html(e={}){const n=t.get(this.instance);if(n)return n.update(e,this.vidoInstance)}_getComponents(){return t}_getActions(){return e}}}(o,l,Ct),m=function(t,e,n){return class{constructor(t,e,n,i){this.instance=t,this.vidoInstance=e,this.renderFunction=n,this.content=i}destroy(){var i;this.vidoInstance.debug&&(console.groupCollapsed(`component destroy method fired ${this.instance}`),console.log(n({props:this.vidoInstance.props,components:t.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:e})),console.trace(),console.groupEnd()),"function"==typeof(null===(i=this.content)||void 0===i?void 0:i.destroy)&&this.content.destroy();for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions=[],this.vidoInstance.destroyable=[],this.vidoInstance.update()}update(i={}){return this.vidoInstance.debug&&(console.groupCollapsed(`component update method fired ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.renderFunction(i)}change(i,s={leave:!1}){const o=i;this.vidoInstance.debug&&(console.groupCollapsed(`component change method fired ${this.instance}`),console.log(n({props:o,components:t.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:i,actionsByInstance:e})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.onChangeFunctions)t(i,s)}}}(o,l,Ct);class g{constructor(){this.destroyable=[],this.onChangeFunctions=[],this.debug=!1,this.state=t,this.api=i,this.lastProps={},this.html=W,this.svg=X,this.directive=e,this.asyncAppend=q,this.asyncReplace=Q,this.cache=Z,this.classMap=et,this.guard=it,this.ifDefined=st,this.repeat=ut,this.unsafeHTML=mt,this.until=vt,this.schedule=Et,this.actionsByInstance=(t,e)=>{},this.StyleMap=xt,this.Detach=yt,this.PointerAction=_t,this.Action=Pt,this._components=o,this._actions=l,this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this);for(const t in h)this[t]=h[t]}addMethod(t,e){h[t]=e}onDestroy(t){this.destroyable.push(t)}onChange(t){this.onChangeFunctions.push(t)}update(t){return this.updateTemplate(t)}reuseComponents(t,e,n,i,s=!0){const o=[],a=t.length,r=e.length;let l=!1;!s||void 0!==e&&0!==e.length||(l=!0);let c=0;if(a<r){let s=r-a;for(;s;){const a=e[r-s],l=this.createComponent(i,n(a));t.push(l),o.push(l.instance),s--}}else if(a>r){let e=a-r;for(s&&(l=!0,c=a-e);e;){const n=a-e;s||(o.push(t[n].instance),t[n].destroy()),e--}s||(t.length=r)}let d=0;for(const i of t){const t=e[d];o.includes(i.instance)||i.change(n(t),{leave:l&&d>=c}),d++}}createComponent(t,e={},n=null){const i=t.name+":"+s++;let a;a=new g,a.instance=i,a.name=t.name,a.Actions=new p(i);const r=new f(i,a,e),c=new m(i,a,t(a,e,n),n);return o.set(i,c),o.get(i).change(e),a.debug&&(console.groupCollapsed(`component created ${i}`),console.log(Ct({props:e,components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),r}destroyComponent(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(Ct({components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),l.has(t))for(const e of l.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);l.delete(t);const n=o.get(t);n.update(),n.destroy(),o.delete(t),e.debug&&(console.groupCollapsed(`component destroyed ${t}`),console.log(Ct({components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd())}executeActions(){var t,e,n;for(const i of l.values()){for(const s of i)if(void 0===s.element.vido){const i=s.componentAction,o=i.create;if(void 0!==o){let a;a=!0!==(null===(t=o.prototype)||void 0===t?void 0:t.isAction)&&void 0===o.isAction&&void 0===(null===(e=o.prototype)||void 0===e?void 0:e.update)&&void 0===(null===(n=o.prototype)||void 0===n?void 0:n.destroy)?o(s.element,s.props):new o(s.element,s.props),void 0!==a&&("function"==typeof a?i.destroy=a:("function"==typeof a.update&&(i.update=a.update.bind(a)),"function"==typeof a.destroy&&(i.destroy=a.destroy.bind(a))))}}else s.element.vido=s.props,"function"==typeof s.componentAction.update&&s.componentAction.update(s.element,s.props);for(const t of i)t.element.vido=t.props}}updateTemplate(t){return new Promise(e=>{const n=++c,i=this;d.then((function(){n===c&&(c=0,i.render(),"function"==typeof t&&t(),e())}))})}createApp(t){r=t.element;const e=this.createComponent(t.component,t.props);return a=e.instance,this.render(),e}render(){const t=o.get(a);t?(F(t.update(),r),this.executeActions()):r&&r.remove()}}return new g}Nt.prototype.lithtml=B,Nt.prototype.Action=Pt,Nt.prototype.Directive=n,Nt.prototype.schedule=Et,Nt.prototype.Detach=yt,Nt.prototype.StyleMap=xt,Nt.prototype.PointerAction=_t,Nt.prototype.asyncAppend=q,Nt.prototype.asyncReplace=Q,Nt.prototype.cache=Z,Nt.prototype.classMap=et,Nt.prototype.guard=it,Nt.prototype.ifDefined=st,Nt.prototype.repeat=ut,Nt.prototype.unsafeHTML=mt,Nt.prototype.unti=vt;var At=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];t.call(e,s[1],s[0])}},e}()}(),Lt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,zt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Gt="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(zt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Yt=["top","right","bottom","left","width","height","size","weight"],Rt="undefined"!=typeof MutationObserver,Ht=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,s=0;function o(){n&&(n=!1,t()),i&&r()}function a(){Gt(o)}function r(){var t=Date.now();if(n){if(t-s<2)return;i=!0}else n=!0,i=!1,setTimeout(a,e);s=t}return r}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Lt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Rt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Lt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Yt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),kt=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},jt=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||zt},Vt=qt(0,0,0,0);function Ft(t){return parseFloat(t)||0}function Wt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Ft(t["border-"+n+"-width"])}),0)}function Xt(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Vt;var i=jt(t).getComputedStyle(t),s=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],o=t["padding-"+s];e[s]=Ft(o)}return e}(i),o=s.left+s.right,a=s.top+s.bottom,r=Ft(i.width),l=Ft(i.height);if("border-box"===i.boxSizing&&(Math.round(r+o)!==e&&(r-=Wt(i,"left","right")+o),Math.round(l+a)!==n&&(l-=Wt(i,"top","bottom")+a)),!function(t){return t===jt(t).document.documentElement}(t)){var c=Math.round(r+o)-e,d=Math.round(l+a)-n;1!==Math.abs(c)&&(r-=c),1!==Math.abs(d)&&(l-=d)}return qt(s.left,s.top,r,l)}var Bt="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof jt(t).SVGGraphicsElement}:function(t){return t instanceof jt(t).SVGElement&&"function"==typeof t.getBBox};function Ut(t){return Lt?Bt(t)?function(t){var e=t.getBBox();return qt(0,0,e.width,e.height)}(t):Xt(t):Vt}function qt(t,e,n,i){return{x:t,y:e,width:n,height:i}}var Kt=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qt(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Ut(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Qt=function(t,e){var n,i,s,o,a,r,l,c=(i=(n=e).x,s=n.y,o=n.width,a=n.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(r.prototype),kt(l,{x:i,y:s,width:o,height:a,top:s,right:i+o,bottom:a+s,left:i}),l);kt(this,{target:t,contentRect:c})},Jt=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new At,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof jt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Kt(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof jt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Qt(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Zt="undefined"!=typeof WeakMap?new WeakMap:new At,te=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Ht.getInstance(),i=new Jt(e,n,this);Zt.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){te.prototype[t]=function(){var e;return(e=Zt.get(this))[t].apply(e,arguments)}}));var ee=void 0!==zt.ResizeObserver?zt.ResizeObserver:te;function ne(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:a,createComponent:r,html:l,StyleMap:c}=t,d=n.name;s(i.subscribe("config.plugins",e=>{if(void 0!==e&&Array.isArray(e))for(const n of e){const e=n(t);"function"==typeof e?s(e):e&&e.hasOwnProperty("destroy")&&e.destroy()}}));const h=[];let u,p;h.push(i.subscribe("config.components.List",t=>u=t)),h.push(i.subscribe("config.components.Chart",t=>p=t));const f=r(u);s(f.destroy);const m=r(p);let g;s(m.destroy),s(()=>{h.forEach(t=>t())}),s(i.subscribe("config.wrappers.Main",t=>g=t));const v=n.getActions("main");let b;const y=new c({});let w=0,$=!1;function x(t,e){if(i.get("$data.flatTreeMap").length&&"subscribe"===e.type)return;const s=i.get("config.list.rows"),o=[];for(const t in s)o.push(s[t]);n.fillEmptyRowValues(o);const r=i.get("config.chart.items"),l=[];for(const t in r)l.push(r[t]);n.prepareItems(l);const c=n.makeTreeMap(o,l),d=n.getFlatTreeMapById(c),h=n.flattenTreeMap(c);i.update("$data",t=>(t.treeMap=c,t.flatTreeMapById=d,t.flatTreeMap=h,t)),a()}s(i.subscribe("config.classNames",(function(){b=n.getClass(d),$&&(b+=` ${d}__list-column-header-resizer--active`),a()}))),s(i.subscribeAll(["config.height","config.headerHeight","config.scroll.horizontal.size"],(function(){const t=i.get("config"),e=i.get("config.scroll.horizontal.size"),n=t.height-t.headerHeight-e;i.update("$data.innerHeight",n),y.style["--height"]=t.height+"px",a()}))),s(i.subscribe("$data.list.columns.resizer.active",(function(t){$=t,b=n.getClass(n.name),$&&(b+=` ${n.name}__list-column-header-resizer--active`),a()}))),s(i.subscribeAll(["config.list.rows;","config.chart.items;"],x)),s(i.subscribeAll(["config.list.rows.*.parentId","config.chart.items.*.rowId"],x,{bulk:!0})),s(i.subscribeAll(["config.list.rows.*.expanded","$data.treeMap;","config.list.rows.*.height"],(function(){const t=i.get("config.list.rows"),e=n.getRowsFromIds(n.getRowsWithParentsExpanded(i.get("$data.flatTreeMap"),i.get("$data.flatTreeMapById"),t),t);w=n.recalculateRowsHeights(e),i.update("$data.list",t=>(t.rowsHeight=w,t.rowsWithParentsExpanded=e,t)),a()}),{bulk:!0})),s(i.subscribeAll(["config.chart.items.*.rowId","config.chart.items.*.height"],()=>{i.update("$data.list.rowsHeight",n.recalculateRowsHeights(i.get("$data.list.rowsWithParentsExpanded")))},{bulk:!0})),s(i.subscribeAll(["config.chart.items.*.time","config.chart.items.*.$data.position"],()=>{const t=i.get("$data.list.visibleRows");for(const e of t)n.recalculateRowHeight(e);i.update("$data.list.visibleRows",t)},{bulk:!0})),s(i.subscribeAll(["$data.list.rowsWithParentsExpanded;","$data.innerHeight","$data.list.rowsHeight"],()=>{const t=i.get("$data.list.rowsWithParentsExpanded"),e=i.get("$data.list.rowsHeight"),n=function(t,e){if(0===e.length)return 0;let n=0,s=0;for(let i=e.length-1;i>=0;i--){const o=e[i];if(n+=o.$data.outerHeight,n>=t){n-=o.$data.outerHeight;break}s++}return i.update("config.scroll.vertical.lastPageSize",n),i.update("config.scroll.vertical.lastPageCount",s),n}(i.get("$data.innerHeight"),t);i.update("config.scroll.vertical.area",e-n)})),s(i.subscribeAll(["$data.list.rowsWithParentsExpanded;","config.scroll.vertical.data","config.chart.items"],(function(){const t=n.getVisibleRows(i.get("$data.list.rowsWithParentsExpanded")),e=i.get("$data.list.visibleRows");let s=!0;t.length!==e.length?s=!0:t.length&&(s=t.some((t,n)=>void 0===e[n]||t.id!==e[n].id)),s&&i.update("$data.list.visibleRows",t);const o=[];for(const e of t)for(const t of e.$data.items)o.push(t);i.update("$data.chart.visibleItems",o),a()}),{bulk:!0}));const P=(e,i,s,o)=>{const a=e.period;let r=i.finalFrom,l=n.time.date(r).startOf(a);const c=n.time.date(i.finalTo).endOf(a),d=n.time.generatePeriodDates({leftDate:l,rightDate:c,level:s,levelIndex:o,period:a,time:i}),h=n.getClass("chart-calendar-date");for(const n of d)n.formatted=e.format({timeStart:n.leftGlobalDate,timeEnd:n.rightGlobalDate,vido:t,className:h,props:{date:n}});return d};function T(){i.get("$data.loadedEventTriggered")||(Promise.resolve().then(()=>{const t=i.get("$data.elements.main"),e=t.parentNode,n=new Event("gstc-loaded");t.dispatchEvent(n),e.dispatchEvent(n)}),i.update("$data.loadedEventTriggered",!0))}function M(t,e){if(!t.zoom)return t;for(const n of e){const e=n.formats.find(e=>+t.zoom<=+e.zoomTo);e&&n.main&&(t.period=e.period)}return t}function D(t,e){const n=function(t,e){if(0===e.length)return 0;let n=0,s=0;for(let i=e.length-1;i>=0;i--){const o=e[i];if(n+=o.width,n>=t){n-=o.width;break}s++}return i.update("config.scroll.horizontal",t=>(t.lastPageSize=n,t.lastPageCount=s,t)),n}(e,t);let s=0;for(const e of t)s+=e.width;const o=s-n;for(const e of t)e.leftPercent=e.leftPx/o,e.rightPercent=e.rightPx/o;return o}function _(t,e,n){if(!t.zoom)return 0;t.allDates=new Array(e.length);const i=e[t.level],s=i.formats.find(e=>+t.zoom<=+e.zoomTo);t.allDates[t.level]=P(s,t,i,t.level);let o=0;for(const n of e){if(!n.main){const e=n.formats.find(e=>+t.zoom<=+e.zoomTo);t.allDates[o]=P(e,t,n,o)}o++}return D(t.allDates[t.level],n)}function E(t,e){if(!t.length)return[];const i=t.filter(t=>t.leftGlobal>=e.leftGlobal&&t.leftGlobal<=e.rightGlobal||t.rightGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal||t.leftGlobal<=e.leftGlobal&&t.rightGlobal>=e.rightGlobal||t.leftGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal);if(!i.length)return[];let s=0;i[0].period!==e.period&&e.leftGlobal>i[0].leftGlobal&&(s=n.time.getDatesDiffPx(e.leftGlobalDate,i[0].leftGlobalDate,e));let o=0;return i.map(t=>(t.currentView={leftPx:o,rightPx:t.rightPx,width:t.width},s<0&&(t.currentView.width=t.width+s,t.currentView.leftPx=0,s=0),t.currentView.rightPx=t.currentView.leftPx+t.currentView.width,o+=t.currentView.width,t))}function O(t){let e=0,n=0;for(const i of t.allDates[t.level])e+=i.width,n+=i.rightGlobal-i.leftGlobal;t.totalViewDurationPx=e,t.totalViewDurationMs=n}function S(t,e,i){const s=n.time.findDateAtTime(t,i);let o=i.indexOf(s),a=s.leftGlobal,r=0;for(let t=i.length;o<t;o++){const t=i[o];if(a=t.leftGlobal,r+=t.width,r>=e)break}return a}function C(t=i.get("$data.chart.time"),e=i.multi()){const s=i.get("$data.chart.visibleItems");if(t.levels&&t.levels[t.level]){for(const o of s){const s=n.time.getViewOffsetPxFromDates(o.$data.time.startDate,!1,t),a=n.time.getViewOffsetPxFromDates(o.$data.time.endDate,!1,t);o.$data.position.left===s&&o.$data.position.right===a||(e=e.update(`config.chart.items.${o.id}.$data`,e=>(e.position.left=s,e.position.actualLeft=n.time.limitOffsetPxToView(s,t),e.position.right=a,e.position.actualRight=n.time.limitOffsetPxToView(a,t),e.width=a-s-(i.get("config.chart.spacing")||0),e.actualWidth=e.position.actualRight-e.position.actualLeft-(i.get("config.chart.spacing")||0),e.position.actualTop=e.position.top+o.gap.top,e)))}e.done(),a()}}s(i.subscribeAll(["config.scroll.vertical","config.chart.items.*.time","config.chart.items.*.$data.position","config.chart.items.*.$data.time"],()=>{C()}));let I=!1;function N(t){const e=i.get("$data.chart.dimensions.width");if(!e)return;const s=i.get("config.chart.time"),o=i.get("config.chart.calendar"),r=Object.assign({},i.get("$data.chart.time"));let l=n.mergeDeep({},s);if(!(l.from&&l.to||Object.keys(i.get("config.chart.items")).length))return;l.fromDate=n.time.date(l.from),l.toDate=n.time.date(l.to);const c=o.levels.find(t=>t.main);if(!c)throw new Error("Main calendar level not found (config.chart.calendar.levels).");const d=o.levels.indexOf(c);if(l.level=d,!l.calculatedZoomMode){if(l.period!==r.period){let t=c.formats.find(t=>t.period===l.period&&t.default);t&&(l.zoom=t.zoomTo)}M(l,o.levels)}const h=["leftGlobal","centerGlobal","rightGlobal","from","to"].includes(t.name);h&&(l=Object.assign(Object.assign({},l),{leftGlobal:s.leftGlobal,leftGlobalDate:n.time.date(s.leftGlobal),centerGlobal:s.centerGlobal,centerGlobalDate:n.time.date(s.centerGlobal),rightGlobal:s.rightGlobal,rightGlobalDate:n.time.date(s.rightGlobal),from:s.from,fromDate:n.time.date(s.from),to:s.to,toDate:n.time.date(s.to)}));let u=i.get("config.scroll.horizontal"),p=0;if(l.calculatedZoomMode&&e){if(l.finalFrom=l.from,l.finalTo=l.to,l.totalViewDurationMs=n.time.date(l.finalTo).diff(l.finalFrom,"millisecond"),l.timePerPixel=l.totalViewDurationMs/e,l.zoom=Math.log(l.timePerPixel)/Math.log(2),M(l,o.levels),r.zoom!==l.zoom||0===l.allDates.length||"forceUpdate"===t.name){p=_(l,o.levels,e),O(l);const t=l.allDates[l.level];l.finalTo=t[t.length-1].leftGlobal}l.leftGlobal=l.from,l.leftGlobalDate=n.time.date(l.leftGlobal),l.rightGlobal=l.to,l.rightGlobalDate=n.time.date(l.rightGlobal)}else if(l.timePerPixel=Math.pow(2,l.zoom),l=n.time.recalculateFromTo(l),r.zoom!==l.zoom||0===l.allDates.length||"forceUpdate"===t.name){p=_(l,o.levels,e),O(l);const t=l.allDates[l.level];l.finalTo=t[t.length-1].leftGlobal}else l.totalViewDurationPx=r.totalViewDurationPx,l.totalViewDurationMs=r.totalViewDurationMs;l.scrollWidth=p||r.scrollWidth,l.finalFromDate=n.time.date(l.finalFrom),l.finalToDate=n.time.date(l.finalTo);const f=l.allDates[d];let m=!1;if(!h&&!l.calculatedZoomMode)if(l.zoom===r.zoom&&"period"!==t.name||!r.centerGlobal){let i=u.data;i||(i=f[0]),l.leftGlobalDate=i.leftGlobalDate,l.leftGlobal=l.leftGlobalDate.valueOf(),l.rightGlobal=S(l.leftGlobal,e,f),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobal.valueOf(),m="scroll"===t.name}else{const t=e*l.timePerPixel,i=Math.round(t/2),s=Math.ceil(r.centerGlobalDate.diff(r.centerGlobal+i,l.period,!0));l.leftGlobalDate=r.centerGlobalDate.add(s,l.period);const o=l.leftGlobalDate.valueOf();let a=n.time.findDateAtTime(o,f);a||(a=f[0]),l.leftGlobal=a.leftGlobal,l.leftGlobalDate=a.leftGlobalDate,l.rightGlobal=S(l.leftGlobal,e,f),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobalDate.valueOf()}!function(t,e=!0,i,s){if(t.leftGlobal<t.finalFrom&&(t.leftGlobal=t.finalFrom),t.rightGlobal>t.finalTo&&(t.rightGlobal=t.finalTo),t.leftGlobalDate=n.time.date(t.leftGlobal).startOf(t.period),t.leftGlobal=t.leftGlobalDate.valueOf(),t.rightGlobalDate=n.time.date(t.rightGlobal).endOf(t.period),t.rightGlobal=t.rightGlobalDate.valueOf(),e){const e=Math.floor(t.rightGlobalDate.diff(t.leftGlobalDate,t.period,!0)/2);let n=0,i="day";switch(t.period){case"year":n=6,i="month";break;case"month":n=15,i="day";break;case"week":n=3,i="day";break;case"day":n=12,i="hour";break;case"hour":n=30,i="minute"}t.centerGlobalDate=t.leftGlobalDate.add(e,t.period).add(n,i),t.centerGlobal=t.centerGlobalDate.valueOf()}else t.centerGlobal=i.centerGlobal,t.centerGlobalDate=i.centerGlobalDate}(l,m,r),l.leftInner=l.leftGlobal-l.finalFrom,l.rightInner=l.rightGlobal-l.finalFrom,function(t,e){t.levels=[];let n=0;for(const i of e){const e=i.formats.find(e=>+t.zoom<=+e.zoomTo);if(i.main&&(t.format=e,t.level=n),e){let s=E(t.allDates[n],t);t.onCurrentViewLevelDates.forEach(o=>{s=o({dates:s,format:e,time:t,level:i,levelIndex:n})}),t.levels.push(s)}n++}}(l,o.levels),l.leftPx=0,l.rightPx=e,l.width=e;const g=l.levels[l.level];g&&g.length&&(l.leftPx=g[0].leftPx,l.rightPx=g[g.length-1].leftPx);let v=i.multi().update("$data.chart.time",l).update("config.chart.time",t=>(t.zoom=l.zoom,t.period=l.format.period,t.leftGlobal=l.leftGlobal,t.centerGlobal=l.centerGlobal,t.rightGlobal=l.rightGlobal,t.from=l.from,t.to=l.to,t.finalFrom=l.finalFrom,t.finalTo=l.finalTo,t.allDates=l.allDates,t));C(l,v),a().then(()=>{I||(i.update("$data.loaded.time",!0),I=!0)})}const A={initialized:!1,zoom:0,period:"",scrollDataIndex:0,chartWidth:0,from:0,to:0};s(i.subscribeAll(["config.chart.time","config.chart.calendar.levels","config.scroll.horizontal.dataIndex","$data.chart.dimensions.width"],()=>{let t=function(){const t=i.get("config.chart.time"),e=i.get("config.scroll.horizontal.dataIndex"),n=i.get("$data.chart.dimensions.width"),s=Object.assign({},A);return A.zoom=t.zoom,A.period=t.period,A.from=t.from,A.to=t.to,A.scrollDataIndex=e,A.chartWidth=n,A.initialized?!0===t.forceUpdate?(i.update("config.chart.time.forceUpdate",!1),{name:"forceUpdate"}):t.zoom!==s.zoom?{name:"zoom",oldValue:s.zoom,newValue:t.zoom}:t.period!==s.period?{name:"period",oldValue:s.period,newValue:t.period}:t.from!==s.from?{name:"from",oldValue:s.from,newValue:t.from}:t.to!==s.to?{name:"to",oldValue:s.to,newValue:t.to}:e!==s.scrollDataIndex?{name:"scroll",oldValue:s.scrollDataIndex,newValue:e}:n!==s.chartWidth?{name:"chartWidth",oldValue:s.chartWidth,newValue:n}:{name:""}:(A.initialized=!0,{name:"all"})}();t.name&&N(t)},{bulk:!0})),s(i.subscribe("config.chart.items.*.time",t=>{N({name:"items"})},{bulk:!0}));try{const t=["stackblitz.io","codepen.io","cdpn.io","codesandbox.io","csb.app","jsrun.pro","jsrun.top","jsfiddle.net","jsbin.com"];let e=location.host;const n=e.split(".");if(n.length>2){for(let t=0,e=n.length-2;t<e;t++)n.shift();e=n.join(".")}const s=["192.","127.","test","demo","local"],o=["test","local","demo"];!0===i.get("config.usageStatistics")&&!localStorage.getItem("gstcus")&&function(){return!t.includes(e)&&"localhost"!==location.hostname&&!function(){for(let t=0,e=s.length;t<e;t++)if(location.hostname.startsWith(s[t]))return!0;for(let t=0,e=o.length;t<e;t++)if(location.hostname.endsWith(o[t]))return!0;return!1}()}()&&(fetch("https://gstc-us.neuronet.io/",{method:"POST",mode:"cors",credentials:"omit",redirect:"follow",body:JSON.stringify({location:{href:location.href,host:location.host}})}).catch(t=>{}),localStorage.setItem("gstcus","true"))}catch(t){}const L={width:0,height:0};let z;class G{constructor(t){z||(z=new ee((e,n)=>{const s=t.clientWidth,o=t.clientHeight;L.width===s&&L.height===o||(L.width=s,L.height=o,i.update("$data.dimensions",L))}),z.observe(t),i.update("$data.elements.main",t))}update(){}destroy(t){z.unobserve(t)}}function Y(t){}function R(){i.update("$data.loaded.main",!0)}v.includes(G)||v.push(G),s(()=>{z.disconnect()}),s(i.subscribeAll(["$data.loaded","$data.chart.time.totalViewDurationPx"],()=>{if(i.get("$data.loadedEventTriggered"))return;const t=i.get("$data.loaded");if(t.main&&t.chart&&t.time&&t["horizontal-scroll-inner"]){const t=i.get("$data.elements.horizontal-scroll-inner"),e=i.get("$data.chart.time.totalViewDurationPx");t&&t.clientWidth===Math.round(e)&&setTimeout(T,0)}})),v.includes(R)||v.push(R);const H=Object.assign(Object.assign({},e),{api:n,state:i}),k=o.create(v,H);return n=>g(l`
        <div
          data-info-url="https://github.com/neuronetio/gantt-schedule-timeline-calendar"
          class=${b}
          style=${y}
          data-actions=${k}
          @wheel=${Y}
        >
          ${f.html()}${m.html()}
        </div>
      `,{props:e,vido:t,templateProps:n})}function ie(t,e){const{onDestroy:n,state:i,api:s,html:o,StyleMap:a,Actions:r,update:l,schedule:c}=t;let d,h,u,p="",f="";n(i.subscribe("config.classNames",()=>{d=s.getClass("scroll-bar"),h=s.getClass("scroll-bar-inner")}));const m="horizontal"===e.type?"height":"width",g="height"===m?"width":"height",v="horizontal"===e.type?"left":"top",b=new a({}),y=new a({});let w=0,$=[],x=[],P=[],T=[],M=0,D=0,_=0,E=0;function O(t,e=!1){void 0===t&&(t=0);const n=$[t];if(!n)return;const o=i.get("config.scroll.horizontal");o.data&&o.data.leftGlobal===n.leftGlobal||i.update("config.scroll.horizontal",e=>{e.data=n;const o=i.get("$data.chart.time");return e.posPx=s.time.calculateScrollPosPxFromTime(e.data.leftGlobal,o,e),e.dataIndex=t,e})}if("horizontal"===e.type){let t=0;n(i.subscribe("$data.chart.time",()=>{const e=i.get("$data.chart.time");if(e.leftGlobalDate&&(i.get("config.scroll.horizontal").area!==e.scrollWidth&&i.update("config.scroll.horizontal.area",e.scrollWidth),e.allDates&&e.allDates[e.level])){const n=e.allDates[e.level],s=n.find(t=>t.leftGlobal===e.leftGlobal);let o=n.indexOf(s);const a=i.get("config.scroll.horizontal.lastPageCount");o>n.length-a&&(o=n.length-a),o!==t&&O(o),t=o}}))}const S={maxPosPx:0,innerSize:0,sub:0,scrollArea:0};let C=!1;n(i.subscribeAll("horizontal"===e.type?[`config.scroll.${e.type}`,"$data.chart.time"]:[`config.scroll.${e.type}`,"$data.innerHeight","$data.list.rowsWithParentsExpanded"],()=>{if(C)return;C=!0;const t=i.get("$data.chart.time"),n=i.get(`config.scroll.${e.type}`),s=i.get("$data.chart.dimensions.width"),o=i.get("$data.innerHeight");if(u=n.size,D="horizontal"===e.type?s:o,D=D||0,"horizontal"===e.type?D-=u:D+=u,D<0&&(D=0),b.style[m]=u+"px",b.style[g]=D+"px","vertical"===e.type&&(b.style.top=i.get("config.headerHeight")+"px"),y.style[m]="100%",_=D,"horizontal"===e.type)$=t.allDates&&t.allDates[t.level]?t.allDates[t.level]:[];else{const t=i.get("$data.list.rowsWithParentsExpanded");x=t||[],x.length?function(){const t=x.length;if(P=[],T=[],!t)return;let e=0;for(let n=0;n<t;n++){const t=x[n];P.push(e),e+=t.$data.outerHeight}const n=i.get("config.scroll.vertical.area");for(const t of P)T.push(t/n)}():P=[]}const a="vertical"===e.type?P.length?P[P.length-1]+x[x.length-1].height:0:$.length?$[$.length-1].rightPx:0;E=0,a<=_||n.lastPageSize===a?(_=0,M=0):(D&&a?M=D*(D/a):(M=0,_=0),M<n.minInnerSize&&(E=n.minInnerSize-M,M=n.minInnerSize)),y.style[g]=M+"px",w=Math.round(D-E),function(t,e,n,i){return S.maxPosPx!==t||S.innerSize!==e||S.sub!==n||S.scrollArea!==i}(w,M,E,D)&&(S.maxPosPx=w,S.innerSize=M,S.sub=E,S.scrollArea=D,i.update(`config.scroll.${e.type}`,t=>(t.maxPosPx=w,t.innerSize=M,t.sub=E,t.scrollArea=D,t))),l(),C=!1},{queue:!0}));let I=0;n(i.subscribe(`config.scroll.${e.type}.posPx`,t=>{t!==I&&(y.style[v]=t+"px",l(),I=t)}));const N=s.getActions("scroll-bar");N.push(class extends Pt{constructor(t){super(),i.update(`$data.elements.scroll-bar--${e.type}`,t)}update(){}destroy(){}});const A=r.create(N,{api:s,state:i,props:e}),L=[class extends Pt{constructor(t){super(),this.moving=!1,this.initialPos=0,this.currentPos=0,this.cumulation=0,this.lastData=0,this.dataIndex=0,i.update(`$data.elements.scroll-bar-inner--${e.type}`,t),this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this);const n=this.pointerMove.bind(this);this.pointerMove=c(t=>n(t)),this.unsub=i.subscribe(`config.scroll.${e.type}.dataIndex`,this.dataIndexChanged.bind(this)),t.addEventListener("pointerdown",this.pointerDown),window.addEventListener("pointermove",this.pointerMove,{passive:!0}),window.addEventListener("pointerup",this.pointerUp)}destroy(t){this.unsub(),t.removeEventListener("pointerdown",this.pointerDown),window.removeEventListener("pointermove",this.pointerMove),window.removeEventListener("pointerup",this.pointerUp)}dataIndexChanged(t){if(t!==this.dataIndex&&"horizontal"===e.type&&$&&$.length){const e=$[t];if(!e)return;const n=Math.round(e.leftPercent*(D-E));this.currentPos=n,l()}}limitPosition(t){return Math.max(Math.min(t,w),0)}pointerDown(t){t.preventDefault(),t.stopPropagation(),this.moving=!0,this.initialPos="horizontal"===e.type?t.screenX:t.screenY,f=" "+s.getClass("scroll-bar")+"-inner--active",p=" "+s.getClass("scroll-bar")+"--active",l()}pointerUp(t){this.moving&&(t.preventDefault(),t.stopPropagation()),this.moving=!1,this.cumulation=0,f="",p="",l()}pointerMove(t){if(this.moving){t.stopPropagation();const n="horizontal"===e.type?t.screenX:t.screenY,s=n-this.initialPos;this.cumulation+=s,this.currentPos=this.limitPosition(this.currentPos+s),this.initialPos=n;const o=this.currentPos/w;let a=0;if("horizontal"===e.type)for(let t=$.length;a<t;a++){if($[a].leftPercent>=o)break}else for(let t=T.length;a<t;a++){if(T[a]>=o)break}a||(a=0),this.dataIndex=a,"horizontal"===e.type?O(a):function(t){void 0===t&&(t=0);const e=i.get("config.scroll.vertical");x[t]?e.data&&e.data.id===x[t].id||i.update("config.scroll.vertical",e=>(e.data=x[t],e.posPx=T[t]*(e.maxPosPx-e.innerSize),e.dataIndex=t,e)):console.error(`no row ${t}`,x)}(a),a!==this.lastData&&(this.cumulation=0),this.lastData=a}}}],z=r.create(L,{api:s,state:i,props:e});return()=>o`
      <div
        data-actions=${A}
        class=${d+" "+d+"--"+e.type+p}
        style=${b}
      >
        <div
          data-actions=${z}
          class=${h+" "+h+"--"+e.type+f}
          style=${y}
        ></div>
      </div>
    `}function se(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:a,reuseComponents:r,html:l,schedule:c,StyleMap:d,cache:h}=t,u=n.getActions("list");let p,f;s(i.subscribe("config.wrappers.List",t=>p=t));const m=i.subscribe("config.components.ListColumn",t=>f=t);let g,v,b;!function(){const t=i.get("config.list.expander.icons"),e={};for(const i in t){const s=t[i];e[i]=n.getSVGIconSrc(s)}i.update("$data.list.expander.icons",e)}(),function(){const t={open:"",close:""},e=i.get("config.list.toggle.icons");for(const i in e){const s=e[i];t[i]=n.getSVGIconSrc(s)}i.update("$data.list.toggle.icons",t)}(),s(i.subscribe("config.list",(function(){v=i.get("config.list"),b=v.columns.percent,a()}))),s(i.subscribe("config.classNames",()=>{g=n.getClass("list"),a()}));let y=[];s(i.subscribe("config.list.columns.data;",(function(t){const e=r(y,Object.values(t),t=>({columnId:t.id}),f);return a(),e})));const w=new d({height:"","--expander-padding-width":"","--expander-size":""});function $(t){}let x;function P(t){x||(x=t.clientWidth,0===b&&(x=0),i.update("$data.list.width",x))}s(i.subscribeAll(["config.height","config.list.expander"],t=>{const e=i.get("config.list.expander");w.style.height=i.get("config.height")+"px",w.style["--expander-padding-width"]=e.padding+"px",w.style["--expander-size"]=e.size+"px",a()})),s(()=>{y.forEach(t=>t.destroy()),m()});u.push(class{constructor(t,e){e.state.update("$data.elements.list",t),P(t)}update(t){return P(t)}});const T=o.create(u,Object.assign(Object.assign({},e),{api:n,state:i}));return e=>p(h(v.columns.percent>0?l`
              <div class=${g} data-actions=${T} style=${w} @wheel=${$}>
                ${y.map(t=>t.html())}
              </div>
            `:""),{vido:t,props:{},templateProps:e})}class oe{constructor(t,e){let n=!1,i=e.state.get("$data.elements.list-columns");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.list-columns",i)}destroy(t,e){e.state.update("$data.elements.list-columns",e=>e.filter(e=>e!==t))}}function ae(t,e){const{api:n,state:i,onDestroy:s,onChange:o,Actions:a,update:r,createComponent:l,reuseComponents:c,html:d,StyleMap:h}=t;let u;s(i.subscribe("config.wrappers.ListColumn",t=>u=t));const p=[];let f,m;p.push(i.subscribe("config.components.ListColumnRow",t=>f=t)),p.push(i.subscribe("config.components.ListColumnHeader",t=>m=t));const g=Object.assign(Object.assign({},e),{api:n,state:i}),v=n.getActions("list-column"),b=n.getActions("list-column-rows");let y,w,$;const x=new h({width:"","--width":""}),P=new h({width:"",height:""});let T,M,D=`config.list.columns.data.${e.columnId}`,_=i.subscribe(D,(function(t){T=t,r()}));function E(){const t=i.get("config.list");$=t.columns.data[T.id].width*t.columns.percent*.01,M=$;const e=i.get("$data.innerHeight");x.style.width=M+"px",x.style["--width"]=M+"px",P.style.height=e+"px"}let O=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${T.id}.width`,"$data.chart.dimensions.width","$data.innerHeight","$data.list.width"],E,{bulk:!0});const S=l(m,{columnId:e.columnId});s(S.destroy),o(t=>{e=t;for(const t in e)g[t]=e[t];_&&_(),S.change({columnId:e.columnId}),D=`config.list.columns.data.${e.columnId}`,_=i.subscribe(D,(function(t){T=t,r()})),O&&O(),O=i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${T.id}.width`,"$data.chart.dimensions.width","$data.innerHeight","$data.list.width"],E,{bulk:!0}),S.change(e)}),s(()=>{_(),O()}),s(i.subscribe("config.classNames",t=>{y=n.getClass("list-column"),w=n.getClass("list-column-rows"),r()}));const C=[];function I(t){return t.html()}s(i.subscribe("$data.list.visibleRows;",t=>{const n=c(C,t||[],t=>t&&{columnId:e.columnId,rowId:t.id,width:M},f);return r(),n})),s(()=>{C.forEach(t=>t.destroy()),p.forEach(t=>t())}),v.push(oe);const N=a.create(v,{column:T,state:i,api:n}),A=a.create(b,{api:n,state:i});return n=>u(d`
        <div class=${y} data-actions=${N} style=${x}>
          ${S.html()}
          <div class=${w} style=${P} data-actions=${A}>
            ${C.map(I)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function re(t,e){const{api:n,state:i,onDestroy:s,onChange:o,Actions:a,update:r,createComponent:l,html:c,cache:d,StyleMap:h}=t,u=Object.assign(Object.assign({},e),{api:n,state:i});let p;s(i.subscribe("config.wrappers.ListColumnHeader",t=>p=t));const f=n.getActions("list-column-header"),m=[];let g;m.push(i.subscribe("config.components.ListColumnHeaderResizer",t=>g=t));const v=l(g,{columnId:e.columnId});let b;m.push(i.subscribe("config.components.ListColumnRowExpander",t=>b=t));const y=l(b,{});let w;s(()=>{v.destroy(),y.destroy(),m.forEach(t=>t())});let $,x,P=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{w=t,r()});s(P),o(t=>{e=t;for(const t in e)u[t]=e[t];P&&P(),P=i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{w=t,r()})}),s(i.subscribe("config.classNames",()=>{$=n.getClass("list-column-header"),x=n.getClass("list-column-header-content")}));const T=new h({height:"","--height":"","--paddings-count":""});s(i.subscribe("config.headerHeight",()=>{const t=i.get("config");T.style.height=t.headerHeight+"px",T.style["--height"]=t.headerHeight+"px",T.style["--paddings-count"]="1",r()}));const M=a.create(f,u);return n=>p(c`
        <div class=${$} style=${T} data-actions=${M}>
          ${d(w.expander?c`
      <div class=${x}>
        ${y.html()}${v.html(w)}
      </div>
    `:c`
      <div class=${x}>
        ${v.html(w)}
      </div>
    `)}
        </div>
      `,{vido:t,props:e,templateProps:n})}function le(t,e){const{api:n,state:i,onDestroy:s,update:o,html:a,Actions:r,PointerAction:l,cache:c,StyleMap:d}=t,h="list-column-header-resizer",u=n.getActions(h),p=n.getActions(h+"-dots");let f,m,g,v,b,y,w;s(i.subscribe("config.wrappers.ListColumnHeaderResizer",t=>f=t)),s(i.subscribe(`config.list.columns.data.${e.columnId}`,t=>{m=t,o()}));const $=new d({width:""});let x=!1;s(i.subscribe("config.classNames",t=>{g=n.getClass(h),v=n.getClass(h+"-container"),b=n.getClass(h+"-dots"),y=n.getClass(h+"-dots-dot"),o()})),s(i.subscribeAll([`config.list.columns.data.${m.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const n=i.get("config.list");w=m.width*n.columns.percent*.01,$.style["--width"]=n.columns.resizer.width+"px",x=n.columns.resizer.inRealTime,i.update("$data.list.width",w),o()}));let P=[1,2,3,4,5,6,7,8];s(i.subscribe("config.list.columns.resizer.dots",t=>{P=[];for(let e=0;e<t;e++)P.push(e);o()}));let T=w;const M=`config.list.columns.data.${m.id}.width`,D={column:m,api:n,state:i,pointerOptions:{axis:"x",onMove:function({movementX:t}){let e=i.get("config.list.columns.minWidth");"number"==typeof m.minWidth&&(e=m.minWidth),T+=t,T<e&&(T=e),x&&i.update(M,T)}}};u.push(l);const _=r.create(u,D),E=r.create(p,D);return n=>f(a`
        <div class=${g} data-actions=${_}>
          <div class=${v}>
            ${c(m.header.html?a` ${m.header.html} `:m.header.content)}
          </div>
          <div class=${b} style=${$} data-actions=${E}>
            ${P.map(t=>a` <div class=${y} /> `)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}class ce{constructor(t,e){let n=e.state.get("$data.elements.list-column-rows"),i=!1;void 0===n&&(i=!0,n=[]),n.includes(t)||(n.push(t),i=!0),i&&e.state.update("$data.elements.list-column-rows",n)}destroy(t,e){e.state.update("$data.elements.list-column-rows",e=>e.filter(e=>e!==t))}}function de(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:a,update:r,html:l,createComponent:c,onChange:d,StyleMap:h,unsafeHTML:u}=t,p=Object.assign(Object.assign({},e),{api:n,state:i});let f=!1;const m=new o(()=>f);let g,v;s(i.subscribe("config.wrappers.ListColumnRow",t=>g=t)),s(i.subscribe("config.components.ListColumnRowExpander",t=>v=t));let b=`$data.flatTreeMapById.${e.rowId}`,y=i.get(b),w=`config.list.columns.data.${e.columnId}`,$=i.get(w);const x=new h($.expander?{height:"",top:"","--height":"","--expander-padding-width":"","--expander-size":""}:{height:"",top:"","--height":""},!0);let P,T;const M=c(v,{row:y});let D;s(i.subscribe("config.classNames",t=>{D=n.getClass("list-column-row"),r()}));let _=D;d((t,n)=>{if(n.leave||void 0===t.rowId||void 0===t.columnId)return f=!0,P&&P(),T&&T(),void r();f=!1,e=t;for(const t in e)p[t]=e[t];const s=e.rowId,o=e.columnId;P&&P(),T&&T(),b=`$data.flatTreeMapById.${s}`,w=`config.list.columns.data.${o}`,P=i.subscribeAll([b,w,"config.list.expander"],t=>{if($=i.get(w),y=i.get(b),void 0===$||void 0===y)return f=!0,void r();if(void 0===$||void 0===y)return;const e=i.get("config.list.expander");x.setStyle({}),x.style.height=y.$data.outerHeight+"px",x.style["--height"]=y.$data.outerHeight+"px",$.expander&&(x.style["--expander-padding-width"]=e.padding*(y.$data.parents.length+1)+"px");for(const t of y.$data.parents){const e=i.get(`$data.flatTreeMapById.${t}`);if("object"==typeof e.style&&"Object"===e.style.constructor.name&&"object"==typeof e.style.children){const t=e.style.children;for(const e in t)x.style[e]=t[e]}}if("object"==typeof y.style&&"Object"===y.style.constructor.name&&"object"==typeof y.style.current){const t=y.style.current;for(const e in t)x.style[e]=t[e]}_=y.classNames&&y.classNames.length?D+" "+y.classNames.join(" "):D,r()},{bulk:!0}),M&&M.change({row:y}),T=i.subscribe(w,t=>{$=t,r()})}),s(()=>{M&&M.destroy(),T(),P()});const E=n.getActions("list-column-row");E.includes(ce)||E.push(ce);const O=a.create(E,p);return n=>g(l`
        <div detach=${m} class=${_} style=${x} data-actions=${O}>
          ${$.expander?M.html():null}
          <div class=${D+"-content"}>
            ${$.isHTML?void 0===y?null:"function"==typeof $.data?u($.data(y)):u(y[$.data]):void 0===y?null:"function"==typeof $.data?$.data(y):y[$.data]}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function he(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:a,html:r,createComponent:l,onChange:c}=t,d=n.getActions("list-column-row-expander"),h=Object.assign(Object.assign({},e),{api:n,state:i});let u,p;const f=i.subscribe("config.components.ListColumnRowExpanderToggle",t=>p=t),m=l(p,e.row?{row:e.row}:{});let g;if(s(()=>{m.destroy(),f()}),s(i.subscribe("config.wrappers.ListColumnRowExpander",t=>g=t)),s(i.subscribe("config.classNames",t=>{u=n.getClass("list-column-row-expander"),a()})),e.row){c((function(t){e=t;for(const t in e)h[t]=e[t];m.change(e)}))}const v=o.create(d,h);return n=>g(r`
        <div class=${u} data-action=${v}>
          ${m.html()}
        </div>
      `,{vido:t,props:e,templateProps:n})}function ue(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:a,html:r,onChange:l,cache:c}=t,d=Object.assign(Object.assign({},e),{api:n,state:i});let h;s(i.subscribe("config.wrappers.ListColumnRowExpanderToggle",t=>h=t));const u=n.getActions("list-column-row-expander-toggle");let p,f,m,g,v,b,y,w,$=!1;function x(t){$=t,a()}function P(){$=!$,e.row?i.update(`config.list.rows.${e.row.id}.expanded`,$):i.update("config.list.rows",t=>{for(const e in t)t[e].expanded=$;return t},{only:["*.expanded"]})}s(i.subscribe("config.classNames",t=>{p=n.getClass("list-column-row-expander-toggle"),f=p+"-child",m=p+"-open",g=p+"-closed",a()})),s(i.subscribe("$data.list.expander.icons",t=>{t&&(v=t.child,b=t.open,y=t.closed),a()})),e.row?(l((function(t){var n;e=t;for(const t in e)d[t]=e[t];w&&w(),(null===(n=null==e?void 0:e.row)||void 0===n?void 0:n.id)&&(w=i.subscribe(`config.list.rows.${e.row.id}.expanded`,x))})),s((function(){w&&w()}))):s(i.subscribe("config.list.rows.*.expanded",(function(t){for(const e of t)if(e.value){$=!0;break}a()}),{bulk:!0}));const T=o.create(u,d);return n=>{return h(r`
        <div class=${p} data-action=${T} @click=${P}>
          ${c(v?0===(null===(o=null===(s=null===(i=e.row)||void 0===i?void 0:i.$data)||void 0===s?void 0:s.children)||void 0===o?void 0:o.length)?r` <img width="16" height="16" class=${f} src=${v} /> `:$?r` <img width="16" height="16" class=${m} src=${b} /> `:r` <img width="16" height="16" class=${g} src=${y} /> `:"")}
        </div>
      `,{vido:t,props:e,templateProps:n});var i,s,o}}function pe(t,e={}){const{html:n,onDestroy:i,api:s,state:o,update:a}=t;let r,l;i(o.subscribe("config.classNames",t=>{r=s.getClass("list-toggle")})),i(o.subscribe("config.wrappers.ListToggle",t=>l=t));let c={open:"",close:""};i(o.subscribe("$data.list.toggle.icons",t=>{t&&(c=t,a())}));let d=!0;i(o.subscribe("config.list.columns.percent",t=>d=0!==t));let h=!1;function u(){h=!0}function p(){h&&(h=!1,o.update("config.list.columns.percent",t=>0===t?100:0))}return i=>l(n`
        <div class=${r} @pointerdown=${u} @pointerup=${p}>
          <img src=${d?c.close:c.open} />
        </div>
      `,{props:e,vido:t,templateProps:i})}function fe(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:a,html:r,createComponent:l}=t,c=[];let d,h,u;c.push(i.subscribe("config.components.ChartCalendar",t=>d=t)),c.push(i.subscribe("config.components.ChartTimeline",t=>h=t)),c.push(i.subscribe("config.components.ScrollBar",t=>u=t));const p=l(d);s(p.destroy);const f=l(h);s(f.destroy);const m=l(u,{type:"horizontal"});s(m.destroy);const g=l(u,{type:"vertical"});let v,b,y,w;s(g.destroy),s(()=>{c.forEach(t=>t())}),s(i.subscribe("config.wrappers.Chart",t=>v=t));const $=n.getActions("chart");let x=!1;s(i.subscribe("config.chart.time.calculatedZoomMode",t=>x=t)),s(i.subscribe("config.classNames",()=>{b=n.getClass("chart"),y=n.getClass("horizontal-scroll"),w=n.getClass("horizontal-scroll-inner"),a()}));const P={handleEvent:function(t){t.type},passive:!1,capture:!1};let T,M=0;$.push((function(t){T||(T=new ee((e,n)=>{const s=t.clientWidth,o=t.clientHeight,a=s-i.get("config.scroll.horizontal.size");M!==s&&(M=s,i.update("$data.chart.dimensions",{width:s,innerWidth:a,height:o}))}),T.observe(t),i.update("$data.elements.chart",t),i.update("$data.loaded.chart",!0))})),s(()=>{T.disconnect()});const D=o.create($,{api:n,state:i});return e=>v(r`
        <div class=${b} data-actions=${D} @wheel=${P}>
          ${p.html()}${f.html()}${g.html()}${x?null:m.html()}
        </div>
      `,{vido:t,props:{},templateProps:e})}function me(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:a,reuseComponents:r,html:l,StyleMap:c}=t,d=n.getActions("chart-calendar"),h=Object.assign(Object.assign({},e),{api:n,state:i}),u=i.get("config.components.ChartCalendarDate");let p,f,m;s(i.subscribe("config.wrappers.ChartCalendar",t=>p=t)),s(i.subscribe("config.classNames",t=>{f=n.getClass("chart-calendar"),a()}));const g=new c({height:"","--headerHeight":"","margin-left":""});s(i.subscribe("config.headerHeight",t=>{m=t,g.style.height=m+"px",g.style["--calendar-height"]=m+"px",a()}));const v=[[],[]];s(i.subscribe("$data.chart.time.levels",t=>{let e=0;for(const i of t){if(!i.length)continue;let t="YYYY-MM-DD HH";switch(i[0].period){case"day":t="YYYY-MM-DD";break;case"week":t="YYYY-MM-ww";break;case"month":t="YYYY-MM";break;case"year":t="YYYY"}const s=n.time.date().format(t);r(v[e],i,n=>n&&{level:e,date:n,currentDate:s,currentDateFormat:t},u),e++}a()})),s(()=>{v.forEach(t=>t.forEach(t=>t.destroy()))}),d.push(t=>{i.update("$data.elements.chart-calendar",t)});const b=o.create(d,h);return n=>p(l`
        <div class=${f} data-actions=${b} style=${g}>
          ${v.map((t,e)=>l`
              <div class=${f+"-dates "+f+`-dates--level-${e}`}>
                ${t.map(t=>t.html())}
              </div>
            `)}
        </div>
      `,{props:e,vido:t,templateProps:n})}class ge extends Pt{constructor(t,e){super(),e.state.update("$data.elements.chart-calendar-dates",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}}function ve(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:a,onChange:r,html:l,StyleMap:c,Detach:d}=t,h=n.getActions("chart-calendar-date");let u,p;s(i.subscribe("config.wrappers.ChartCalendarDate",t=>u=t)),s(i.subscribe("config.classNames",()=>{p=n.getClass("chart-calendar-date")}));let f,m,g="";const v=new c({width:"0px"});let b="";function y(){if(!e)return;const t=i.get(`config.chart.calendar.levels.${e.level}`);v.style.width=e.date.currentView.width+"px",f=i.get("$data.chart.time");const n=t.formats.find(t=>+f.zoom<=+t.zoomTo);g=e.date.current?" gstc-current":e.date.next?" gstc-next":e.date.previous?" gstc-previous":"";let s=p+"-content "+p+`-content--${e.date.period}`+g;n.className?(s+=" "+n.className,b=" "+n.className):b="",m=l`
      <div class=${s}>
        ${e.date.formatted}
      </div>
    `,a()}let w=!1;const $=new d(()=>w);let x;const P={date:e.date,period:e.period,api:n,state:i};r((t,n)=>{if(n.leave)return w=!0,a();w=!1,e=t,P.date=e.date,P.period=e.period,x&&x(),x=i.subscribeAll(["$data.chart.time","config.chart.calendar.levels"],y,{bulk:!0})}),s(()=>{x()}),h.includes(ge)||h.push(ge);const T=o.create(h,P);return n=>u(l`
        <div
          detach=${$}
          class=${p+" "+p+`--${e.date.period}`+" "+p+`--level-${e.level}`+g+b}
          style=${v}
          data-actions=${T}
        >
          ${m}
        </div>
      `,{props:e,vido:t,templateProps:n})}function be(t,e){const{api:n,state:i,onDestroy:s,Action:o,Actions:a,update:r,html:l,createComponent:c,StyleMap:d}=t,h=Object.assign(Object.assign({},e),{api:n,state:i});let u;s(i.subscribe("config.wrappers.ChartTimeline",t=>u=t));const p=i.get("config.components.ChartTimelineGrid"),f=i.get("config.components.ChartTimelineItems"),m=i.get("config.components.ListToggle"),g=c(p);s(g.destroy);const v=c(f);s(v.destroy);const b=c(m);let y,w,$;s(b.destroy),s(i.subscribe("config.classNames",()=>{y=n.getClass("chart-timeline"),w=n.getClass("chart-timeline-inner"),r()})),s(i.subscribe("config.list.toggle.display",t=>$=t));const x=new d({}),P=new d({});s(i.subscribeAll(["$data.innerHeight","$data.chart.dimensions.width","$data.list.rowsHeight","$data.chart.time.dates.day"],(function(){const t=i.get("$data.chart.dimensions.width"),e=i.get("$data.list.rowsHeight");x.style.height=i.get("$data.innerHeight")+"px",x.style["--height"]=x.style.height,t?(x.style.width=t+"px",x.style["--width"]=t+"px"):(x.style.width="0px",x.style["--width"]="0px"),P.style.height=e+"px",P.style.width=t?t+"px":"0px",r()})));let T=[];s(i.subscribe("config.actions.chart-timeline",t=>{T=t})),T.push(class extends o{constructor(t){super(),i.get("$data.elements.chart-timeline")!==t&&i.update("$data.elements.chart-timeline",t)}});const M=a.create(T,h);return n=>u(l`
        <div class=${y} style=${x} data-actions=${M}>
          <div class=${w} style=${P}>
            ${g.html()}${v.html()}${$?b.html():""}
          </div>
        </div>
      `,{props:e,vido:t,templateProps:n})}class ye{constructor(t,e){e.state.get("$data.elements.chart-timeline-grid")!==t&&e.state.update("$data.elements.chart-timeline-grid",t)}destroy(t,e){e.state.update("$data.elements",t=>(delete t["chart-timeline-grid"],t))}}function we(t,e){const{api:n,state:i,onDestroy:s,Actions:o,update:a,html:r,reuseComponents:l,StyleMap:c}=t,d=n.getActions("chart-timeline-grid"),h={api:n,state:i};let u;s(i.subscribe("config.wrappers.ChartTimelineGrid",t=>u=t));const p=i.get("config.components.ChartTimelineGridRow");let f,m;s(i.subscribe("config.classNames",()=>{f=n.getClass("chart-timeline-grid"),a()})),s(i.subscribe("config.chart.grid.cell.onCreate",t=>m=t));const g=[],v=[],b=new Map,y=new c({});s(i.subscribeAll(["$data.list.visibleRows;","$data.chart.time.levels","$data.innerHeight","$data.chart.dimensions.width"],(function(){const t=i.get("$data.chart.dimensions.width"),e=i.get("$data.innerHeight"),s=i.get("$data.chart.time"),o=i.get(`$data.chart.time.levels.${s.level}`);if(!o||0===o.length)return void i.update("$data.chart.grid.rowsWithCells",[]);const a=i.get("$data.list.visibleRows");y.style.height=e+"px",y.style.width=t+"px";let r=0;v.length=0;for(const e of a){const i=[];for(const t of o){let s;b.has(t.leftGlobal)?s=b.get(t.leftGlobal):(s=n.time.date(t.leftGlobal).format("YYYY-MM-DD HH:mm"),b.set(t.leftGlobal,s));let o={id:e.id+":"+s,time:t,row:e,top:r};for(const t of m)o=t(o);i.push(o)}v.push({row:e,cells:i,top:r,width:t}),r+=e.height}i.update("$data.chart.grid.rowsWithCells",v)}),{bulk:!0})),s(i.subscribe("$data.chart.grid.rowsWithCells;",(function(t){l(g,t||[],t=>t,p),a()}))),s(()=>{g.forEach(t=>t.destroy())}),d.push(ye);const w=o.create(d,h);return n=>u(r`
        <div class=${f} data-actions=${w} style=${y}>
          ${g.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class $e{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-grid-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-grid-rows",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-grid-rows",e=>e.filter(e=>e!==t))}}function xe(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:a,update:r,html:l,reuseComponents:c,onChange:d,StyleMap:h}=t,u=Object.assign(Object.assign({},e),{api:n,state:i});let p;s(i.subscribe("config.wrappers.ChartTimelineGridRow",t=>{p=t,r()}));const f=i.get("config.components.ChartTimelineGridRowCell"),m=n.getActions("chart-timeline-grid-row");let g;s(i.subscribe("config.classNames",()=>{g=n.getClass("chart-timeline-grid-row")}));const v=new h({width:e.width+"px",height:e.row.height+"px",overflow:"hidden"},!0);let b=!1;const y=new o(()=>b),w=[];d((function(t,n){var s,o,a,l,d,h,p;if(n.leave||void 0===t.row)return b=!0,c(w,[],t=>t,f),void r();b=!1,c(w,(e=t).cells,t=>t,f),v.setStyle({}),v.style.height=e.row.$data.outerHeight+"px",v.style.width=e.width+"px";const m=i.get("config.list.rows");for(const t of e.row.$data.parents){const e=m[t],n=null===(a=null===(o=null===(s=null==e?void 0:e.style)||void 0===s?void 0:s.grid)||void 0===o?void 0:o.row)||void 0===a?void 0:a.children;if(n)for(const t in n)v.style[t]=n[t]}const g=null===(p=null===(h=null===(d=null===(l=null==e?void 0:e.row)||void 0===l?void 0:l.style)||void 0===d?void 0:d.grid)||void 0===h?void 0:h.row)||void 0===p?void 0:p.current;if(g)for(const t in g)v.style[t]=g[t];for(const t in e)u[t]=e[t];r()})),s((function(){w.forEach(t=>t.destroy())})),-1===m.indexOf($e)&&m.push($e);const $=a.create(m,u);return n=>p(l`
        <div detach=${y} class=${g} data-actions=${$} style=${v}>
          ${w.map(t=>t.html())}
        </div>
      `,{vido:t,props:e,templateProps:n})}class Pe{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-grid-row-cells");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-grid-row-cells",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-grid-row-cells",e=>e.filter(e=>e!==t),{only:[""]})}}function Te(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:a,update:r,html:l,onChange:c,StyleMap:d}=t,h=Object.assign(Object.assign({},e),{api:n,state:i});let u=!1;const p=new o(()=>u),f=n.getActions("chart-timeline-grid-row-cell");let m,g;function v(t){g=n.getClass("chart-timeline-grid-row-cell"),t.current&&(g+=" current")}s(i.subscribe("config.wrappers.ChartTimelineGridRowCell",t=>{m=t,r()})),v(e.time);const b=new d({width:"",height:""});c((function(t,n){var s,o,a,l,c,d,p,f,m,g;if(n.leave||void 0===t.row)return u=!0,r();u=!1,e=t;for(const t in e)h[t]=e[t];v(e.time),b.setStyle({}),b.style.width=((null===(s=null==e?void 0:e.time)||void 0===s?void 0:s.width)||0)+"px",b.style.height=((null===(a=null===(o=null==e?void 0:e.row)||void 0===o?void 0:o.$data)||void 0===a?void 0:a.outerHeight)||0)+"px";const y=i.get("config.list.rows");for(const t of e.row.$data.parents){const e=y[t],n=null===(d=null===(c=null===(l=null==e?void 0:e.style)||void 0===l?void 0:l.grid)||void 0===c?void 0:c.cell)||void 0===d?void 0:d.children;n&&b.setStyle(Object.assign(Object.assign({},b.style),n))}const w=null===(g=null===(m=null===(f=null===(p=null==e?void 0:e.row)||void 0===p?void 0:p.style)||void 0===f?void 0:f.grid)||void 0===m?void 0:m.cell)||void 0===g?void 0:g.current;w&&b.setStyle(Object.assign(Object.assign({},b.style),w)),r()})),f.push(Pe);const y=a.create(f,h);return n=>m(l` <div detach=${p} class=${g} data-actions=${y} style=${b}></div> `,{props:e,vido:t,templateProps:n})}function Me(t,e={}){const{api:n,state:i,onDestroy:s,Actions:o,update:a,html:r,reuseComponents:l,StyleMap:c}=t,d=n.getActions("chart-timeline-items");let h,u,p;s(i.subscribe("config.wrappers.ChartTimelineItems",t=>h=t)),s(i.subscribe("config.components.ChartTimelineItemsRow",t=>u=t)),s(i.subscribe("config.classNames",()=>{p=n.getClass("chart-timeline-items"),a()}));const f=new c({},!0);s(i.subscribeAll(["$data.innerHeight","$data.chart.dimensions.width"],(function(){const t=i.get("$data.chart.dimensions.width"),e=i.get("$data.innerHeight");f.style.width=t+"px",f.style.height=e+"px"})));const m=[];s(i.subscribeAll(["$data.list.visibleRows;","config.chart.items"],(function(){const t=i.get("$data.list.visibleRows");l(m,t||[],t=>({row:t}),u),a()}))),s(()=>{m.forEach(t=>t.destroy())});const g=o.create(d,{api:n,state:i});return n=>h(r`
        <div class=${p} style=${f} data-actions=${g}>
          ${m.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class De{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-items-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-items-rows",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-items-rows",e=>e.filter(e=>e!==t))}}function _e(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:a,update:r,html:l,onChange:c,reuseComponents:d,StyleMap:h}=t,u=Object.assign(Object.assign({},e),{api:n,state:i});let p,f;s(i.subscribe("config.wrappers.ChartTimelineItemsRow",t=>p=t)),s(i.subscribe("config.components.ChartTimelineItemsRowItem",t=>f=t));let m,g,v=`$data.flatTreeMapById.${e.row.id}.$data.items`,b="";const y=[],w=new h({width:"",height:""},!0);let $=!1;const x=new o(()=>$),P=()=>{const t=i.get("$data.chart");$=!1,w.style.width=t.dimensions.width+"px",e?(w.style.height=e.row.$data.outerHeight+"px",w.style["--row-height"]=e.row.$data.outerHeight+"px"):$=!0};let T;s(i.subscribe("config.classNames",()=>{T=n.getClass("chart-timeline-items-row"),r()})),c((t,n)=>{if(n.leave||void 0===t.row)return $=!0,d(y,[],t=>({row:void 0,item:t}),f),r();e=t;for(const t in e)u[t]=e[t];var s;b=e.row.classNames&&e.row.classNames.length?T+" "+e.row.classNames.join(" "):T,s=e.row,v=`$data.flatTreeMapById.${s.id}.$data.items`,"function"==typeof m&&m(),"function"==typeof g&&g(),m=i.subscribe("$data.chart",t=>{if(void 0===t)return $=!0,r();P(),r()}),g=i.subscribe(v,t=>{if(void 0===t)return $=!0,d(y,[],t=>({row:s,item:t}),f),r();d(y,t,t=>({row:s,item:t}),f),P(),r()})}),s(()=>{g(),m(),y.forEach(t=>t.destroy())});const M=n.getActions("chart-timeline-items-row");M.push(De);const D=a.create(M,u);return n=>p(l`
        <div detach=${x} class=${b} data-actions=${D} style=${w}>
          ${y.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class Ee{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-items-row-items");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-items-row-items",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-items-row-items",e=>e.filter(e=>e!==t))}}function Oe(t,e){const{api:n,state:i,onDestroy:s,Detach:o,Actions:a,update:r,html:l,svg:c,onChange:d,unsafeHTML:h,StyleMap:u}=t;let p;s(i.subscribe("config.wrappers.ChartTimelineItemsRowItem",t=>p=t));let f=0,m=0,g=!1,v="";const b=new u({width:"",height:"",left:"",top:""}),y=new u({}),w=new u({}),$={item:e.item,row:e.row,left:f,width:m,api:n,state:i};let x=!1;function P(t=i.get("$data.chart.time")){var s,o,a,l,c,d,h,u;if(e.item.$data.detached=!1,g||0===t.levels.length||!t.levels[t.level]||0===t.levels[t.level].length)return x=!0,void(e.item.$data.detached=!0);if(f=e.item.$data.position.actualLeft,m=e.item.$data.actualWidth,m<=0)return x=!0,void(e.item.$data.detached=!0);v=_,e.item.time.start<t.leftGlobal?(y.style.display="block",v+=" "+_+"--left-cut"):y.style.display="none",e.item.$data.position.right>t.width?(w.style.display="block",v+=" "+_+"--right-cut"):w.style.display="none",e.item.classNames&&e.item.classNames.length&&(v+=" "+e.item.classNames.join(" ")),e.item.selected&&(v+=" "+n.getClass(T)+"--selected");const p=b.style.width,P=b.style.left,M=b.style.top,D=b.style.height;b.setStyle({});const E=n.isItemInViewport(e.item,t.leftGlobal,t.rightGlobal);x=!E,e.item.$data.detached=x,E?(b.style.width=m+"px",b.style.left=f+"px",b.style.top=e.item.$data.position.actualTop+"px",b.style.height=e.item.$data.actualHeight+"px"):(b.style.width=p,b.style.left=P,b.style.top=M,b.style.height=D);const O=i.get("config.list.rows");for(const t of e.row.$data.parents){const e=O[t],n=null===(a=null===(o=null===(s=null==e?void 0:e.style)||void 0===s?void 0:s.items)||void 0===o?void 0:o.item)||void 0===a?void 0:a.children;n&&b.setStyle(Object.assign(Object.assign({},b.style),n))}const S=null===(h=null===(d=null===(c=null===(l=null==e?void 0:e.row)||void 0===l?void 0:l.style)||void 0===c?void 0:c.items)||void 0===d?void 0:d.item)||void 0===h?void 0:h.current;S&&b.setStyle(Object.assign(Object.assign({},b.style),S));const C=null===(u=null==e?void 0:e.item)||void 0===u?void 0:u.style;C&&b.setStyle(Object.assign(Object.assign({},b.style),C)),$.left=f,$.width=m,r()}const T="chart-timeline-items-row-item",M=n.getClass(T)+"-cut";d((function(t,n){if(n.leave||void 0===t.row||void 0===t.item)return g=!0,x=!0,e.item.$data.detached=!0,r();x=!1,e.item.$data.detached=!1,g=!1,e=t,$.item=e.item,$.row=e.row,P()}));const D=n.getActions(T);let _,E;s(i.subscribe("config.classNames",()=>{_=n.getClass(T),E=n.getClass(T+"-label"),r()})),s(i.subscribe("$data.chart.time",P)),D.push(Ee);const O=a.create(D,$),S=new o(()=>x);return n=>p(l`
        <div detach=${S} class=${v} data-actions=${O} style=${b}>
          ${l`
    <div class=${M} style=${y}>
      ${c`<svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 18 16" width="16">
        <path fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>`}
    </div>
  `}
          <div class=${E} title=${e.item.isHTML?null:e.item.label}>
            ${e.item.isHTML?h(e.item.label):e.item.label}
          </div>
          ${l`
    <div class=${M} style=${w}>
      ${c`<svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 4 16" width="16">
        <path transform="rotate(-180 2.5,8) " fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>`}
    </div>
  `}
        </div>
      `,{vido:t,props:e,templateProps:n})}const Se=["main","scroll-bar","list","list-column","list-column-header","list-column-header-resizer","list-column-header-resizer-dots","list-column-row","list-column-row-expander","list-column-row-expander-toggle","list-toggle","chart","chart-calendar","chart-calendar-date","chart-timeline","chart-timeline-grid","chart-timeline-grid-row","chart-timeline-grid-row-cell","chart-timeline-items","chart-timeline-items-row","chart-timeline-items-row-item"];function Ce(){const t=function(){const t={};return Se.forEach(e=>t[e]=[]),t}();return{plugins:[],plugin:{},innerHeight:822,headerHeight:72,components:{Main:ne,ScrollBar:ie,List:se,ListColumn:ae,ListColumnHeader:re,ListColumnHeaderResizer:le,ListColumnRow:de,ListColumnRowExpander:he,ListColumnRowExpanderToggle:ue,ListToggle:pe,Chart:fe,ChartCalendar:me,ChartCalendarDate:ve,ChartTimeline:be,ChartTimelineGrid:we,ChartTimelineGridRow:xe,ChartTimelineGridRowCell:Te,ChartTimelineItems:Me,ChartTimelineItemsRow:_e,ChartTimelineItemsRowItem:Oe},wrappers:{Main:t=>t,ScrollBar:t=>t,List:t=>t,ListColumn:t=>t,ListColumnHeader:t=>t,ListColumnHeaderResizer:t=>t,ListColumnRow:t=>t,ListColumnRowExpander:t=>t,ListColumnRowExpanderToggle:t=>t,ListToggle:t=>t,Chart:t=>t,ChartCalendar:t=>t,ChartCalendarDate:t=>t,ChartTimeline:t=>t,ChartTimelineGrid:t=>t,ChartTimelineGridRow:t=>t,ChartTimelineGridRowCell:t=>t,ChartTimelineItems:t=>t,ChartTimelineItemsRow:t=>t,ChartTimelineItemsRowItem:t=>t},list:{rows:{},row:{height:40,gap:{top:0,bottom:0}},columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},minWidth:50,data:{}},expander:{padding:18,size:20,icon:{width:16,height:16},icons:{child:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><ellipse ry="4" rx="4" id="svg_1" cy="12" cx="12" fill="#000000B0"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}},toggle:{display:!0,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path stroke="null" d="m16.406954,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m-0.343497,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path transform="rotate(-180 4.392796516418457,12) " stroke="null" d="m1.153809,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m9.773297,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>'}}},scroll:{horizontal:{size:14,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0},vertical:{size:14,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0}},chart:{time:{period:"day",from:0,to:0,finalFrom:0,finalTo:0,zoom:20,leftGlobal:0,centerGlobal:0,rightGlobal:0,levels:[],calculatedZoomMode:!1,onLevelDates:[],onCurrentViewLevelDates:[],allDates:[]},calendar:{expand:!0,levels:[{formats:[{zoomTo:17,period:"day",className:"gstc-date-medium gstc-date-left",format:({timeStart:t})=>t.format("DD MMMM YYYY (dddd)")},{zoomTo:23,period:"month",format:({timeStart:t})=>t.format("MMMM YYYY")},{zoomTo:24,period:"month",format:({timeStart:t,className:e,vido:n})=>t.format("MMMM 'YY")},{zoomTo:25,period:"month",format:({timeStart:t})=>t.format("MMM YYYY")},{zoomTo:27,period:"year",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:100,period:"year",default:!0,format:()=>null}]},{main:!0,formats:[{zoomTo:16,period:"hour",format:({timeStart:t})=>t.format("HH:mm")},{zoomTo:17,period:"hour",default:!0,format:({timeStart:t})=>t.format("HH")},{zoomTo:19,period:"day",className:"gstc-date-medium",format:({timeStart:t,className:e,vido:n})=>n.html`<span class="${e}-content gstc-date-bold">${t.format("DD")}</span> <span class="${e}-content gstc-date-thin">${t.format("dddd")}</span>`},{zoomTo:20,period:"day",default:!0,format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("dddd")}</div>`},{zoomTo:21,period:"day",format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("ddd")}</div>`},{zoomTo:22,period:"day",className:"gstc-date-vertical",format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("DD")}</div><div class="${e}-content gstc-date-extra-small">${t.format("ddd")}</div>`},{zoomTo:23,period:"week",default:!0,format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top">${t.format("DD")} - ${e.format("DD")}</div><div class="${n}-content gstc-date-small gstc-date-thin">${t.format("ddd")} - ${e.format("dd")}</div>`},{zoomTo:25,period:"week",className:"gstc-date-vertical",format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top gstc-date-small gstc-date-normal">${t.format("DD")}</div><div class="gstc-dash gstc-date-small">-</div><div class="${n}-content gstc-date-small gstc-date-normal">${e.format("DD")}</div>`},{zoomTo:26,period:"month",default:!0,className:"gstc-date-month-level-1",format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("MMM")}</div><div class="${n}-content gstc-date-small gstc-date-bottom">${t.format("MM")}</div>`},{zoomTo:27,period:"month",className:"gstc-date-vertical",format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("MM")}</div><div class="${e}-content gstc-date-extra-small">${t.format("MMM")}</div>`},{zoomTo:28,period:"year",default:!0,className:"gstc-date-big",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:29,period:"year",className:"gstc-date-medium",format:({timeStart:t})=>t.format("YYYY")},{zoomTo:30,period:"year",className:"gstc-date-medium",format:({timeStart:t})=>t.format("YY")},{zoomTo:100,period:"year",default:!0,format:()=>null}]}]},grid:{cell:{onCreate:[]}},item:{gap:{top:4,bottom:4},top:0,height:32},items:{},spacing:1},slots:function(){const t={};return Se.forEach(e=>{t[e]={before:[],after:[]}}),t}(),classNames:{},actions:t,locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}},utcMode:!1,usageStatistics:!0}}var Ie=t((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",s="day",o="week",a="month",r="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},u={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+h(i,2,"0")+":"+h(s,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,a),s=e-i<0,o=t.clone().add(n+(s?-1:1),a);return Number(-(n+(e-i)/(s?i-o:o-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:a,y:l,w:o,d:s,D:"date",h:i,m:n,s:e,ms:t,Q:r}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",m={};m[f]=p;var g=function(t){return t instanceof w},v=function(t,e,n){var i;if(!t)return f;if("string"==typeof t)m[t]&&(i=t),e&&(m[t]=e,i=t);else{var s=t.name;m[s]=t,i=s}return!n&&i&&(f=i),i||!n&&f},b=function(t,e,n){if(g(t))return t.clone();var i=e?"string"==typeof e?{format:e,pl:n}:e:{};return i.date=t,new w(i)},y=u;y.l=v,y.i=g,y.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function h(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=h.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(c);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return y},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},u.isAfter=function(t,e){return b(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<b(t)},u.$g=function(t,e,n){return y.u(t)?this[e]:this.set(n,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",a)},u.day=function(t){return this.$g(t,"$W",s)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",i)},u.minute=function(t){return this.$g(t,"$m",n)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,r){var c=this,d=!!y.u(r)||r,h=y.p(t),u=function(t,e){var n=y.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return d?n:n.endOf(s)},p=function(t,e){return y.w(c.toDate()[t].apply(c.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case l:return d?u(1,0):u(31,11);case a:return d?u(1,m):u(0,m+1);case o:var b=this.$locale().weekStart||0,w=(f<b?f+7:f)-b;return u(d?g-w:g+(6-w),m);case s:case"date":return p(v+"Hours",0);case i:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(o,r){var c,d=y.p(o),h="set"+(this.$u?"UTC":""),u=(c={},c.day=h+"Date",c.date=h+"Date",c[a]=h+"Month",c[l]=h+"FullYear",c[i]=h+"Hours",c[n]=h+"Minutes",c[e]=h+"Seconds",c[t]=h+"Milliseconds",c)[d],p=d===s?this.$D+(r-this.$W):r;if(d===a||d===l){var f=this.clone().set("date",1);f.$d[u](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[y.p(t)]()},u.add=function(t,r){var c,d=this;t=Number(t);var h=y.p(r),u=function(e){var n=b(d);return y.w(n.date(n.date()+Math.round(e*t)),d)};if(h===a)return this.set(a,this.$M+t);if(h===l)return this.set(l,this.$y+t);if(h===s)return u(1);if(h===o)return u(7);var p=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[h]||1,f=this.$d.getTime()+t*p;return y.w(f,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=y.z(this),s=this.$locale(),o=this.$H,a=this.$m,r=this.$M,l=s.weekdays,c=s.months,h=function(t,i,s,o){return t&&(t[i]||t(e,n))||s[i].substr(0,o)},u=function(t){return y.s(o%12||12,t,"0")},p=s.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:y.s(r+1,2,"0"),MMM:h(s.monthsShort,r,c,3),MMMM:c[r]||c(this,n),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:h(s.weekdaysMin,this.$W,l,2),ddd:h(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:y.s(o,2,"0"),h:u(1),hh:u(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:i};return n.replace(d,(function(t,e){return e||f[t]||i.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,s,c){var d,h=y.p(s),u=b(t),p=6e4*(u.utcOffset()-this.utcOffset()),f=this-u,m=y.m(this,u);return m=(d={},d[l]=m/12,d[a]=m,d[r]=m/3,d[o]=(f-p)/6048e5,d.day=(f-p)/864e5,d[i]=f/36e5,d[n]=f/6e4,d[e]=f/1e3,d)[h]||f,c?m:y.a(m)},u.daysInMonth=function(){return this.endOf(a).$D},u.$locale=function(){return m[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=v(t,e,!0);return i&&(n.$L=i),n},u.clone=function(){return y.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},h}();return b.prototype=w.prototype,b.extend=function(t,e){return t(e,w,b),b},b.locale=v,b.isDayjs=g,b.unix=function(t){return b(1e3*t)},b.en=m[f],b.Ls=m,b}()})),Ne=t((function(t,e){t.exports=function(t,e,n){var i=(new Date).getTimezoneOffset(),s=e.prototype;n.utc=function(t,n){return new e({date:t,utc:!0,format:n})},s.utc=function(){return n(this.toDate(),{locale:this.$L,utc:!0})},s.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var a=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else a.call(this)};var r=s.utcOffset;s.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?r.call(this):this.$offset;var n,s=Math.abs(t)<=16?60*t:t;return 0!==t?(n=this.local().add(s+i,"minute")).$offset=s:n=this.utc(),n};var l=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+i;return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()}}}));class Ae{constructor(t){this.utcMode=!1,this.dayjs=Ie,this.state=t,this.locale=t.get("config.locale"),this.utcMode=t.get("config.utcMode"),this.resetCurrentDate(),this.utcMode&&Ie.extend(Ne),Ie.locale(this.locale,null,!0)}resetCurrentDate(){const t=Ie();this.currentDate={timestamp:t.valueOf(),hour:t.startOf("hour"),day:t.startOf("day"),week:t.startOf("week"),month:t.startOf("month"),year:t.startOf("year")}}date(t){const e=this.utcMode?Ie.utc:Ie;return t?e(t).locale(this.locale.name):e().locale(this.locale.name)}addAdditionalSpace(t){if(t.additionalSpaces&&t.additionalSpaces[t.period]){const e=t.additionalSpaces[t.period];e.before&&(t.finalFrom=this.date(t.from).subtract(e.before,e.period).valueOf()),e.after&&(t.finalTo=this.date(t.to).add(e.after,e.period).valueOf())}return t}recalculateFromTo(t){const e=t.period;(t=Object.assign({},t)).from=+t.from,t.to=+t.to;let n=Number.MAX_SAFE_INTEGER,i=0;const s=this.state.get("config.chart.items");if(Object.keys(s).length>0&&(0===t.from||0===t.to)){for(const t in s){const e=s[t];e.time.start<n&&e.time.start&&(n=e.time.start),e.time.end>i&&(i=e.time.end)}0===t.from&&(t.from=this.date(n).startOf(e).valueOf()),0===t.to&&(t.to=this.date(i).endOf(e).valueOf()),t.fromDate=this.date(t.from),t.toDate=this.date(t.to)}return t.finalFrom=t.fromDate.startOf(e).valueOf(),t.finalTo=t.toDate.startOf(e).valueOf(),t=this.addAdditionalSpace(t)}getCenter(t){return t.leftGlobal+(t.rightGlobal-t.leftGlobal)/2}getGlobalOffsetPxFromDates(t,e=this.state.get("$data.chart.time")){const n=t.valueOf(),i=e.allDates[e.level];if(!i)return-1;let s;for(let t=0,e=i.length;t<e;t++){if(n<=i[t].rightGlobal){s=i[t];break}}return s?s.leftPx+(n-s.leftGlobal)/e.timePerPixel:t.valueOf()<e.leftGlobal?0:e.width}getViewOffsetPxFromDates(t,e=!0,n=this.state.get("$data.chart.time")){const i=this.getGlobalOffsetPxFromDates(t,n)-n.leftPx;return e&&this.limitOffsetPxToView(i),i}limitOffsetPxToView(t,e=this.state.get("$data.chart.time")){return t<0?0:t>e.width?e.width:t}findDateAtOffsetPx(t,e){return e.find(e=>e.leftPx>=t)}findDateAtTime(t,e){return e.find(e=>e.rightGlobal>=t)}getTimeFromViewOffsetPx(t,e){const n=t+e.leftPx;let i=e.allDates[e.level];if(n<0){let t,i=e.leftGlobalDate.subtract(1,e.period),s=0;for(let o=0;o<1e3;o++){if(t=this.generatePeriodDates({leftDate:i,rightDate:i.add(1,e.period),period:e.period,time:e,level:this.state.get(`config.chart.calendar.levels.${e.level}`),levelIndex:e.level})[0],s-=t.width,s<=n)return t.leftGlobal+Math.round((Math.abs(n)-Math.abs(t.leftPx))*e.timePerPixel);i=i.subtract(1,e.period).startOf(e.period)}}else if(n>e.totalViewDurationPx){let t,i=e.rightGlobalDate,s=e.rightPx;for(let o=0;o<1e3;o++){if(t=this.generatePeriodDates({leftDate:i,rightDate:i.add(1,e.period),period:e.period,time:e,level:this.state.get(`config.chart.calendar.levels.${e.level}`),levelIndex:e.level})[0],s+=t.width,s>=n)return t.leftGlobal+Math.round((Math.abs(n)-Math.abs(t.leftPx))*e.timePerPixel);i=i.add(1,e.period).startOf(e.period)}}for(let t=0,s=i.length;t<s;t++){let s=i[t];if(s.leftPx>=n)return s.leftGlobal+Math.round((n-s.leftPx)*e.timePerPixel)}return-1}calculateScrollPosPxFromTime(t,e,n){if(n||(n=this.state.get("config.scroll.horizontal")),!n.maxPosPx)return 0;e||(e=this.state.get("$data.chart.time"));const i=this.findDateAtTime(t,e.allDates[e.level]);return Math.round((n.maxPosPx-n.innerSize)*i.leftPercent)}getCurrentFormatForLevel(t,e){return t.formats.find(t=>+e.zoom<=+t.zoomTo)}generatePeriodDates({leftDate:t,rightDate:e,period:n,level:i,levelIndex:s,time:o}){if(!o.timePerPixel)return[];let a=0;const r=Math.ceil(e.diff(t,n,!0));let l=[];for(let e=0;e<r;e++){const e=t.endOf(n);let i={leftGlobal:t.valueOf(),leftGlobalDate:t,rightGlobalDate:e,rightGlobal:e.valueOf(),width:0,leftPx:0,rightPx:0,period:n,formatted:null,current:t.valueOf()===this.currentDate[n].valueOf(),previous:t.add(1,n).valueOf()===this.currentDate[n].valueOf(),next:t.subtract(1,n).valueOf()===this.currentDate[n].valueOf()};const s=i.rightGlobal-i.leftGlobal;i.width=s/o.timePerPixel,i.leftPx=a,a+=i.width,i.rightPx=a,l.push(i),t=t.add(1,n)}const c=this.getCurrentFormatForLevel(i,o);for(let t=0,e=o.onLevelDates.length;t<e;t++)l=o.onLevelDates[t]({dates:l,format:c,time:o,level:i,levelIndex:s});return l}getDatesDiffPx(t,e,n){if(t===e)return 0;const i=n.allDates[n.level];if(0===i.length)return 0;let s=0,o=!1,a=!1;if(e<t){const n=t;t=e,e=n,a=!0}let r=[];if(t.valueOf()<i[0].leftGlobal){const e=i[0].period,s=n.level,o=this.state.get(`config.chart.calendar.levels.${s}`);r=this.generatePeriodDates({leftDate:t,rightDate:i[0].leftGlobalDate,period:e,level:o,levelIndex:s,time:n})}r=[...r,...i];const l=i[i.length-1].leftGlobalDate;if(e.valueOf()>l.valueOf()){const t=i[0].period,s=n.level,o=this.state.get(`config.chart.calendar.levels.${s}`),a=this.generatePeriodDates({leftDate:e,rightDate:l,period:t,level:o,levelIndex:s,time:n});r=[...r,...a]}const c=this.state.get(`config.chart.calendar.levels.${n.level}`),d=this.getCurrentFormatForLevel(c,n);for(const t of n.onLevelDates)r=t({dates:r,time:n,format:d,level:c,levelIndex:n.level});for(const n of r){if(n.leftGlobal>=t.valueOf()&&(o=!0),n.rightGlobal>=e.valueOf())break;o&&(s+=n.width)}return a?-s:s}}function Le(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let n=0,i=t.length;n<i;n+=1){const i=t[n];i===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(i),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}function ze(t,e,n){this.obj=t,this.delimeter=e,this.wildcard=n}Le.prototype.match=function(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;const{length:e}=t;if(e<this.minLength||e>this.maxLength)return!1;let n=this.segments.length-1,i=t.length-1,s=!1;for(;;){const e=this.segments[n];if(n-=1,e===this.wchar)s=!0;else{const n=i+1-e.length,o=t.lastIndexOf(e,n);if(-1===o||o>n)return!1;if(s)i=o-1,s=!1;else{if(o!==n)return!1;i-=e.length}}if(0>n)break}return!0},ze.prototype.simpleMatch=function(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const n=t.indexOf(this.wildcard);if(n>-1){const i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){const t=i.length;return!(t>0)||e.substr(-t)===i}}return!1},ze.prototype.match=function(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new Le(t).match(e)},ze.prototype.handleArray=function(t,e,n,i,s={}){let o=t.indexOf(this.delimeter,n),a=!1;-1===o&&(a=!0,o=t.length);const r=t.substring(n,o);let l=0;for(const n of e){const e=l.toString(),c=""===i?e:i+this.delimeter+l;(r===this.wildcard||r===e||this.simpleMatch(r,e))&&(a?s[c]=n:this.goFurther(t,n,o+1,c,s)),l++}return s},ze.prototype.handleObject=function(t,e,n,i,s={}){let o=t.indexOf(this.delimeter,n),a=!1;-1===o&&(a=!0,o=t.length);const r=t.substring(n,o);for(let n in e){n=n.toString();const l=""===i?n:i+this.delimeter+n;(r===this.wildcard||r===n||this.simpleMatch(r,n))&&(a?s[l]=e[n]:this.goFurther(t,e[n],o+1,l,s))}return s},ze.prototype.goFurther=function(t,e,n,i,s={}){return Array.isArray(e)?this.handleArray(t,e,n,i,s):this.handleObject(t,e,n,i,s)},ze.prototype.get=function(t){return this.goFurther(t,this.obj,0,"")};class Ge{static get(t,e,n=null){if(null===n&&(n=t.slice()),0===n.length||void 0===e)return e;const i=n.shift();return e.hasOwnProperty(i)?0===n.length?e[i]:Ge.get(t,e[i],n):void 0}static set(t,e,n,i=null){if(null===i&&(i=t.slice()),0===i.length){for(const t in n)delete n[t];for(const t in e)n[t]=e[t];return}const s=i.shift();0!==i.length?(n||(n={}),n.hasOwnProperty(s)||(n[s]={}),Ge.set(t,e,n[s],i)):n[s]=e}}const Ye={delimeter:".",notRecursive:";",param:":",wildcard:"*",queue:!1,maxSimultaneousJobs:1e3,log:function(t,e){console.debug(t,e)}},Re={bulk:!1,debug:!1,source:"",data:void 0,queue:!1},He={only:[],source:"",debug:!1,data:void 0,queue:!1};class ke{constructor(t={},e=Ye){this.jobsRunning=0,this.updateQueue=[],this.subscribeQueue=[],this.listeners=new Map,this.waitingListeners=new Map,this.data=t,this.options=Object.assign(Object.assign({},Ye),e),this.id=0,this.pathGet=Ge.get,this.pathSet=Ge.set,this.scan=new ze(this.data,this.options.delimeter,this.options.wildcard)}getListeners(){return this.listeners}destroy(){this.data=void 0,this.listeners=new Map}match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))}getIndicesOf(t,e){const n=t.length;if(0==n)return[];let i,s=0,o=[];for(;(i=e.indexOf(t,s))>-1;)o.push(i),s=i+n;return o}getIndicesCount(t,e){const n=t.length;if(0==n)return 0;let i,s=0,o=0;for(;(i=e.indexOf(t,s))>-1;)o++,s=i+n;return o}cutPath(t,e){t=this.cleanNotRecursivePath(t),e=this.cleanNotRecursivePath(e);const n=this.getIndicesCount(this.options.delimeter,e),i=this.getIndicesOf(this.options.delimeter,t);return t.substr(0,i[n])}trimPath(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimeter?t.substr(1):t}split(t){return""===t?[]:t.split(this.options.delimeter)}isWildcard(t){return t.includes(this.options.wildcard)}isNotRecursive(t){return t.endsWith(this.options.notRecursive)}cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t}hasParams(t){return t.includes(this.options.param)}getParamsInfo(t){let e={replaced:"",original:t,params:{}},n=0,i=[];for(const s of this.split(t)){e.params[n]={original:s,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let o=t.exec(s);o?(e.params[n].name=o[1],t.lastIndex=0,e.params[n].replaced=s.replace(t,this.options.wildcard),i.push(e.params[n].replaced),n++):(delete e.params[n],i.push(s),n++)}return e.replaced=i.join(this.options.delimeter),e}getParams(t,e){if(!t)return;const n=this.split(e),i={};for(const e in t.params){i[t.params[e].name]=n[e]}return i}waitForAll(t,e){const n={};for(let e of t)n[e]={dirty:!1},this.hasParams(e)&&(n[e].paramsInfo=this.getParamsInfo(e)),n[e].isWildcard=this.isWildcard(e),n[e].isRecursive=!this.isNotRecursive(e);return this.waitingListeners.set(t,{fn:e,paths:n}),e(n),function(){this.waitingListeners.delete(t)}}executeWaitingListeners(t){for(const e of this.waitingListeners.values()){const{fn:n,paths:i}=e;let s=0,o=0;for(let e in i){const n=i[e];let a=!1;n.isRecursive&&(t=this.cutPath(t,e)),n.isWildcard&&this.match(e,t)&&(a=!0),t===e&&(a=!0),a&&(n.dirty=!0),n.dirty&&s++,o++}s===o&&n(i)}}subscribeAll(t,e,n=Re){let i=[];for(const s of t)i.push(this.subscribe(s,e,n));return function(){for(const t of i)t()}}getCleanListenersCollection(t={}){return Object.assign({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)}getCleanListener(t,e=Re){return{fn:t,options:Object.assign(Object.assign({},Re),e)}}getListenerCollectionMatch(t,e,n){t=this.cleanNotRecursivePath(t);const i=this;return function(s){return e&&(s=i.cutPath(s,t)),!(!n||!i.match(t,s))||t===s}}getListenersCollection(t,e){if(this.listeners.has(t)){let n=this.listeners.get(t);return n.listeners.set(++this.id,e),n}let n={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(n.path)&&(n.paramsInfo=this.getParamsInfo(n.path),n.path=n.paramsInfo.replaced,n.hasParams=!0),n.isWildcard=this.isWildcard(n.path),this.isNotRecursive(n.path)&&(n.isRecursive=!1);let i=this.getCleanListenersCollection(Object.assign(Object.assign({},n),{match:this.getListenerCollectionMatch(n.path,n.isRecursive,n.isWildcard)}));return this.id++,i.listeners.set(this.id,e),this.listeners.set(n.path,i),i}subscribe(t,e,n=Re,i="subscribe"){this.jobsRunning++;let s=this.getCleanListener(e,n);const o=this.getListenersCollection(t,s);if(o.count++,t=o.path,o.isWildcard){const a=this.scan.get(this.cleanNotRecursivePath(t));if(n.bulk){const r=[];for(const t in a)r.push({path:t,params:this.getParams(o.paramsInfo,t),value:a[t]});e(r,{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(const r in a)e(a[r],{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(r)},params:this.getParams(o.paramsInfo,r),options:n})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:i,listener:s,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(o.paramsInfo,t),options:n});return this.debugSubscribe(s,o,t),this.jobsRunning--,this.unsubscribe(t,this.id)}unsubscribe(t,e){const n=this.listeners,i=n.get(t);return function(){i.listeners.delete(e),i.count--,0===i.count&&n.delete(t)}}same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t}runQueuedListeners(){if(0===this.subscribeQueue.length)return;const t=[...this.subscribeQueue];for(let e=0,n=t.length;e<n;e++){if(t[e]()){const n=this.subscribeQueue.indexOf(t[e]);n>-1&&this.subscribeQueue.splice(n,1)}}Promise.resolve().then(()=>this.runQueuedListeners())}notifyListeners(t,e=[],n=!0){const i=[];for(const s in t){let{single:o,bulk:a}=t[s];for(const t of o){if(e.includes(t))continue;const s=this.debugTime(t);t.listener.options.queue&&this.jobsRunning?this.subscribeQueue.push(()=>!this.jobsRunning&&(t.listener.fn(t.value(),t.eventInfo),!0)):t.listener.fn(t.value(),t.eventInfo),n&&i.push(t),this.debugListener(s,t)}for(const t of a){if(e.includes(t))continue;const s=this.debugTime(t),o=[];for(const e of t.value)o.push(Object.assign(Object.assign({},e),{value:e.value()}));t.listener.options.queue&&this.jobsRunning?this.subscribeQueue.push(()=>!this.jobsRunning&&(t.listener.fn(o,t.eventInfo),!0)):t.listener.fn(o,t.eventInfo),n&&i.push(t),this.debugListener(s,t)}}return Promise.resolve().then(()=>this.runQueuedListeners()),i}getSubscribedListeners(t,e,n,i="update",s=null){n=Object.assign(Object.assign({},He),n);const o={};for(let[a,r]of this.listeners)if(o[a]={single:[],bulk:[],bulkData:[]},r.match(t)){const l=r.paramsInfo?this.getParams(r.paramsInfo,t):void 0,c=r.isRecursive||r.isWildcard?()=>this.get(this.cutPath(t,a)):()=>e,d=[{value:c,path:t,params:l}];for(const e of r.listeners.values())e.options.bulk?o[a].bulk.push({listener:e,listenersCollection:r,eventInfo:{type:i,listener:e,path:{listener:a,update:s||t,resolved:void 0},params:l,options:n},value:d}):o[a].single.push({listener:e,listenersCollection:r,eventInfo:{type:i,listener:e,path:{listener:a,update:s||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:n},value:c})}return o}notifySubscribedListeners(t,e,n,i="update",s=null){return this.notifyListeners(this.getSubscribedListeners(t,e,n,i,s))}getNestedListeners(t,e,n,i="update",s=null){const o={};for(let[a,r]of this.listeners){o[a]={single:[],bulk:[]};const l=this.cutPath(a,t);if(this.match(l,t)){const c=this.trimPath(a.substr(l.length)),d=new ze(e,this.options.delimeter,this.options.wildcard).get(c),h=r.paramsInfo?this.getParams(r.paramsInfo,t):void 0,u=[],p={};for(const e in d){const l=()=>d[e],c=[t,e].join(this.options.delimeter);for(const[e,d]of r.listeners){const f={type:i,listener:d,listenersCollection:r,path:{listener:a,update:s||t,resolved:this.cleanNotRecursivePath(c)},params:h,options:n};d.options.bulk?(u.push({value:l,path:c,params:h}),p[e]=d):o[a].single.push({listener:d,listenersCollection:r,eventInfo:f,value:l})}}for(const e in p){const s=p[e],l={type:i,listener:s,listenersCollection:r,path:{listener:a,update:t,resolved:void 0},options:n,params:h};o[a].bulk.push({listener:s,listenersCollection:r,eventInfo:l,value:u})}}}return o}notifyNestedListeners(t,e,n,i="update",s,o=null){return this.notifyListeners(this.getNestedListeners(t,e,n,i,o),s,!1)}getNotifyOnlyListeners(t,e,n,i="update",s=null){const o={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return o;for(const a of n.only){const r=new ze(e,this.options.delimeter,this.options.wildcard).get(a);o[a]={bulk:[],single:[]};for(const e in r){const l=t+this.options.delimeter+e;for(const[c,d]of this.listeners){const h=d.paramsInfo?this.getParams(d.paramsInfo,l):void 0;if(this.match(c,l)){const u=()=>r[e],p=[{value:u,path:l,params:h}];for(const e of d.listeners.values()){const r={type:i,listener:e,listenersCollection:d,path:{listener:c,update:s||t,resolved:this.cleanNotRecursivePath(l)},params:h,options:n};e.options.bulk?o[a].bulk.some(t=>t.listener===e)||o[a].bulk.push({listener:e,listenersCollection:d,eventInfo:r,value:p}):o[a].single.push({listener:e,listenersCollection:d,eventInfo:r,value:u})}}}}}return o}notifyOnly(t,e,n,i="update",s=""){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,n,i,s))[0]}canBeNested(t){return"object"==typeof t&&null!==t}getUpdateValues(t,e,n){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}}wildcardNotify(t,e){let n=[];for(const e of t)n=[...n,...this.notifyListeners(e,n)];for(const t of e)this.executeWaitingListeners(t);this.jobsRunning--}wildcardUpdate(t,e,n=He,i=!1){n=Object.assign(Object.assign({},He),n);const s=this.scan.get(t),o={};for(const t in s){const n=this.split(t),{oldValue:i,newValue:a}=this.getUpdateValues(s[t],n,e);this.same(a,i)||(o[t]=a)}const a=[],r=[];for(const e in o){const i=o[e];n.only.length?a.push(this.getNotifyOnlyListeners(e,i,n,"update",t)):(a.push(this.getSubscribedListeners(e,i,n,"update",t)),this.canBeNested(i)&&a.push(this.getNestedListeners(e,i,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:e,newValue:i}),this.pathSet(this.split(e),i,this.data),r.push(e)}if(i)return()=>this.wildcardNotify(a,r);this.wildcardNotify(a,r)}runUpdateQueue(){for(;this.updateQueue.length;){const t=this.updateQueue.shift();this.update(t.updatePath,t.fn,t.options,t.multi)}}updateNotify(t,e,n){const i=this.notifySubscribedListeners(t,e,n);this.canBeNested(e)&&this.notifyNestedListeners(t,e,n,"update",i),this.executeWaitingListeners(t),this.jobsRunning--}updateNotifyOnly(t,e,n){this.notifyOnly(t,e,n),this.executeWaitingListeners(t),this.jobsRunning--}update(t,e,n=He,i=!1){const s=this.jobsRunning;if((this.options.queue||n.queue)&&s){if(s>this.options.maxSimultaneousJobs)throw new Error("Maximal simultaneous jobs limit reached.");return this.updateQueue.push({updatePath:t,fn:e,options:n,multi:i}),Promise.resolve().then(()=>{this.runUpdateQueue()})}if(this.jobsRunning++,this.isWildcard(t))return this.wildcardUpdate(t,e,n,i);const o=this.split(t),{oldValue:a,newValue:r}=this.getUpdateValues(this.pathGet(o,this.data),o,e);return n.debug&&this.options.log(`Updating ${t} ${n.source?`from ${n.source}`:""}`,{oldValue:a,newValue:r}),this.same(r,a)?(this.jobsRunning--,r):(this.pathSet(o,r,this.data),null===(n=Object.assign(Object.assign({},He),n)).only?(this.jobsRunning--,i?()=>{}:r):n.only.length?i?()=>this.updateNotifyOnly(t,r,n):(this.updateNotifyOnly(t,r,n),r):i?()=>this.updateNotify(t,r,n):(this.updateNotify(t,r,n),r))}multi(){const t=this,e=[];return{update(n,i,s=He){return e.push(t.update(n,i,s,!0)),this},done(){for(let t=0,n=e.length;t<n;t++)e[t]();e.length=0}}}get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)}debugSubscribe(t,e,n){t.options.debug&&this.options.log("listener subscribed",{listenerPath:n,listener:t,listenersCollection:e})}debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})}debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0}}const je=It,Ve="gantt-schedule-timeline-calendar";const Fe={name:Ve,stateFromConfig:function(t){const e=Ce(),n=function(t,e){const n=je({},e.actions),i=je({},t.actions);let s=[...Object.keys(n),...Object.keys(i)];s=s.filter(t=>s.includes(t));const o={};for(const t of s)o[t]=[],void 0!==n[t]&&Array.isArray(n[t])&&(o[t]=[...n[t]]),void 0!==i[t]&&Array.isArray(i[t])&&(o[t]=[...o[t],...i[t]]);return delete t.actions,delete e.actions,o}(t,e),i={config:je({},e,t)};return i.config.actions=n,this.state=new ke(i,{delimeter:"."})},mergeDeep:je,date:t=>t?Ie(t):Ie(),setPeriod(t){return this.state.update("config.chart.time.period",t),this.state.get("config.chart.time.zoom")},dayjs:Ie};class We{constructor(t){this.name=Ve,this.debug=!1,this.iconsCache={},this.unsubscribes=[],this.mergeDeep=je,this.allActions=[],this.state=t,this.time=new Ae(this.state),this.debug&&(window.state=t,window.api=api)}setVido(t){this.vido=t}log(...t){this.debug&&console.log.call(console,...t)}getClass(t){let e=`${Ve}__${t}`;return t===this.name&&(e=this.name),e}getActions(t){this.allActions.includes(t)||this.allActions.push(t);let e=this.state.get("config.actions."+t);return void 0===e&&(e=[]),e.slice()}isItemInViewport(t,e,n){return t.time.start>=e&&t.time.start<n||t.time.end>=e&&t.time.end<n||t.time.start<=e&&t.time.end>=n}prepareItems(t){const e=this.state.get("config.chart.item.height");for(const n of t)n.time.start=+n.time.start,n.time.end=+n.time.end,n.id=String(n.id),"number"!=typeof n.height&&(n.height=e),n.$data||(n.$data={actualHeight:0,outerHeight:0,time:null,position:{left:0,actualLeft:0,right:0,actualRight:0,top:n.top||0,actualTop:n.top||0},width:0,actualWidth:0,detached:!1}),n.$data.time||(n.$data.time={startDate:this.time.date(n.time.start),endDate:this.time.date(n.time.end)}),n.$data.actualHeight=n.height,"number"!=typeof n.top&&(n.top=0),n.gap||(n.gap={}),"number"!=typeof n.gap.top&&(n.gap.top=this.state.get("config.chart.item.gap.top")),"number"!=typeof n.gap.bottom&&(n.gap.bottom=this.state.get("config.chart.item.gap.bottom")),n.$data.outerHeight=n.$data.actualHeight+n.gap.top+n.gap.bottom,n.$data.position.actualTop=n.$data.position.top+n.gap.top;return t}fillEmptyRowValues(t){const e=this.state.get("config.list.row.height");let n=0;for(const i in t){const s=t[i];s.$data={parents:[],children:[],items:[],actualHeight:0,outerHeight:0},"number"!=typeof s.height&&(s.height=e),s.$data.actualHeight=s.height,"boolean"!=typeof s.expanded&&(s.expanded=!1),s.top=n,"object"!=typeof s.gap&&(s.gap={}),"number"!=typeof s.gap.top&&(s.gap.top=0),"number"!=typeof s.gap.bottom&&(s.gap.bottom=0),s.$data.outerHeight=s.$data.actualHeight+s.gap.top+s.gap.bottom,n+=s.$data.outerHeight}return t}itemsOnTheSameLevel(t,e){const n=t.$data.position.top+t.$data.outerHeight,i=e.$data.position.top+e.$data.outerHeight;return e.$data.position.top<=t.$data.position.top&&i>t.$data.position.top||(e.$data.position.top>=t.$data.position.top&&e.$data.position.top<n||e.$data.position.top>=t.$data.position.top&&i<n)}itemsOverlaps(t,e){return!!this.itemsOnTheSameLevel(t,e)&&(e.time.start>=t.time.start&&e.time.start<=t.time.end||(e.time.end>=t.time.start&&e.time.end<=t.time.end||(e.time.start>=t.time.start&&e.time.end<=t.time.end||e.time.start<=t.time.start&&e.time.end>=t.time.end)))}itemOverlapsWithOthers(t,e){for(const n of e)if(t.id!==n.id&&this.itemsOverlaps(t,n))return!0;return!1}fixOverlappedItems(t){if(0===t.length)return;let e=0;for(let n of t){if(n.$data.position.top=n.top,n.$data.position.actualTop=n.$data.position.top+n.gap.top,e&&this.itemOverlapsWithOthers(n,t))for(;this.itemOverlapsWithOthers(n,t);)n.$data.position.top+=1,n.$data.position.actualTop=n.$data.position.top+n.gap.top;e++}}recalculateRowHeight(t){let e=0;this.fixOverlappedItems(t.$data.items);for(const n of t.$data.items)e=Math.max(e,n.$data.position.top+n.$data.outerHeight);return e<t.height&&(e=t.height),t.$data.actualHeight=e,t.$data.outerHeight=t.$data.actualHeight+t.gap.top+t.gap.bottom,t.$data.outerHeight}recalculateRowsHeights(t){let e=0;for(const n of t)this.recalculateRowHeight(n),n.top=e,e+=n.$data.outerHeight;return e}generateParents(t,e="parentId"){const n={};for(const i of t){const t=void 0!==i[e]&&null!==i[e]?i[e]:"";void 0===n[t]&&(n[t]={}),n[t][i.id]=i}return n}fastTree(t,e,n=[]){const i=t[e.id];if(e.$data.parents=n,void 0===i)return e.$data.children=[],e;""!==e.id&&(n=[...n,e.id]),e.$data.children=Object.values(i);for(const e in i){const s=i[e];this.fastTree(t,s,n)}return e}makeTreeMap(t,e){const n=this.generateParents(e,"rowId");for(const e of t)e.$data.items=void 0!==n[e.id]?Object.values(n[e.id]):[];const i=this.generateParents(t);return this.fastTree(i,{id:"",$data:{children:[],parents:[],items:[]}})}getFlatTreeMapById(t,e={}){for(const n of t.$data.children)e[n.id]=n,this.getFlatTreeMapById(n,e);return e}flattenTreeMap(t,e=[]){for(const n of t.$data.children)e.push(n.id),this.flattenTreeMap(n,e);return e}getRowsFromMap(t,e){return t.map(t=>e[t.id])}getRowsFromIds(t,e){const n=[];for(const i of t)n.push(e[i]);return n}getRowsWithParentsExpanded(t,e,n){if(!t||!e||!n||0===t.length||0===e.length||0===Object.keys(n).length)return[];const i=[];t:for(const s of t){for(const t of e[s].$data.parents){const e=n[t];if(!e||!e.expanded)continue t}i.push(s)}return i}getRowsHeight(t){let e=0;for(const n of t)n&&(e+=n.height);return e}getVisibleRows(t){if(0===t.length)return[];const e=[];let n=this.state.get("config.scroll.vertical.data");n||(n=t[0]);const i=this.state.get("$data.innerHeight");let s=t.find(t=>t.id===n.id),o=t.indexOf(s);if(void 0===o)return[];let a=0;for(let n=t.length;o<=n;o++){const n=t[o];if(void 0!==n&&(a<=i&&(n.top=a,e.push(n)),a+=n.height,a>=i))break}return e}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const s=t.deltaMode,o=this.state.get("config.list.rowHeight");let a=1;switch(s){case 1:o&&(a=o);break;case 2:a=window.height}return e*=a,n*=a,i*=a,{x:e,y:n,z:i,event:t}}scrollToTime(t,e=!0){const n=this.state.get("$data.chart.time");let i=0;return this.state.update("config.scroll.horizontal",s=>{let o=t;if(e){const e=this.state.get("$data.chart.dimensions.width")/2*n.timePerPixel;o=t-e}s.data=this.time.findDateAtTime(o,n.allDates[n.level]);let a=n.allDates[n.level].indexOf(s.data);const r=n.allDates[n.level].length-s.lastPageCount;a>r&&(a=r),s.dataIndex=a,s.posPx=this.time.calculateScrollPosPxFromTime(s.data.leftGlobal,n,s);const l=s.maxPosPx-s.innerSize;return s.posPx>l&&(s.posPx=l),i=s.posPx,s}),i}getSVGIconSrc(t){return"string"==typeof this.iconsCache[t]||(this.iconsCache[t]="data:image/svg+xml;base64,"+btoa(t)),this.iconsCache[t]}destroy(){for(const t of this.unsubscribes)t();this.unsubscribes=[],this.debug&&delete window.state}}function Xe(t){const e=t.state,n=new We(e),i={treeMap:{id:"",$data:{children:[],parents:[],items:[]}},flatTreeMap:[],flatTreeMapById:{},list:{visibleRows:[],width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0,height:0},visibleItems:[],time:{zoom:0,format:{period:"day",zoomTo:0,format:()=>""},level:0,levels:[],timePerPixel:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0,period:"day",leftGlobalDate:null,rightGlobalDate:null,centerGlobal:0,centerGlobalDate:null,from:0,to:0,fromDate:null,toDate:null,finalFrom:null,finalTo:null,finalFromDate:null,finalToDate:null}},elements:{},loaded:{}};"boolean"==typeof t.debug&&t.debug&&(window.state=e),e.update("",t=>({config:t.config,$data:i}));const s=Nt(e,n);n.setVido(s);const o=e.get("config.components.Main"),a=s.createApp({component:o,props:{},element:t.element});return{state:e,api:a.vidoInstance.api,component:a}}Xe.api=Fe;export default Xe;
