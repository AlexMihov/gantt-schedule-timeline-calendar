!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Plugins=e()}(this,(function(){"use strict";const t="chart-timeline-grid-row-cell",e="chart-timeline-items-row-item";function i(t){const e={enabled:!0,isMoving:!1,pointerState:"up",currentTarget:null,realTarget:null,targetType:"",targetData:null,captureEvents:{down:!1,up:!1,move:!1},initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},events:{down:null,move:null,up:null}};return t.captureEvents&&(e.captureEvents=Object.assign(Object.assign({},e.captureEvents),t.captureEvents)),e}const n="config.plugin.TimelinePointer";class s{constructor(s,a){this.unsub=[],this.classNames={cell:"",item:""},this.vido=a,this.api=a.api,this.state=a.state,this.element=this.state.get("$data.elements.chart-timeline"),this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.data=i(s),this.classNames.cell=this.api.getClass(t),this.classNames.item=this.api.getClass(e),this.destroy=this.destroy.bind(this),this.element.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointerup",this.pointerUp),document.addEventListener("pointermove",this.pointerMove),this.unsub.push(this.state.subscribe(n,t=>this.data=t))}destroy(){this.element.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointerup",this.pointerUp),document.removeEventListener("pointermove",this.pointerMove)}updateData(){this.state.update(n,()=>Object.assign({},this.data))}getRealTarget(t){let e=t.target.closest("."+this.classNames.item);return e||(e=t.target.closest("."+this.classNames.cell),e||null)}getRealPosition(t){const e={x:0,y:0};if(this.element){const i=this.element.getBoundingClientRect();e.x=t.x-i.x,e.y=t.y-i.y}return e}pointerDown(i){if(!this.data.enabled)return;this.data.pointerState="down",this.data.currentTarget=i.target,this.data.realTarget=this.getRealTarget(i),this.data.realTarget?this.data.realTarget.classList.contains(this.classNames.item)?(this.data.targetType=e,this.data.targetData=this.data.realTarget.vido.item):this.data.realTarget.classList.contains(this.classNames.cell)?(this.data.targetType=t,this.data.targetData=this.data.realTarget.vido):this.data.targetType="":(this.data.targetType="",this.data.targetData=null),this.data.isMoving=!!this.data.realTarget,this.data.events.down=i,this.data.events.move=i;const n=this.getRealPosition(i);this.data.initialPosition=n,this.data.currentPosition=n,this.updateData()}pointerUp(t){this.data.enabled&&(this.data.pointerState="up",this.data.isMoving=!1,this.data.events.up=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}pointerMove(t){this.data.enabled&&this.data.isMoving&&(this.data.pointerState="move",this.data.events.move=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}}var a=Object.freeze({__proto__:null,CELL:t,ITEM:e,Plugin:function(t){return function(e){const a=i(t);let o;e.state.update(n,a);const r=e.state.subscribe("$data.elements.chart-timeline",i=>{if(i){o&&o();const i=new s(t,e);o=i.destroy}});return function(){r(),o&&o()}}}});var o=Object.freeze({__proto__:null,default:function(t={}){let e;const i={time:1e3,movementThreshold:2,action(t,e){}};t=Object.assign(Object.assign({},i),t);const n={},s={x:0,y:0};function a(t){void 0!==n[t]&&delete n[t]}function o(e,i){function o(a){!function(e,i,a){void 0===n[e.id]&&(n[e.id]={x:a.x,y:a.y},a.stopPropagation(),a.preventDefault(),setTimeout(()=>{if(void 0!==n[e.id]){let a=!0;const o=Math.abs(n[e.id].x-s.x),r=Math.abs(n[e.id].y-s.y);o>t.movementThreshold&&(a=!1),r>t.movementThreshold&&(a=!1),delete n[e.id],a&&t.action(i,e)}},t.time))}(i.item,e,a)}function r(t){s.x=t.x,s.y=t.y}return e.addEventListener("pointerdown",o),document.addEventListener("pointerup",(function(){a(i.item.id)})),document.addEventListener("pointermove",r),{update(t,e){i=e},destroy(t,e){document.removeEventListener("pointerup",a),document.removeEventListener("poitnermove",r),t.removeEventListener("pointerdown",o)}}}return function(t){e=t.api,t.state.update("config.actions.chart-timeline-items-row-item",t=>(t.push(o),t))}}});const r="config.plugin.ItemMovement";class h{constructor(t){this.onDestroy=[],this.cumulations={},this.relativeVerticalPosition={},this.vido=t,this.api=t.api,this.state=t.state,this.merge=this.state.get("config.merge"),this.destroy=this.destroy.bind(this),this.onDestroy.push(this.state.subscribe(r,t=>{this.data=t,t.enabled?document.body.classList.add(this.data.bodyClass):document.body.classList.remove(this.data.bodyClass)})),this.data.className||(this.data.className=this.api.getClass("chart-timeline-items-row-item--moving")),this.onSelectionChange=this.onSelectionChange.bind(this),this.onDestroy.push(this.state.subscribe("config.plugin.Selection",this.onSelectionChange))}destroy(){this.onDestroy.forEach(t=>t())}updateData(){this.state.update(r,this.data)}clearCumulationsForItems(){this.cumulations={}}setStartCumulationForItem(t,e){this.cumulations[t.id]||(this.cumulations[t.id]={start:0,end:0}),this.cumulations[t.id].start=e}getStartCumulationForItem(t){var e;return(null===(e=this.cumulations[t.id])||void 0===e?void 0:e.start)||0}getItemMovingTimes(t,e){const i=this.data.movement.px.horizontal,n=this.api.time.getViewOffsetPxFromDates(t.$data.time.startDate,!1,e)+i+this.getStartCumulationForItem(t),s=this.api.time.getTimeFromViewOffsetPx(n,e),a=this.data.snapToTime.start({startTime:this.api.time.date(s),item:t,time:e,movement:this.data.movement,vido:this.vido}),o=this.api.time.getDatesDiffPx(a,this.api.time.date(s),e,!0);this.setStartCumulationForItem(t,o);const r=t.$data.time.endDate.diff(t.$data.time.startDate,"millisecond"),h=a.add(r,"millisecond").valueOf(),d=this.api.time.date(h);return{startTime:a,endTime:this.data.snapToTime.end({endTime:d,item:t,time:e,movement:this.data.movement,vido:this.vido})}}findRowAtViewPosition(t,e){const i=this.state.get("$data.list.visibleRows");for(const e of i){const i=e.$data.position.viewTop+e.$data.outerHeight;if(e.$data.position.viewTop<=t&&i>=t)return e}return e}getItemViewTop(t){return this.state.get("config.list.rows")[t.rowId].$data.position.viewTop+t.$data.position.actualTop}saveItemsRelativeVerticalPosition(){for(const t of this.data.moving){const e=this.data.position.y-this.getItemViewTop(t);this.setItemRelativeVerticalPosition(t,e)}}setItemRelativeVerticalPosition(t,e){this.relativeVerticalPosition[t.id]=e}getItemRelativeVerticalPosition(t){return this.relativeVerticalPosition[t.id]}moveItemVertically(t,e){const i=this.state.get("config.list.rows")[t.rowId],n=this.getItemRelativeVerticalPosition(t),s=this.data.position.y+n,a=this.findRowAtViewPosition(s,i);return a.id!==t.rowId&&this.data.onRowChange(t,a)&&(e=e.update(`config.chart.items.${t.id}.rowId`,a.id)),e}moveItems(){const t=this.state.get("$data.chart.time");let e=this.state.multi();const i=this.data.moving.map(t=>this.merge({},t));this.data.debug&&console.log("moveItems",i);for(let n of i){const i=this.getItemMovingTimes(n,t);e=this.moveItemVertically(n,e),i.startTime.valueOf()===n.time.start&&i.endTime.valueOf()===n.time.end||(e=e.update(`config.chart.items.${n.id}.time`,t=>(t.start=i.startTime.valueOf(),t.end=i.endTime.valueOf(),t)).update(`config.chart.items.${n.id}.$data.time`,t=>(t.startDate=i.startTime,t.endDate=i.endTime,t)))}e.done()}clearSelection(){this.data.moving=[],this.data.initialItems=[],this.data.movement.px.horizontal=0,this.data.movement.px.vertical=0,this.data.movement.time=0,this.data.pointerState="up",this.data.pointerMoved=!1}onStart(){this.clearCumulationsForItems(),document.body.classList.add(this.data.bodyClassMoving),this.data.position=Object.assign({},this.selection.currentPosition),this.data.lastMovement.time=this.data.moving[0].time.start,this.saveItemsRelativeVerticalPosition()}onEnd(){document.body.classList.remove(this.data.bodyClassMoving)}restoreInitialItems(){let t=this.state.multi();this.data.debug&&console.log("restoreInitialItems",[...this.data.initialItems]);for(const e of this.data.initialItems)t=t.update(`config.chart.items.${e.id}`,e);t.done(),this.clearSelection(),this.updateData()}canMove(t,e){switch(this.data.debug&&console.log("canMove",t,e),t){case"start":return this.data.debug&&console.log("canMove start",t,e,this.data.onStart),this.data.onStart(e);case"move":return this.data.debug&&console.log("canMove move",t,e,this.data.onMove),this.data.onMove(e);case"end":return this.data.debug&&console.log("canMove end",t,e,this.data.onEnd),this.data.onEnd(e)}return!0}onSelectionChange(t){if(!this.data.enabled)return;if(this.selection=t,this.selection.targetType!==e)return this.clearSelection();if(this.selection.events.move&&(this.selection.events.move.preventDefault(),this.selection.events.move.stopPropagation()),this.selection.events.down&&(this.selection.events.down.preventDefault(),this.selection.events.down.stopPropagation()),"up"===this.data.pointerState&&"down"===this.selection.pointerState)this.data.state="start";else if("down"!==this.data.pointerState&&"move"!==this.data.pointerState||"up"!==this.selection.pointerState){if("move"===this.data.pointerState&&"move"===this.selection.pointerState)this.data.state="move";else if("up"===this.data.pointerState&&("move"===this.selection.pointerState||"up"===this.selection.pointerState))return}else this.data.state="end";switch(this.data.pointerState=this.selection.pointerState,this.data.moving=[...this.selection.selected[e]],"start"===this.data.state&&(this.data.initialItems=this.data.moving.map(t=>this.merge({},t))),this.data.debug&&console.log("state",this.data.pointerState),this.data.state){case"start":this.onStart();break;case"end":this.onEnd()}if(this.data.lastMovement.x=this.data.movement.px.horizontal,this.data.lastMovement.y=this.data.movement.px.vertical,this.data.movement.px.horizontal=this.selection.currentPosition.x-this.data.position.x,this.data.movement.px.vertical=this.selection.currentPosition.y-this.data.position.y,this.data.movement.time=this.data.moving[0].time.start-this.data.lastMovement.time,this.data.position.x=this.selection.currentPosition.x,this.data.position.y=this.selection.currentPosition.y,this.data.lastMovement.time=this.data.moving[0].time.start,"move"===this.data.state&&this.data.lastMovement.x===this.data.movement.px.horizontal&&this.data.lastMovement.y===this.data.movement.px.vertical)return this.updateData();const i={items:this.data.moving.map(t=>this.merge({},t)),vido:this.vido,movement:Object.assign(Object.assign({},this.data.movement),{px:Object.assign({},this.data.movement.px)}),time:this.state.get("$data.chart.time")};"end"===this.data.state&&(i.movement={time:this.data.moving[0].time.start-this.data.initialItems[0].time.start,px:{horizontal:this.data.moving[0].$data.position.left-this.data.initialItems[0].$data.position.left,vertical:this.data.moving[0].$data.position.viewTop-this.data.initialItems[0].$data.position.viewTop}}),this.canMove(this.data.state,i)?this.moveItems():(this.data.pointerState="up","end"===this.data.state&&this.restoreInitialItems()),this.updateData()}}var d=Object.freeze({__proto__:null,Plugin:function(t={}){return function(e){return e.state.update(r,function(t){const e=Object.assign({debug:!1,moving:[],initialItems:[],pointerState:"up",pointerMoved:!1,state:"",position:{x:0,y:0},movement:{px:{horizontal:0,vertical:0},time:0},lastMovement:{x:0,y:0,time:0},onStart:()=>!0,onMove:()=>!0,onEnd:()=>!0,onRowChange:()=>!0,snapToTime:{start:({startTime:t,time:e})=>t.startOf(e.period),end:({endTime:t,time:e})=>t.endOf(e.period)}},t);return t.snapToTime&&(e.snapToTime=Object.assign(Object.assign({},e.snapToTime),t.snapToTime)),e}(function(t){return Object.assign({enabled:!0,className:"",bodyClass:"gstc-item-movement",bodyClassMoving:"gstc-items-moving"},t)}(t))),new h(e).destroy}}}),l=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var s=n[i];t.call(e,s[1],s[0])}},e}()}(),c="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,u="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),p="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(u):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var m=["top","right","bottom","left","width","height","size","weight"],f="undefined"!=typeof MutationObserver,g=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,s=0;function a(){i&&(i=!1,t()),n&&r()}function o(){p(a)}function r(){var t=Date.now();if(i){if(t-s<2)return;n=!0}else i=!0,n=!1,setTimeout(o,e);s=t}return r}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){c&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),f?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){c&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;m.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),v=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},y=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||u},b=_(0,0,0,0);function w(t){return parseFloat(t)||0}function $(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+w(t["border-"+i+"-width"])}),0)}function M(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return b;var n=y(t).getComputedStyle(t),s=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var s=n[i],a=t["padding-"+s];e[s]=w(a)}return e}(n),a=s.left+s.right,o=s.top+s.bottom,r=w(n.width),h=w(n.height);if("border-box"===n.boxSizing&&(Math.round(r+a)!==e&&(r-=$(n,"left","right")+a),Math.round(h+o)!==i&&(h-=$(n,"top","bottom")+o)),!function(t){return t===y(t).document.documentElement}(t)){var d=Math.round(r+a)-e,l=Math.round(h+o)-i;1!==Math.abs(d)&&(r-=d),1!==Math.abs(l)&&(h-=l)}return _(s.left,s.top,r,h)}var D="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof y(t).SVGGraphicsElement}:function(t){return t instanceof y(t).SVGElement&&"function"==typeof t.getBBox};function S(t){return c?D(t)?function(t){var e=t.getBBox();return _(0,0,e.width,e.height)}(t):M(t):b}function _(t,e,i,n){return{x:t,y:e,width:i,height:n}}var T=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=S(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),x=function(t,e){var i,n,s,a,o,r,h,d=(n=(i=e).x,s=i.y,a=i.width,o=i.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(r.prototype),v(h,{x:n,y:s,width:a,height:o,top:s,right:n+a,bottom:o+s,left:n}),h);v(this,{target:t,contentRect:d})},P=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new l,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof y(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new T(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof y(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new x(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),O="undefined"!=typeof WeakMap?new WeakMap:new l,I=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=g.getInstance(),n=new P(e,i,this);O.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){I.prototype[t]=function(){var e;return(e=O.get(this))[t].apply(e,arguments)}}));void 0!==u.ResizeObserver&&u.ResizeObserver;class L{constructor(){this.isAction=!0}}L.prototype.isAction=!0;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function E(t,e){return t(e={exports:{}},e.exports),e.exports}E((function(t,e){t.exports=function(){var t="millisecond",e="second",i="minute",n="hour",s="day",a="week",o="month",r="quarter",h="year",d=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},u={s:c,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),s=i%60;return(e<=0?"+":"-")+c(n,2,"0")+":"+c(s,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,o),s=e-n<0,a=t.clone().add(i+(s?-1:1),o);return Number(-(i+(e-n)/(s?n-a:a-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(d){return{M:o,y:h,w:a,d:s,D:"date",h:n,m:i,s:e,ms:t,Q:r}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",f={};f[m]=p;var g=function(t){return t instanceof w},v=function(t,e,i){var n;if(!t)return m;if("string"==typeof t)f[t]&&(n=t),e&&(f[t]=e,n=t);else{var s=t.name;f[s]=t,n=s}return!i&&n&&(m=n),n||!i&&m},y=function(t,e,i){if(g(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:i}:e:{};return n.date=t,new w(n)},b=u;b.l=v,b.i=g,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function c(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=c.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(d);if(n)return i?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return b},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var i=y(t);return this.startOf(e)<=i&&i<=this.endOf(e)},u.isAfter=function(t,e){return y(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<y(t)},u.$g=function(t,e,i){return b.u(t)?this[e]:this.set(i,t)},u.year=function(t){return this.$g(t,"$y",h)},u.month=function(t){return this.$g(t,"$M",o)},u.day=function(t){return this.$g(t,"$W",s)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",n)},u.minute=function(t){return this.$g(t,"$m",i)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,r){var d=this,l=!!b.u(r)||r,c=b.p(t),u=function(t,e){var i=b.w(d.$u?Date.UTC(d.$y,e,t):new Date(d.$y,e,t),d);return l?i:i.endOf(s)},p=function(t,e){return b.w(d.toDate()[t].apply(d.toDate(),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),d)},m=this.$W,f=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(c){case h:return l?u(1,0):u(31,11);case o:return l?u(1,f):u(0,f+1);case a:var y=this.$locale().weekStart||0,w=(m<y?m+7:m)-y;return u(l?g-w:g+(6-w),f);case s:case"date":return p(v+"Hours",0);case n:return p(v+"Minutes",1);case i:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(a,r){var d,l=b.p(a),c="set"+(this.$u?"UTC":""),u=(d={},d.day=c+"Date",d.date=c+"Date",d[o]=c+"Month",d[h]=c+"FullYear",d[n]=c+"Hours",d[i]=c+"Minutes",d[e]=c+"Seconds",d[t]=c+"Milliseconds",d)[l],p=l===s?this.$D+(r-this.$W):r;if(l===o||l===h){var m=this.clone().set("date",1);m.$d[u](p),m.init(),this.$d=m.set("date",Math.min(this.$D,m.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[b.p(t)]()},u.add=function(t,r){var d,l=this;t=Number(t);var c=b.p(r),u=function(e){var i=y(l);return b.w(i.date(i.date()+Math.round(e*t)),l)};if(c===o)return this.set(o,this.$M+t);if(c===h)return this.set(h,this.$y+t);if(c===s)return u(1);if(c===a)return u(7);var p=(d={},d[i]=6e4,d[n]=36e5,d[e]=1e3,d)[c]||1,m=this.$d.getTime()+t*p;return b.w(m,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=b.z(this),s=this.$locale(),a=this.$H,o=this.$m,r=this.$M,h=s.weekdays,d=s.months,c=function(t,n,s,a){return t&&(t[n]||t(e,i))||s[n].substr(0,a)},u=function(t){return b.s(a%12||12,t,"0")},p=s.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:b.s(r+1,2,"0"),MMM:c(s.monthsShort,r,d,3),MMMM:d[r]||d(this,i),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:c(s.weekdaysMin,this.$W,h,2),ddd:c(s.weekdaysShort,this.$W,h,3),dddd:h[this.$W],H:String(a),HH:b.s(a,2,"0"),h:u(1),hh:u(2),a:p(a,o,!0),A:p(a,o,!1),m:String(o),mm:b.s(o,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:n};return i.replace(l,(function(t,e){return e||m[t]||n.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,s,d){var l,c=b.p(s),u=y(t),p=6e4*(u.utcOffset()-this.utcOffset()),m=this-u,f=b.m(this,u);return f=(l={},l[h]=f/12,l[o]=f,l[r]=f/3,l[a]=(m-p)/6048e5,l.day=(m-p)/864e5,l[n]=m/36e5,l[i]=m/6e4,l[e]=m/1e3,l)[c]||m,d?f:b.a(f)},u.daysInMonth=function(){return this.endOf(o).$D},u.$locale=function(){return f[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=v(t,e,!0);return n&&(i.$L=n),i},u.clone=function(){return b.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},c}();return y.prototype=w.prototype,y.extend=function(t,e){return t(e,w,y),y},y.locale=v,y.isDayjs=g,y.unix=function(t){return y(1e3*t)},y.en=f[m],y.Ls=f,y}()})),E((function(t,e){t.exports=function(t,e,i){var n=(new Date).getTimezoneOffset(),s=e.prototype;i.utc=function(t,i){return new e({date:t,utc:!0,format:i})},s.utc=function(){return i(this.toDate(),{locale:this.$L,utc:!0})},s.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var o=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var r=s.utcOffset;s.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?r.call(this):this.$offset;var i,s=Math.abs(t)<=16?60*t:t;return 0!==t?(i=this.local().add(s+n,"minute")).$offset=s:i=this.utc(),i};var h=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+n;return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()}}}));new TextEncoder("utf-8");const C="gantt-schedule-timeline-calendar";const R=function(t){let e=`${C}__${t}`;return t===C&&(e=C),e}("chart-timeline-items-row-item-resizing-handle-content-line");class A{constructor(t,e){this.spacing=1,this.unsubs=[],this.vido=t,this.state=t.state,this.api=t.api,this.data=function(t={}){const e=Object.assign({enabled:!0,handle:{width:18,horizontalMargin:0,verticalMargin:0,outside:!1,onlyWhenSelected:!0},content:null,bodyClass:"gstc-item-resizing",bodyClassLeft:"gstc-items-resizing-left",bodyClassRight:"gstc-items-resizing-right",initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},movement:{px:0,time:0},initialItems:[],leftIsMoving:!1,rightIsMoving:!1,onStart:()=>!0,onMove:()=>!0,onEnd:()=>!0,snapToTime:{start:({startTime:t,time:e})=>t.startOf(e.period),end:({endTime:t,time:e})=>t.endOf(e.period)}},t);return t.handle&&(e.handle=Object.assign(Object.assign({},e.handle),t.handle)),e}(e),this.merge=this.state.get("config.merge"),this.minWidth=2*this.data.handle.width,this.state.update("config.chart.item.minWidth",this.minWidth),this.state.update("config.chart.items.*.minWidth",this.minWidth),this.html=t.html,this.data.content||(this.data.content=this.html`<div class=${R}></div><div class=${R}></div>`),this.wrapper=this.wrapper.bind(this),this.onRightPointerDown=this.onRightPointerDown.bind(this),this.onRightPointerMove=this.onRightPointerMove.bind(this),this.onRightPointerUp=this.onRightPointerUp.bind(this),this.onLeftPointerDown=this.onLeftPointerDown.bind(this),this.onLeftPointerMove=this.onLeftPointerMove.bind(this),this.onLeftPointerUp=this.onLeftPointerUp.bind(this),this.destroy=this.destroy.bind(this),this.updateData(),document.body.classList.add(this.data.bodyClass),this.unsubs.push(this.state.subscribe("config.plugin.ItemResizing",t=>{t.enabled?t.enabled&&document.body.classList.add(this.data.bodyClass):document.body.classList.remove(this.data.bodyClass),this.data=t})),document.addEventListener("pointermove",this.onLeftPointerMove),document.addEventListener("pointerup",this.onLeftPointerUp),document.addEventListener("pointermove",this.onRightPointerMove),document.addEventListener("pointerup",this.onRightPointerUp),this.state.update("config.wrappers.ChartTimelineItemsRowItem",t=>(this.oldWrapper||(this.oldWrapper=t),this.initializeWrapper(),this.wrapper))}destroy(){this.unsubs.forEach(t=>t()),document.removeEventListener("pointermove",this.onLeftPointerMove),document.removeEventListener("pointerup",this.onLeftPointerUp),document.removeEventListener("pointermove",this.onRightPointerMove),document.removeEventListener("pointerup",this.onRightPointerUp),this.oldWrapper&&this.state.update("config.wrappers.ChartTimelineItemsRowItem",()=>this.oldWrapper)}updateData(){this.state.update("config.plugin.ItemResizing",this.data)}initializeWrapper(){this.leftClassName=this.api.getClass("chart-timeline-items-row-item-resizing-handle"),this.leftClassName+=" "+this.leftClassName+"--left",this.rightClassName=this.api.getClass("chart-timeline-items-row-item-resizing-handle"),this.rightClassName+=" "+this.rightClassName+"--right",this.spacing=this.state.get("config.chart.spacing")}getSelectedItems(){return this.state.get(`config.plugin.Selection.selected.${e}`)}getRightStyleMap(t,e){const i=new this.vido.StyleMap({});return i.style.top=t.$data.position.actualTop+this.data.handle.verticalMargin+"px",this.data.handle.outside?i.style.left=t.$data.position.right+this.data.handle.horizontalMargin-this.spacing+"px":i.style.left=t.$data.position.right-this.data.handle.width-this.data.handle.horizontalMargin-this.spacing+"px",i.style.width=this.data.handle.width+"px",i.style.height=t.$data.actualHeight-2*this.data.handle.verticalMargin+"px",i}getLeftStyleMap(t,e){const i=new this.vido.StyleMap({});return i.style.top=t.$data.position.actualTop+this.data.handle.verticalMargin+"px",this.data.handle.outside?i.style.left=t.$data.position.left-this.data.handle.width-this.data.handle.horizontalMargin+"px":i.style.left=t.$data.position.left+this.data.handle.horizontalMargin+"px",i.style.width=this.data.handle.width+"px",i.style.height=t.$data.actualHeight-2*this.data.handle.verticalMargin+"px",i}onPointerDown(t){t.preventDefault(),t.stopPropagation(),this.data.initialItems=this.getSelectedItems().map(t=>this.merge({},t)),this.data.initialPosition={x:t.screenX,y:t.screenY},this.data.currentPosition=Object.assign({},this.data.initialPosition)}onLeftPointerDown(t){this.data.enabled&&(document.body.classList.add(this.data.bodyClassLeft),this.data.leftIsMoving=!0,this.onPointerDown(t),this.updateData())}onRightPointerDown(t){this.data.enabled&&(document.body.classList.add(this.data.bodyClassRight),this.data.rightIsMoving=!0,this.onPointerDown(t),this.updateData())}onPointerMove(t){t.stopPropagation(),t.preventDefault(),this.data.currentPosition.x=t.screenX,this.data.currentPosition.y=t.screenY,this.data.movement.px=this.data.currentPosition.x-this.data.initialPosition.x}onLeftPointerMove(t){if(!this.data.enabled||!this.data.leftIsMoving)return;this.onPointerMove(t);const e=this.getSelectedItems(),i=this.data.movement,n=this.state.get("$data.chart.time");let s=this.state.multi();for(let t=0,a=e.length;t<a;t++){const a=e[t];a.$data.position.left=this.data.initialItems[t].$data.position.left+i.px,a.$data.position.left>a.$data.position.right&&(a.$data.position.left=a.$data.position.right),a.$data.position.actualLeft=a.$data.position.left,a.$data.width=a.$data.position.right-a.$data.position.left,a.$data.width<a.minWidth&&(a.$data.width=a.minWidth),a.$data.actualWidth=a.$data.width;const o=this.api.time.getTimeFromViewOffsetPx(a.$data.position.left,n,!0),r=this.data.snapToTime.start({startTime:this.api.time.date(o),item:a,time:n,movement:this.data.movement,vido:this.vido});a.time.start=r.valueOf(),a.$data.time.startDate=r,s=s.update(`config.chart.items.${a.id}.time`,a.time).update(`config.chart.items.${a.id}.$data`,a.$data)}s.done(),this.updateData()}onRightPointerMove(t){if(!this.data.enabled||!this.data.rightIsMoving)return;this.onPointerMove(t);const e=this.getSelectedItems(),i=this.data.movement,n=this.state.get("$data.chart.time");let s=this.state.multi();for(let t=0,a=e.length;t<a;t++){const a=e[t];a.$data.width=this.data.initialItems[t].$data.width+i.px,a.$data.width<a.minWidth&&(a.$data.width=a.minWidth);const o=a.$data.position.actualLeft===a.$data.position.left?0:a.$data.position.left;a.$data.actualWidth=a.$data.width+o;let r=a.$data.position.left+a.$data.width;a.$data.position.right=r,a.$data.position.actualRight=r;const h=this.api.time.getTimeFromViewOffsetPx(r,n,!1),d=this.data.snapToTime.end({endTime:this.api.time.date(h),item:a,time:n,movement:this.data.movement,vido:this.vido});a.time.end=d.valueOf(),a.$data.time.endDate=d,s=s.update(`config.chart.items.${a.id}.time`,a.time).update(`config.chart.items.${a.id}.$data`,a.$data)}s.done(),this.updateData()}onPointerUp(t){t.preventDefault(),t.stopPropagation()}onLeftPointerUp(t){this.data.enabled&&this.data.leftIsMoving&&(document.body.classList.remove(this.data.bodyClassLeft),this.onPointerUp(t),this.data.leftIsMoving=!1,this.updateData())}onRightPointerUp(t){this.data.enabled&&this.data.rightIsMoving&&(document.body.classList.remove(this.data.bodyClassRight),this.onPointerUp(t),this.data.rightIsMoving=!1,this.updateData())}wrapper(t,e){const i=this.oldWrapper(t,e),n=e.props.item;let s=!n.$data.detached;this.data.handle.onlyWhenSelected&&(s=s&&n.selected);const a=this.getRightStyleMap(n,s),o=(this.getLeftStyleMap(n,s),{handleEvent:t=>this.onRightPointerDown(t)}),r=this.html`<div class=${this.rightClassName} style=${a} @pointerdown=${o}>${this.data.content}</div>`;return this.html`${i}${s?r:null}`}}var W=Object.freeze({__proto__:null,Plugin:function(t={}){return function(e){return new A(e,t).destroy}}});function z(i){return Object.assign({enabled:!0,showOverlay:!0,isSelecting:!1,pointerState:"up",selectKey:"",multiKey:"shift",multipleSelection:!0,targetType:"",initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},selectionAreaLocal:{x:0,y:0,width:0,height:0},selectionAreaGlobal:{x:0,y:0,width:0,height:0},selecting:{[e]:[],[t]:[]},selected:{[e]:[],[t]:[]},automaticallySelected:{[e]:[],[t]:[]},events:{down:null,move:null,up:null}},i)}class j{constructor(t,i){this.onDestroy=[],this.vido=t,this.state=t.state,this.api=t.api,this.merge=this.state.get("config.merge"),this.state.update("config.plugin.Selection",z(i)),this.data=z(i),this.wrapperClassName=this.api.getClass("chart-selection"),this.wrapperStyleMap=new t.StyleMap({display:"none"}),this.html=t.html,this.wrapper=this.wrapper.bind(this),this.destroy=this.destroy.bind(this),this.setWrapper(),this.onDestroy.push(this.state.subscribe("config.plugin.TimelinePointer",t=>{this.poitnerData=t,this.onPointerData()})),this.updateData(),this.onDestroy.push(this.state.subscribe("config.plugin.Selection",t=>{this.data=t})),this.onDestroy.push(this.state.subscribe("config.chart.items",t=>{this.data.selected[e]=this.data.selected[e].filter(e=>!!t[e.id]).map(e=>this.merge({},t[e.id]))},{ignore:["config.chart.items.*.$data.detached","config.chart.items.*.selected"]}))}setWrapper(){this.state.update("config.wrappers.ChartTimelineItems",t=>(this.oldWrapper||(this.oldWrapper=t),this.wrapper))}destroy(){this.state.update("config.wrappers.ChartTimelineItems",this.oldWrapper),this.oldWrapper=null,this.onDestroy.forEach(t=>t())}updateData(){this.state.update("config.plugin.Selection",Object.assign({},this.data)),this.vido.update()}modKeyPressed(t,e){switch(t){case"shift":return e.shiftKey;case"alt":return e.altKey;case"ctrl":return e.ctrlKey}}canSelect(){let t=this.data.enabled;const e=this.poitnerData.events.down;return e&&this.data.selectKey&&(t=t&&this.modKeyPressed(this.data.selectKey,e)),t}getSelectionAreaLocal(){const t={x:0,y:0,width:0,height:0},e=Object.assign({},this.poitnerData.initialPosition),i=Object.assign({},this.poitnerData.currentPosition),n=i.x-e.x,s=i.y-e.y;return n>=0?(t.x=e.x,t.width=n):(t.x=i.x,t.width=Math.abs(n)),s>=0?(t.y=e.y,t.height=s):(t.y=i.y,t.height=Math.abs(s)),t}translateAreaLocalToGlobal(t){const e=this.state.get("$data.chart.time.leftPx"),i=this.state.get("config.scroll.vertical.posPx");return Object.assign(Object.assign({},t),{x:t.x+e,y:t.y+i})}collectLinkedItems(t,e=[]){if(t.linkedWith&&t.linkedWith.length){const i=this.state.get("config.chart.items");for(const n of t.linkedWith){const t=i[n];e.includes(t)||e.push(t)}}return e}getSelected(t){let i,n=this.data.automaticallySelected[e].slice();const s=this.poitnerData.events.move,a=this.data.multiKey&&this.modKeyPressed(this.data.multiKey,s),o=this.collectLinkedItems(t,[t]);if(this.data.selected[e].find(e=>e.id===t.id))if(i=this.data.selected[e],n.find(e=>e.id===t.id)){const e=n.map(t=>t.id),s=i.find(i=>t.linkedWith.includes(i.id)&&!e.includes(i.id));n=n.filter(e=>e.id!==t.id),n.push(s)}else n=this.data.automaticallySelected[e];else i=a?[...new Set([...this.data.selected[e],...o]).values()]:o,n=o.filter(e=>e.id!==t.id);return{selected:i,automaticallySelected:n}}isItemVerticallyInsideArea(t,e){if(!e.width||!e.height)return!1;const i=e.y+e.height,n=t.position.viewTop,s=n+t.actualHeight;return n>=e.y&&n<=i||s>=e.y&&s<=i||n>=e.y&&s<=i||n<=e.y&&s>=i}isItemHorizontallyInsideArea(t,e){if(!e.width||!e.height)return!1;const i=e.x+e.width;return t.position.actualLeft>=e.x&&t.position.actualLeft<=i||t.position.actualRight>=e.x&&t.position.actualRight<=i||t.position.actualLeft<=e.x&&t.position.actualRight>=i||t.position.actualLeft>=e.x&&t.position.actualRight<=i}getItemsUnderSelectionArea(t){const i=this.state.get("$data.chart.visibleItems"),n=this.poitnerData.events.move,s=n&&this.data.multiKey&&this.modKeyPressed(this.data.multiKey,n);let a=s?[...this.data.selected[e]]:[];const o=s?[...this.data.automaticallySelected[e]]:[];for(let e of i){e=this.merge({},e);const i=e.$data;if(this.isItemVerticallyInsideArea(i,t)&&this.isItemHorizontallyInsideArea(i,t)){a.find(t=>t.id===e.id)||a.push(e);const t=this.collectLinkedItems(e,[e]);for(let e of t)e=this.merge({},e),a.find(t=>t.id===e.id)||(a.push(e),o.push(e))}}return{selected:a,automaticallySelected:o}}unmarkSelected(){const t=this.state.get("config.chart.items");let e=this.state.multi();for(const i in t){t[i].selected&&(e=e.update(`config.chart.items.${i}.selected`,!1))}e.done()}deselectItems(){this.unmarkSelected(),this.data.selected[e]=[],this.updateData()}selectMultipleCellsAndItems(){if(!this.canSelect())return;if(!this.data.multipleSelection)return void this.deselectItems();this.data.isSelecting=!0,this.data.selectionAreaLocal=this.getSelectionAreaLocal(),this.data.selectionAreaGlobal=this.translateAreaLocalToGlobal(this.data.selectionAreaLocal);const{selected:t,automaticallySelected:i}=this.getItemsUnderSelectionArea(this.data.selectionAreaLocal);if(this.data.automaticallySelected[e]=i,0===t.length)return this.unmarkSelected(),void(this.data.selected[e].length=0);this.data.selected[e]=t,this.unmarkSelected();let n=this.state.multi();for(const e of t)n=n.update(`config.chart.items.${e.id}.selected`,!0);n.done()}selectItemsIndividually(){if(this.data.isSelecting=!1,this.data.selectionAreaLocal=this.getSelectionAreaLocal(),this.data.currentPosition=this.poitnerData.currentPosition,this.data.initialPosition=this.poitnerData.initialPosition,!this.canSelect())return;const t=this.merge({},this.poitnerData.targetData),{selected:i,automaticallySelected:n}=this.getSelected(t);this.data.selected[e]=i,this.data.automaticallySelected[e]=n,this.unmarkSelected();let s=this.state.multi();for(const t of this.data.selected[e])s=s.update(`config.chart.items.${t.id}.selected`,!0);s.done()}onPointerData(){this.poitnerData.isMoving&&this.poitnerData.targetType===t?this.selectMultipleCellsAndItems():this.poitnerData.isMoving&&this.poitnerData.targetType===e?this.selectItemsIndividually():this.poitnerData.isMoving||(this.data.isSelecting=!1),this.poitnerData.isMoving&&this.poitnerData.targetType!==t&&this.poitnerData.targetType!==e&&this.deselectItems(),this.data.events=this.poitnerData.events,this.data.pointerState=this.poitnerData.pointerState,this.data.targetType=this.poitnerData.targetType,this.updateData()}wrapper(t,e){if(!this.oldWrapper)return t;const i=this.oldWrapper(t,e);let n=!0;this.canSelect()&&this.data.isSelecting&&this.data.showOverlay&&this.data.multipleSelection&&(this.wrapperStyleMap.style.display="block",this.wrapperStyleMap.style.left=this.data.selectionAreaLocal.x+"px",this.wrapperStyleMap.style.top=this.data.selectionAreaLocal.y+"px",this.wrapperStyleMap.style.width=this.data.selectionAreaLocal.width+"px",this.wrapperStyleMap.style.height=this.data.selectionAreaLocal.height+"px",n=!1);const s=this.html`<div class=${this.wrapperClassName} style=${this.wrapperStyleMap}></div>`;return this.html`${i}${n?null:s}`}}var U=Object.freeze({__proto__:null,Plugin:function(t={}){return t=function(t){const e={enabled:!0,cells:!0,items:!0,rows:!1,showOverlay:!0,multipleSelection:!0,canSelect:(t,e,i)=>e,canDeselect:(t,e,i)=>[]};return t=Object.assign(Object.assign({},e),t)}(t),function(e){return new j(e,t).destroy}}});const k={enabled:!0,bodyClassName:"gstc-scrolling"};var H=Object.freeze({__proto__:null,Plugin:function(t=k){let e,i,n,s=t.enabled;class a{constructor(t){this.moving=!1,this.initialDataIndex={x:0,y:0},this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=e.schedule(this.pointerMove.bind(this)),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp),t.style.cursor="grab"}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}resetInitialPoint(t){this.initialPoint={x:t.screenX,y:t.screenY}}pointerDown(e){if(!s)return;document.body.classList.add(t.bodyClassName),this.moving=!0,this.resetInitialPoint(e);const i=n.get("config.scroll");this.initialDataIndex={x:i.horizontal.dataIndex||0,y:i.vertical.dataIndex||0}}pointerUp(e){s&&(document.body.classList.remove(t.bodyClassName),this.moving&&(this.moving=!1))}handleHorizontalMovement(t,e){const s=n.get("$data.chart.time");if(t.x>0){if(0===this.initialDataIndex.x)return this.resetInitialPoint(e);const n=s.allDates[s.level];let a=this.initialDataIndex.x-1,o=0;for(;a>0;a--){if(o+=n[a].width,o>=t.x)break}i.setScrollLeft(a,s)}else if(t.x<0){let a=this.initialDataIndex.x;const o=n.get("config.scroll.horizontal"),r=s.allDates[s.level];if(a-1>=r.length-o.lastPageCount)return this.resetInitialPoint(e);let h=0;for(let e=r.length;a<e;a++){if(h+=r[a].width,-h<=t.x)break}if(a-1>=r.length-o.lastPageCount)return;i.setScrollLeft(a,s)}}pointerMove(t){if(!s||!this.moving)return;const e={x:t.screenX-this.initialPoint.x,y:t.screenY-this.initialPoint.y};this.handleHorizontalMovement(e,t)}}return function(o){e=o,i=e.api,n=e.state,n.update("config.plugin.CalendarScroll",t),n.subscribe("config.plugin.CalendarScroll.enabled",t=>s=t),n.update("config.actions.chart-calendar",t=>(t.push(a),t))}}});String(Math.random()).slice(2),document.createComment(""),document.createElement("template"),document.createTextNode("");let N=!1;(()=>{try{const t={get capture(){return N=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.7");document.createElement("template"),document.createTextNode("");return{TimelinePointer:a,ItemHold:o,ItemMovement:d,ItemResizing:W,Selection:U,CalendarScroll:H,HighlightWeekends:Object.freeze({__proto__:null,Plugin:function(t={}){const e=t.weekdays||[6,0];let i,n,s=!0;class a extends L{constructor(t,e){super(),this.highlight(t,e.time.leftGlobal)}update(t,e){this.highlight(t,e.time.leftGlobal)}highlight(t,a){const o=t.classList.contains(i);if(!s)return void(o&&t.classList.remove(i));const r=e.includes(n.time.date(a).day());!o&&r?t.classList.add(i):o&&!r&&t.classList.remove(i)}}return function(e){n=e.api,i=t.className||n.getClass("chart-timeline-grid-row-cell")+"--weekend";const o=e.state.subscribe("$data.chart.time.format.period",t=>s="day"===t);return e.state.update("config.actions.chart-timeline-grid-row-cell",t=>(t.push(a),t)),function(){o()}}}})}}));
