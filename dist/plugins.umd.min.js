!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Plugins=e()}(this,(function(){"use strict";const t="chart-timeline-grid-row-cell",e="chart-timeline-items-row-item";var i=Object.freeze({__proto__:null,CELL:t,ITEM:e,Plugin:function(i={enabled:!0}){let n,s,a;const o="config.plugin.TimelinePointer",r={cell:"",item:""};function h(){return{enabled:i.enabled,isMoving:!1,pointerState:"up",currentTarget:null,realTarget:null,targetType:"",targetData:null,initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},events:{down:null,move:null,up:null}}}let d;class c{constructor(t){this.unsub=[],this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.data=h(),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointerup",this.pointerUp),document.addEventListener("pointermove",this.pointerMove),this.unsub.push(a.subscribe(o,t=>this.data=t))}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointerup",this.pointerUp),document.removeEventListener("pointermove",this.pointerMove)}updateData(){a.update(o,()=>Object.assign({},this.data))}getRealTarget(t){let e=t.target.closest("."+r.item);return e||(e=t.target.closest("."+r.cell),e||null)}getRealPosition(t){const e={x:0,y:0};if(d){const i=d.getBoundingClientRect();e.x=t.x-i.x,e.y=t.y-i.y}return e}pointerDown(i){if(!this.data.enabled)return;this.data.pointerState="down",this.data.currentTarget=i.target,this.data.realTarget=this.getRealTarget(i),this.data.realTarget?this.data.realTarget.classList.contains(r.item)?(this.data.targetType=e,this.data.targetData=this.data.realTarget.vido.item):this.data.realTarget.classList.contains(r.cell)?(this.data.targetType=t,this.data.targetData=this.data.realTarget.vido):this.data.targetType="":(this.data.targetType="",this.data.targetData=null),this.data.isMoving=!!this.data.realTarget,this.data.events.down=i,this.data.events.move=i;const n=this.getRealPosition(i);this.data.initialPosition=n,this.data.currentPosition=n,this.updateData()}pointerUp(t){this.data.enabled&&(this.data.pointerState="up",this.data.isMoving=!1,this.data.events.up=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}pointerMove(t){this.data.enabled&&this.data.isMoving&&(this.data.pointerState="move",this.data.events.move=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}}return function(i){n=i,s=n.api,a=n.state,r.cell=s.getClass(t),r.item=s.getClass(e);const l=a.subscribe("$data.elements.chart-timeline",t=>d=t);return a.update("config.actions.chart-timeline",t=>(t.push(c),t)),a.update(o,t=>h()),function(){l()}}}});var n=Object.freeze({__proto__:null,default:function(t={}){let e;const i={time:1e3,movementThreshold:2,action(t,e){}};t=Object.assign(Object.assign({},i),t);const n={},s={x:0,y:0};function a(t){void 0!==n[t]&&delete n[t]}function o(e,i){function o(a){!function(e,i,a){void 0===n[e.id]&&(n[e.id]={x:a.x,y:a.y},a.stopPropagation(),a.preventDefault(),setTimeout(()=>{if(void 0!==n[e.id]){let a=!0;const o=Math.abs(n[e.id].x-s.x),r=Math.abs(n[e.id].y-s.y);o>t.movementThreshold&&(a=!1),r>t.movementThreshold&&(a=!1),delete n[e.id],a&&t.action(i,e)}},t.time))}(i.item,e,a)}function r(t){s.x=t.x,s.y=t.y}return e.addEventListener("pointerdown",o),document.addEventListener("pointerup",(function(){a(i.item.id)})),document.addEventListener("pointermove",r),{update(t,e){i=e},destroy(t,e){document.removeEventListener("pointerup",a),document.removeEventListener("poitnermove",r),t.removeEventListener("pointerdown",o)}}}return function(t){e=t.api,t.state.update("config.actions.chart-timeline-items-row-item",t=>(t.push(o),t))}}});const s="config.plugin.ItemMovement";class a{constructor(t){this.onDestroy=[],this.vido=t,this.api=t.api,this.state=t.state,this.onDestroy.push(this.state.subscribe(s,t=>{this.data=t,t.enabled?document.body.classList.add(this.data.bodyClass):document.body.classList.remove(this.data.bodyClass)})),this.data.className||(this.data.className=this.api.getClass("chart-timeline-items-row-item--moving")),this.onSelectionChange=this.onSelectionChange.bind(this),this.onDestroy.push(this.state.subscribe("config.plugin.Selection",this.onSelectionChange))}destroy(){this.onDestroy.forEach(t=>t())}updateData(){this.state.update(s,this.data)}getItemMovingTime(t,e){const i=this.data.movement.px.horizontal,n=this.api.time.getViewOffsetPxFromDates(t.$data.time.startDate,!1,e)+i,s=this.api.time.getTimeFromViewOffsetPx(n,e),a=this.api.time.getViewOffsetPxFromDates(t.$data.time.endDate);return{time:this.api.time.date(s),position:n,width:a-n}}moveItems(){const t=this.state.get("$data.chart.time");let e=this.state.multi();for(const i of this.data.lastMoved){const n=this.getItemMovingTime(i,t);e=e.update(`config.chart.items.${i.id}.time`,t=>{const e=n.time.valueOf(),i=e-t.start;return t.start=e,t.end+=i,t}).update(`config.chart.items.${i.id}.$data.time`,t=>(t.startDate=this.api.time.date(i.time.start),t.endDate=this.api.time.date(i.time.end),t))}e.done()}clearSelection(){this.data.moving=[],this.data.lastMoved=[],this.data.movement.px.horizontal=0,this.data.movement.px.vertical=0,this.data.movement.time=0,this.data.state="up",this.data.pointerMoved=!1}updatePointerState(){"up"===this.data.state&&"down"===this.selection.pointerState?this.data.onStart(this.data.moving):"down"!==this.data.state&&"move"!==this.data.state||"up"!==this.selection.pointerState?"move"===this.selection.pointerState&&((this.data.movement.px.horizontal||this.data.movement.px.vertical)&&(this.data.pointerMoved=!0),this.data.onMove(this.data.moving)):(this.data.moving=[],this.data.onEnd(this.data.lastMoved),this.clearSelection()),this.data.state=this.selection.pointerState}onStart(){document.body.classList.add(this.data.bodyClassMoving),this.data.lastPosition=Object.assign({},this.selection.currentPosition)}onEnd(){document.body.classList.remove(this.data.bodyClassMoving)}onSelectionChange(t){if(this.data.enabled){if(this.selection=t,this.selection.targetType!==e)return this.clearSelection();this.selection.events.move&&(this.selection.events.move.preventDefault(),this.selection.events.move.stopPropagation()),this.selection.events.down&&(this.selection.events.down.preventDefault(),this.selection.events.down.stopPropagation()),"up"===this.data.state&&"down"===this.selection.pointerState?this.onStart():"down"!==this.data.state&&"move"!==this.data.state||"up"!==this.selection.pointerState||this.onEnd(),this.data.moving=[...this.selection.selected[e]],this.data.moving.length&&(this.data.lastMoved=[...this.data.moving]),this.data.movement.px.horizontal=this.selection.currentPosition.x-this.data.lastPosition.x,this.data.movement.px.vertical=this.selection.currentPosition.y-this.data.lastPosition.y,this.data.lastPosition.x=this.selection.currentPosition.x,this.data.lastPosition.y=this.selection.currentPosition.y,this.updatePointerState(),this.moveItems(),this.updateData()}}}var o=Object.freeze({__proto__:null,Plugin:function(t={}){return function(e){e.state.update(s,function(t){return Object.assign({moving:[],lastMoved:[],state:"up",pointerMoved:!1,lastPosition:{x:0,y:0},movement:{px:{horizontal:0,vertical:0},time:0},onStart(){},onMove(){},onEnd(){},snapStart:({startTime:t,time:e})=>t.startOf(e.period),snapEnd:({endTime:t,time:e})=>t.endOf(e.period)},t)}(function(t){return Object.assign({enabled:!0,className:"",bodyClass:"gstc-item-movement",bodyClassMoving:"gstc-items-moving"},t)}(t))),new a(e)}}}),r=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var s=n[i];t.call(e,s[1],s[0])}},e}()}(),h="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,d="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),c="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(d):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,p=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,s=0;function a(){i&&(i=!1,t()),n&&r()}function o(){c(a)}function r(){var t=Date.now();if(i){if(t-s<2)return;n=!0}else i=!0,n=!1,setTimeout(o,e);s=t}return r}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){h&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){h&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;l.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),f=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},m=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||d},g=M(0,0,0,0);function v(t){return parseFloat(t)||0}function y(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+v(t["border-"+i+"-width"])}),0)}function b(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return g;var n=m(t).getComputedStyle(t),s=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var s=n[i],a=t["padding-"+s];e[s]=v(a)}return e}(n),a=s.left+s.right,o=s.top+s.bottom,r=v(n.width),h=v(n.height);if("border-box"===n.boxSizing&&(Math.round(r+a)!==e&&(r-=y(n,"left","right")+a),Math.round(h+o)!==i&&(h-=y(n,"top","bottom")+o)),!function(t){return t===m(t).document.documentElement}(t)){var d=Math.round(r+a)-e,c=Math.round(h+o)-i;1!==Math.abs(d)&&(r-=d),1!==Math.abs(c)&&(h-=c)}return M(s.left,s.top,r,h)}var w="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof m(t).SVGGraphicsElement}:function(t){return t instanceof m(t).SVGElement&&"function"==typeof t.getBBox};function $(t){return h?w(t)?function(t){var e=t.getBBox();return M(0,0,e.width,e.height)}(t):b(t):g}function M(t,e,i,n){return{x:t,y:e,width:i,height:n}}var _=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=M(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=$(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),D=function(t,e){var i,n,s,a,o,r,h,d=(n=(i=e).x,s=i.y,a=i.width,o=i.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(r.prototype),f(h,{x:n,y:s,width:a,height:o,top:s,right:n+a,bottom:o+s,left:n}),h);f(this,{target:t,contentRect:d})},S=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new _(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new D(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),P="undefined"!=typeof WeakMap?new WeakMap:new r,x=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=p.getInstance(),n=new S(e,i,this);P.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){x.prototype[t]=function(){var e;return(e=P.get(this))[t].apply(e,arguments)}}));void 0!==d.ResizeObserver&&d.ResizeObserver;class O{constructor(){this.isAction=!0}}O.prototype.isAction=!0;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function L(t,e){return t(e={exports:{}},e.exports),e.exports}L((function(t,e){t.exports=function(){var t="millisecond",e="second",i="minute",n="hour",s="day",a="week",o="month",r="quarter",h="year",d=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,c=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},u={s:l,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),s=i%60;return(e<=0?"+":"-")+l(n,2,"0")+":"+l(s,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,o),s=e-n<0,a=t.clone().add(i+(s?-1:1),o);return Number(-(i+(e-n)/(s?n-a:a-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(d){return{M:o,y:h,w:a,d:s,D:"date",h:n,m:i,s:e,ms:t,Q:r}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",m={};m[f]=p;var g=function(t){return t instanceof w},v=function(t,e,i){var n;if(!t)return f;if("string"==typeof t)m[t]&&(n=t),e&&(m[t]=e,n=t);else{var s=t.name;m[s]=t,n=s}return!i&&n&&(f=n),n||!i&&f},y=function(t,e,i){if(g(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:i}:e:{};return n.date=t,new w(n)},b=u;b.l=v,b.i=g,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function l(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=l.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(d);if(n)return i?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return b},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var i=y(t);return this.startOf(e)<=i&&i<=this.endOf(e)},u.isAfter=function(t,e){return y(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<y(t)},u.$g=function(t,e,i){return b.u(t)?this[e]:this.set(i,t)},u.year=function(t){return this.$g(t,"$y",h)},u.month=function(t){return this.$g(t,"$M",o)},u.day=function(t){return this.$g(t,"$W",s)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",n)},u.minute=function(t){return this.$g(t,"$m",i)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,r){var d=this,c=!!b.u(r)||r,l=b.p(t),u=function(t,e){var i=b.w(d.$u?Date.UTC(d.$y,e,t):new Date(d.$y,e,t),d);return c?i:i.endOf(s)},p=function(t,e){return b.w(d.toDate()[t].apply(d.toDate(),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),d)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case h:return c?u(1,0):u(31,11);case o:return c?u(1,m):u(0,m+1);case a:var y=this.$locale().weekStart||0,w=(f<y?f+7:f)-y;return u(c?g-w:g+(6-w),m);case s:case"date":return p(v+"Hours",0);case n:return p(v+"Minutes",1);case i:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(a,r){var d,c=b.p(a),l="set"+(this.$u?"UTC":""),u=(d={},d.day=l+"Date",d.date=l+"Date",d[o]=l+"Month",d[h]=l+"FullYear",d[n]=l+"Hours",d[i]=l+"Minutes",d[e]=l+"Seconds",d[t]=l+"Milliseconds",d)[c],p=c===s?this.$D+(r-this.$W):r;if(c===o||c===h){var f=this.clone().set("date",1);f.$d[u](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[b.p(t)]()},u.add=function(t,r){var d,c=this;t=Number(t);var l=b.p(r),u=function(e){var i=y(c);return b.w(i.date(i.date()+Math.round(e*t)),c)};if(l===o)return this.set(o,this.$M+t);if(l===h)return this.set(h,this.$y+t);if(l===s)return u(1);if(l===a)return u(7);var p=(d={},d[i]=6e4,d[n]=36e5,d[e]=1e3,d)[l]||1,f=this.$d.getTime()+t*p;return b.w(f,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=b.z(this),s=this.$locale(),a=this.$H,o=this.$m,r=this.$M,h=s.weekdays,d=s.months,l=function(t,n,s,a){return t&&(t[n]||t(e,i))||s[n].substr(0,a)},u=function(t){return b.s(a%12||12,t,"0")},p=s.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:b.s(r+1,2,"0"),MMM:l(s.monthsShort,r,d,3),MMMM:d[r]||d(this,i),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:l(s.weekdaysMin,this.$W,h,2),ddd:l(s.weekdaysShort,this.$W,h,3),dddd:h[this.$W],H:String(a),HH:b.s(a,2,"0"),h:u(1),hh:u(2),a:p(a,o,!0),A:p(a,o,!1),m:String(o),mm:b.s(o,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:n};return i.replace(c,(function(t,e){return e||f[t]||n.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,s,d){var c,l=b.p(s),u=y(t),p=6e4*(u.utcOffset()-this.utcOffset()),f=this-u,m=b.m(this,u);return m=(c={},c[h]=m/12,c[o]=m,c[r]=m/3,c[a]=(f-p)/6048e5,c.day=(f-p)/864e5,c[n]=f/36e5,c[i]=f/6e4,c[e]=f/1e3,c)[l]||f,d?m:b.a(m)},u.daysInMonth=function(){return this.endOf(o).$D},u.$locale=function(){return m[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=v(t,e,!0);return n&&(i.$L=n),i},u.clone=function(){return b.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},l}();return y.prototype=w.prototype,y.extend=function(t,e){return t(e,w,y),y},y.locale=v,y.isDayjs=g,y.unix=function(t){return y(1e3*t)},y.en=m[f],y.Ls=m,y}()})),L((function(t,e){t.exports=function(t,e,i){var n=(new Date).getTimezoneOffset(),s=e.prototype;i.utc=function(t,i){return new e({date:t,utc:!0,format:i})},s.utc=function(){return i(this.toDate(),{locale:this.$L,utc:!0})},s.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var o=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var r=s.utcOffset;s.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?r.call(this):this.$offset;var i,s=Math.abs(t)<=16?60*t:t;return 0!==t?(i=this.local().add(s+n,"minute")).$offset=s:i=this.utc(),i};var h=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+n;return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()}}}));const T="gantt-schedule-timeline-calendar";const E=function(t){let e=`${T}__${t}`;return t===T&&(e=T),e}("chart-timeline-items-row-item-resizing-handle-content-line");class C{constructor(t,e){this.spacing=1,this.unsubs=[],this.vido=t,this.state=t.state,this.api=t.api,this.data=function(t={}){const e=Object.assign({enabled:!0,handle:{width:18,horizontalMargin:0,verticalMargin:0,outside:!1,onlyWhenSelected:!0},content:null,bodyClass:"gstc-item-resizing",bodyClassLeft:"gstc-items-resizing-left",bodyClassRight:"gstc-items-resizing-right",initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},movement:0,itemsInitial:[],leftIsMoving:!1,rightIsMoving:!1},t);return t.handle&&(e.handle=Object.assign(Object.assign({},e.handle),t.handle)),e}(e),this.minWidth=2*this.data.handle.width,this.state.update("config.chart.item.minWidth",this.minWidth),this.state.update("config.chart.items.*.minWidth",this.minWidth),this.html=t.html,this.data.content||(this.data.content=this.html`<div class=${E}></div><div class=${E}></div>`),this.wrapper=this.wrapper.bind(this),this.onRightPointerDown=this.onRightPointerDown.bind(this),this.onRightPointerMove=this.onRightPointerMove.bind(this),this.onRightPointerUp=this.onRightPointerUp.bind(this),this.onLeftPointerDown=this.onLeftPointerDown.bind(this),this.onLeftPointerMove=this.onLeftPointerMove.bind(this),this.onLeftPointerUp=this.onLeftPointerUp.bind(this),this.updateData(),document.body.classList.add(this.data.bodyClass),this.unsubs.push(this.state.subscribe("config.plugin.ItemResizing",t=>{t.enabled?t.enabled&&document.body.classList.add(this.data.bodyClass):document.body.classList.remove(this.data.bodyClass),this.data=t})),document.addEventListener("pointermove",this.onLeftPointerMove),document.addEventListener("pointerup",this.onLeftPointerUp),document.addEventListener("pointermove",this.onRightPointerMove),document.addEventListener("pointerup",this.onRightPointerUp)}destroy(){this.unsubs.forEach(t=>t()),document.removeEventListener("pointermove",this.onLeftPointerMove),document.removeEventListener("pointerup",this.onLeftPointerUp),document.removeEventListener("pointermove",this.onRightPointerMove),document.removeEventListener("pointerup",this.onRightPointerUp)}updateData(){this.state.update("config.plugin.ItemResizing",this.data)}initializeWrapper(){this.leftClassName=this.api.getClass("chart-timeline-items-row-item-resizing-handle"),this.leftClassName+=" "+this.leftClassName+"--left",this.rightClassName=this.api.getClass("chart-timeline-items-row-item-resizing-handle"),this.rightClassName+=" "+this.rightClassName+"--right",this.spacing=this.state.get("config.chart.spacing")}getSelectedItems(){return this.state.get(`config.plugin.Selection.selected.${e}`)}getRightStyleMap(t,e){const i=new this.vido.StyleMap({});return i.style.top=t.$data.position.actualTop+this.data.handle.verticalMargin+"px",this.data.handle.outside?i.style.left=t.$data.position.right+this.data.handle.horizontalMargin-this.spacing+"px":i.style.left=t.$data.position.right-this.data.handle.width-this.data.handle.horizontalMargin-this.spacing+"px",i.style.width=this.data.handle.width+"px",i.style.height=t.$data.actualHeight-2*this.data.handle.verticalMargin+"px",i}getLeftStyleMap(t,e){const i=new this.vido.StyleMap({});return i.style.top=t.$data.position.actualTop+this.data.handle.verticalMargin+"px",this.data.handle.outside?i.style.left=t.$data.position.left-this.data.handle.width-this.data.handle.horizontalMargin+"px":i.style.left=t.$data.position.left+this.data.handle.horizontalMargin+"px",i.style.width=this.data.handle.width+"px",i.style.height=t.$data.actualHeight-2*this.data.handle.verticalMargin+"px",i}onPointerDown(t){t.preventDefault(),t.stopPropagation(),this.data.itemsInitial=this.getSelectedItems().map(t=>({id:t.id,left:t.$data.position.left,width:t.$data.width})),this.data.initialPosition={x:t.screenX,y:t.screenY},this.data.currentPosition=Object.assign({},this.data.initialPosition)}onLeftPointerDown(t){this.data.enabled&&(document.body.classList.add(this.data.bodyClassLeft),this.data.leftIsMoving=!0,this.onPointerDown(t),this.updateData())}onRightPointerDown(t){this.data.enabled&&(document.body.classList.add(this.data.bodyClassRight),this.data.rightIsMoving=!0,this.onPointerDown(t),this.updateData())}onPointerMove(t){t.stopPropagation(),t.preventDefault(),this.data.currentPosition.x=t.screenX,this.data.currentPosition.y=t.screenY,this.data.movement=this.data.currentPosition.x-this.data.initialPosition.x}onLeftPointerMove(t){if(!this.data.enabled||!this.data.leftIsMoving)return;this.onPointerMove(t);const e=this.getSelectedItems(),i=this.data.movement,n=this.state.get("$data.chart.time");let s=this.state.multi();for(let t=0,a=e.length;t<a;t++){const a=e[t];a.$data.position.left=this.data.itemsInitial[t].left+i,a.$data.position.left>a.$data.position.right&&(a.$data.position.left=a.$data.position.right),a.$data.position.actualLeft=a.$data.position.left,a.$data.width=a.$data.position.right-a.$data.position.left,a.$data.width<a.minWidth&&(a.$data.width=a.minWidth),a.$data.actualWidth=a.$data.width;const o=this.api.time.getTimeFromViewOffsetPx(a.$data.position.left,n);a.time.start=o,a.$data.time.startDate=this.api.time.date(o),s=s.update(`config.chart.items.${a.id}.time`,a.time).update(`config.chart.items.${a.id}.$data`,a.$data)}s.done(),this.updateData()}onRightPointerMove(t){if(!this.data.enabled||!this.data.rightIsMoving)return;this.onPointerMove(t);const e=this.getSelectedItems(),i=this.data.movement,n=this.state.get("$data.chart.time");let s=this.state.multi();for(let t=0,a=e.length;t<a;t++){const a=e[t];a.$data.width=this.data.itemsInitial[t].width+i,a.$data.width<a.minWidth&&a.$data.width&&(a.$data.width=a.minWidth);const o=a.$data.position.actualLeft===a.$data.position.left?0:a.$data.position.left;a.$data.actualWidth=a.$data.width+o;const r=a.$data.position.left+a.$data.width;a.$data.position.right=r,a.$data.position.actualRight=r;const h=this.api.time.getTimeFromViewOffsetPx(r,n);a.time.end=h,a.$data.time.endDate=this.api.time.date(h),s=s.update(`config.chart.items.${a.id}.time`,a.time).update(`config.chart.items.${a.id}.$data`,a.$data)}s.done(),this.updateData()}onPointerUp(t){t.preventDefault(),t.stopPropagation()}onLeftPointerUp(t){this.data.enabled&&this.data.leftIsMoving&&(document.body.classList.remove(this.data.bodyClassLeft),this.onPointerUp(t),this.data.leftIsMoving=!1,this.updateData())}onRightPointerUp(t){this.data.enabled&&this.data.rightIsMoving&&(document.body.classList.remove(this.data.bodyClassRight),this.onPointerUp(t),this.data.rightIsMoving=!1,this.updateData())}wrapper(t,e){const i=this.oldWrapper(t,e),n=e.props.item;let s=!n.$data.detached;this.data.handle.onlyWhenSelected&&(s=s&&n.selected);const a=new this.vido.Detach(()=>!s),o=this.getRightStyleMap(n,s),r=(this.getLeftStyleMap(n,s),{handleEvent:t=>this.onRightPointerDown(t)});return this.html`${i}<div detach=${a} class=${this.rightClassName} style=${o} @pointerdown=${r}>${this.data.content}</div>`}getWrapper(t){return this.oldWrapper||(this.oldWrapper=t),this.initializeWrapper(),this.wrapper}}var I=Object.freeze({__proto__:null,Plugin:function(t={}){return function(e){const i=new C(e,t);e.state.update("config.wrappers.ChartTimelineItemsRowItem",t=>i.getWrapper(t))}}});function W(i){return Object.assign({enabled:!0,showOverlay:!0,isSelecting:!1,pointerState:"up",targetType:"",initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},selectionArea:{x:0,y:0,width:0,height:0},selecting:{[e]:[],[t]:[]},selected:{[e]:[],[t]:[]},events:{down:null,move:null,up:null}},i)}class z{constructor(t,e){this.unsub=[],this.vido=t,this.state=t.state,this.api=t.api,this.options=e,this.data=W(e),this.wrapperClassName=this.api.getClass("chart-selection"),this.wrapperStyleMap=new t.StyleMap({display:"none"}),this.html=t.html,this.wrapper=this.wrapper.bind(this),this.unsub.push(this.state.subscribe("config.plugin.TimelinePointer",t=>{this.poitnerData=t,this.onPointerData()})),this.updateData(),this.unsub.push(this.state.subscribe("config.plugin.Selection",t=>{this.data=t}))}destroy(){this.unsub.forEach(t=>t())}updateData(){this.state.update("config.plugin.Selection",Object.assign({},this.data)),this.vido.update()}getItemsUnderSelectionArea(){return[]}getSelectionArea(){const t={x:0,y:0,width:0,height:0},e=Object.assign({},this.poitnerData.initialPosition),i=Object.assign({},this.poitnerData.currentPosition),n=i.x-e.x,s=i.y-e.y;return n>=0?(t.x=e.x,t.width=n):(t.x=i.x,t.width=Math.abs(n)),s>=0?(t.y=e.y,t.height=s):(t.y=i.y,t.height=Math.abs(s)),t}collectLinkedItems(t,e=[]){if(t.linkedWith&&t.linkedWith.length){const i=this.state.get("config.chart.items");for(const n of t.linkedWith){const t=i[n];e.includes(t)||(e.push(t),this.collectLinkedItems(t,e))}}return e}getSelected(t){let i;return i=this.data.selected[e].find(e=>e.id===t.id)?this.data.selected[e]:this.poitnerData.events.down.ctrlKey?[...new Set([...this.data.selected[e],...this.collectLinkedItems(t,[t])]).values()]:this.collectLinkedItems(t,[t]),i}selectCells(){this.data.isSelecting=!0,this.data.selectionArea=this.getSelectionArea(),0===this.getItemsUnderSelectionArea().length&&(this.state.update("config.chart.items.*.selected",!1),this.data.selected[e].length=0)}selectItems(){this.data.isSelecting=!1,this.data.selectionArea=this.getSelectionArea(),this.data.currentPosition=this.poitnerData.currentPosition,this.data.initialPosition=this.poitnerData.initialPosition;const t=this.poitnerData.targetData;this.data.selected[e]=this.getSelected(t);let i=this.state.multi();i=i.update("config.chart.items.*.selected",!1);for(const t of this.data.selected[e])i=i.update(`config.chart.items.${t.id}.selected`,!0);i.done()}onPointerData(){this.poitnerData.isMoving&&this.poitnerData.targetType===t?this.selectCells():this.poitnerData.isMoving&&this.poitnerData.targetType===e?this.selectItems():this.poitnerData.isMoving||(this.data.isSelecting=!1),this.data.events=this.poitnerData.events,this.data.pointerState=this.poitnerData.pointerState,this.data.targetType=this.poitnerData.targetType,this.updateData()}wrapper(t,e){const i=this.oldWrapper(t,e);let n=!0;this.data.enabled&&this.data.isSelecting&&this.data.showOverlay&&(this.wrapperStyleMap.style.display="block",this.wrapperStyleMap.style.left=this.data.selectionArea.x+"px",this.wrapperStyleMap.style.top=this.data.selectionArea.y+"px",this.wrapperStyleMap.style.width=this.data.selectionArea.width+"px",this.wrapperStyleMap.style.height=this.data.selectionArea.height+"px",n=!1);const s=new this.vido.Detach(()=>n);return this.html` ${i}<div class=${this.wrapperClassName} detach=${s} style=${this.wrapperStyleMap}></div>`}getWrapper(t){return this.oldWrapper||(this.oldWrapper=t),this.wrapper}}var R=Object.freeze({__proto__:null,Plugin:function(t={}){return t=function(t){const e={enabled:!0,cells:!0,items:!0,rows:!1,showOverlay:!0,canSelect:(t,e,i)=>e,canDeselect:(t,e,i)=>[]};return t=Object.assign(Object.assign({},e),t)}(t),function(e){const i=new z(e,t);return e.state.update("config.plugin.Selection",W(t)),e.state.update("config.wrappers.ChartTimelineItems",t=>i.getWrapper(t)),function(){i.destroy()}}}});const A={enabled:!0,bodyClassName:"gstc-scrolling"};var U=Object.freeze({__proto__:null,Plugin:function(t=A){let e,i,n,s=t.enabled;class a{constructor(t){this.moving=!1,this.initialDataIndex={x:0,y:0},this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=e.schedule(this.pointerMove.bind(this)),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp),t.style.cursor="grab"}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}resetInitialPoint(t){this.initialPoint={x:t.screenX,y:t.screenY}}pointerDown(e){if(!s)return;document.body.classList.add(t.bodyClassName),this.moving=!0,this.resetInitialPoint(e);const i=n.get("config.scroll");this.initialDataIndex={x:i.horizontal.dataIndex||0,y:i.vertical.dataIndex||0}}pointerUp(e){s&&(document.body.classList.remove(t.bodyClassName),this.moving&&(this.moving=!1))}handleHorizontalMovement(t,e){const s=n.get("$data.chart.time");if(t.x>0){if(0===this.initialDataIndex.x)return this.resetInitialPoint(e);const n=s.allDates[s.level];let a=this.initialDataIndex.x-1,o=0;for(;a>0;a--){if(o+=n[a].width,o>=t.x)break}i.setScrollLeft(a,s)}else if(t.x<0){let a=this.initialDataIndex.x;const o=n.get("config.scroll.horizontal"),r=s.allDates[s.level];if(a-1>=r.length-o.lastPageCount)return this.resetInitialPoint(e);let h=0;for(let e=r.length;a<e;a++){if(h+=r[a].width,-h<=t.x)break}if(a-1>=r.length-o.lastPageCount)return;i.setScrollLeft(a,s)}}pointerMove(t){if(!s||!this.moving)return;const e={x:t.screenX-this.initialPoint.x,y:t.screenY-this.initialPoint.y};this.handleHorizontalMovement(e,t)}}return function(o){e=o,i=e.api,n=e.state,n.update("config.plugin.CalendarScroll",t),n.subscribe("config.plugin.CalendarScroll.enabled",t=>s=t),n.update("config.actions.chart-calendar",t=>(t.push(a),t))}}});String(Math.random()).slice(2),document.createComment(""),document.createElement("template"),document.createTextNode("");let j=!1;(()=>{try{const t={get capture(){return j=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.7");document.createElement("template"),document.createTextNode("");return{TimelinePointer:i,ItemHold:n,ItemMovement:o,ItemResizing:I,Selection:R,CalendarScroll:U,HighlightWeekends:Object.freeze({__proto__:null,Plugin:function(t={}){const e=t.weekdays||[6,0];let i,n,s=!0;class a extends O{constructor(t,e){super(),this.highlight(t,e.time.leftGlobal)}update(t,e){this.highlight(t,e.time.leftGlobal)}highlight(t,a){const o=t.classList.contains(i);if(!s)return void(o&&t.classList.remove(i));const r=e.includes(n.time.date(a).day());!o&&r?t.classList.add(i):o&&!r&&t.classList.remove(i)}}return function(e){n=e.api,i=t.className||n.getClass("chart-timeline-grid-row-cell")+"--weekend";const o=e.state.subscribe("$data.chart.time.format.period",t=>s="day"===t);return e.state.update("config.actions.chart-timeline-grid-row-cell",t=>(t.push(a),t)),function(){o()}}}})}}));
