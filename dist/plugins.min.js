const t="chart-timeline-grid-row-cell",e="chart-timeline-items-row-item";var i=Object.freeze({__proto__:null,CELL:t,ITEM:e,Plugin:function(i={enabled:!0}){let n,s,a;const o="config.plugin.TimelinePointer",r={cell:"",item:""};function l(){return{enabled:i.enabled,isMoving:!1,currentTarget:null,realTarget:null,targetType:"",targetData:null,initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},events:{down:null,move:null,up:null}}}let c;class d{constructor(t){this.unsub=[],this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.data=l(),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointerup",this.pointerUp),document.addEventListener("pointermove",this.pointerMove),this.unsub.push(a.subscribe(o,t=>this.data=t))}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointerup",this.pointerUp),document.removeEventListener("pointermove",this.pointerMove)}updateData(){a.update(o,()=>Object.assign({},this.data))}getRealTarget(t){let e=t.target.closest("."+r.item);return e||(e=t.target.closest("."+r.cell),e||null)}getRealPosition(t){const e={x:0,y:0};if(c){const i=c.getBoundingClientRect();e.x=t.x-i.x,e.y=t.y-i.y}return e}pointerDown(i){if(!this.data.enabled)return;this.data.currentTarget=i.target,this.data.realTarget=this.getRealTarget(i),this.data.realTarget?this.data.realTarget.classList.contains(r.item)?(this.data.targetType=e,this.data.targetData=this.data.realTarget.vido.item):this.data.realTarget.classList.contains(r.cell)?(this.data.targetType=t,this.data.targetData=this.data.realTarget.vido):this.data.targetType="":(this.data.targetType="",this.data.targetData=null),this.data.isMoving=!!this.data.realTarget,this.data.events.down=i,this.data.events.move=i;const n=this.getRealPosition(i);this.data.initialPosition=n,this.data.currentPosition=n,this.updateData()}pointerUp(t){this.data.enabled&&(this.data.isMoving=!1,this.data.events.up=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}pointerMove(t){this.data.enabled&&this.data.isMoving&&(this.data.events.move=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}}return function(i){n=i,s=n.api,a=n.state,r.cell=s.getClass(t),r.item=s.getClass(e);const h=a.subscribe("_internal.elements.chart-timeline",t=>c=t);return a.update("config.actions.chart-timeline",t=>(t.push(d),t)),a.update(o,t=>l()),function(){h()}}}});var n=Object.freeze({__proto__:null,default:function(t={}){let e;const i={time:1e3,movementThreshold:2,action(t,e){}};t=Object.assign(Object.assign({},i),t);const n={},s={x:0,y:0};function a(t){void 0!==n[t]&&delete n[t]}function o(e,i){function o(a){!function(e,i,a){void 0===n[e.id]&&(n[e.id]={x:a.x,y:a.y},a.stopPropagation(),a.preventDefault(),setTimeout(()=>{if(void 0!==n[e.id]){let a=!0;const o=Math.abs(n[e.id].x-s.x),r=Math.abs(n[e.id].y-s.y);o>t.movementThreshold&&(a=!1),r>t.movementThreshold&&(a=!1),delete n[e.id],a&&t.action(i,e)}},t.time))}(i.item,e,a)}function r(t){s.x=t.x,s.y=t.y}return e.addEventListener("pointerdown",o),document.addEventListener("pointerup",(function(){a(i.item.id)})),document.addEventListener("pointermove",r),{update(t,e){i=e},destroy(t,e){document.removeEventListener("pointerup",a),document.removeEventListener("poitnermove",r),t.removeEventListener("pointerdown",o)}}}return function(t){e=t.api,t.state.update("config.actions.chart-timeline-items-row-item",t=>(t.push(o),t))}}});var s=Object.freeze({__proto__:null,Plugin:function(){return function(){}}});let a,o,r,l,c,d,h,u;function p(t,e){const i=a(t,e);d.isSelecting?(u.style.display="block",u.style.left=d.selectionArea.x+"px",u.style.top=d.selectionArea.y+"px",u.style.width=d.selectionArea.width+"px",u.style.height=d.selectionArea.height+"px"):u.style.display="none";const n=c`
    <div class=${h} style=${u}></div>
  `;return c`
    ${i}${n}
  `}function g(t,e){return a=t,o=e,r=o.api,l=o.state,c=o.html,h=r.getClass("chart-selection"),u=new o.StyleMap({display:"none"}),o.onDestroy(l.subscribe("config.plugin.Selection",t=>{d=t,o.update()})),p}const m="config.plugin.Selection";function v(){return{enabled:!0,isSelecting:!1,initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},selectionArea:{x:0,y:0,width:0,height:0},selecting:{[e]:[],[t]:[]},selected:{[e]:[],[t]:[]}}}class f{constructor(t,e){this.unsub=[],this.vido=t,this.state=t.state,this.api=t.api,this.options=e,this.data=v(),this.unsub.push(this.state.subscribe("config.plugin.TimelinePointer",t=>{this.poitnerData=t,this.onPointerData()})),this.updateData(),this.unsub.push(this.state.subscribe(m,t=>{this.data=t}))}destroy(){this.unsub.forEach(t=>t())}updateData(){this.state.update(m,Object.assign({},this.data))}getItemsUnderSelectionArea(){}getSelectionArea(){const t={x:0,y:0,width:0,height:0},e=Object.assign({},this.poitnerData.initialPosition),i=Object.assign({},this.poitnerData.currentPosition),n=i.x-e.x,s=i.y-e.y;return n>=0?(t.x=e.x,t.width=n):(t.x=i.x,t.width=Math.abs(n)),s>=0?(t.y=e.y,t.height=s):(t.y=i.y,t.height=Math.abs(s)),t}onPointerData(){if(this.poitnerData.isMoving){this.data.isSelecting=!0,this.data.selectionArea=this.getSelectionArea(),console.log(this.data.selectionArea);this.getItemsUnderSelectionArea()}else this.poitnerData.isMoving||(this.data.isSelecting=!1);this.updateData()}}var b=Object.freeze({__proto__:null,Plugin:function(t={}){return t=function(t){const e={enabled:!0,grid:!1,items:!0,rows:!1,horizontal:!0,vertical:!0,selecting(){},deselecting(){},selected(){},deselected(){},canSelect:(t,e,i)=>e,canDeselect:(t,e,i)=>[]};return t=Object.assign(Object.assign({},e),t)}(t),function(e){const i=new f(e,t);return e.state.update(m,v()),e.state.update("config.wrappers.ChartTimelineItems",t=>g(t,e)),function(){i.destroy()}}}});const y={enabled:!0};var x=Object.freeze({__proto__:null,Plugin:function(t=y){let e,i,n,s=t.enabled;class a{constructor(t){this.moving=!1,this.initialDataIndex={x:0,y:0},this.lastPos=0,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=e.schedule(this.pointerMove.bind(this)),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp),t.style.cursor="grab"}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}resetInitialPoint(t){this.initialPoint={x:t.screenX,y:t.screenY}}pointerDown(t){if(!s)return;this.moving=!0,this.resetInitialPoint(t);const e=n.get("config.scroll");this.initialDataIndex={x:e.horizontal.dataIndex||0,y:e.vertical.dataIndex||0}}pointerUp(t){s&&this.moving&&(this.moving=!1)}handleHorizontalMovement(t,e){const s=n.get("_internal.chart.time");if(t.x>0){if(0===this.initialDataIndex.x)return this.resetInitialPoint(e);const n=s.allDates[s.level];let a=this.initialDataIndex.x-1,o=0;for(;a>0;a--){if(o+=n[a].width,o>=t.x)break}i.scrollToTime(n[a].leftGlobal,!1)}else if(t.x<0){let a=this.initialDataIndex.x;const o=n.get("config.scroll.horizontal"),r=s.allDates[s.level];if(a-1>=r.length-o.lastPageCount)return this.resetInitialPoint(e);let l=0;for(let e=r.length;a<e;a++){if(l+=r[a].width,-l<=t.x)break}if(a-1>=r.length-o.lastPageCount)return;i.scrollToTime(r[a].leftGlobal,!1)}}pointerMove(t){if(!s||!this.moving)return;const e={x:t.screenX-this.initialPoint.x,y:t.screenY-this.initialPoint.y};this.handleHorizontalMovement(e,t)}}return function(o){e=o,i=e.api,n=e.state,n.update("config.plugin.CalendarScroll",t),n.subscribe("config.plugin.CalendarScroll.enabled",t=>s=t),n.update("config.actions.chart-calendar",t=>(t.push(a),t))}}});String(Math.random()).slice(2),document.createComment(""),document.createElement("template"),document.createTextNode("");let w=!1;(()=>{try{const t={get capture(){return w=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.7");document.createElement("template");class D{constructor(){this.isAction=!0}}D.prototype.isAction=!0;document.createTextNode("");var P={TimelinePointer:i,ItemHold:n,ItemMovement:s,Selection:b,CalendarScroll:x,WeekendHighlight:Object.freeze({__proto__:null,Plugin:function(t={}){const e=t.weekdays||[6,0];let i,n,s=!0;class a extends D{constructor(t,e){super(),this.highlight(t,e.time.leftGlobal)}update(t,e){this.highlight(t,e.time.leftGlobal)}highlight(t,a){const o=t.classList.contains(i);if(!s)return void(o&&t.classList.remove(i));const r=e.includes(n.time.date(a).day());!o&&r?t.classList.add(i):o&&!r&&t.classList.remove(i)}}return function(e){n=e.api,i=t.className||n.getClass("chart-timeline-grid-row-cell")+"--weekend";const o=e.state.subscribe("_internal.chart.time.format.period",t=>s="day"===t);return e.state.update("config.actions.chart-timeline-grid-row-cell",t=>(t.push(a),t)),function(){o()}}}})};export default P;
