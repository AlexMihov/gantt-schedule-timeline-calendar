/**
 * ItemHold plugin
 *
 * @copyright Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
String(Math.random()).slice(2),document.createComment(""),document.createElement("template"),document.createTextNode("");let e=!1;try{const t={get capture(){return e=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(e){}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");document.createElement("template");class Action{constructor(){this.isAction=!0}}Action.prototype.isAction=!0;document.createTextNode("");
/**
 * Selection plugin
 *
 * @copyright Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
 */var t={ItemHold:function ItemHold(e={}){let t;const i={time:1e3,movementThreshold:2,action(e,t){}};e=Object.assign(Object.assign({},i),e);const n={},o={x:0,y:0};function onPointerUp(e){void 0!==n[e]&&delete n[e]}function action(i,s){function elementPointerDown(r){!function onPointerDown(i,s,r){if(void 0===n[i.id]){const c=t.normalizePointerEvent(r);n[i.id]={x:c.x,y:c.y},r.stopPropagation(),r.preventDefault(),setTimeout(()=>{if(void 0!==n[i.id]){let t=!0;const r=Math.abs(n[i.id].x-o.x),c=Math.abs(n[i.id].y-o.y);r>e.movementThreshold&&(t=!1),c>e.movementThreshold&&(t=!1),delete n[i.id],t&&e.action(s,i)}},e.time)}}(s.item,i,r)}function pointerUp(){onPointerUp(s.item.id)}function onPointerMove(e){const i=t.normalizePointerEvent(e);o.x=i.x,o.y=i.y}return i.addEventListener("mousedown",elementPointerDown),i.addEventListener("touchstart",elementPointerDown),document.addEventListener("mouseup",pointerUp),document.addEventListener("touchend",pointerUp),document.addEventListener("mousemove",onPointerMove),document.addEventListener("touchmove",onPointerMove),{update(e,t){s=t},destroy(e,t){document.removeEventListener("mouseup",onPointerUp),document.removeEventListener("mousemove",onPointerMove),e.removeEventListener("mousedown",elementPointerDown),document.removeEventListener("touchend",onPointerUp),document.removeEventListener("touchmove",onPointerMove),e.removeEventListener("touchstart",elementPointerDown)}}}return function initialize(e){t=e.api,e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(action),e))}}
/**
 * ItemMovement plugin
 *
 * @copyright Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
 */,ItemMovement:function ItemMovement(e={}){const t={moveable:!0,resizeable:!0,resizerContent:"",collisionDetection:!0,outOfBorders:!1,snapStart:(e,t)=>e+t,snapEnd:(e,t)=>e+t,ghostNode:!0};e=Object.assign(Object.assign({},t),e);const i={};function action(t,n){if(!e.moveable&&!e.resizeable)return;const o=n.state,s=n.api;function isResizeable(t){let i=e.resizeable&&(!t.item.hasOwnProperty("resizeable")||!0===t.item.resizeable);return t.row.hasOwnProperty("resizeable")&&i&&(i=t.row.resizeable),i}function getMovement(e){const t=e.item.id;return void 0===i[t]&&(i[t]={moving:!1,resizing:!1}),i[t]}function moveGhost(i,n){if(e.ghostNode){const e=getMovement(i),o=n.clientX-e.ganttLeft-e.itemLeftCompensation;e.ghost.style.left=o+"px",e.ghost.style.top=n.clientY-e.ganttTop-e.itemTop+parseInt(getComputedStyle(t)["margin-top"])+"px"}}function destroyGhost(t){e.ghostNode&&void 0!==i[t]&&void 0!==i[t].ghost&&(o.get("_internal.elements.chart-timeline").removeChild(i[t].ghost),delete i[t].ghost)}function getSnapStart(t){let i=e.snapStart;return"function"==typeof t.item.snapStart&&(i=t.item.snapStart),i}function getSnapEnd(t){let i=e.snapEnd;return"function"==typeof t.item.snapEnd&&(i=t.item.snapEnd),i}const r=`<div class="${s.getClass("chart-timeline-items-row-item-resizer")}">${e.resizerContent}</div>`;t.insertAdjacentHTML("beforeend",r);const c=t.querySelector(".gantt-schedule-timeline-calendar__chart-timeline-items-row-item-resizer");function labelDown(i){i.stopPropagation(),i.preventDefault();const r=s.normalizePointerEvent(i);if("mouse"===i.ponterType&&0!==i.button)return;const c=getMovement(n);c.moving=!0;const l=o.get(`config.chart.items.${n.item.id}`),a=o.get("_internal.chart.time.leftGlobal"),m=o.get("_internal.chart.time.timePerPixel"),d=o.get("_internal.elements.chart-timeline").getBoundingClientRect();c.ganttTop=d.top,c.ganttLeft=d.left,c.itemX=Math.round((l.time.start-a)/m),c.itemLeftCompensation=r.clientX-c.ganttLeft-c.itemX,function createGhost(i,n,s,r){const c=getMovement(i);if(!e.ghostNode||void 0!==c.ghost)return;const l=t.cloneNode(!0),a=getComputedStyle(t),m=o.get("config.scroll.compensation");l.style.position="absolute",l.style.left=n.clientX-s-c.itemLeftCompensation+"px";const d=n.clientY-r-t.offsetTop-m+parseInt(a["margin-top"]);c.itemTop=d,l.style.top=n.clientY-r-d+"px",l.style.width=a.width,l.style["box-shadow"]="10px 10px 6px #00000020";const g=t.clientHeight+"px";return l.style.height=g,l.style["line-height"]=t.clientHeight-18+"px",l.style.opacity="0.6",l.style.transform="scale(1.05, 1.05)",o.get("_internal.elements.chart-timeline").appendChild(l),c.ghost=l,l}(n,r,d.left,d.top)}function resizerDown(e){if(e.stopPropagation(),e.preventDefault(),"mouse"===e.pointerType&&0!==e.button)return;const t=s.normalizePointerEvent(e),i=getMovement(n);i.resizing=!0;const r=o.get(`config.chart.items.${n.item.id}`),c=o.get("_internal.chart.time.leftGlobal"),l=o.get("_internal.chart.time.timePerPixel"),a=o.get("_internal.elements.chart-timeline").getBoundingClientRect();i.ganttTop=a.top,i.ganttLeft=a.left,i.itemX=(r.time.end-c)/l,i.itemLeftCompensation=t.clientX-i.ganttLeft-i.itemX}function isCollision(t,i,n,r){if(!e.collisionDetection)return!1;const c=o.get("_internal.chart.time");if(e.outOfBorders&&(n<c.from||r>c.to))return!0;let l=s.time.date(r).diff(n,"milliseconds");if(-1===Math.sign(l)&&(l=-l),l<=1)return!0;const a=o.get("config.list.rows."+t);for(const e of a._internal.items)if(e.id!==i){if(n>=e.time.start&&n<=e.time.end)return!0;if(r>=e.time.start&&r<=e.time.end)return!0;if(n<=e.time.start&&r>=e.time.end)return!0}return!1}function documentMove(t){const i=getMovement(n),r=s.normalizePointerEvent(t);let c,l,a,m,d;(i.moving||i.resizing)&&(t.stopPropagation(),t.preventDefault(),c=o.get(`config.chart.items.${n.item.id}`),l=o.get(`config.chart.items.${n.item.id}.rowId`),a=o.get(`config.list.rows.${l}`),m=o.get("config.chart.time.zoom"),d=o.get("_internal.chart.time.timePerPixel"));const g=function isMoveable(t){let i=e.moveable;return t.item.hasOwnProperty("moveable")&&i&&(i=t.item.moveable),t.row.hasOwnProperty("moveable")&&i&&(i=t.row.moveable),i}(n);if(i.moving){if((!0===g||"x"===g||Array.isArray(g)&&g.includes(l))&&function movementX(e,t,i,s,r){const c=getMovement(n),l=e.clientX-c.ganttLeft-c.itemLeftCompensation;moveGhost(n,e);const a=o.get("_internal.chart.time.leftGlobal")+l*r-i.time.start,m=i.time.start,d=getSnapStart(n)(i.time.start,a,i)-m,g=isCollision(t.id,i.id,i.time.start+d,i.time.end+d);d&&!g&&o.update(`config.chart.items.${n.item.id}.time`,(function moveItem(e){return e.start+=d,e.end=getSnapEnd(n)(e.end,d,i)-1,e}))}(r,a,c,0,d),!g||"x"===g)return;let e=function movementY(e,t,i,s,r){moveGhost(n,e);const c=getMovement(n),l=e.clientY-c.ganttTop,a=o.get("_internal.list.visibleRows"),m=o.get("config.scroll.compensation");let d=0;for(const e of a){if(e.top+m>l)return d>0?d-1:0;d++}return d}(r);const t=o.get("_internal.list.visibleRows");void 0===t[e]&&(e>0?e=t.length-1:e<0&&(e=0));const i=t[e],s=i.id,m=isCollision(s,c.id,c.time.start,c.time.end);s===c.rowId||m||Array.isArray(g)&&!g.includes(s)||i.hasOwnProperty("moveable")&&!i.moveable||o.update(`config.chart.items.${c.id}.rowId`,s)}else!i.resizing||void 0!==c.resizeable&&!0!==c.resizeable||function resizeX(e,t,i,s,r){if(!isResizeable(n))return;const c=o.get("_internal.chart.time"),l=getMovement(n),a=e.clientX-l.ganttLeft-l.itemLeftCompensation,m=c.leftGlobal+a*r-i.time.end;if(i.time.end+m<i.time.start)return;const d=i.time.end,g=getSnapEnd(n)(i.time.end,m,i)-1-d,h=isCollision(t.id,i.id,i.time.start,i.time.end+g);g&&!h&&o.update(`config.chart.items.${n.item.id}.time`,e=>(e.start=getSnapStart(n)(e.start,0,i),e.end=getSnapEnd(n)(e.end,g,i)-1,e))}(r,a,c,0,d)}function documentUp(e){const t=getMovement(n);(t.moving||t.resizing)&&(e.stopPropagation(),e.preventDefault()),t.moving=!1,t.resizing=!1;for(const e in i)i[e].moving=!1,i[e].resizing=!1,destroyGhost(e)}return isResizeable(n)?c.style.visibility="visible":c.style.visibility="hidden",t.addEventListener("pointerdown",labelDown),c.addEventListener("pointerdown",resizerDown),document.addEventListener("pointermove",documentMove),document.addEventListener("pointerup",documentUp),{update(e,t){isResizeable(t)||"visible"!==c.style.visibility?isResizeable(t)&&"hidden"===c.style.visibility&&(c.style.visibility="visible"):c.style.visibility="hidden",n=t},destroy(e,i){t.removeEventListener("pointerdown",labelDown),c.removeEventListener("pointerdown",resizerDown),document.removeEventListener("pointermove",documentMove),document.removeEventListener("pointerup",documentUp),c.remove()}}}return function initialize(e){e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(action),e))}}
/**
 * SaveAsImage plugin
 *
 * @copyright Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
 */,SaveAsImage:function SaveAsImage(e={}){function saveAsImage(t){const i=t.target,n=i.clientWidth,o=i.clientHeight,s=unescape(encodeURIComponent(i.outerHTML));let r="";for(const e of document.styleSheets)if("gstc"===e.title)for(const t of e.rules)r+=t.cssText;const c=`<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${o}" viewBox="0 0 ${n} ${o}">\n      <foreignObject x="0" y="0" width="${n}" height="${o}">\n        <div xmlns="http://www.w3.org/1999/xhtml">\n          ${r=`<style>* {${e.style}} ${r}</style>`}\n          ${s}\n        </div>\n      </foreignObject>\n    </svg>`,l=document.createElement("canvas");l.width=n,l.height=o;const a=l.getContext("2d");a.fillStyle="white",a.fillRect(0,0,n,o);const m="data:image/svg+xml;base64,"+btoa(c),d=new Image;d.onload=function onLoad(){a.drawImage(d,0,0),function downloadImage(e,t){const i=document.createElement("a");i.href=e,i.download=t,document.body.appendChild(i),i.click()}(l.toDataURL("image/jpeg",1),e.filename)},d.src=m}return e=Object.assign(Object.assign({},{style:"font-family: sans-serif;",filename:"gantt-schedule-timeline-calendar.jpeg"}),{options:e}),function initialize(e){e.state.subscribe("_internal.elements.main",e=>{e&&e.addEventListener("save-as-image",saveAsImage)})}},Selection:function Selection(e={}){let t,i,n,o;const s="config.plugin.selection",r="gantt-schedule-timeline-caledar__plugin-selection-rect",c=document.createElement("div");c.classList.add(r),c.style.visibility="hidden",c.style.left="0px",c.style.top="0px",c.style.width="0px",c.style.height="0px",c.style.background="rgba(0, 119, 192, 0.2)",c.style.border="2px dashed rgba(0, 119, 192, 0.75)",c.style.position="absolute",c.style["user-select"]="none",c.style["pointer-events"]="none";const l={grid:!1,items:!0,rows:!1,horizontal:!0,vertical:!0,rectStyle:{},selecting(){},deselecting(){},selected(){},deselected(){},canSelect:(e,t,i)=>t,canDeselect:(e,t,i)=>[],getApi(){}};e=Object.assign(Object.assign({},l),e);for(const t in e.rectStyle)c.style[t]=e.rectStyle[t];let a={fromX:-1,fromY:-1,toX:-1,toY:-1,startX:-1,startY:-1,startCell:!1,selecting:!1};const m={"chart-timeline-grid-row":e=>e.row.id,"chart-timeline-grid-row-block":e=>e.id,"chart-timeline-items-row":e=>e.row.id,"chart-timeline-items-row-item":e=>e.item.id};class SelectionAction extends Action{constructor(t,n){super();let l,d={};function clearSelection(t=!1){let n;i.update(s,i=>n={selecting:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},selected:{"chart-timeline-grid-rows":t?[]:e.canDeselect("chart-timeline-grid-rows",i.selected["chart-timeline-grid-rows"],i),"chart-timeline-grid-row-blocks":t?[]:e.canDeselect("chart-timeline-grid-row-blocks",i.selected["chart-timeline-grid-row-blocks"],i),"chart-timeline-items-rows":t?[]:e.canDeselect("chart-timeline-items-rows",i.selected["chart-timeline-items-rows"],i),"chart-timeline-items-row-items":t?[]:e.canDeselect("chart-timeline-items-rows",i.selected["chart-timeline-items-rows"],i)}}),i.update("_internal.chart.grid.rowsWithBlocks",(function clearRowsWithBlocks(e){if(e)for(const t of e)for(const e of t.blocks)e.selected=n.selected["chart-timeline-grid-row-blocks"].includes(e.id),e.selecting=!1;return e}))}this.unsub=n.state.subscribeAll(["_internal.elements.chart-timeline","_internal.chart.dimensions.width"],e=>{const t=i.get("_internal.elements.chart-timeline");if(void 0===t)return;this.chartTimeline=t,this.chartTimeline.querySelector("."+r)||this.chartTimeline.insertAdjacentElement("beforeend",c);const n=this.chartTimeline.getBoundingClientRect();this.left=n.left,this.top=n.top}),d.clearSelection=clearSelection;const g=e=>{const t=e.x-this.left,i=e.y-this.top;t<=a.startX?(a.fromX=t,a.toX=a.startX):(a.fromX=a.startX,a.toX=t),i<=a.startY?(a.fromY=i,a.toY=a.startY):(a.fromY=a.startY,a.toY=i)},h=(e,t)=>{let i=!1,n=!1;return(e.left>t.left&&e.left<t.right||e.right>t.left&&e.right<t.right||e.left<=t.left&&e.right>=t.right)&&(i=!0),(e.top>t.top&&e.top<t.bottom||e.bottom>t.top&&e.bottom<t.bottom||e.top<=t.top&&e.bottom>=t.bottom)&&(n=!0),i&&n},u=(t,n,o,r)=>{const c=[],l=[],a=n[o+"s"];if(!a)return[];const m=i.get(s),d=m.selecting[o+"s"];for(const i of a){const n=i.getBoundingClientRect();if(h(n,t)){l.push(i.vido),e.canSelect(o,l,m).includes(i.vido)?(d.includes(r(i.vido))||e.selecting(i.vido,o),c.push(r(i.vido))):l.unshift()}else d.includes(r(i.vido))&&e.deselecting(i.vido,o)}return c},f=t=>{if(!a.selecting)return void clearSelection();if(t.stopPropagation(),a.fromX===t.x-this.left&&a.fromY===t.y-this.top)return a.selecting=!1,void(c.style.visibility="hidden");a.selecting=!1,c.style.visibility="hidden";const n=i.get(s),o={};i.update(s,e=>(o.selected=Object.assign({},e.selecting),o.selecting={"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},o));const r=i.get("_internal.elements");for(const t in m)if(r[t+"s"])for(const i of r[t+"s"])n.selecting[t+"s"].includes(i.vido.id)&&e.deselecting(i.vido,t);i.update("config.chart.items",(function updateItems(e){const t=n.selecting["chart-timeline-items-row-items"];for(const i in e){const n=e[i];t.includes(n.id)?n.selecting=!0:n.selecting=!1}return e})),i.update("_internal.chart.grid.rowsWithBlocks",(function updateRowsWithBlocks(t){if(t)for(const i of t)for(const t of i.blocks)n.selecting["chart-timeline-grid-row-blocks"].includes(t.id)?(void 0!==t.selected&&t.selected||e.selected(t,"chart-timeline-grid-row-block"),t.selected=!0):(l.selected["chart-timeline-grid-row-blocks"].includes(t.id)&&e.deselected(t,"chart-timeline-grid-row-block"),t.selected=!1);return t}))};this.mouseDown=e=>{0===e.button&&(a.selecting=!0,a.fromX=e.x-this.left,a.fromY=e.y-this.top,a.startX=a.fromX,a.startY=a.fromY,l=function cloneSelection(e){const t={};return t.selecting=Object.assign({},e.selecting),t.selecting["chart-timeline-grid-rows"]=e.selecting["chart-timeline-grid-rows"].slice(),t.selecting["chart-timeline-grid-row-blocks"]=e.selecting["chart-timeline-grid-row-blocks"].slice(),t.selecting["chart-timeline-items-rows"]=e.selecting["chart-timeline-items-rows"].slice(),t.selecting["chart-timeline-items-row-items"]=e.selecting["chart-timeline-items-row-items"].slice(),t.selected=Object.assign({},e.selected),t.selected["chart-timeline-grid-rows"]=e.selected["chart-timeline-grid-rows"].slice(),t.selected["chart-timeline-grid-row-blocks"]=e.selected["chart-timeline-grid-row-blocks"].slice(),t.selected["chart-timeline-items-rows"]=e.selected["chart-timeline-items-rows"].slice(),t.selected["chart-timeline-items-row-items"]=e.selected["chart-timeline-items-row-items"].slice(),t}(i.get(s)),clearSelection())},this.mouseMove=e=>{(e=>{if(!a.selecting)return;clearSelection(),g(e),c.style.left=a.fromX+"px",c.style.top=a.fromY+"px",c.style.visibility="visible",c.style.width=a.toX-a.fromX+"px",c.style.height=a.toY-a.fromY+"px";const t=c.getBoundingClientRect(),n=i.get("_internal.elements"),o={};for(const e in m)o[e+"s"]=u(t,n,e,m[e]);i.update(`${s}.selecting`,o),i.update("config.chart.items",(function updateItems(e){const t=o["chart-timeline-items-row-items"];for(const i in e){const n=e[i];t.includes(n.id)?n.selecting=!0:n.selecting=!1}return e}),{only:["selecting"]}),i.update("_internal.chart.grid.rowsWithBlocks",(function updateRowsWithBlocks(e){const t=o["chart-timeline-grid-row-blocks"],i=o["chart-timeline-grid-rows"];if(e)for(const n of e){i.includes(n.id)?n.selecting=!0:n.selecting=!1;for(const e of n.blocks)t.includes(e.id)?e.selecting=!0:e.selecting=!1}return e}))})(e)},this.mouseUp=e=>{a.selecting&&f(e)},t.addEventListener("mousedown",this.mouseDown),document.addEventListener("mousemove",o(this.mouseMove)),document.addEventListener("mouseup",this.mouseUp),e.getApi(d)}destroy(e){document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("mousemove",this.mouseMove),e.removeEventListener("mousedown",this.mouseDown)}}function updateSelection(e,t,i,n,o){t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n),i&&!e.classList.contains(o)?e.classList.add(o):!i&&e.classList.contains(o)&&e.classList.remove(o)}class GridBlockAction extends Action{constructor(e,t){super(),this.classNameSelecting=n.getClass("chart-timeline-grid-row-block")+"--selecting",this.classNameSelected=n.getClass("chart-timeline-grid-row-block")+"--selected",updateSelection(e,t.selecting,t.selected,this.classNameSelecting,this.classNameSelected)}update(e,t){updateSelection(e,t.selecting,t.selected,this.classNameSelecting,this.classNameSelected)}destroy(e,t){e.classList.remove(this.classNameSelecting),e.classList.remove(this.classNameSelected)}}class ItemAction extends Action{constructor(e,t){super(),this.classNameSelecting=n.getClass("chart-timeline-items-row-item")+"--selecting",this.classNameSelected=n.getClass("chart-timeline-items-row-item")+"--selected",updateSelection(e,t.item.selecting,t.item.selected,this.classNameSelecting,this.classNameSelected)}update(e,t){updateSelection(e,t.item.selecting,t.item.selected,this.classNameSelecting,this.classNameSelected)}destroy(e,t){e.classList.remove(this.classNameSelecting),e.classList.remove(this.classNameSelected)}}function onBlockCreate(e){const t=i.get("config.plugin.selection.selected.chart-timeline-grid-row-blocks");for(const i of t)if(i===e.id)return e.selected=!0,e;return e.selected=!1,e.selecting=!1,e}return function initialize(e){i=(t=e).state,n=t.api,o=t.schedule,void 0===i.get(s)&&i.update(s,{selecting:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},selected:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]}}),i.update("config.chart.items",e=>{for(const t in e){const i=e[t];void 0===i.selecting&&(i.selecting=!1),void 0===i.selected&&(i.selected=!1)}return e}),i.update("config.actions.chart-timeline",e=>(e.push(SelectionAction),e)),i.update("config.actions.chart-timeline-grid-row-block",e=>(e.push(GridBlockAction),e)),i.update("config.actions.chart-timeline-items-row-item",e=>(e.push(ItemAction),e)),i.update("config.chart.grid.block.onCreate",e=>(e.push(onBlockCreate),e))}}
/**
 * CalendarScroll plugin
 *
 * @copyright Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar
 */,CalendarScroll:function CalendarScroll(e={}){let t,i,n;const o={speed:1,hideScroll:!1,onChange(e){}};e=Object.assign(Object.assign({},o),e);class CalendarScrollAction extends Action{constructor(i){super(),this.isMoving=!1,this.lastX=0,this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this),i.addEventListener("touchstart",this.onPointerStart),document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.onPointerEnd),i.addEventListener("mousedown",this.onPointerStart),document.addEventListener("mousemove",this.onPointerMove),document.addEventListener("mouseup",this.onPointerEnd),i.style.cursor="move";const n=t.get("_internal.elements.horizontal-scroll");e.hideScroll&&n&&(n.style.visibility="hidden")}onPointerStart(e){if("mousedown"===e.type&&0!==e.button)return;e.stopPropagation(),this.isMoving=!0;const t=i.normalizePointerEvent(e);this.lastX=t.x}onPointerMove(o){n(()=>{if(!this.isMoving)return;const n=i.normalizePointerEvent(o),s=n.x-this.lastX,r=t.get("_internal.chart.time"),c=-Math.round(s*r.timePerPixel*e.speed);t.update("config.chart.time",t=>(0===t.from&&(t.from=r.from),0===t.to&&(t.to=r.to),t.from+=c,t.to+=c,e.onChange(t),t)),this.lastX=n.x})()}onPointerEnd(e){this.isMoving=!1,this.lastX=0}destroy(e,t){e.removeEventListener("touchstart",this.onPointerStart),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerEnd),e.removeEventListener("mousedown",this.onPointerStart),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerEnd)}}return function initialize(e){i=e.api,t=e.state,n=e.schedule,t.update("config.actions.chart-calendar",e=>(e.push(CalendarScrollAction),e))}}};export default t;
//# sourceMappingURL=plugins.min.js.map
