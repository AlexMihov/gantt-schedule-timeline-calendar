{"version":3,"file":"plugins.esm.js","sources":["../src/plugins/timeline-pointer.plugin.ts","../src/plugins/item-hold.plugin.ts","../src/plugins/item-movement.plugin.ts","../src/plugins/item-resizing.plugin.ts","../src/plugins/selection.plugin.ts","../src/plugins/calendar-scroll.plugin.ts","../node_modules/lit-html-optimised/lib/template.js","../node_modules/lit-html-optimised/lib/template-result.js","../node_modules/lit-html-optimised/lib/parts.js","../node_modules/lit-html-optimised/lit-html.js","../node_modules/lit-html-optimised/directives/async-append.js","../node_modules/lit-html-optimised/directives/async-replace.js","../node_modules/lit-html-optimised/directives/unsafe-html.js","../node_modules/@neuronet.io/vido/Action.ts","../node_modules/@neuronet.io/vido/PointerAction.ts","../src/plugins/highlight-weekends.plugin.ts","../src/plugins/plugins.ts"],"sourcesContent":["/**\n * TimelinePointer plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport DeepState from 'deep-state-observer';\nimport { Api } from '../api/api';\nimport { Vido } from '@src/gstc';\n\nexport const CELL = 'chart-timeline-grid-row-cell';\nexport type CELL_TYPE = 'chart-timeline-grid-row-cell';\nexport const ITEM = 'chart-timeline-items-row-item';\nexport type ITEM_TYPE = 'chart-timeline-items-row-item';\n\nexport interface PointerEvents {\n  down: PointerEvent | null;\n  move: PointerEvent | null;\n  up: PointerEvent | null;\n}\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport type PointerState = 'up' | 'down' | 'move';\n\nexport interface PluginData {\n  enabled: boolean;\n  isMoving: boolean;\n  pointerState: PointerState;\n  currentTarget: HTMLElement | null;\n  realTarget: HTMLElement | null;\n  targetType: ITEM_TYPE | CELL_TYPE | '';\n  targetData: any | null;\n  events: PointerEvents;\n  initialPosition: Point;\n  currentPosition: Point;\n}\n\nexport function Plugin(options = { enabled: true }) {\n  let vido: Vido, api: Api, state: DeepState;\n  const pluginPath = 'config.plugin.TimelinePointer';\n\n  const classNames = {\n    cell: '',\n    item: '',\n  };\n\n  function generateEmptyData(): PluginData {\n    return {\n      enabled: options.enabled,\n      isMoving: false,\n      pointerState: 'up',\n      currentTarget: null,\n      realTarget: null,\n      targetType: '',\n      targetData: null,\n      initialPosition: { x: 0, y: 0 },\n      currentPosition: { x: 0, y: 0 },\n      events: {\n        down: null,\n        move: null,\n        up: null,\n      },\n    };\n  }\n\n  let chartTimelineElement: HTMLElement;\n\n  class TimelinePointerAction {\n    private data: PluginData;\n    private unsub = [];\n\n    constructor(element) {\n      this.pointerDown = this.pointerDown.bind(this);\n      this.pointerMove = this.pointerMove.bind(this);\n      this.pointerUp = this.pointerUp.bind(this);\n      this.data = generateEmptyData();\n      element.addEventListener('pointerdown', this.pointerDown);\n      document.addEventListener('pointerup', this.pointerUp);\n      document.addEventListener('pointermove', this.pointerMove);\n      this.unsub.push(state.subscribe(pluginPath, (value) => (this.data = value)));\n    }\n\n    public destroy(element) {\n      element.removeEventListener('pointerdown', this.pointerDown);\n      document.removeEventListener('pointerup', this.pointerUp);\n      document.removeEventListener('pointermove', this.pointerMove);\n    }\n\n    private updateData() {\n      state.update(pluginPath, () => ({ ...this.data }));\n    }\n\n    private getRealTarget(ev: PointerEvent) {\n      let realTarget: HTMLElement = (ev.target as HTMLElement).closest('.' + classNames.item) as HTMLElement;\n      if (realTarget) {\n        return realTarget;\n      }\n      realTarget = (ev.target as HTMLElement).closest('.' + classNames.cell) as HTMLElement;\n      if (realTarget) {\n        return realTarget;\n      }\n      return null;\n    }\n\n    getRealPosition(ev: PointerEvent): Point {\n      const pos = { x: 0, y: 0 };\n      if (chartTimelineElement) {\n        const bounding = chartTimelineElement.getBoundingClientRect();\n        pos.x = ev.x - bounding.x;\n        pos.y = ev.y - bounding.y;\n      }\n      return pos;\n    }\n\n    private pointerDown(ev: PointerEvent) {\n      if (!this.data.enabled) return;\n      this.data.pointerState = 'down';\n      this.data.currentTarget = ev.target as HTMLElement;\n      this.data.realTarget = this.getRealTarget(ev);\n      if (this.data.realTarget) {\n        if (this.data.realTarget.classList.contains(classNames.item)) {\n          this.data.targetType = ITEM;\n          // @ts-ignore\n          this.data.targetData = this.data.realTarget.vido.item;\n        } else if (this.data.realTarget.classList.contains(classNames.cell)) {\n          this.data.targetType = CELL;\n          // @ts-ignore\n          this.data.targetData = this.data.realTarget.vido;\n        } else {\n          this.data.targetType = '';\n        }\n      } else {\n        this.data.targetType = '';\n        this.data.targetData = null;\n      }\n      this.data.isMoving = !!this.data.realTarget;\n      this.data.events.down = ev;\n      this.data.events.move = ev;\n      const realPosition = this.getRealPosition(ev);\n      this.data.initialPosition = realPosition;\n      this.data.currentPosition = realPosition;\n      this.updateData();\n    }\n\n    private pointerUp(ev: PointerEvent) {\n      if (!this.data.enabled) return;\n      this.data.pointerState = 'up';\n      this.data.isMoving = false;\n      this.data.events.up = ev;\n      this.data.currentPosition = this.getRealPosition(ev);\n      this.updateData();\n    }\n\n    private pointerMove(ev: PointerEvent) {\n      if (!this.data.enabled || !this.data.isMoving) return;\n      this.data.pointerState = 'move';\n      this.data.events.move = ev;\n      this.data.currentPosition = this.getRealPosition(ev);\n      this.updateData();\n    }\n  }\n\n  return function initialize(vidoInstance: Vido) {\n    vido = vidoInstance;\n    api = vido.api;\n    state = vido.state;\n    classNames.cell = api.getClass(CELL);\n    classNames.item = api.getClass(ITEM);\n    const unsub = state.subscribe('$data.elements.chart-timeline', (el) => (chartTimelineElement = el));\n    state.update('config.actions.chart-timeline', (timelineActions) => {\n      timelineActions.push(TimelinePointerAction);\n      return timelineActions;\n    });\n    state.update(pluginPath, (data) => {\n      return generateEmptyData();\n    });\n\n    return function destroy() {\n      unsub();\n    };\n  };\n}\n","/**\n * ItemHold plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nexport interface Options {\n  time?: number;\n  movementThreshold?: number;\n  action?: (element: HTMLElement, data: any) => void;\n}\n\nexport default function ItemHold(options: Options = {}) {\n  let api;\n  const defaultOptions = {\n    time: 1000,\n    movementThreshold: 2,\n    action(element, data) {}\n  };\n  options = { ...defaultOptions, ...options };\n\n  const holding = {};\n  const pointer = { x: 0, y: 0 };\n\n  function onPointerDown(item, element, event) {\n    if (typeof holding[item.id] === 'undefined') {\n      holding[item.id] = { x: event.x, y: event.y };\n      event.stopPropagation();\n      event.preventDefault();\n      setTimeout(() => {\n        if (typeof holding[item.id] !== 'undefined') {\n          let exec = true;\n          const xMovement = Math.abs(holding[item.id].x - pointer.x);\n          const yMovement = Math.abs(holding[item.id].y - pointer.y);\n          if (xMovement > options.movementThreshold) {\n            exec = false;\n          }\n          if (yMovement > options.movementThreshold) {\n            exec = false;\n          }\n          delete holding[item.id];\n          if (exec) {\n            options.action(element, item);\n          }\n        }\n      }, options.time);\n    }\n  }\n\n  function onPointerUp(itemId) {\n    if (typeof holding[itemId] !== 'undefined') {\n      delete holding[itemId];\n    }\n  }\n\n  function action(element, data) {\n    function elementPointerDown(event) {\n      onPointerDown(data.item, element, event);\n    }\n    element.addEventListener('pointerdown', elementPointerDown);\n    function pointerUp() {\n      onPointerUp(data.item.id);\n    }\n\n    document.addEventListener('pointerup', pointerUp);\n    function onPointerMove(event) {\n      pointer.x = event.x;\n      pointer.y = event.y;\n    }\n\n    document.addEventListener('pointermove', onPointerMove);\n    return {\n      update(element, changedData) {\n        data = changedData;\n      },\n      destroy(element, data) {\n        document.removeEventListener('pointerup', onPointerUp);\n        document.removeEventListener('poitnermove', onPointerMove);\n        element.removeEventListener('pointerdown', elementPointerDown);\n      }\n    };\n  }\n\n  return function initialize(vido) {\n    api = vido.api;\n    vido.state.update('config.actions.chart-timeline-items-row-item', actions => {\n      actions.push(action);\n      return actions;\n    });\n  };\n}\n","/**\n * ItemMovement plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport { PluginData as SelectionPluginData } from './selection.plugin';\nimport { Item, DataChartTime, Scroll, DataChartDimensions, ItemTime, Vido, ItemData } from '@src/gstc';\nimport { ITEM, Point } from './timeline-pointer.plugin';\nimport { Dayjs } from 'dayjs';\nimport { Api } from '../api/api';\nimport DeepState from 'deep-state-observer';\n\nexport interface SnapArg {\n  time: DataChartTime;\n  scroll: Scroll;\n  dimensions: DataChartDimensions;\n  vido: Vido;\n  movement: Movement;\n}\n\nexport interface SnapStartArg extends SnapArg {\n  startTime: Dayjs;\n}\n\nexport interface SnapEndArg extends SnapArg {\n  endTime: Dayjs;\n}\n\nexport interface Options {\n  enabled?: boolean;\n  className?: string;\n  onStart?: (items: Item[]) => void;\n  onMove?: (items: Item[]) => void;\n  onEnd?: (items: Item[]) => void;\n  snapStart?: (snapStartArgs: SnapStartArg) => Dayjs;\n  snapEnd?: (snapEndArgs: SnapEndArg) => Dayjs;\n}\n\nexport interface MovementResult {\n  horizontal: number;\n  vertical: number;\n}\n\nexport interface Movement {\n  px: MovementResult;\n  time: number;\n}\n\nexport interface PluginData extends Options {\n  moving: Item[];\n  lastMoved: Item[];\n  movement: Movement;\n  lastPosition: Point;\n  state: 'up' | 'down' | 'move';\n  pointerMoved: boolean;\n}\n\nexport interface MovingTime {\n  time: Dayjs;\n  position: number;\n}\n\nfunction prepareOptions(options: Options): Options {\n  return {\n    enabled: true,\n    className: '',\n    ...options,\n  };\n}\n\nconst pluginPath = 'config.plugin.ItemMovement';\n\nfunction gemerateEmptyPluginData(options: Options): PluginData {\n  return {\n    moving: [],\n    lastMoved: [],\n    state: 'up',\n    pointerMoved: false,\n    lastPosition: { x: 0, y: 0 },\n    movement: {\n      px: { horizontal: 0, vertical: 0 },\n      time: 0,\n    },\n    onStart() {},\n    onMove() {},\n    onEnd() {},\n    snapStart({ startTime, time }) {\n      return startTime.startOf(time.period);\n    },\n    snapEnd({ endTime, time }) {\n      return endTime.endOf(time.period);\n    },\n    ...options,\n  };\n}\n\nclass ItemMovement {\n  private vido: Vido;\n  private api: Api;\n  private state: DeepState;\n  private onDestroy = [];\n  private selection: SelectionPluginData;\n  private data: PluginData;\n\n  constructor(vido: Vido) {\n    this.vido = vido;\n    this.api = vido.api;\n    this.state = vido.state;\n    this.onDestroy.push(this.state.subscribe(pluginPath, (data) => (this.data = data)));\n    if (!this.data.className) this.data.className = this.api.getClass('chart-timeline-items-row-item--moving');\n    this.onSelectionChange = this.onSelectionChange.bind(this);\n    this.onDestroy.push(this.state.subscribe('config.plugin.Selection', this.onSelectionChange));\n  }\n\n  destroy() {\n    this.onDestroy.forEach((unsub) => unsub());\n  }\n\n  updateData() {\n    this.state.update(pluginPath, this.data);\n  }\n\n  getItemMovingTime(item: Item, time: DataChartTime): MovingTime {\n    const horizontal = this.data.movement.px.horizontal;\n    const x = item.$data.position.left + horizontal;\n    const leftGlobal = Math.round(this.api.time.getTimeFromViewOffsetPx(x, time));\n    return {\n      time: this.api.time.date(leftGlobal),\n      position: x,\n    };\n  }\n\n  moveItems() {\n    const time: DataChartTime = this.state.get('$data.chart.time');\n    let multi = this.state.multi();\n    for (const item of this.data.lastMoved) {\n      const start = this.getItemMovingTime(item, time);\n      let newItemTime: ItemTime;\n      multi = multi\n        .update(`config.chart.items.${item.id}.time`, (itemTime: ItemTime) => {\n          const newStartTime = start.time.valueOf();\n          const diff = newStartTime - itemTime.start;\n          itemTime.start = newStartTime;\n          itemTime.end += diff;\n          newItemTime = { ...itemTime };\n          return itemTime;\n        })\n        .update(`config.chart.items.${item.id}.$data`, (itemData: ItemData) => {\n          itemData.time.startDate = start.time;\n          itemData.time.endDate = this.api.time.date(newItemTime.end);\n          itemData.position.left = start.position;\n          itemData.position.actualLeft = this.api.time.limitOffsetPxToView(start.position);\n          itemData.position.right = itemData.position.left + itemData.width;\n          itemData.position.actualRight = this.api.time.limitOffsetPxToView(itemData.position.right);\n          itemData.actualWidth = itemData.position.actualRight - itemData.position.actualLeft;\n          return itemData;\n        });\n    }\n    multi.done();\n  }\n\n  clearSelection() {\n    this.data.moving = [];\n    this.data.lastMoved = [];\n    this.data.movement.px.horizontal = 0;\n    this.data.movement.px.vertical = 0;\n    this.data.movement.time = 0;\n    this.data.state = 'up';\n    this.data.pointerMoved = false;\n  }\n\n  updatePointerState() {\n    if (this.data.state === 'up' && this.selection.pointerState === 'down') {\n      this.data.onStart(this.data.moving);\n    } else if ((this.data.state === 'down' || this.data.state === 'move') && this.selection.pointerState === 'up') {\n      this.data.moving = [];\n      this.data.onEnd(this.data.lastMoved);\n      this.clearSelection();\n    } else if (this.selection.pointerState === 'move') {\n      if (this.data.movement.px.horizontal || this.data.movement.px.vertical) {\n        this.data.pointerMoved = true;\n      }\n      this.data.onMove(this.data.moving);\n    }\n    this.data.state = this.selection.pointerState;\n  }\n\n  onStart() {\n    this.data.lastPosition = { ...this.selection.currentPosition };\n  }\n\n  onSelectionChange(data: SelectionPluginData) {\n    if (!this.data.enabled) return;\n    this.selection = data;\n    if (this.selection.targetType !== ITEM) {\n      return this.clearSelection();\n    }\n    if (this.selection.events.move) {\n      this.selection.events.move.preventDefault();\n      this.selection.events.move.stopPropagation();\n    }\n    if (this.selection.events.down) {\n      this.selection.events.down.preventDefault();\n      this.selection.events.down.stopPropagation();\n    }\n\n    if (this.data.state === 'up' && this.selection.pointerState === 'down') {\n      this.onStart();\n    }\n\n    this.data.moving = [...this.selection.selected[ITEM]];\n    if (this.data.moving.length) this.data.lastMoved = [...this.data.moving];\n\n    this.data.movement.px.horizontal = this.selection.currentPosition.x - this.data.lastPosition.x;\n    this.data.movement.px.vertical = this.selection.currentPosition.y - this.data.lastPosition.y;\n    this.data.lastPosition.x = this.selection.currentPosition.x;\n    this.data.lastPosition.y = this.selection.currentPosition.y;\n\n    this.updatePointerState();\n\n    this.moveItems();\n    this.updateData();\n  }\n}\n\nexport function Plugin(options: Options = {}) {\n  return function initialize(vidoInstance: Vido) {\n    vidoInstance.state.update(pluginPath, gemerateEmptyPluginData(prepareOptions(options)));\n    new ItemMovement(vidoInstance);\n  };\n}\n","/**\n * ItemResizing plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport { Vido, Wrapper, htmlResult, Item, DataChartTime } from '@src/gstc';\nimport DeepState from 'deep-state-observer';\nimport { Api } from '../api/api';\nimport { lithtml } from '@neuronet.io/vido/vido';\nimport { Point, ITEM } from './timeline-pointer.plugin';\n\nexport interface Handle {\n  width?: number;\n  horizontalMargin?: number;\n  verticalMargin?: number;\n  outside?: boolean;\n  onlyWhenSelected?: boolean;\n}\n\nexport interface ItemInitial {\n  id: string;\n  left: number;\n  width: number;\n}\n\nexport interface Options {\n  enabled?: boolean;\n  handle?: Handle;\n}\n\nexport interface PluginData extends Options {\n  leftIsMoving: boolean;\n  rightIsMoving: boolean;\n  itemsInitial: ItemInitial[];\n  initialPosition: Point;\n  currentPosition: Point;\n  movement: number;\n}\n\nfunction generateEmptyData(options: Options = {}): PluginData {\n  const result = {\n    enabled: true,\n    handle: {\n      width: 18,\n      horizontalMargin: 1,\n      verticalMargin: 1,\n      outside: false,\n      onlyWhenSelected: true,\n    },\n    initialPosition: { x: 0, y: 0 },\n    currentPosition: { x: 0, y: 0 },\n    movement: 0,\n    itemsInitial: [],\n    leftIsMoving: false,\n    rightIsMoving: false,\n    ...options,\n  };\n  if (options.handle) result.handle = { ...result.handle, ...options.handle };\n  return result;\n}\n\nclass ItemResizing {\n  private vido: Vido;\n  private state: DeepState;\n  private api: Api;\n  private data: PluginData;\n  private oldWrapper: Wrapper;\n  private html: typeof lithtml.html;\n  private leftClassName: string;\n  private rightClassName: string;\n  private spacing: number = 1;\n  private unsubs: (() => void)[] = [];\n\n  constructor(vido: Vido, options: Options) {\n    this.vido = vido;\n    this.state = vido.state;\n    this.api = vido.api;\n    this.data = generateEmptyData(options);\n    this.html = vido.html;\n    this.wrapper = this.wrapper.bind(this);\n    this.onRightPointerDown = this.onRightPointerDown.bind(this);\n    this.onRightPointerMove = this.onRightPointerMove.bind(this);\n    this.onRightPointerUp = this.onRightPointerUp.bind(this);\n    this.onLeftPointerDown = this.onLeftPointerDown.bind(this);\n    this.onLeftPointerMove = this.onLeftPointerMove.bind(this);\n    this.onLeftPointerUp = this.onLeftPointerUp.bind(this);\n    this.updateData();\n    this.unsubs.push(this.state.subscribe('config.plugin.ItemResizing', (data) => (this.data = data)));\n    document.addEventListener('pointermove', this.onLeftPointerMove);\n    document.addEventListener('pointerup', this.onLeftPointerUp);\n    document.addEventListener('pointermove', this.onRightPointerMove);\n    document.addEventListener('pointerup', this.onRightPointerUp);\n  }\n\n  public destroy() {\n    this.unsubs.forEach((unsub) => unsub());\n    document.removeEventListener('pointermove', this.onLeftPointerMove);\n    document.removeEventListener('pointerup', this.onLeftPointerUp);\n    document.removeEventListener('pointermove', this.onRightPointerMove);\n    document.removeEventListener('pointerup', this.onRightPointerUp);\n  }\n\n  private updateData() {\n    this.state.update('config.plugin.ItemResizing', this.data);\n  }\n\n  private initializeWrapper() {\n    this.leftClassName = this.api.getClass('chart-timeline-items-row-item-resizing-handle');\n    this.leftClassName += ' ' + this.leftClassName + '--left';\n    this.rightClassName = this.api.getClass('chart-timeline-items-row-item-resizing-handle');\n    this.rightClassName += ' ' + this.rightClassName + '--right';\n    this.spacing = this.state.get('config.chart.spacing');\n  }\n\n  private getSelectedItems(): Item[] {\n    return this.state.get(`config.plugin.Selection.selected.${ITEM}`);\n  }\n\n  private getRightStyleMap(item: Item, visible: boolean) {\n    const rightStyleMap = new this.vido.StyleMap({});\n    rightStyleMap.style.display = visible ? 'block' : 'none';\n    rightStyleMap.style.top = item.$data.position.actualTop + this.data.handle.verticalMargin + 'px';\n    if (this.data.handle.outside) {\n      rightStyleMap.style.left = item.$data.position.right + this.data.handle.horizontalMargin - this.spacing + 'px';\n    } else {\n      rightStyleMap.style.left =\n        item.$data.position.right - this.data.handle.width - this.data.handle.horizontalMargin - this.spacing + 'px';\n    }\n    rightStyleMap.style.width = this.data.handle.width + 'px';\n    rightStyleMap.style.height = item.$data.actualHeight - this.data.handle.verticalMargin * 2 + 'px';\n    return rightStyleMap;\n  }\n\n  private getLeftStyleMap(item: Item, visible: boolean) {\n    const leftStyleMap = new this.vido.StyleMap({});\n    leftStyleMap.style.display = visible ? 'block' : 'none';\n    leftStyleMap.style.top = item.$data.position.actualTop + this.data.handle.verticalMargin + 'px';\n    if (this.data.handle.outside) {\n      leftStyleMap.style.left =\n        item.$data.position.left - this.data.handle.width - this.data.handle.horizontalMargin + 'px';\n    } else {\n      leftStyleMap.style.left = item.$data.position.left + this.data.handle.horizontalMargin + 'px';\n    }\n    leftStyleMap.style.width = this.data.handle.width + 'px';\n    leftStyleMap.style.height = item.$data.actualHeight - this.data.handle.verticalMargin * 2 + 'px';\n    return leftStyleMap;\n  }\n\n  private onPointerDown(ev: PointerEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this.data.itemsInitial = this.getSelectedItems().map((item: Item) => {\n      return {\n        id: item.id,\n        left: item.$data.position.left,\n        width: item.$data.width,\n      };\n    });\n    this.data.initialPosition = {\n      x: ev.screenX,\n      y: ev.screenY,\n    };\n    this.data.currentPosition = { ...this.data.initialPosition };\n  }\n\n  private onLeftPointerDown(ev: PointerEvent) {\n    /*if (!this.data.enabled) return;\n    this.data.leftIsMoving = true;\n    this.onPointerDown(ev);\n    this.updateData();*/\n  }\n  private onRightPointerDown(ev: PointerEvent) {\n    if (!this.data.enabled) return;\n    this.data.rightIsMoving = true;\n    this.onPointerDown(ev);\n    this.updateData();\n  }\n\n  private onPointerMove(ev: PointerEvent) {\n    ev.stopPropagation();\n    ev.preventDefault();\n    this.data.currentPosition.x = ev.screenX;\n    this.data.currentPosition.y = ev.screenY;\n    this.data.movement = this.data.currentPosition.x - this.data.initialPosition.x;\n  }\n  private onLeftPointerMove(ev: PointerEvent) {\n    if (!this.data.enabled || !this.data.leftIsMoving) return;\n    this.onPointerMove(ev);\n    const selected = this.getSelectedItems();\n    const movement = this.data.movement;\n    const time: DataChartTime = this.state.get('$data.chart.time');\n    let multi = this.state.multi();\n    for (let i = 0, len = selected.length; i < len; i++) {\n      const item = selected[i];\n      item.$data.position.left = this.data.itemsInitial[i].left + movement;\n      if (item.$data.position.left > item.$data.position.right) item.$data.position.left = item.$data.position.right;\n      item.$data.position.actualLeft = item.$data.position.left;\n      item.$data.width = item.$data.position.right - item.$data.position.left;\n      item.$data.actualWidth = item.$data.width;\n      const leftGlobal = this.api.time.getTimeFromViewOffsetPx(item.$data.position.left, time);\n      item.time.start = leftGlobal;\n      item.$data.time.startDate = this.api.time.date(leftGlobal);\n      multi = multi.update(`config.chart.items.${item.id}`, item);\n    }\n    multi.done();\n    this.updateData();\n  }\n  private onRightPointerMove(ev: PointerEvent) {\n    if (!this.data.enabled || !this.data.rightIsMoving) return;\n    this.onPointerMove(ev);\n    const selected = this.getSelectedItems();\n    const movement = this.data.movement;\n    const time: DataChartTime = this.state.get('$data.chart.time');\n    let multi = this.state.multi();\n    for (let i = 0, len = selected.length; i < len; i++) {\n      const item = selected[i];\n      item.$data.width = this.data.itemsInitial[i].width + movement;\n      if (item.$data.width < 0) item.$data.width = 0;\n      item.$data.actualWidth = item.$data.width;\n      const right = item.$data.position.left + item.$data.width;\n      item.$data.position.right = right;\n      item.$data.position.actualRight = right;\n      const rightGlobal = this.api.time.getTimeFromViewOffsetPx(right, time);\n      item.time.end = rightGlobal;\n      item.$data.time.endDate = this.api.time.date(rightGlobal);\n      multi = multi\n        .update(`config.chart.items.${item.id}.time`, item.time)\n        .update(`config.chart.items.${item.id}.$data`, item.$data);\n    }\n    multi.done();\n    this.updateData();\n  }\n\n  private onPointerUp(ev: PointerEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n  private onLeftPointerUp(ev: PointerEvent) {\n    if (!this.data.enabled || !this.data.leftIsMoving) return;\n    this.onPointerUp(ev);\n    this.data.leftIsMoving = false;\n    this.updateData();\n  }\n  private onRightPointerUp(ev: PointerEvent) {\n    if (!this.data.enabled || !this.data.rightIsMoving) return;\n    this.onPointerUp(ev);\n    this.data.rightIsMoving = false;\n    this.updateData();\n  }\n\n  public wrapper(input: htmlResult, props?: any): htmlResult {\n    const oldContent = this.oldWrapper(input, props);\n    const item: Item = props.props.item;\n\n    let visible = !item.$data.detached;\n    if (this.data.handle.onlyWhenSelected) {\n      visible = visible && item.selected;\n    }\n    const rightStyleMap = this.getRightStyleMap(item, visible);\n    const leftStyleMap = this.getLeftStyleMap(item, visible);\n    const onLeftPointerDown = {\n      handleEvent: this.onLeftPointerDown,\n      //capture: true,\n    };\n    const onRightPointerDown = {\n      handleEvent: this.onRightPointerDown,\n      //capture: true,\n    };\n    const leftHandle = this\n      .html`<div class=${this.leftClassName} style=${leftStyleMap} @pointerdown=${onLeftPointerDown}></div>`;\n    const rightHandle = this\n      .html`<div class=${this.rightClassName} style=${rightStyleMap} @pointerdown=${onRightPointerDown}></div>`;\n    return this.html`${oldContent}${rightHandle}`;\n    //return this.html`${leftHandle}${oldContent}${rightHandle}`;\n  }\n\n  public getWrapper(oldWrapper: Wrapper): Wrapper {\n    if (!this.oldWrapper) {\n      this.oldWrapper = oldWrapper;\n    }\n    this.initializeWrapper();\n    return this.wrapper;\n  }\n}\n\nexport function Plugin(options: Options = {}) {\n  return function initialize(vidoInstance: Vido) {\n    const itemResizing = new ItemResizing(vidoInstance, options);\n    vidoInstance.state.update('config.wrappers.ChartTimelineItemsRowItem', (oldWrapper) => {\n      return itemResizing.getWrapper(oldWrapper);\n    });\n  };\n}\n","/**\n * Selection plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport {\n  PluginData as TimelinePointerPluginData,\n  ITEM,\n  ITEM_TYPE,\n  CELL,\n  CELL_TYPE,\n  Point,\n  PointerState,\n} from './timeline-pointer.plugin';\n\nimport { Item, Cell, Items, Vido, htmlResult, Wrapper } from '@src/gstc';\nimport DeepState from 'deep-state-observer';\nimport { Api } from '../api/api';\nimport { StyleMap, lithtml } from '@neuronet.io/vido/vido';\n\nexport interface Options {\n  enabled?: boolean;\n  cells?: boolean;\n  items?: boolean;\n  rows?: boolean;\n  showOverlay?: boolean;\n  canSelect?: (type, state, all) => any[];\n  canDeselect?: (type, state, all) => any[];\n}\n\nexport interface SelectionItems {\n  [key: string]: Item[];\n}\n\nexport interface SelectState {\n  selecting?: SelectionItems;\n  selected?: SelectionItems;\n}\n\nfunction prepareOptions(options: Options) {\n  const defaultOptions: Options = {\n    enabled: true,\n    cells: true,\n    items: true,\n    rows: false,\n    showOverlay: true,\n    canSelect(type, currently, all) {\n      return currently;\n    },\n    canDeselect(type, currently, all) {\n      return [];\n    },\n  };\n  options = { ...defaultOptions, ...options } as Options;\n  return options;\n}\n\nconst pluginPath = 'config.plugin.Selection';\n\nexport interface Area {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface Selection {\n  [ITEM]: Item[];\n  [CELL]: Cell[];\n}\n\nexport interface PointerEvents {\n  down: PointerEvent | null;\n  move: PointerEvent | null;\n  up: PointerEvent | null;\n}\n\nexport interface PluginData extends Options {\n  enabled: boolean;\n  isSelecting: boolean;\n  showOverlay: boolean;\n  pointerState: PointerState;\n  initialPosition: Point;\n  currentPosition: Point;\n  selectionArea: Area;\n  selected: Selection;\n  selecting: Selection;\n  events: PointerEvents;\n  targetType: ITEM_TYPE | CELL_TYPE | '';\n}\n\nfunction generateEmptyData(options: Options): PluginData {\n  return {\n    enabled: true,\n    showOverlay: true,\n    isSelecting: false,\n    pointerState: 'up',\n    targetType: '',\n    initialPosition: { x: 0, y: 0 },\n    currentPosition: { x: 0, y: 0 },\n    selectionArea: { x: 0, y: 0, width: 0, height: 0 },\n    selecting: {\n      [ITEM]: [],\n      [CELL]: [],\n    },\n    selected: {\n      [ITEM]: [],\n      [CELL]: [],\n    },\n    events: {\n      down: null,\n      move: null,\n      up: null,\n    },\n    ...options,\n  };\n}\n\nclass SelectionPlugin {\n  private data: PluginData;\n  private poitnerData: TimelinePointerPluginData;\n  private vido: Vido;\n  private state: DeepState;\n  private api: Api;\n  private options: Options;\n  private unsub = [];\n  private oldWrapper: Wrapper;\n  private html: typeof lithtml.html;\n  private wrapperClassName: string;\n  private wrapperStyleMap: StyleMap;\n\n  constructor(vido: Vido, options: Options) {\n    this.vido = vido;\n    this.state = vido.state;\n    this.api = vido.api;\n    this.options = options;\n    this.data = generateEmptyData(options);\n    this.wrapperClassName = this.api.getClass('chart-selection');\n    this.wrapperStyleMap = new vido.StyleMap({ display: 'none' });\n    this.html = vido.html;\n    this.wrapper = this.wrapper.bind(this);\n    this.unsub.push(\n      this.state.subscribe('config.plugin.TimelinePointer', (timelinePointerData) => {\n        this.poitnerData = timelinePointerData;\n        this.onPointerData();\n      })\n    );\n    this.updateData();\n    this.unsub.push(\n      this.state.subscribe(pluginPath, (value) => {\n        this.data = value;\n      })\n    );\n  }\n\n  public destroy() {\n    this.unsub.forEach((unsub) => unsub());\n  }\n\n  private updateData() {\n    this.state.update(pluginPath, { ...this.data });\n    this.vido.update(); // draw selection area overlay\n  }\n\n  private getItemsUnderSelectionArea(): Item[] {\n    return [];\n  }\n\n  private getSelectionArea(): Area {\n    const area = { x: 0, y: 0, width: 0, height: 0 };\n    const initial = { ...this.poitnerData.initialPosition };\n    const current = { ...this.poitnerData.currentPosition };\n    const width = current.x - initial.x;\n    const height = current.y - initial.y;\n    if (width >= 0) {\n      area.x = initial.x;\n      area.width = width;\n    } else {\n      area.x = current.x;\n      area.width = Math.abs(width);\n    }\n    if (height >= 0) {\n      area.y = initial.y;\n      area.height = height;\n    } else {\n      area.y = current.y;\n      area.height = Math.abs(height);\n    }\n    return area;\n  }\n\n  private collectLinkedItems(item: Item, current: Item[] = []): Item[] {\n    if (item.linkedWith && item.linkedWith.length) {\n      const items: Items = this.state.get('config.chart.items');\n      for (const linkedItemId of item.linkedWith) {\n        const linkedItem: Item = items[linkedItemId];\n        if (!current.includes(linkedItem)) {\n          current.push(linkedItem);\n          this.collectLinkedItems(linkedItem, current);\n        }\n        if (!linkedItem.linkedWith) linkedItem.linkedWith = [];\n        if (!linkedItem.linkedWith.includes(item.id)) linkedItem.linkedWith.push(item.id);\n      }\n    }\n    return current;\n  }\n\n  private getSelected(item: Item): Item[] {\n    let selected: Item[];\n    if (this.data.selected[ITEM].find((selectedItem) => selectedItem.id === item.id)) {\n      selected = this.data.selected[ITEM];\n    } else {\n      if (this.poitnerData.events.down.ctrlKey) {\n        selected = [...new Set([...this.data.selected[ITEM], ...this.collectLinkedItems(item, [item])]).values()];\n      } else {\n        selected = this.collectLinkedItems(item, [item]);\n      }\n    }\n    return selected;\n  }\n\n  private selectCells() {\n    this.data.isSelecting = true;\n    this.data.selectionArea = this.getSelectionArea();\n    const selectingItems = this.getItemsUnderSelectionArea();\n    if (selectingItems.length === 0) {\n      this.state.update(`config.chart.items.*.selected`, false);\n      this.data.selected[ITEM].length = 0;\n    }\n    // TODO save selecting items and cells\n  }\n\n  private selectItems() {\n    this.data.isSelecting = false;\n    this.data.selectionArea = this.getSelectionArea();\n    this.data.currentPosition = this.poitnerData.currentPosition;\n    this.data.initialPosition = this.poitnerData.initialPosition;\n    const item: Item = this.poitnerData.targetData;\n    this.data.selected[ITEM] = this.getSelected(item);\n    let multi = this.state.multi();\n    multi = multi.update(`config.chart.items.*.selected`, false);\n    for (const item of this.data.selected[ITEM]) {\n      multi = multi.update(`config.chart.items.${item.id}.selected`, true);\n    }\n    multi.done();\n  }\n\n  private onPointerData() {\n    if (this.poitnerData.isMoving && this.poitnerData.targetType === CELL) {\n      this.selectCells();\n    } else if (this.poitnerData.isMoving && this.poitnerData.targetType === ITEM) {\n      this.selectItems();\n    } else if (!this.poitnerData.isMoving) {\n      this.data.isSelecting = false;\n    }\n    this.data.events = this.poitnerData.events;\n    this.data.pointerState = this.poitnerData.pointerState;\n    this.data.targetType = this.poitnerData.targetType;\n    this.updateData();\n  }\n\n  private wrapper(input: htmlResult, props?: any) {\n    const oldContent = this.oldWrapper(input, props);\n    if (this.data.isSelecting && this.data.showOverlay) {\n      this.wrapperStyleMap.style.display = 'block';\n      this.wrapperStyleMap.style.left = this.data.selectionArea.x + 'px';\n      this.wrapperStyleMap.style.top = this.data.selectionArea.y + 'px';\n      this.wrapperStyleMap.style.width = this.data.selectionArea.width + 'px';\n      this.wrapperStyleMap.style.height = this.data.selectionArea.height + 'px';\n    } else {\n      this.wrapperStyleMap.style.display = 'none';\n    }\n    const SelectionRectangle = this.html` <div class=${this.wrapperClassName} style=${this.wrapperStyleMap}></div> `;\n    return this.html` ${oldContent}${SelectionRectangle} `;\n  }\n\n  public getWrapper(oldWrapper: Wrapper): Wrapper {\n    if (!this.oldWrapper) this.oldWrapper = oldWrapper;\n    return this.wrapper;\n  }\n}\n\nexport function Plugin(options: Options = {}) {\n  options = prepareOptions(options);\n\n  return function initialize(vidoInstance: Vido) {\n    const selectionPlugin = new SelectionPlugin(vidoInstance, options);\n    vidoInstance.state.update(pluginPath, generateEmptyData(options));\n    vidoInstance.state.update('config.wrappers.ChartTimelineItems', (oldWrapper: Wrapper) => {\n      return selectionPlugin.getWrapper(oldWrapper);\n    });\n    return function destroy() {\n      selectionPlugin.destroy();\n    };\n  };\n}\n","/**\n * CalendarScroll plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport { ScrollTypeHorizontal, Vido } from '@src/gstc';\nimport DeepState from 'deep-state-observer';\nimport { Api } from '../api/api';\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface Options {\n  enabled: boolean;\n}\n\nconst defaultOptions = {\n  enabled: true,\n};\n\nexport function Plugin(options: Options = defaultOptions) {\n  let vido: Vido, api: Api, state: DeepState;\n  let enabled = options.enabled;\n\n  class ChartAction {\n    private moving = false;\n    private initialPoint: Point;\n    private initialDataIndex: Point = { x: 0, y: 0 };\n    private lastPos = 0;\n\n    constructor(element: HTMLElement) {\n      this.pointerDown = this.pointerDown.bind(this);\n      this.pointerUp = this.pointerUp.bind(this);\n      this.pointerMove = vido.schedule(this.pointerMove.bind(this));\n      element.addEventListener('pointerdown', this.pointerDown);\n      document.addEventListener('pointermove', this.pointerMove, { passive: true });\n      document.addEventListener('pointerup', this.pointerUp);\n      element.style.cursor = 'grab';\n    }\n\n    public destroy(element: HTMLElement) {\n      element.removeEventListener('pointerdown', this.pointerDown);\n      document.removeEventListener('pointermove', this.pointerMove);\n      document.removeEventListener('pointerup', this.pointerUp);\n    }\n\n    private resetInitialPoint(ev: PointerEvent) {\n      this.initialPoint = { x: ev.screenX, y: ev.screenY };\n    }\n\n    private pointerDown(ev: PointerEvent) {\n      if (!enabled) return;\n      this.moving = true;\n      this.resetInitialPoint(ev);\n      const scroll = state.get('config.scroll');\n      this.initialDataIndex = { x: scroll.horizontal.dataIndex || 0, y: scroll.vertical.dataIndex || 0 };\n    }\n\n    private pointerUp(ev: PointerEvent) {\n      if (!enabled) return;\n      if (this.moving) {\n        this.moving = false;\n      }\n    }\n\n    private handleHorizontalMovement(diff: Point, ev: PointerEvent) {\n      const time = state.get('$data.chart.time');\n      if (diff.x > 0) {\n        // go backward - move dates forward\n        if (this.initialDataIndex.x === 0) {\n          return this.resetInitialPoint(ev);\n        }\n        const allDates = time.allDates[time.level];\n        let i = this.initialDataIndex.x - 1;\n        let width = 0;\n        for (; i > 0; i--) {\n          const date = allDates[i];\n          width += date.width;\n          if (width >= diff.x) break;\n        }\n        api.scrollToTime(allDates[i].leftGlobal, false);\n      } else if (diff.x < 0) {\n        // go forward - move dates backward\n        let i = this.initialDataIndex.x;\n        const hScroll = state.get('config.scroll.horizontal') as ScrollTypeHorizontal;\n        const allDates = time.allDates[time.level];\n        if (i - 1 >= allDates.length - hScroll.lastPageCount) {\n          return this.resetInitialPoint(ev);\n        }\n        let width = 0;\n        for (let len = allDates.length; i < len; i++) {\n          const date = allDates[i];\n          width += date.width;\n          if (-width <= diff.x) break;\n        }\n        if (i - 1 >= allDates.length - hScroll.lastPageCount) {\n          return;\n        }\n        api.scrollToTime(allDates[i].leftGlobal, false);\n      }\n    }\n\n    private pointerMove(ev: PointerEvent) {\n      if (!enabled || !this.moving) return;\n      const diffX = ev.screenX - this.initialPoint.x;\n      const diffY = ev.screenY - this.initialPoint.y;\n      const diff: Point = { x: diffX, y: diffY };\n      this.handleHorizontalMovement(diff, ev);\n    }\n  }\n\n  return function initialize(vidoInstance) {\n    vido = vidoInstance;\n    api = vido.api;\n    state = vido.state;\n    state.update('config.plugin.CalendarScroll', options);\n    state.subscribe('config.plugin.CalendarScroll.enabled', (value) => (enabled = value));\n    state.update('config.actions.chart-calendar', (chartActions) => {\n      chartActions.push(ChartAction);\n      return chartActions;\n    });\n  };\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n    constructor(result, element) {\n        this.parts = [];\n        this.element = element;\n        const nodesToRemove = [];\n        const stack = [];\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(element.content, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        // Keeps track of the last index associated with a part. We try to delete\n        // unnecessary nodes, but we never want to associate two different parts\n        // to the same index. They must have a constant node between.\n        let lastPartIndex = 0;\n        let index = -1;\n        let partIndex = 0;\n        const { strings, values: { length } } = result;\n        while (partIndex < length) {\n            const node = walker.nextNode();\n            if (node === null) {\n                // We've exhausted the content inside a nested template element.\n                // Because we still have parts (the outer for-loop), we know:\n                // - There is a template in the stack\n                // - The walker will find a nextNode outside the template\n                walker.currentNode = stack.pop();\n                continue;\n            }\n            index++;\n            if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n                if (node.hasAttributes()) {\n                    const attributes = node.attributes;\n                    const { length } = attributes;\n                    // Per\n                    // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n                    // attributes are not guaranteed to be returned in document order.\n                    // In particular, Edge/IE can return them out of order, so we cannot\n                    // assume a correspondence between part index and attribute index.\n                    let count = 0;\n                    for (let i = 0; i < length; i++) {\n                        if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n                            count++;\n                        }\n                    }\n                    while (count-- > 0) {\n                        // Get the template literal section leading up to the first\n                        // expression in this attribute\n                        const stringForPart = strings[partIndex];\n                        // Find the attribute name\n                        const name = lastAttributeNameRegex.exec(stringForPart)[2];\n                        // Find the corresponding attribute\n                        // All bound attributes have had a suffix added in\n                        // TemplateResult#getHTML to opt out of special attribute\n                        // handling. To look up the attribute value we also need to add\n                        // the suffix.\n                        const attributeLookupName = name.toLowerCase() + boundAttributeSuffix;\n                        const attributeValue = node.getAttribute(attributeLookupName);\n                        node.removeAttribute(attributeLookupName);\n                        const statics = attributeValue.split(markerRegex);\n                        this.parts.push({\n                            type: 'attribute',\n                            index,\n                            name,\n                            strings: statics,\n                            sanitizer: undefined\n                        });\n                        partIndex += statics.length - 1;\n                    }\n                }\n                if (node.tagName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n            }\n            else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n                const data = node.data;\n                if (data.indexOf(marker) >= 0) {\n                    const parent = node.parentNode;\n                    const strings = data.split(markerRegex);\n                    const lastIndex = strings.length - 1;\n                    // Generate a new text node for each literal section\n                    // These nodes are also used as the markers for node parts\n                    for (let i = 0; i < lastIndex; i++) {\n                        let insert;\n                        let s = strings[i];\n                        if (s === '') {\n                            insert = createMarker();\n                        }\n                        else {\n                            const match = lastAttributeNameRegex.exec(s);\n                            if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                                s = s.slice(0, match.index) + match[1] +\n                                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n                            }\n                            insert = document.createTextNode(s);\n                        }\n                        parent.insertBefore(insert, node);\n                        this.parts.push({ type: 'node', index: ++index });\n                    }\n                    // If there's no text, we must insert a comment to mark our place.\n                    // Else, we can trust it will stick around after cloning.\n                    if (strings[lastIndex] === '') {\n                        parent.insertBefore(createMarker(), node);\n                        nodesToRemove.push(node);\n                    }\n                    else {\n                        node.data = strings[lastIndex];\n                    }\n                    // We have a part for each match found\n                    partIndex += lastIndex;\n                }\n            }\n            else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n                if (node.data === marker) {\n                    const parent = node.parentNode;\n                    // Add a new marker node to be the startNode of the Part if any of\n                    // the following are true:\n                    //  * We don't have a previousSibling\n                    //  * The previousSibling is already the start of a previous part\n                    if (node.previousSibling === null || index === lastPartIndex) {\n                        index++;\n                        parent.insertBefore(createMarker(), node);\n                    }\n                    lastPartIndex = index;\n                    this.parts.push({ type: 'node', index });\n                    // If we don't have a nextSibling, keep this node so we have an end.\n                    // Else, we can remove it to save future costs.\n                    if (node.nextSibling === null) {\n                        node.data = '';\n                    }\n                    else {\n                        nodesToRemove.push(node);\n                        index--;\n                    }\n                    partIndex++;\n                }\n                else {\n                    let i = -1;\n                    while ((i = node.data.indexOf(marker, i + 1)) !== -1) {\n                        // Comment node has a binding marker inside, make an inactive part\n                        // The binding won't work, but subsequent bindings will\n                        // TODO (justinfagnani): consider whether it's even worth it to\n                        // make bindings in comments work\n                        this.parts.push({ type: 'node', index: -1 });\n                        partIndex++;\n                    }\n                }\n            }\n        }\n        // Remove text binding nodes after the walk to not disturb the TreeWalker\n        for (const n of nodesToRemove) {\n            n.parentNode.removeChild(n);\n        }\n    }\n}\nconst endsWith = (str, suffix) => {\n    const index = str.length - suffix.length;\n    return index >= 0 && str.slice(index) === suffix;\n};\nexport const isTemplatePartActive = (part) => part.index !== -1;\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst markerNode = document.createComment('');\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => markerNode.cloneNode();\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex = \n// eslint-disable-next-line no-control-regex\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n//# sourceMappingURL=template.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * @module lit-html\n */\nimport { reparentNodes } from './dom.js';\nimport { boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker } from './template.js';\nlet policy;\n/**\n * Turns the value to trusted HTML. If the application uses Trusted Types the\n * value is transformed into TrustedHTML, which can be assigned to execution\n * sink. If the application doesn't use Trusted Types, the return value is the\n * same as the argument.\n */\nfunction convertConstantTemplateStringToTrustedHTML(value) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const w = window;\n    // TrustedTypes have been renamed to trustedTypes\n    // (https://github.com/WICG/trusted-types/issues/177)\n    const trustedTypes = (w.trustedTypes || w.TrustedTypes);\n    if (trustedTypes && !policy) {\n        policy = trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\n    }\n    return policy ? policy.createHTML(value) : value;\n}\nconst commentMarker = ` ${marker} `;\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst emptyTemplateNode = document.createElement('template');\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n    constructor(strings, values, type, processor) {\n        this.strings = strings;\n        this.values = values;\n        this.type = type;\n        this.processor = processor;\n    }\n    /**\n     * Returns a string of HTML used to create a `<template>` element.\n     */\n    getHTML() {\n        const l = this.strings.length - 1;\n        let html = '';\n        let isCommentBinding = false;\n        for (let i = 0; i < l; i++) {\n            const s = this.strings[i];\n            // For each binding we want to determine the kind of marker to insert\n            // into the template source before it's parsed by the browser's HTML\n            // parser. The marker type is based on whether the expression is in an\n            // attribute, text, or comment position.\n            //   * For node-position bindings we insert a comment with the marker\n            //     sentinel as its text content, like <!--{{lit-guid}}-->.\n            //   * For attribute bindings we insert just the marker sentinel for the\n            //     first binding, so that we support unquoted attribute bindings.\n            //     Subsequent bindings can use a comment marker because multi-binding\n            //     attributes must be quoted.\n            //   * For comment bindings we insert just the marker sentinel so we don't\n            //     close the comment.\n            //\n            // The following code scans the template source, but is *not* an HTML\n            // parser. We don't need to track the tree structure of the HTML, only\n            // whether a binding is inside a comment, and if not, if it appears to be\n            // the first binding in an attribute.\n            const commentOpen = s.lastIndexOf('<!--');\n            // We're in comment position if we have a comment open with no following\n            // comment close. Because <-- can appear in an attribute value there can\n            // be false positives.\n            isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n                s.indexOf('-->', commentOpen + 1) === -1;\n            // Check to see if we have an attribute-like sequence preceding the\n            // expression. This can match \"name=value\" like structures in text,\n            // comments, and attribute values, so there can be false-positives.\n            const attributeMatch = lastAttributeNameRegex.exec(s);\n            if (attributeMatch === null) {\n                // We're only in this branch if we don't have a attribute-like\n                // preceding sequence. For comments, this guards against unusual\n                // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n                // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n                // below.\n                html += s + (isCommentBinding ? commentMarker : nodeMarker);\n            }\n            else {\n                // For attributes we use just a marker sentinel, and also append a\n                // $lit$ suffix to the name to opt-out of attribute-specific parsing\n                // that IE and Edge do for style and certain SVG attributes.\n                html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n                    attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n                    marker;\n            }\n        }\n        html += this.strings[l];\n        return html;\n    }\n    getTemplateElement() {\n        const template = emptyTemplateNode.cloneNode();\n        // this is secure because `this.strings` is a TemplateStringsArray.\n        // TODO: validate this when\n        // https://github.com/tc39/proposal-array-is-template-object is implemented.\n        template.innerHTML =\n            convertConstantTemplateStringToTrustedHTML(this.getHTML());\n        return template;\n    }\n}\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n    getHTML() {\n        return `<svg>${super.getHTML()}</svg>`;\n    }\n    getTemplateElement() {\n        const template = super.getTemplateElement();\n        const content = template.content;\n        const svgElement = content.firstChild;\n        content.removeChild(svgElement);\n        reparentNodes(content, svgElement.firstChild);\n        return template;\n    }\n}\n//# sourceMappingURL=template-result.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * @module lit-html\n */\nimport { isDirective } from './directive.js';\nimport { removeNodes } from './dom.js';\nimport { noChange, nothing } from './part.js';\nimport { TemplateInstance } from './template-instance.js';\nimport { TemplateResult } from './template-result.js';\nimport { createMarker } from './template.js';\nexport const isPrimitive = (value) => {\n    return (value === null ||\n        !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value) => {\n    return Array.isArray(value) ||\n        // tslint:disable-next-line: no-any\n        !!(value && value[Symbol.iterator]);\n};\nconst identityFunction = (value) => value;\nconst noopSanitizer = (_node, _name, _type) => identityFunction;\n/**\n * A global callback used to get a sanitizer for a given field.\n */\nexport let sanitizerFactory = noopSanitizer;\n/** Sets the global sanitizer factory. */\nexport const setSanitizerFactory = (newSanitizer) => {\n    if (sanitizerFactory !== noopSanitizer) {\n        throw new Error(`Attempted to overwrite existing lit-html security policy.` +\n            ` setSanitizeDOMValueFactory should be called at most once.`);\n    }\n    sanitizerFactory = newSanitizer;\n};\n/**\n * Only used in internal tests, not a part of the public API.\n * The name and implementation may change at any time.\n */\nexport const __testOnlyClearSanitizerFactoryDoNotCallOrElse = () => {\n    sanitizerFactory = noopSanitizer;\n};\n/**\n * Used to clone text node instead of each time creating new one which is slower\n */\nconst emptyTextNode = document.createTextNode('');\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attribute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n    constructor(element, name, strings, \n    // Next breaking change, consider making this param required.\n    templatePart, kind = 'attribute') {\n        this.dirty = true;\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n        this.parts = [];\n        let sanitizer = templatePart && templatePart.sanitizer;\n        if (sanitizer === undefined) {\n            sanitizer = sanitizerFactory(element, name, kind);\n            if (templatePart !== undefined) {\n                templatePart.sanitizer = sanitizer;\n            }\n        }\n        this.sanitizer = sanitizer;\n        for (let i = 0; i < strings.length - 1; i++) {\n            this.parts[i] = this._createPart();\n        }\n    }\n    /**\n     * Creates a single part. Override this to create a differnt type of part.\n     */\n    _createPart() {\n        return new AttributePart(this);\n    }\n    _getValue() {\n        const strings = this.strings;\n        const parts = this.parts;\n        const l = strings.length - 1;\n        // If we're assigning an attribute via syntax like:\n        //    attr=\"${foo}\"  or  attr=${foo}\n        // but not\n        //    attr=\"${foo} ${bar}\" or attr=\"${foo} baz\"\n        // then we don't want to coerce the attribute value into one long\n        // string. Instead we want to just return the value itself directly,\n        // so that sanitizeDOMValue can get the actual value rather than\n        // String(value)\n        // The exception is if v is an array, in which case we do want to smash\n        // it together into a string without calling String() on the array.\n        //\n        // This also allows trusted values (when using TrustedTypes) being\n        // assigned to DOM sinks without being stringified in the process.\n        if (l === 1 && strings[0] === '' && strings[1] === '' &&\n            parts[0] !== undefined) {\n            const v = parts[0].value;\n            if (!isIterable(v)) {\n                return v;\n            }\n        }\n        let text = '';\n        for (let i = 0; i < l; i++) {\n            text += strings[i];\n            const part = parts[i];\n            if (part !== undefined) {\n                const v = part.value;\n                if (isPrimitive(v) || !isIterable(v)) {\n                    text += typeof v === 'string' ? v : String(v);\n                }\n                else {\n                    for (const t of v) {\n                        text += typeof t === 'string' ? t : String(t);\n                    }\n                }\n            }\n        }\n        text += strings[l];\n        return text;\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            let value = this._getValue();\n            value = this.sanitizer(value);\n            if (typeof value === 'symbol') {\n                // Native Symbols throw if they're coerced to string.\n                value = String(value);\n            }\n            this.element.setAttribute(this.name, value);\n        }\n    }\n}\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart {\n    constructor(committer) {\n        this.value = undefined;\n        this.committer = committer;\n    }\n    setValue(value) {\n        if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n            this.value = value;\n            // If the value is a not a directive, dirty the committer so that it'll\n            // call setAttribute. If the value is a directive, it'll dirty the\n            // committer if it calls setValue().\n            if (!isDirective(value)) {\n                this.committer.dirty = true;\n            }\n        }\n    }\n    commit() {\n        while (isDirective(this.value)) {\n            const directive = this.value;\n            this.value = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.value === noChange) {\n            return;\n        }\n        this.committer.commit();\n    }\n}\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart {\n    constructor(options, templatePart) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        /**\n         * The sanitizer to use when writing text contents into this NodePart.\n         *\n         * We have to initialize this here rather than at the template literal level\n         * because the security of text content depends on the context into which\n         * it's written. e.g. the same text has different security requirements\n         * when a child of a <script> vs a <style> vs a <div>.\n         */\n        this.textSanitizer = undefined;\n        this.options = options;\n        this.templatePart = templatePart;\n    }\n    /**\n     * Appends this part into a container.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendInto(container) {\n        this.startNode = container.appendChild(createMarker());\n        this.endNode = container.appendChild(createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n     * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n     * such as those that appear in a literal section of a template.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterNode(ref) {\n        this.startNode = ref;\n        this.endNode = ref.nextSibling;\n    }\n    /**\n     * Appends this part into a parent part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendIntoPart(part) {\n        part.__insert(this.startNode = createMarker());\n        part.__insert(this.endNode = createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterPart(ref) {\n        ref.__insert(this.startNode = createMarker());\n        this.endNode = ref.endNode;\n        ref.endNode = this.startNode;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        const value = this.__pendingValue;\n        if (value === noChange) {\n            return;\n        }\n        if (isPrimitive(value)) {\n            if (value !== this.value) {\n                this.__commitText(value);\n            }\n        }\n        else if (value instanceof TemplateResult) {\n            this.__commitTemplateResult(value);\n        }\n        else if (value instanceof Node) {\n            this.__commitNode(value);\n        }\n        else if (isIterable(value)) {\n            this.__commitIterable(value);\n        }\n        else if (value === nothing) {\n            this.value = nothing;\n            this.clear();\n        }\n        else {\n            // Fallback, will render the string representation\n            this.__commitText(value);\n        }\n    }\n    __insert(node) {\n        this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n    __commitNode(value) {\n        if (this.value === value) {\n            return;\n        }\n        this.clear();\n        this.__insert(value);\n        this.value = value;\n    }\n    __commitText(value) {\n        const node = this.startNode.nextSibling;\n        value = value == null ? '' : value;\n        if (node === this.endNode.previousSibling &&\n            node.nodeType === 3 /* Node.TEXT_NODE */) {\n            // If we only have a single text node between the markers, we can just\n            // set its value, rather than replacing it.\n            if (this.textSanitizer === undefined) {\n                this.textSanitizer = sanitizerFactory(node, 'data', 'property');\n            }\n            const renderedValue = this.textSanitizer(value);\n            node.data = typeof renderedValue === 'string' ?\n                renderedValue :\n                String(renderedValue);\n        }\n        else {\n            // When setting text content, for security purposes it matters a lot what\n            // the parent is. For example, <style> and <script> need to be handled\n            // with care, while <span> does not. So first we need to put a text node\n            // into the document, then we can sanitize its contentx.\n            const textNode = emptyTextNode.cloneNode();\n            this.__commitNode(textNode);\n            if (this.textSanitizer === undefined) {\n                this.textSanitizer = sanitizerFactory(textNode, 'data', 'property');\n            }\n            const renderedValue = this.textSanitizer(value);\n            textNode.data = typeof renderedValue === 'string' ? renderedValue :\n                String(renderedValue);\n        }\n        this.value = value;\n    }\n    __commitTemplateResult(value) {\n        const template = this.options.templateFactory(value);\n        if (this.value instanceof TemplateInstance &&\n            this.value.template === template) {\n            this.value.update(value.values);\n        }\n        else {\n            // `value` is a template result that was constructed without knowledge of\n            // the parent we're about to write it into. sanitizeDOMValue hasn't been\n            // made aware of this relationship, and for scripts and style specifically\n            // this is known to be unsafe. So in the case where the user is in\n            // \"secure mode\" (i.e. when there's a sanitizeDOMValue set), we just want\n            // to forbid this because it's not a use case we want to support.\n            // We only apply this policy when sanitizerFactory has been set to\n            // prevent this from being a breaking change to the library.\n            const parent = this.endNode.parentNode;\n            if (sanitizerFactory !== noopSanitizer && parent.nodeName === 'STYLE' ||\n                parent.nodeName === 'SCRIPT') {\n                this.__commitText('/* lit-html will not write ' +\n                    'TemplateResults to scripts and styles */');\n                return;\n            }\n            // Make sure we propagate the template processor from the TemplateResult\n            // so that we use its syntax extension, etc. The template factory comes\n            // from the render function options so that it can control template\n            // caching and preprocessing.\n            const instance = new TemplateInstance(template, value.processor, this.options);\n            const fragment = instance._clone();\n            instance.update(value.values);\n            this.__commitNode(fragment);\n            this.value = instance;\n        }\n    }\n    __commitIterable(value) {\n        // For an Iterable, we create a new InstancePart per item, then set its\n        // value to the item. This is a little bit of overhead for every item in\n        // an Iterable, but it lets us recurse easily and efficiently update Arrays\n        // of TemplateResults that will be commonly returned from expressions like:\n        // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n        // If _value is an array, then the previous render was of an\n        // iterable and _value will contain the NodeParts from the previous\n        // render. If _value is not an array, clear this part and make a new\n        // array for NodeParts.\n        if (!Array.isArray(this.value)) {\n            this.value = [];\n            this.clear();\n        }\n        // Lets us keep track of how many items we stamped so we can clear leftover\n        // items from a previous render\n        const itemParts = this.value;\n        let partIndex = 0;\n        let itemPart;\n        for (const item of value) {\n            // Try to reuse an existing part\n            itemPart = itemParts[partIndex];\n            // If no existing part, create a new one\n            if (itemPart === undefined) {\n                itemPart = new NodePart(this.options, this.templatePart);\n                itemParts.push(itemPart);\n                if (partIndex === 0) {\n                    itemPart.appendIntoPart(this);\n                }\n                else {\n                    itemPart.insertAfterPart(itemParts[partIndex - 1]);\n                }\n            }\n            itemPart.setValue(item);\n            itemPart.commit();\n            partIndex++;\n        }\n        if (partIndex < itemParts.length) {\n            // Truncate the parts array so _value reflects the current state\n            itemParts.length = partIndex;\n            this.clear(itemPart && itemPart.endNode);\n        }\n    }\n    clear(startNode = this.startNode) {\n        removeNodes(this.startNode.parentNode, startNode.nextSibling, this.endNode);\n    }\n}\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart {\n    constructor(element, name, strings) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n            throw new Error('Boolean attributes can only contain a single expression');\n        }\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const value = !!this.__pendingValue;\n        if (this.value !== value) {\n            if (value) {\n                this.element.setAttribute(this.name, '');\n            }\n            else {\n                this.element.removeAttribute(this.name);\n            }\n            this.value = value;\n        }\n        this.__pendingValue = noChange;\n    }\n}\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n    constructor(element, name, strings, \n    // Next breaking change, consider making this param required.\n    templatePart) {\n        super(element, name, strings, templatePart, 'property');\n        this.single =\n            (strings.length === 2 && strings[0] === '' && strings[1] === '');\n    }\n    _createPart() {\n        return new PropertyPart(this);\n    }\n    _getValue() {\n        if (this.single) {\n            return this.parts[0].value;\n        }\n        return super._getValue();\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            let value = this._getValue();\n            value = this.sanitizer(value);\n            // tslint:disable-next-line: no-any\n            this.element[this.name] = value;\n        }\n    }\n}\nexport class PropertyPart extends AttributePart {\n}\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // noop\n    }\n})();\nexport class EventPart {\n    constructor(element, eventName, eventContext) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.element = element;\n        this.eventName = eventName;\n        this.eventContext = eventContext;\n        this.__boundHandleEvent = (e) => this.handleEvent(e);\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const newListener = this.__pendingValue;\n        const oldListener = this.value;\n        const shouldRemoveListener = newListener == null ||\n            oldListener != null &&\n                (newListener.capture !== oldListener.capture ||\n                    newListener.once !== oldListener.once ||\n                    newListener.passive !== oldListener.passive);\n        const shouldAddListener = newListener != null && (oldListener == null || shouldRemoveListener);\n        if (shouldRemoveListener) {\n            this.element.removeEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        if (shouldAddListener) {\n            this.__options = getOptions(newListener);\n            this.element.addEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        this.value = newListener;\n        this.__pendingValue = noChange;\n    }\n    handleEvent(event) {\n        if (typeof this.value === 'function') {\n            this.value.call(this.eventContext || this.element, event);\n        }\n        else {\n            this.value.handleEvent(event);\n        }\n    }\n}\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o) => o &&\n    (eventOptionsSupported ?\n        { capture: o.capture, passive: o.passive, once: o.once } :\n        o.capture);\n//# sourceMappingURL=parts.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport { defaultTemplateProcessor } from './lib/default-template-processor.js';\nimport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { DefaultTemplateProcessor, defaultTemplateProcessor } from './lib/default-template-processor.js';\nexport { directive, Directive, isDirective } from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport { removeNodes, reparentNodes } from './lib/dom.js';\nexport { noChange, nothing } from './lib/part.js';\nexport { AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart, sanitizerFactory, setSanitizerFactory } from './lib/parts.js';\nexport { parts, render } from './lib/render.js';\nexport { templateCaches, templateFactory } from './lib/template-factory.js';\nexport { TemplateInstance } from './lib/template-instance.js';\nexport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { createMarker, isTemplatePartActive, Template } from './lib/template.js';\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nconst isBrowser = typeof window !== 'undefined';\nif (isBrowser) {\n    // If we run in the browser set version\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.7');\n}\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings, ...values) => new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings, ...values) => new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n//# sourceMappingURL=lit-html.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createMarker, directive, NodePart } from '../lit-html.js';\n/**\n * A directive that renders the items of an async iterable[1], appending new\n * values after previous values, similar to the built-in support for iterables.\n *\n * Async iterables are objects with a [Symbol.asyncIterator] method, which\n * returns an iterator who's `next()` method returns a Promise. When a new\n * value is available, the Promise resolves and the value is appended to the\n * Part controlled by the directive. If another value other than this\n * directive has been set on the Part, the iterable will no longer be listened\n * to and new values won't be written to the Part.\n *\n * [1]: https://github.com/tc39/proposal-async-iteration\n *\n * @param value An async iterable\n * @param mapper An optional function that maps from (value, index) to another\n *     value. Useful for generating templates for each item in the iterable.\n */\nexport const asyncAppend = directive((value, mapper) => async (part) => {\n    var e_1, _a;\n    if (!(part instanceof NodePart)) {\n        throw new Error('asyncAppend can only be used in text bindings');\n    }\n    // If we've already set up this particular iterable, we don't need\n    // to do anything.\n    if (value === part.value) {\n        return;\n    }\n    part.value = value;\n    // We keep track of item Parts across iterations, so that we can\n    // share marker nodes between consecutive Parts.\n    let itemPart;\n    let i = 0;\n    try {\n        for (var value_1 = __asyncValues(value), value_1_1; value_1_1 = await value_1.next(), !value_1_1.done;) {\n            let v = value_1_1.value;\n            // Check to make sure that value is the still the current value of\n            // the part, and if not bail because a new value owns this part\n            if (part.value !== value) {\n                break;\n            }\n            // When we get the first value, clear the part. This lets the\n            // previous value display until we can replace it.\n            if (i === 0) {\n                part.clear();\n            }\n            // As a convenience, because functional-programming-style\n            // transforms of iterables and async iterables requires a library,\n            // we accept a mapper function. This is especially convenient for\n            // rendering a template for each item.\n            if (mapper !== undefined) {\n                // This is safe because T must otherwise be treated as unknown by\n                // the rest of the system.\n                v = mapper(v, i);\n            }\n            // Like with sync iterables, each item induces a Part, so we need\n            // to keep track of start and end nodes for the Part.\n            // Note: Because these Parts are not updatable like with a sync\n            // iterable (if we render a new value, we always clear), it may\n            // be possible to optimize away the Parts and just re-use the\n            // Part.setValue() logic.\n            let itemStartNode = part.startNode;\n            // Check to see if we have a previous item and Part\n            if (itemPart !== undefined) {\n                // Create a new node to separate the previous and next Parts\n                itemStartNode = createMarker();\n                // itemPart is currently the Part for the previous item. Set\n                // it's endNode to the node we'll use for the next Part's\n                // startNode.\n                itemPart.endNode = itemStartNode;\n                part.endNode.parentNode.insertBefore(itemStartNode, part.endNode);\n            }\n            itemPart = new NodePart(part.options, part.templatePart);\n            itemPart.insertAfterNode(itemStartNode);\n            itemPart.setValue(v);\n            itemPart.commit();\n            i++;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (value_1_1 && !value_1_1.done && (_a = value_1.return)) await _a.call(value_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n});\n//# sourceMappingURL=async-append.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { directive, NodePart } from '../lit-html.js';\n/**\n * A directive that renders the items of an async iterable[1], replacing\n * previous values with new values, so that only one value is ever rendered\n * at a time.\n *\n * Async iterables are objects with a [Symbol.asyncIterator] method, which\n * returns an iterator who's `next()` method returns a Promise. When a new\n * value is available, the Promise resolves and the value is rendered to the\n * Part controlled by the directive. If another value other than this\n * directive has been set on the Part, the iterable will no longer be listened\n * to and new values won't be written to the Part.\n *\n * [1]: https://github.com/tc39/proposal-async-iteration\n *\n * @param value An async iterable\n * @param mapper An optional function that maps from (value, index) to another\n *     value. Useful for generating templates for each item in the iterable.\n */\nexport const asyncReplace = directive((value, mapper) => async (part) => {\n    var e_1, _a;\n    if (!(part instanceof NodePart)) {\n        throw new Error('asyncReplace can only be used in text bindings');\n    }\n    // If we've already set up this particular iterable, we don't need\n    // to do anything.\n    if (value === part.value) {\n        return;\n    }\n    // We nest a new part to keep track of previous item values separately\n    // of the iterable as a value itself.\n    const itemPart = new NodePart(part.options, part.templatePart);\n    part.value = value;\n    let i = 0;\n    try {\n        for (var value_1 = __asyncValues(value), value_1_1; value_1_1 = await value_1.next(), !value_1_1.done;) {\n            let v = value_1_1.value;\n            // Check to make sure that value is the still the current value of\n            // the part, and if not bail because a new value owns this part\n            if (part.value !== value) {\n                break;\n            }\n            // When we get the first value, clear the part. This let's the\n            // previous value display until we can replace it.\n            if (i === 0) {\n                part.clear();\n                itemPart.appendIntoPart(part);\n            }\n            // As a convenience, because functional-programming-style\n            // transforms of iterables and async iterables requires a library,\n            // we accept a mapper function. This is especially convenient for\n            // rendering a template for each item.\n            if (mapper !== undefined) {\n                // This is safe because T must otherwise be treated as unknown by\n                // the rest of the system.\n                v = mapper(v, i);\n            }\n            itemPart.setValue(v);\n            itemPart.commit();\n            i++;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (value_1_1 && !value_1_1.done && (_a = value_1.return)) await _a.call(value_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n});\n//# sourceMappingURL=async-replace.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isPrimitive } from '../lib/parts.js';\nimport { directive, NodePart } from '../lit-html.js';\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap();\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst emptyTemplateNode = document.createElement('template');\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value) => (part) => {\n    if (!(part instanceof NodePart)) {\n        throw new Error('unsafeHTML can only be used in text bindings');\n    }\n    const previousValue = previousValues.get(part);\n    if (previousValue !== undefined && isPrimitive(value) &&\n        value === previousValue.value && part.value === previousValue.fragment) {\n        return;\n    }\n    const template = emptyTemplateNode.cloneNode();\n    template.innerHTML = value; // innerHTML casts to string internally\n    const fragment = document.importNode(template.content, true);\n    part.setValue(fragment);\n    previousValues.set(part, { value, fragment });\n});\n//# sourceMappingURL=unsafe-html.js.map","class Action {\n  public isAction: boolean = true;\n}\nAction.prototype.isAction = true;\nexport default Action;\n","import Action from './Action';\nexport interface Options {\n  element?: HTMLElement;\n  axis?: string;\n  threshold?: number;\n  onDown?: (data) => void;\n  onMove?: (data) => void;\n  onUp?: (data) => void;\n  onWheel?: (data) => void;\n}\n\nconst defaultOptions = {\n  element: document.createTextNode(''),\n  axis: 'xy',\n  threshold: 10,\n  onDown(data) {},\n  onMove(data) {},\n  onUp(data) {},\n  onWheel(data) {}\n};\n\nconst pointerEventsExists = typeof PointerEvent !== 'undefined';\nlet id = 0;\n\nexport default class PointerAction extends Action {\n  private id: number;\n  private moving: string = '';\n  private initialX: number = 0;\n  private initialY: number = 0;\n  private lastY: number = 0;\n  private lastX: number = 0;\n  private element: HTMLElement;\n  private options: Options;\n\n  constructor(element, data) {\n    super();\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n    this.element = element;\n    this.id = ++id;\n    this.options = { ...defaultOptions, ...data.pointerOptions } as Options;\n    if (pointerEventsExists) {\n      element.addEventListener('pointerdown', this.onPointerDown);\n      document.addEventListener('pointermove', this.onPointerMove);\n      document.addEventListener('pointerup', this.onPointerUp);\n    } else {\n      element.addEventListener('touchstart', this.onPointerDown);\n      document.addEventListener('touchmove', this.onPointerMove, { passive: false });\n      document.addEventListener('touchend', this.onPointerUp);\n      document.addEventListener('touchcancel', this.onPointerUp);\n      element.addEventListener('mousedown', this.onPointerDown);\n      document.addEventListener('mousemove', this.onPointerMove, { passive: false });\n      document.addEventListener('mouseup', this.onPointerUp);\n    }\n  }\n\n  private normalizeMouseWheelEvent(event) {\n    // @ts-ignore\n    let x = event.deltaX || 0;\n    // @ts-ignore\n    let y = event.deltaY || 0;\n    // @ts-ignore\n    let z = event.deltaZ || 0;\n    // @ts-ignore\n    const mode = event.deltaMode;\n    // @ts-ignore\n    const lineHeight = parseInt(getComputedStyle(event.target).getPropertyValue('line-height'));\n    let scale = 1;\n    switch (mode) {\n      case 1:\n        scale = lineHeight;\n        break;\n      case 2:\n        // @ts-ignore\n        scale = window.height;\n        break;\n    }\n    x *= scale;\n    y *= scale;\n    z *= scale;\n    return { x, y, z, event };\n  }\n\n  public onWheel(event) {\n    const normalized = this.normalizeMouseWheelEvent(event);\n    this.options.onWheel(normalized);\n  }\n\n  private normalizePointerEvent(event) {\n    let result = { x: 0, y: 0, pageX: 0, pageY: 0, clientX: 0, clientY: 0, screenX: 0, screenY: 0, event };\n    switch (event.type) {\n      case 'wheel':\n        const wheel = this.normalizeMouseWheelEvent(event);\n        result.x = wheel.x;\n        result.y = wheel.y;\n        result.pageX = result.x;\n        result.pageY = result.y;\n        result.screenX = result.x;\n        result.screenY = result.y;\n        result.clientX = result.x;\n        result.clientY = result.y;\n        break;\n      case 'touchstart':\n      case 'touchmove':\n      case 'touchend':\n      case 'touchcancel':\n        result.x = event.changedTouches[0].screenX;\n        result.y = event.changedTouches[0].screenY;\n        result.pageX = event.changedTouches[0].pageX;\n        result.pageY = event.changedTouches[0].pageY;\n        result.screenX = event.changedTouches[0].screenX;\n        result.screenY = event.changedTouches[0].screenY;\n        result.clientX = event.changedTouches[0].clientX;\n        result.clientY = event.changedTouches[0].clientY;\n        break;\n      default:\n        result.x = event.x;\n        result.y = event.y;\n        result.pageX = event.pageX;\n        result.pageY = event.pageY;\n        result.screenX = event.screenX;\n        result.screenY = event.screenY;\n        result.clientX = event.clientX;\n        result.clientY = event.clientY;\n        break;\n    }\n    return result;\n  }\n\n  private onPointerDown(event) {\n    if (event.type === 'mousedown' && event.button !== 0) return;\n    this.moving = 'xy';\n    const normalized = this.normalizePointerEvent(event);\n    this.lastX = normalized.x;\n    this.lastY = normalized.y;\n    this.initialX = normalized.x;\n    this.initialY = normalized.y;\n    this.options.onDown(normalized);\n  }\n\n  private handleX(normalized) {\n    let movementX = normalized.x - this.lastX;\n    this.lastY = normalized.y;\n    this.lastX = normalized.x;\n    return movementX;\n  }\n\n  private handleY(normalized) {\n    let movementY = normalized.y - this.lastY;\n    this.lastY = normalized.y;\n    this.lastX = normalized.x;\n    return movementY;\n  }\n\n  private onPointerMove(event) {\n    if (this.moving === '' || (event.type === 'mousemove' && event.button !== 0)) return;\n    const normalized = this.normalizePointerEvent(event);\n    if (this.options.axis === 'x|y') {\n      let movementX = 0,\n        movementY = 0;\n      if (\n        this.moving === 'x' ||\n        (this.moving === 'xy' && Math.abs(normalized.x - this.initialX) > this.options.threshold)\n      ) {\n        this.moving = 'x';\n        movementX = this.handleX(normalized);\n      }\n      if (\n        this.moving === 'y' ||\n        (this.moving === 'xy' && Math.abs(normalized.y - this.initialY) > this.options.threshold)\n      ) {\n        this.moving = 'y';\n        movementY = this.handleY(normalized);\n      }\n      this.options.onMove({\n        movementX,\n        movementY,\n        x: normalized.x,\n        y: normalized.y,\n        initialX: this.initialX,\n        initialY: this.initialY,\n        lastX: this.lastX,\n        lastY: this.lastY,\n        event\n      });\n    } else if (this.options.axis === 'xy') {\n      let movementX = 0,\n        movementY = 0;\n      if (Math.abs(normalized.x - this.initialX) > this.options.threshold) {\n        movementX = this.handleX(normalized);\n      }\n      if (Math.abs(normalized.y - this.initialY) > this.options.threshold) {\n        movementY = this.handleY(normalized);\n      }\n      this.options.onMove({\n        movementX,\n        movementY,\n        x: normalized.x,\n        y: normalized.y,\n        initialX: this.initialX,\n        initialY: this.initialY,\n        lastX: this.lastX,\n        lastY: this.lastY,\n        event\n      });\n    } else if (this.options.axis === 'x') {\n      if (\n        this.moving === 'x' ||\n        (this.moving === 'xy' && Math.abs(normalized.x - this.initialX) > this.options.threshold)\n      ) {\n        this.moving = 'x';\n        this.options.onMove({\n          movementX: this.handleX(normalized),\n          movementY: 0,\n          initialX: this.initialX,\n          initialY: this.initialY,\n          lastX: this.lastX,\n          lastY: this.lastY,\n          event\n        });\n      }\n    } else if (this.options.axis === 'y') {\n      let movementY = 0;\n      if (\n        this.moving === 'y' ||\n        (this.moving === 'xy' && Math.abs(normalized.y - this.initialY) > this.options.threshold)\n      ) {\n        this.moving = 'y';\n        movementY = this.handleY(normalized);\n      }\n      this.options.onMove({\n        movementX: 0,\n        movementY,\n        x: normalized.x,\n        y: normalized.y,\n        initialX: this.initialX,\n        initialY: this.initialY,\n        lastX: this.lastX,\n        lastY: this.lastY,\n        event\n      });\n    }\n  }\n\n  private onPointerUp(event) {\n    this.moving = '';\n    const normalized = this.normalizePointerEvent(event);\n    this.options.onUp({\n      movementX: 0,\n      movementY: 0,\n      x: normalized.x,\n      y: normalized.y,\n      initialX: this.initialX,\n      initialY: this.initialY,\n      lastX: this.lastX,\n      lastY: this.lastY,\n      event\n    });\n    this.lastY = 0;\n    this.lastX = 0;\n  }\n\n  public destroy(element) {\n    if (pointerEventsExists) {\n      element.removeEventListener('pointerdown', this.onPointerDown);\n      document.removeEventListener('pointermove', this.onPointerMove);\n      document.removeEventListener('pointerup', this.onPointerUp);\n    } else {\n      element.removeEventListener('mousedown', this.onPointerDown);\n      document.removeEventListener('mousemove', this.onPointerMove);\n      document.removeEventListener('mouseup', this.onPointerUp);\n      element.removeEventListener('touchstart', this.onPointerDown);\n      document.removeEventListener('touchmove', this.onPointerMove);\n      document.removeEventListener('touchend', this.onPointerUp);\n      document.removeEventListener('touchcancel', this.onPointerUp);\n    }\n  }\n}\n","/**\n * Weekend highlight plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport { Action, vido } from '@neuronet.io/vido/vido';\nimport { Api } from '../api/api';\nimport { Vido } from '@src/gstc';\n\nexport interface Options {\n  weekdays?: number[];\n  className?: string;\n}\n\nexport function Plugin(options: Options = {}) {\n  const weekdays = options.weekdays || [6, 0];\n  let className;\n  let api: Api;\n  let enabled = true;\n\n  class WeekendHighlightAction extends Action {\n    constructor(element, data) {\n      super();\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    update(element, data) {\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    highlight(element, time) {\n      const hasClass = element.classList.contains(className);\n      if (!enabled) {\n        if (hasClass) {\n          element.classList.remove(className);\n        }\n        return;\n      }\n      const isWeekend = weekdays.includes(api.time.date(time).day());\n      if (!hasClass && isWeekend) {\n        element.classList.add(className);\n      } else if (hasClass && !isWeekend) {\n        element.classList.remove(className);\n      }\n    }\n  }\n\n  return function initialize(vidoInstance: Vido) {\n    api = vidoInstance.api;\n    className = options.className || api.getClass('chart-timeline-grid-row-cell') + '--weekend';\n    const destroy = vidoInstance.state.subscribe(\n      '$data.chart.time.format.period',\n      (period) => (enabled = period === 'day')\n    );\n    vidoInstance.state.update('config.actions.chart-timeline-grid-row-cell', (actions) => {\n      actions.push(WeekendHighlightAction);\n      return actions;\n    });\n    return function onDestroy() {\n      destroy();\n    };\n  };\n}\n","import * as TimelinePointer from './timeline-pointer.plugin';\nimport * as ItemHold from './item-hold.plugin';\nimport * as ItemMovement from './item-movement.plugin';\nimport * as ItemResizing from './item-resizing.plugin';\nimport * as Selection from './selection.plugin';\nimport * as CalendarScroll from './calendar-scroll.plugin';\nimport * as HighlightWeekends from './highlight-weekends.plugin';\n\nexport default { TimelinePointer, ItemHold, ItemMovement, ItemResizing, Selection, CalendarScroll, HighlightWeekends };\n"],"names":["Plugin","prepareOptions","pluginPath","generateEmptyData","this","__asyncValues","emptyTemplateNode","defaultOptions","ItemHold","ItemMovement","ItemResizing"],"mappings":"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"}