!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CalendarScroll=e()}(this,(function(){"use strict";const t={enabled:!0};return function(e=t){let i,n,o,r=e.enabled;class s{constructor(t){this.moving=!1,this.initialDataIndex={x:0,y:0},this.lastPos=0,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=i.schedule(this.pointerMove.bind(this)),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp),t.style.cursor="grab"}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}resetInitialPoint(t){this.initialPoint={x:t.screenX,y:t.screenY}}pointerDown(t){if(!r)return;this.moving=!0,this.resetInitialPoint(t);const e=o.get("config.scroll");this.initialDataIndex={x:e.horizontal.dataIndex||0,y:e.vertical.dataIndex||0}}pointerUp(t){r&&this.moving&&(this.moving=!1)}handleHorizontalMovement(t,e){const i=o.get("_internal.chart.time");if(t.x>0){if(0===this.initialDataIndex.x)return this.resetInitialPoint(e);const o=i.allDates[i.level];let r=this.initialDataIndex.x-1,s=0;for(;r>0;r--){if(s+=o[r].width,s>=t.x)break}n.scrollToTime(o[r].leftGlobal,!1)}else if(t.x<0){let r=this.initialDataIndex.x;const s=o.get("config.scroll.horizontal"),l=i.allDates[i.level];if(r-1>=l.length-s.lastPageCount)return this.resetInitialPoint(e);let a=0;for(let e=l.length;r<e;r++){if(a+=l[r].width,-a<=t.x)break}if(r-1>=l.length-s.lastPageCount)return;n.scrollToTime(l[r].leftGlobal,!1)}}pointerMove(t){if(!r||!this.moving)return;const e={x:t.screenX-this.initialPoint.x,y:t.screenY-this.initialPoint.y};this.handleHorizontalMovement(e,t)}}return function(t){i=t,n=i.api,o=i.state,o.update("config.plugin.CalendarScroll",e),o.subscribe("config.plugin.CalendarScroll.enabled",t=>r=t),o.update("config.actions.chart-calendar",t=>(t.push(s),t))}}}));
