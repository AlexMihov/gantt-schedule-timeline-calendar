{"version":3,"file":"Selection.plugin.js","sources":["../node_modules/raf-schd/dist/raf-schd.esm.js","../src/plugins/Selection.plugin.js"],"sourcesContent":["var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","/**\n * Selection plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   GPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport schedule from 'raf-schd';\nexport default function Selection(options = {}) {\n  let vido, state, api;\n  const defaultOptions = {\n    grid: false,\n    items: true,\n    rows: false,\n    horizontal: true,\n    vertical: true,\n    selecting() {},\n    deselecting() {},\n    selected() {},\n    deselected() {}\n  };\n  options = { ...defaultOptions, ...options };\n  let chartTimeline, top, left;\n  let selecting = { fromX: -1, fromY: -1, toX: -1, toY: -1, startX: -1, startY: -1, selecting: false };\n  const path = 'config.plugin.selection';\n  const rectClassName = 'gantt-schedule-timeline-caledar__plugin-selection-rect';\n  const rect = document.createElement('div');\n  rect.classList.add(rectClassName);\n  rect.style.visibility = 'hidden';\n  rect.style.left = '0px';\n  rect.style.top = '0px';\n  rect.style.width = '0px';\n  rect.style.height = '0px';\n  rect.style.background = 'rgba(0, 119, 192, 0.2)';\n  rect.style.border = '2px dashed rgba(0, 119, 192, 0.75)';\n  rect.style.position = 'absolute';\n  rect.style['user-select'] = 'none';\n  rect.style['pointer-events'] = 'none';\n  if (options.rectStyle) {\n    for (const styleProp in options.rectStyle) {\n      rect.style[styleProp] = options.rectStyle[styleProp];\n    }\n  }\n\n  /**\n   * Rect selection action\n   * @param {Element} element\n   * @param {object|any} data\n   * @returns {object} with update and destroy\n   */\n  function rectSelectionAction(element, data) {\n    let previousSelect;\n    chartTimeline = state.get('_internal.elements.chart-timeline');\n    if (!chartTimeline.querySelector('.' + rectClassName)) {\n      chartTimeline.insertAdjacentElement('beforeend', rect);\n      const bounding = chartTimeline.getBoundingClientRect();\n      left = bounding.left;\n      top = bounding.top;\n    }\n\n    /**\n     * Clear selection\n     */\n    function clearSelection() {\n      state.update(path, {\n        selecting: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        },\n        selected: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        }\n      });\n      state.update('_internal.chart.grid.rowsWithBlocks', rowsWithBlocks => {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            block.selected = false;\n            block.selecting = false;\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    /**\n     * Clone current selection state\n     * @param {object} currentSelect\n     * @returns {object} currentSelect cloned\n     */\n    function cloneSelection(currentSelect) {\n      const result = {};\n      result.selecting = { ...currentSelect.selecting };\n      result.selecting['chart-timeline-grid-rows'] = currentSelect.selecting['chart-timeline-grid-rows'].slice();\n      result.selecting['chart-timeline-grid-row-blocks'] = currentSelect.selecting[\n        'chart-timeline-grid-row-blocks'\n      ].slice();\n      result.selecting['chart-timeline-items-rows'] = currentSelect.selecting['chart-timeline-items-rows'].slice();\n      result.selecting['chart-timeline-items-row-items'] = currentSelect.selecting[\n        'chart-timeline-items-row-items'\n      ].slice();\n      result.selected = { ...currentSelect.selected };\n      result.selected['chart-timeline-grid-rows'] = currentSelect.selected['chart-timeline-grid-rows'].slice();\n      result.selected['chart-timeline-grid-row-blocks'] = currentSelect.selected[\n        'chart-timeline-grid-row-blocks'\n      ].slice();\n      result.selected['chart-timeline-items-rows'] = currentSelect.selected['chart-timeline-items-rows'].slice();\n      result.selected['chart-timeline-items-row-items'] = currentSelect.selected[\n        'chart-timeline-items-row-items'\n      ].slice();\n      return result;\n    }\n\n    /**\n     * Mouse down event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseDown(ev) {\n      if (ev.button !== 0) {\n        return;\n      }\n      selecting.selecting = true;\n      selecting.fromX = ev.x - left;\n      selecting.fromY = ev.y - top;\n      selecting.startX = selecting.fromX;\n      selecting.startY = selecting.fromY;\n      previousSelect = cloneSelection(state.get(path));\n      clearSelection();\n    }\n\n    /**\n     * Save and swap coordinates if needed\n     * @param {MouseEvent} ev\n     */\n    function saveAndSwapIfNeeded(ev) {\n      const currentX = ev.x - left;\n      const currentY = ev.y - top;\n      if (currentX <= selecting.startX) {\n        selecting.fromX = currentX;\n        selecting.toX = selecting.startX;\n      } else {\n        selecting.fromX = selecting.startX;\n        selecting.toX = currentX;\n      }\n      if (currentY <= selecting.startY) {\n        selecting.fromY = currentY;\n        selecting.toY = selecting.startY;\n      } else {\n        selecting.fromY = selecting.startY;\n        selecting.toY = currentY;\n      }\n    }\n\n    /**\n     * Is rectangle inside other rectangle ?\n     * @param {DOMRect} boundingRect\n     * @param {DOMRect} rectBoundingRect\n     * @returns {boolean}\n     */\n    function isInside(boundingRect, rectBoundingRect) {\n      let horizontal = false;\n      let vertical = false;\n      if (\n        (boundingRect.left >= rectBoundingRect.left && boundingRect.left <= rectBoundingRect.right) ||\n        (boundingRect.right >= rectBoundingRect.left && boundingRect.right <= rectBoundingRect.right) ||\n        (boundingRect.left <= rectBoundingRect.left && boundingRect.right >= rectBoundingRect.right)\n      ) {\n        horizontal = true;\n      }\n      if (\n        (boundingRect.top >= rectBoundingRect.top && boundingRect.top <= rectBoundingRect.bottom) ||\n        (boundingRect.bottom >= rectBoundingRect.top && boundingRect.bottom <= rectBoundingRect.bottom) ||\n        (boundingRect.top <= rectBoundingRect.top && boundingRect.bottom >= rectBoundingRect.bottom)\n      ) {\n        vertical = true;\n      }\n      return horizontal && vertical;\n    }\n\n    /**\n     * Get selecting elements\n     * @param {DOMRect} rectBoundingRect\n     * @param {Element[]} elements\n     * @param {string} type\n     * @returns {string[]}\n     */\n    function getSelecting(rectBoundingRect, elements, type) {\n      const selectingResult = [];\n      const all = elements[type + 's'];\n      const currentSelecting = state.get(`${path}.selecting.${type}s`);\n      for (const element of all) {\n        const boundingRect = element.getBoundingClientRect();\n        if (isInside(boundingRect, rectBoundingRect)) {\n          selectingResult.push(element.vido.id);\n          if (!currentSelecting.includes(element.vido.id)) {\n            options.selecting(element.vido, type);\n          }\n        } else {\n          if (currentSelecting.includes(element.vido.id)) {\n            options.deselecting(element.vido, type);\n          }\n        }\n      }\n      return selectingResult;\n    }\n\n    /**\n     * Mouse move event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseMove(ev) {\n      if (!selecting.selecting) {\n        return;\n      }\n      if (ev.x - left === selecting.fromX || ev.y - top === selecting.fromY) {\n        return;\n      }\n      ev.stopPropagation();\n      saveAndSwapIfNeeded(ev);\n      rect.style.left = selecting.fromX + 'px';\n      rect.style.top = selecting.fromY + 'px';\n      rect.style.visibility = 'visible';\n      rect.style.width = selecting.toX - selecting.fromX + 'px';\n      rect.style.height = selecting.toY - selecting.fromY + 'px';\n      const rectBoundingRect = rect.getBoundingClientRect();\n      const elements = state.get('_internal.elements');\n      const selectingGridRowBlocks = getSelecting(rectBoundingRect, elements, 'chart-timeline-grid-row-block');\n      state.update(`${path}.selecting`, {\n        'chart-timeline-grid-rows': [],\n        'chart-timeline-grid-row-blocks': selectingGridRowBlocks,\n        'chart-timeline-items-rows': [],\n        'chart-timeline-items-row-items': []\n      });\n      state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            // @ts-ignore\n            if (selectingGridRowBlocks.includes(block.id)) {\n              block.selecting = true;\n            } else {\n              block.selecting = false;\n            }\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    /**\n     * Mouse up event handler\n     * @param {MouseEvent} ev\n     */\n    function mouseUp(ev) {\n      if (selecting.selecting) {\n        ev.stopPropagation();\n      } else {\n        return;\n      }\n      selecting.selecting = false;\n      rect.style.visibility = 'hidden';\n      const currentSelect = state.get(path);\n      const select = {};\n      state.update(path, value => {\n        select.selected = { ...value.selecting };\n        select.selecting = {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        };\n        return select;\n      });\n      const elements = state.get('_internal.elements');\n      for (const element of elements['chart-timeline-grid-row-blocks']) {\n        if (currentSelect.selecting['chart-timeline-grid-row-blocks'].includes(element.vido.id)) {\n          options.deselecting(element.vido, 'chart-timeline-grid-row-block');\n        }\n      }\n      state.update('_internal.chart.grid.rowsWithBlocks', function updateRowsWithBlocks(rowsWithBlocks) {\n        for (const row of rowsWithBlocks) {\n          for (const block of row.blocks) {\n            if (currentSelect.selecting['chart-timeline-grid-row-blocks'].includes(block.id)) {\n              if (typeof block.selected === 'undefined' || !block.selected) {\n                options.selected(block, 'chart-timeline-grid-row-block');\n              }\n              block.selected = true;\n            } else {\n              if (previousSelect.selected['chart-timeline-grid-row-blocks'].includes(block.id)) {\n                options.deselected(block, 'chart-timeline-grid-row-block');\n              }\n              block.selected = false;\n            }\n          }\n        }\n        return rowsWithBlocks;\n      });\n    }\n\n    element.addEventListener('mousedown', mouseDown);\n    document.addEventListener('mousemove', schedule(mouseMove));\n    document.body.addEventListener('mouseup', mouseUp);\n    return {\n      update() {},\n      destroy() {\n        document.body.removeEventListener('mouseup', mouseUp);\n        document.removeEventListener('mousemove', mouseMove);\n        element.removeEventListener('mousedown', mouseDown);\n      }\n    };\n  }\n\n  /**\n   * Grid row block action\n   * @param {Element} element\n   * @param {object} data\n   * @returns {object} with update and destroy functions\n   */\n  function gridBlockAction(element, data) {\n    const classNameSelecting = api.getClass('chart-timeline-grid-row-block') + '--selecting';\n    const classNameSelected = api.getClass('chart-timeline-grid-row-block') + '--selected';\n    if (data.selecting) {\n      element.classList.add(classNameSelecting);\n    } else {\n      element.classList.remove(classNameSelecting);\n    }\n    if (data.selected) {\n      element.classList.add(classNameSelected);\n    } else {\n      element.classList.remove(classNameSelected);\n    }\n    return {\n      update(element, data) {\n        if (data.selecting) {\n          element.classList.add(classNameSelecting);\n        } else {\n          element.classList.remove(classNameSelecting);\n        }\n        if (data.selected) {\n          element.classList.add(classNameSelected);\n        } else {\n          element.classList.remove(classNameSelected);\n        }\n      },\n      destroy(element, changedData) {\n        element.classList.remove(classNameSelecting);\n        element.classList.remove(classNameSelected);\n      }\n    };\n  }\n\n  /**\n   * On block create handler\n   * @param {object} block\n   * @returns {object} block\n   */\n  function onBlockCreate(block) {\n    const select = state.get('config.plugin.selection');\n    if (select.selected['chart-timeline-grid-row-blocks'].find(id => id === block.id)) {\n      block.selected = true;\n    } else {\n      block.selected = false;\n    }\n    return block;\n  }\n\n  return function initialize(mainVido) {\n    vido = mainVido;\n    state = vido.state;\n    api = vido.api;\n    if (typeof state.get(path) === 'undefined') {\n      state.update(path, {\n        selecting: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        },\n        selected: {\n          'chart-timeline-grid-rows': [],\n          'chart-timeline-grid-row-blocks': [],\n          'chart-timeline-items-rows': [],\n          'chart-timeline-items-row-items': []\n        }\n      });\n    }\n    state.update('config.actions.chart-timeline', actions => {\n      actions.push(rectSelectionAction);\n      return actions;\n    });\n    state.update('config.actions.chart-timeline-grid-row-block', actions => {\n      actions.push(gridBlockAction);\n      return actions;\n    });\n    state.update('config.chart.grid.block.onCreate', onCreate => {\n      onCreate.push(onBlockCreate);\n      return onCreate;\n    });\n  };\n}\n"],"names":["schedule"],"mappings":"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"}