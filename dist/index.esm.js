const t=["","list","list-column","list-column-header","list-expander","list-expander-toggle","list-column-header-resizer","list-column-row","chart","chart-calendar","chart-gantt","chart-gantt-grid","chart-gantt-grid-row","chart-gantt-items","chart-gantt-items-row","chart-gantt-items-row-item","chart-calendar-date","chart-gantt-grid-column","chart-gantt-grid-block"];const e={height:740,headerHeight:86,list:{rows:{},rowHeight:40,columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},data:{}},expander:{padding:20,size:20,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}}},scroll:{top:0,left:0,xMultiplier:1.5,yMultiplier:1},chart:{time:{from:0,to:0,zoom:21,period:"day",dates:[]},calendar:{vertical:{smallFormat:"YYYY-MM-DD"}},grid:{},items:{}},classNames:{},actions:function(){const e={};return t.forEach(t=>e[t]=[]),e}(),locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],s=t%100;return`[${t}${e[(s-20)%10]||e[s]||e[0]}]`}}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function s(t,e){return t(e={exports:{}},e.exports),e.exports}var n=s((function(t,e){t.exports=function(){var t="millisecond",e="second",s="minute",n="hour",i="day",o="week",r="month",a="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,s){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(s)+t},u={s:h,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),n=Math.floor(s/60),i=s%60;return(e<=0?"+":"-")+h(n,2,"0")+":"+h(i,2,"0")},m:function(t,e){var s=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(s,r),i=e-n<0,o=t.clone().add(s+(i?-1:1),r);return Number(-(s+(e-n)/(i?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:r,y:l,w:o,d:i,h:n,m:s,s:e,ms:t,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",m={};m[f]=p;var g=function(t){return t instanceof w},v=function(t,e,s){var n;if(!t)return f;if("string"==typeof t)m[t]&&(n=t),e&&(m[t]=e,n=t);else{var i=t.name;m[i]=t,n=i}return s||(f=n),n},b=function(t,e,s){if(g(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:s}:e:{};return n.date=t,new w(n)},y=u;y.l=v,y.i=g,y.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u})};var w=function(){function h(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=h.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(c);if(n)return s?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return y},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var s=b(t);return this.startOf(e)<=s&&s<=this.endOf(e)},u.isAfter=function(t,e){return b(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<b(t)},u.$g=function(t,e,s){return y.u(t)?this[e]:this.set(s,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",r)},u.day=function(t){return this.$g(t,"$W",i)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",n)},u.minute=function(t){return this.$g(t,"$m",s)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,a){var c=this,d=!!y.u(a)||a,h=y.p(t),u=function(t,e){var s=y.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return d?s:s.endOf(i)},p=function(t,e){return y.w(c.toDate()[t].apply(c.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case l:return d?u(1,0):u(31,11);case r:return d?u(1,m):u(0,m+1);case o:var b=this.$locale().weekStart||0,w=(f<b?f+7:f)-b;return u(d?g-w:g+(6-w),m);case i:case"date":return p(v+"Hours",0);case n:return p(v+"Minutes",1);case s:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(o,a){var c,d=y.p(o),h="set"+(this.$u?"UTC":""),u=(c={},c[i]=h+"Date",c.date=h+"Date",c[r]=h+"Month",c[l]=h+"FullYear",c[n]=h+"Hours",c[s]=h+"Minutes",c[e]=h+"Seconds",c[t]=h+"Milliseconds",c)[d],p=d===i?this.$D+(a-this.$W):a;if(d===r||d===l){var f=this.clone().set("date",1);f.$d[u](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[y.p(t)]()},u.add=function(t,a){var c,d=this;t=Number(t);var h=y.p(a),u=function(e){var s=b(d);return y.w(s.date(s.date()+Math.round(e*t)),d)};if(h===r)return this.set(r,this.$M+t);if(h===l)return this.set(l,this.$y+t);if(h===i)return u(1);if(h===o)return u(7);var p=(c={},c[s]=6e4,c[n]=36e5,c[e]=1e3,c)[h]||1,f=this.valueOf()+t*p;return y.w(f,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=y.z(this),i=this.$locale(),o=this.$H,r=this.$m,a=this.$M,l=i.weekdays,c=i.months,h=function(t,n,i,o){return t&&(t[n]||t(e,s))||i[n].substr(0,o)},u=function(t){return y.s(o%12||12,t,"0")},p=i.meridiem||function(t,e,s){var n=t<12?"AM":"PM";return s?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:y.s(a+1,2,"0"),MMM:h(i.monthsShort,a,c,3),MMMM:c[a]||c(this,s),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,l,2),ddd:h(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:y.s(o,2,"0"),h:u(1),hh:u(2),a:p(o,r,!0),A:p(o,r,!1),m:String(r),mm:y.s(r,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:n};return s.replace(d,(function(t,e){return e||f[t]||n.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,c,d){var h,u=y.p(c),p=b(t),f=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=y.m(this,p);return g=(h={},h[l]=g/12,h[r]=g,h[a]=g/3,h[o]=(m-f)/6048e5,h[i]=(m-f)/864e5,h[n]=m/36e5,h[s]=m/6e4,h[e]=m/1e3,h)[u]||m,d?g:y.a(g)},u.daysInMonth=function(){return this.endOf(r).$D},u.$locale=function(){return m[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var s=this.clone();return s.$L=v(t,e,!0),s},u.clone=function(){return y.w(this.toDate(),this)},u.toDate=function(){return new Date(this.$d)},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},h}();return b.prototype=w.prototype,b.extend=function(t,e){return t(e,w,b),b},b.locale=v,b.isDayjs=g,b.unix=function(t){return b(1e3*t)},b.en=m[f],b.Ls=m,b}()})),i=s((function(t,e){t.exports=function(t,e,s){var n=e.prototype;s.utc=function(t,s){return new e({date:t,utc:!0,format:s})},n.utc=function(){return s(this.toDate(),{locale:this.$L,utc:!0})},n.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var i=n.parse;n.parse=function(t){t.utc&&(this.$u=!0),i.call(this,t)};var o=n.init;n.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var r=n.utcOffset;n.utcOffset=function(){return this.$u?0:r.call(this)};var a=n.format;n.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return a.call(this,e)},n.isUTC=function(){return!!this.$u}}}));function o(t,e){const s=t.get("config.locale");return n.locale(s,null,!0),{date:t=>n(t).utc().locale(s.name),recalculateFromTo(e){0!==(e={...e}).from&&(e.from=this.date(e.from).startOf("day").valueOf()),0!==e.to&&(e.to=this.date(e.to).endOf("day").valueOf());let s=Number.MAX_SAFE_INTEGER,n=0;const i=t.get("config.chart.items");if(0===Object.keys(i).length)return e;if(0===e.from||0===e.to){for(let t in i){const e=i[t];s>e.time.start&&(s=e.time.start),n<e.time.end&&(n=e.time.end)}0===e.from&&(e.from=this.date(s).startOf("day").valueOf()),0===e.to&&(e.to=this.date(n).endOf("day").valueOf())}return e}}}n.extend(i);class r{constructor(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let s=0,n=t.length;s<n;s+=1){const n=t[s];n===e&&(this.starCount+=1,s>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,s)),this.segments.push(n),this.segStartIndex=s+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}match(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;const{length:e}=t;if(e<this.minLength||e>this.maxLength)return!1;let s=this.segments.length-1,n=t.length-1,i=!1;for(;;){const e=this.segments[s];if(s-=1,e===this.wchar)i=!0;else{const s=n+1-e.length,o=t.lastIndexOf(e,s);if(-1===o||o>s)return!1;if(i)n=o-1,i=!1;else{if(o!==s)return!1;n-=e.length}}if(0>s)break}return!0}}class a{constructor(t,e,s){this.obj=t,this.delimeter=e,this.wildcard=s}simpleMatch(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const s=t.indexOf(this.wildcard);if(s>-1){const n=t.substr(s+1);if(0===s||e.substring(0,s)===t.substring(0,s)){const t=n.length;return!(t>0)||e.substr(-t)===n}}return!1}match(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new r(t).match(e)}handleArray(t,e,s,n,i={}){let o=t.indexOf(this.delimeter,s),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(s,o);let l=0;for(const s of e){const e=l.toString(),c=""===n?e:n+this.delimeter+l;(a===this.wildcard||a===e||this.simpleMatch(a,e))&&(r?i[c]=s:this.goFurther(t,s,o+1,c,i)),l++}return i}handleObject(t,e,s,n,i={}){let o=t.indexOf(this.delimeter,s),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(s,o);for(let s in e){s=s.toString();const l=""===n?s:n+this.delimeter+s;(a===this.wildcard||a===s||this.simpleMatch(a,s))&&(r?i[l]=e[s]:this.goFurther(t,e[s],o+1,l,i))}return i}goFurther(t,e,s,n,i={}){return Array.isArray(e)?this.handleArray(t,e,s,n,i):this.handleObject(t,e,s,n,i)}get(t){return this.goFurther(t,this.obj,0,"")}}class l{static get(t,e,s=null){if(null===s&&(s=t.slice()),0===s.length||void 0===e)return e;const n=s.shift();return e.hasOwnProperty(n)?0===s.length?e[n]:l.get(t,e[n],s):void 0}static set(t,e,s,n=null){if(null===n&&(n=t.slice()),0===n.length){for(const t in s)delete s[t];for(const t in e)s[t]=e[t];return}const i=n.shift();0!==n.length?(s.hasOwnProperty(i)||(s[i]={}),l.set(t,e,s[i],n)):s[i]=e}}const c={delimeter:".",notRecursive:";",param:":",wildcard:"*",log:function(t,e){console.debug(t,e)}},d={bulk:!1,debug:!1,source:"",data:void 0},h={only:[],source:"",debug:!1,data:void 0};class u{constructor(t={},e=c){this.listeners={},this.data=t,this.options=Object.assign(Object.assign({},c),e),this.id=0,this.pathGet=l.get,this.pathSet=l.set,this.scan=new a(this.data,this.options.delimeter,this.options.wildcard)}getListeners(){return this.listeners}destroy(){this.data=void 0,this.listeners={}}match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))}cutPath(t,e){return this.split(this.cleanNotRecursivePath(t)).slice(0,this.split(this.cleanNotRecursivePath(e)).length).join(this.options.delimeter)}trimPath(t){return this.cleanNotRecursivePath(t).replace(new RegExp(`^\\${this.options.delimeter}{1}`),"")}split(t){return""===t?[]:t.split(this.options.delimeter)}isWildcard(t){return t.includes(this.options.wildcard)}isNotRecursive(t){return t.endsWith(this.options.notRecursive)}cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.slice(0,-this.options.notRecursive.length):t}hasParams(t){return t.includes(this.options.param)}getParamsInfo(t){let e={replaced:"",original:t,params:{}},s=0,n=[];for(const i of this.split(t)){e.params[s]={original:i,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let o=t.exec(i);o?(e.params[s].name=o[1],t.lastIndex=0,e.params[s].replaced=i.replace(t,this.options.wildcard),n.push(e.params[s].replaced),s++):(delete e.params[s],n.push(i),s++)}return e.replaced=n.join(this.options.delimeter),e}getParams(t,e){if(!t)return;const s=this.split(e),n={};for(const e in t.params){n[t.params[e].name]=s[e]}return n}subscribeAll(t,e,s=d){let n=[];for(const i of t)n.push(this.subscribe(i,e,s));return()=>{for(const t of n)t();n=[]}}getCleanListenersCollection(t={}){return Object.assign({listeners:{},isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)}getCleanListener(t,e=d){return{fn:t,options:Object.assign(Object.assign({},d),e)}}getListenerCollectionMatch(t,e,s){return t=this.cleanNotRecursivePath(t),n=>(e&&(n=this.cutPath(n,t)),!(!s||!this.match(t,n))||t===n)}getListenersCollection(t,e){if(void 0!==this.listeners[t]){let s=this.listeners[t];return this.id++,s.listeners[this.id]=e,s}let s={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(s.path)&&(s.paramsInfo=this.getParamsInfo(s.path),s.path=s.paramsInfo.replaced,s.hasParams=!0),s.isWildcard=this.isWildcard(s.path),this.isNotRecursive(s.path)&&(s.isRecursive=!1);let n=this.listeners[s.path]=this.getCleanListenersCollection(Object.assign(Object.assign({},s),{match:this.getListenerCollectionMatch(s.path,s.isRecursive,s.isWildcard)}));return this.id++,n.listeners[this.id]=e,n}subscribe(t,e,s=d,n="subscribe"){let i=this.getCleanListener(e,s);const o=this.getListenersCollection(t,i);if(o.count++,t=o.path,o.isWildcard){const r=this.scan.get(this.cleanNotRecursivePath(t));if(s.bulk){const a=[];for(const t in r)a.push({path:t,params:this.getParams(o.paramsInfo,t),value:r[t]});e(a,{type:n,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:void 0},options:s,params:void 0})}else for(const a in r)e(r[a],{type:n,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(a)},params:this.getParams(o.paramsInfo,a),options:s})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:n,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(o.paramsInfo,t),options:s});return this.debugSubscribe(i,o,t),this.unsubscribe(t,this.id)}unsubscribe(t,e){const s=this.listeners,n=s[t];return function(){delete n.listeners[e],n.count--,0===n.count&&delete s[t]}}same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t}notifyListeners(t,e=[],s=!0){const n=[];for(const i in t){let{single:o,bulk:r}=t[i];for(const t of o){if(e.includes(t))continue;const i=this.debugTime(t);t.listener.fn(t.value(),t.eventInfo),s&&n.push(t),this.debugListener(i,t)}for(const t of r){if(e.includes(t))continue;const i=this.debugTime(t),o=t.value.map(t=>Object.assign(Object.assign({},t),{value:t.value()}));t.listener.fn(o,t.eventInfo),s&&n.push(t),this.debugListener(i,t)}}return n}getSubscribedListeners(t,e,s,n="update",i=null){s=Object.assign(Object.assign({},h),s);const o={};for(let r in this.listeners){const a=this.listeners[r];if(o[r]={single:[],bulk:[],bulkData:[]},a.match(t)){const l=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,c=a.isRecursive||a.isWildcard?()=>this.get(this.cutPath(t,r)):()=>e,d=[{value:c,path:t,params:l}];for(const e in a.listeners){const h=a.listeners[e];h.options.bulk?o[r].bulk.push({listener:h,listenersCollection:a,eventInfo:{type:n,listener:h,path:{listener:r,update:i||t,resolved:void 0},params:l,options:s},value:d}):o[r].single.push({listener:h,listenersCollection:a,eventInfo:{type:n,listener:h,path:{listener:r,update:i||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:s},value:c})}}}return o}notifySubscribedListeners(t,e,s,n="update",i=null){return this.notifyListeners(this.getSubscribedListeners(t,e,s,n,i))}getNestedListeners(t,e,s,n="update",i=null){const o={};for(let r in this.listeners){o[r]={single:[],bulk:[]};const l=this.listeners[r],c=this.cutPath(r,t);if(this.match(c,t)){const d=this.trimPath(r.substr(c.length)),h=new a(e,this.options.delimeter,this.options.wildcard).get(d),u=l.paramsInfo?this.getParams(l.paramsInfo,t):void 0,p=[],f={};for(const e in h){const a=()=>h[e],c=[t,e].join(this.options.delimeter);for(const e in l.listeners){const d=l.listeners[e],h={type:n,listener:d,listenersCollection:l,path:{listener:r,update:i||t,resolved:this.cleanNotRecursivePath(c)},params:u,options:s};d.options.bulk?(p.push({value:a,path:c,params:u}),f[e]=d):o[r].single.push({listener:d,listenersCollection:l,eventInfo:h,value:a})}}for(const e in f){const i=f[e],a={type:n,listener:i,listenersCollection:l,path:{listener:r,update:t,resolved:void 0},options:s,params:u};o[r].bulk.push({listener:i,listenersCollection:l,eventInfo:a,value:p})}}}return o}notifyNestedListeners(t,e,s,n="update",i,o=null){return this.notifyListeners(this.getNestedListeners(t,e,s,n,o),i,!1)}getNotifyOnlyListeners(t,e,s,n="update",i=null){const o={};if("object"!=typeof s.only||!Array.isArray(s.only)||void 0===s.only[0]||!this.canBeNested(e))return o;for(const r of s.only){const l=new a(e,this.options.delimeter,this.options.wildcard).get(r);o[r]={bulk:[],single:[]};for(const e in l){const a=t+this.options.delimeter+e;for(const c in this.listeners){const d=this.listeners[c],h=d.paramsInfo?this.getParams(d.paramsInfo,a):void 0;if(this.match(c,a)){const u=()=>l[e],p=[{value:u,path:a,params:h}];for(const e in d.listeners){const l=d.listeners[e],f={type:n,listener:l,listenersCollection:d,path:{listener:c,update:i||t,resolved:this.cleanNotRecursivePath(a)},params:h,options:s};l.options.bulk?o[r].bulk.some(t=>t.listener===l)||o[r].bulk.push({listener:l,listenersCollection:d,eventInfo:f,value:p}):o[r].single.push({listener:l,listenersCollection:d,eventInfo:f,value:u})}}}}}return o}notifyOnly(t,e,s,n="update",i=null){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,s,n,i))[0]}canBeNested(t){return"object"==typeof t&&null!==t}getUpdateValues(t,e,s){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let n=s;return"function"==typeof s&&(n=s(this.pathGet(e,this.data))),{newValue:n,oldValue:t}}wildcardUpdate(t,e,s=h){s=Object.assign(Object.assign({},h),s);const n=this.scan.get(t),i={};for(const t in n){const s=this.split(t),{oldValue:o,newValue:r}=this.getUpdateValues(n[t],s,e);this.same(r,o)||(i[t]=r)}const o=[];for(const e in i){const n=i[e];s.only.length?o.push(this.getNotifyOnlyListeners(e,n,s,"update",t)):(o.push(this.getSubscribedListeners(e,n,s,"update",t)),this.canBeNested(n)&&o.push(this.getNestedListeners(e,n,s,"update",t))),s.debug&&this.options.log("Wildcard update",{path:e,newValue:n}),this.pathSet(this.split(e),n,this.data)}let r=[];for(const t of o)r=[...r,...this.notifyListeners(t,r)]}update(t,e,s=h){if(this.isWildcard(t))return this.wildcardUpdate(t,e,s);const n=this.split(t),{oldValue:i,newValue:o}=this.getUpdateValues(this.pathGet(n,this.data),n,e);if(s.debug&&this.options.log(`Updating ${t} ${s.source?`from ${s.source}`:""}`,i,o),this.same(o,i))return o;if(this.pathSet(n,o,this.data),s=Object.assign(Object.assign({},h),s),this.notifyOnly(t,o,s))return o;const r=this.notifySubscribedListeners(t,o,s);return this.canBeNested(o)&&this.notifyNestedListeners(t,o,s,"update",r),o}get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)}debugSubscribe(t,e,s){t.options.debug&&this.options.log("listener subscribed",s,t,e)}debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})}debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0}}const p="gantt-shedule-timeline-calendar";function f(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t,...e){const s=e.shift();if(f(t)&&f(s))for(const e in s)if(f(s[e]))void 0===t[e]&&(t[e]={}),t[e]=m(t[e],s[e]);else if(Array.isArray(s[e])){t[e]=[];for(let n of s[e])f(n)?t[e].push(m({},n)):t[e].push(n)}else t[e]=s[e];return e.length?m(t,...e):t}const g={name:p,stateFromConfig:function(t){const s=function(t){const s=m({},e.actions),n=m({},t.actions),i=[Object.keys(s),Object.keys(n)].flatMap((t,e,s)=>1===e?t.filter(t=>!s[0].includes(t)):t),o={};for(const t of i)o[t]=[],void 0!==s[t]&&Array.isArray(s[t])&&(o[t]=[...s[t]]),void 0!==n[t]&&Array.isArray(n[t])&&(o[t]=[...o[t],...n[t]]);return delete t.actions,delete e.actions,o}(t),n={config:m({},e,t)};return n.config.actions=s,new u(n,{delimeter:"."})},mergeDeep:m,date:t=>t?n(t).utc():n().utc(),dayjs:n};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const v=new WeakMap,b=t=>(...e)=>{const s=t(...e);return v.set(s,!0),s},y=t=>"function"==typeof t&&v.has(t),w=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,$=(t,e,s=null,n=null)=>{for(;e!==s;){const s=e.nextSibling;t.insertBefore(e,n),e=s}},_=(t,e,s=null)=>{for(;e!==s;){const s=e.nextSibling;t.removeChild(e),e=s}},x={},M={},N=`{{lit-${String(Math.random()).slice(2)}}}`,C=`\x3c!--${N}--\x3e`,P=new RegExp(`${N}|${C}`),T="$lit$";class A{constructor(t,e){this.parts=[],this.element=e;const s=[],n=[],i=document.createTreeWalker(e.content,133,null,!1);let o=0,r=-1,a=0;const{strings:l,values:{length:c}}=t;for(;a<c;){const t=i.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:s}=e;let n=0;for(let t=0;t<s;t++)D(e[t].name,T)&&n++;for(;n-- >0;){const e=l[a],s=L.exec(e)[2],n=s.toLowerCase()+T,i=t.getAttribute(n);t.removeAttribute(n);const o=i.split(P);this.parts.push({type:"attribute",index:r,name:s,strings:o}),a+=o.length-1}}"TEMPLATE"===t.tagName&&(n.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(N)>=0){const n=t.parentNode,i=e.split(P),o=i.length-1;for(let e=0;e<o;e++){let s,o=i[e];if(""===o)s=S();else{const t=L.exec(o);null!==t&&D(t[2],T)&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-T.length)+t[3]),s=document.createTextNode(o)}n.insertBefore(s,t),this.parts.push({type:"node",index:++r})}""===i[o]?(n.insertBefore(S(),t),s.push(t)):t.data=i[o],a+=o}}else if(8===t.nodeType)if(t.data===N){const e=t.parentNode;null!==t.previousSibling&&r!==o||(r++,e.insertBefore(S(),t)),o=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(s.push(t),r--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(N,e+1));)this.parts.push({type:"node",index:-1}),a++}}else i.currentNode=n.pop()}for(const t of s)t.parentNode.removeChild(t)}}const D=(t,e)=>{const s=t.length-e.length;return s>=0&&t.slice(s)===e},I=t=>-1!==t.index,S=()=>document.createComment(""),L=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class O{constructor(t,e,s){this.__parts=[],this.template=t,this.processor=e,this.options=s}update(t){let e=0;for(const s of this.__parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=w?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let i,o=0,r=0,a=n.nextNode();for(;o<s.length;)if(i=s[o],I(i)){for(;r<i.index;)r++,"TEMPLATE"===a.nodeName&&(e.push(a),n.currentNode=a.content),null===(a=n.nextNode())&&(n.currentNode=e.pop(),a=n.nextNode());if("node"===i.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return w&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const V=` ${N} `;class E{constructor(t,e,s,n){this.strings=t,this.values=e,this.type=s,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",s=!1;for(let n=0;n<t;n++){const t=this.strings[n],i=t.lastIndexOf("\x3c!--");s=(i>-1||s)&&-1===t.indexOf("--\x3e",i+1);const o=L.exec(t);e+=null===o?t+(s?V:C):t.substr(0,o.index)+o[1]+o[2]+T+o[3]+N}return e+=this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}class k extends E{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,s=e.firstChild;return e.removeChild(s),$(e,s.firstChild),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const H=t=>null===t||!("object"==typeof t||"function"==typeof t),R=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class W{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new j(this)}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let n=0;n<e;n++){s+=t[n];const e=this.parts[n];if(void 0!==e){const t=e.value;if(H(t)||!R(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class j{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===x||H(t)&&t===this.value||(this.value=t,y(t)||(this.committer.dirty=!0))}commit(){for(;y(this.value);){const t=this.value;this.value=x,t(this)}this.value!==x&&this.committer.commit()}}class Y{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(S()),this.endNode=t.appendChild(S())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=S()),t.__insert(this.endNode=S())}insertAfterPart(t){t.__insert(this.startNode=S()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=x,t(this)}const t=this.__pendingValue;t!==x&&(H(t)?t!==this.value&&this.__commitText(t):t instanceof E?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):R(t)?this.__commitIterable(t):t===M?(this.value=M,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,s="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=s:this.__commitNode(document.createTextNode(s)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof O&&this.value.template===e)this.value.update(t.values);else{const s=new O(e,t.processor,this.options),n=s._clone();s.update(t.values),this.__commitNode(n),this.value=s}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,n=0;for(const i of t)void 0===(s=e[n])&&(s=new Y(this.options),e.push(s),0===n?s.appendIntoPart(this):s.insertAfterPart(e[n-1])),s.setValue(i),s.commit(),n++;n<e.length&&(e.length=n,this.clear(s&&s.endNode))}clear(t=this.startNode){_(this.startNode.parentNode,t.nextSibling,this.endNode)}}class z{constructor(t,e,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s}setValue(t){this.__pendingValue=t}commit(){for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=x,t(this)}if(this.__pendingValue===x)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=x}}class F extends W{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new B(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class B extends j{}let G=!1;try{const t={get capture(){return G=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class U{constructor(t,e,s){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=x,t(this)}if(this.__pendingValue===x)return;const t=this.__pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=J(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=x}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const J=t=>t&&(G?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Z=new class{handleAttributeExpressions(t,e,s,n){const i=e[0];if("."===i){return new F(t,e.slice(1),s).parts}return"@"===i?[new U(t,e.slice(1),n.eventContext)]:"?"===i?[new z(t,e.slice(1),s)]:new W(t,e,s).parts}handleTextExpression(t){return new Y(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function X(t){let e=q.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},q.set(t.type,e));let s=e.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(N);return void 0===(s=e.keyString.get(n))&&(s=new A(t,t.getTemplateElement()),e.keyString.set(n,s)),e.stringsArray.set(t.strings,s),s}const q=new Map,K=new WeakMap,Q=(t,e,s)=>{let n=K.get(e);void 0===n&&(_(e,e.firstChild),K.set(e,n=new Y(Object.assign({templateFactory:X},s))),n.appendInto(e)),n.setValue(t),n.commit()};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const tt=(t,...e)=>new E(t,e,"html",Z),et=(t,...e)=>new k(t,e,"svg",Z),st=new WeakMap,nt=b(t=>e=>{if(!(e instanceof Y))throw new Error("cache can only be used in text bindings");let s=st.get(e);void 0===s&&(s=new WeakMap,st.set(e,s));const n=e.value;if(n instanceof O){if(t instanceof E&&n.template===e.options.templateFactory(t))return void e.setValue(t);{let t=s.get(n.template);void 0===t&&(t={instance:n,nodes:document.createDocumentFragment()},s.set(n.template,t)),$(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof E){const n=e.options.templateFactory(t),i=s.get(n);void 0!==i&&(e.setValue(i.nodes),e.commit(),e.value=i.instance)}e.setValue(t)}),it=new WeakMap,ot=b(t=>e=>{if(!(e instanceof j)||e instanceof B||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:s}=e,{element:n}=s;it.has(e)||(n.className=s.strings.join(" "));const{classList:i}=n,o=it.get(e);for(const e in o)e in t||i.remove(e);for(const e in t){const s=t[e];if(!o||s!==o[e]){i[s?"add":"remove"](e)}}it.set(e,t)}),rt=new WeakMap,at=b((t,e)=>s=>{const n=rt.get(s);if(Array.isArray(t)){if(Array.isArray(n)&&n.length===t.length&&t.every((t,e)=>t===n[e]))return}else if(n===t&&(void 0!==t||rt.has(s)))return;s.setValue(e()),rt.set(s,Array.isArray(t)?Array.from(t):t)}),lt=b(t=>e=>{if(void 0===t&&e instanceof j){if(t!==e.value){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else e.setValue(t)}),ct=(t,e)=>{const s=t.startNode.parentNode,n=void 0===e?t.endNode:e.startNode,i=s.insertBefore(S(),n);s.insertBefore(S(),n);const o=new Y(t.options);return o.insertAfterNode(i),o},dt=(t,e)=>(t.setValue(e),t.commit(),t),ht=(t,e,s)=>{const n=t.startNode.parentNode,i=s?s.startNode:t.endNode,o=e.endNode.nextSibling;o!==i&&$(n,e.startNode,o,i)},ut=t=>{_(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},pt=(t,e,s)=>{const n=new Map;for(let i=e;i<=s;i++)n.set(t[i],i);return n},ft=new WeakMap,mt=new WeakMap,gt=b((t,e,s)=>{let n;return void 0===s?s=e:void 0!==e&&(n=e),e=>{if(!(e instanceof Y))throw new Error("repeat can only be used in text bindings");const i=ft.get(e)||[],o=mt.get(e)||[],r=[],a=[],l=[];let c,d,h=0;for(const e of t)l[h]=n?n(e,h):h,a[h]=s(e,h),h++;let u=0,p=i.length-1,f=0,m=a.length-1;for(;u<=p&&f<=m;)if(null===i[u])u++;else if(null===i[p])p--;else if(o[u]===l[f])r[f]=dt(i[u],a[f]),u++,f++;else if(o[p]===l[m])r[m]=dt(i[p],a[m]),p--,m--;else if(o[u]===l[m])r[m]=dt(i[u],a[m]),ht(e,i[u],r[m+1]),u++,m--;else if(o[p]===l[f])r[f]=dt(i[p],a[f]),ht(e,i[p],i[u]),p--,f++;else if(void 0===c&&(c=pt(l,f,m),d=pt(o,u,p)),c.has(o[u]))if(c.has(o[p])){const t=d.get(l[f]),s=void 0!==t?i[t]:null;if(null===s){const t=ct(e,i[u]);dt(t,a[f]),r[f]=t}else r[f]=dt(s,a[f]),ht(e,s,i[u]),i[t]=null;f++}else ut(i[p]),p--;else ut(i[u]),u++;for(;f<=m;){const t=ct(e,r[m+1]);dt(t,a[f]),r[f++]=t}for(;u<=p;){const t=i[u++];null!==t&&ut(t)}ft.set(e,r),mt.set(e,l)}}),vt=new WeakMap,bt=b(t=>e=>{if(!(e instanceof j)||e instanceof B||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:s}=e,{style:n}=s.element;vt.has(e)||(n.cssText=s.strings.join(" "));const i=vt.get(e);for(const e in i)e in t||(-1===e.indexOf("-")?n[e]=null:n.removeProperty(e));for(const e in t)-1===e.indexOf("-")?n[e]=t[e]:n.setProperty(e,t[e]);vt.set(e,t)}),yt=new WeakMap,wt=b(t=>e=>{if(!(e instanceof Y))throw new Error("unsafeHTML can only be used in text bindings");const s=yt.get(e);if(void 0!==s&&H(t)&&t===s.value&&e.value===s.fragment)return;const n=document.createElement("template");n.innerHTML=t;const i=document.importNode(n.content,!0);e.setValue(i),yt.set(e,{value:t,fragment:i})}),$t=new WeakMap,_t=b((...t)=>e=>{let s=$t.get(e);void 0===s&&(s={lastRenderedIndex:2147483647,values:[]},$t.set(e,s));const n=s.values;let i=n.length;s.values=t;for(let o=0;o<t.length&&!(o>s.lastRenderedIndex);o++){const r=t[o];if(H(r)||"function"!=typeof r.then){e.setValue(r),s.lastRenderedIndex=o;break}o<i&&r===n[o]||(s.lastRenderedIndex=2147483647,i=0,Promise.resolve(r).then(t=>{const n=s.values.indexOf(r);n>-1&&n<s.lastRenderedIndex&&(s.lastRenderedIndex=n,e.setValue(t),e.commit())}))}});function xt(t,e){let s=0;const n={};let i,o,r=[],a=0;const l=Promise.resolve(),c={state:t,api:e,html:tt,svg:et,directive:b,cache:nt,classMap:ot,guard:at,ifDefined:lt,repeat:gt,styleMap:bt,unsafeHTML:wt,until:_t,action:b((function(t,e){return function(s){"function"==typeof t&&r.push({fn:t,element:s.committer.element,props:e})}})),createComponent(t,e){const i=s++,o=function(t){return{instance:t,destroy:()=>c.destroyComponent(t),update:()=>c.updateTemplate(),html:(e={})=>n[t].update(e)}}(i);let r;const a=[];const l=Object.assign(Object.assign({},c),{update:function(t){if(!r)return r=function(){c.updateTemplate()};c.updateTemplate()},onDestroy:function(t){a.push(t)},instance:i});let d,h;if("function"==typeof(d=e?t(e,l):t(l))){h={update:d,destroy:()=>{a.forEach(t=>t())}}}else{const t=h.destroy,e=()=>{a.forEach(t=>t()),t()};h=Object.assign(Object.assign({},d),{destroy:e})}return n[i]=h,r(),o},destroyComponent(t){"function"==typeof n[t].destroy&&n[t].destroy(),delete n[t]},updateTemplate(){const t=++a;l.then(()=>{t===a&&(this.render(),a=0)})},createApp(t,e){o=e;const s=this.createComponent(t);return i=s.instance,this.render(),s},render(){Q(n[i].update(),o);for(const t of r)t.fn(t.element,t.props);r=[]}};return c}function Mt(t,{api:e,state:s,onDestroy:n,action:i,update:o,html:r,unsafeHTML:a}){const l="list-expander-toggle";let c,d,h,u,p,f,m,g=!1;function v(){g=!g,t.row?s.update(`config.list.rows.${t.row.id}.expanded`,g):s.update("config.list.rows",t=>{for(const e in t)t[e].expanded=g;return t},{only:["*.expanded"]})}return n(s.subscribe("config.classNames",s=>{t.row?(c=e.getClass(l,{row:t.row}),u=e.getClass(l+"-open",{row:t.row}),p=e.getClass(l+"-closed",{row:t.row})):(c=e.getClass(l),u=e.getClass(l+"-open"),p=e.getClass(l+"-closed")),d=e.getAction(l),o()})),n(s.subscribeAll(["config.list.expander.size","config.list.expander.icons"],()=>{const t=s.get("config.list.expander");h=`--size: ${t.size}px`,f=t.icons.open,m=t.icons.closed,o()})),t.row?n(s.subscribe(`config.list.rows.${t.row.id}.expanded`,t=>{g=t,o()})):n(s.subscribe("config.list.rows.*.expanded",t=>{for(const e of t)if(e.value){g=!0;break}o()},{bulk:!0})),()=>r`
    <div
      class=${c}
      data-action=${i(d,{row:t.row,api:e,state:s})}
      style=${h}
      @click=${v}
    >
      ${g?r`
            <div class=${u}>
              ${a(f)}
            </div>
          `:r`
            <div class=${p}>
              ${a(m)}
            </div>
          `}
    </div>
  `}function Nt(t,{api:e,state:s,onDestroy:n,action:i,update:o,html:r,createComponent:a}){const l=e.getAction("list-expander");let c,d,h,u,p=[];n(s.subscribe("config.classNames",s=>{t.row?(c=e.getClass("list-expander",{row:t.row}),u=e.getClass("list-expander-padding",{row:t.row})):(c=e.getClass("list-expander"),u=e.getClass("list-expander-padding")),o()})),n(s.subscribeAll(["config.list.expander.padding"],t=>{d=t,o()})),t.row?n(s.subscribe(`_internal.list.rows.${t.row.id}.parentId`,e=>{h="width:"+t.row._internal.parents.length*d+"px",p=t.row._internal.children,o()})):(h="width:0px",p=[]);const f=a(Mt,t.row?{row:t.row}:{});return n(f.destroy),()=>r`
    <div class=${c} data-action=${i(l,{row:t.row,api:e,state:s})}>
      <div class=${u} style=${h}></div>
      ${p.length||!t.row?f.html():""}
    </div>
  `}function Ct({rowId:t,columnId:e},s){const{api:n,state:i,onDestroy:o,action:r,update:a,html:l,createComponent:c}=s;let d,h,u=`config.list.rows.${t}`;o(i.subscribe(u,t=>{h=`--height: ${(d=t).height}px`,a()}));let p,f=`config.list.columns.data.${e}`;o(i.subscribe(f,t=>{p=t,a()}));const m=n.getAction("list-column-row");let g;o(i.subscribe("config.classNames",t=>{g=n.getClass("list-column-row",{row:d,column:p}),a()}));const v=c(Nt,{row:d});return o(v.destroy),t=>l`
    <div
      class=${g}
      style=${h}
      data-action=${r(m,{column:p,row:d,api:n,state:i})}
    >
      ${"boolean"==typeof p.expander&&p.expander?v.html():""}
      ${"string"==typeof p.html?"function"==typeof p.data?l`
        ${p.data(d)}
      `:l`
      ${d[p.data]}
    `:"function"==typeof p.data?p.data(d):d[p.data]}
    </div>
  `}function Pt({columnId:t},e){const{api:s,state:n,onDestroy:i,update:o,html:r,action:a}=e,l="list-column-header-resizer",c=s.getAction(l);let d,h,u,p,f,m,g,v;i(n.subscribe(`config.list.columns.data.${t}`,t=>{d=t,o()}));let b=!1;i(n.subscribe("config.classNames",t=>{h=s.getClass(l,{column:d}),u=s.getClass(l+"-container",{column:d}),p=s.getClass(l+"-dots",{column:d}),f=s.getClass(l+"-dots-dot",{column:d}),m=s.getClass(l+"-line",{column:d}),o()})),i(n.subscribeAll([`config.list.columns.data.${d.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const s=n.get("config.list");g=d.width*s.columns.percent*.01,v=`width: ${s.columns.resizer.width}px`,b=s.columns.resizer.inRealTime,o()}));let y=[1,2,3,4,5,6,7,8];i(n.subscribe("config.list.columns.resizer.dots",t=>{y=[];for(let e=0;e<t;e++)y.push(e);o()}));let w=!1,$=g;const _=`config.list.columns.data.${d.id}.width`;function x(t){w=!0,n.update("_internal.list.columns.resizer.active",!0)}function M(t){w&&(($+=t.movementX)<0&&($=0),b&&n.update(_,$))}function N(t){w&&(n.update("_internal.list.columns.resizer.active",!1),n.update(_,$),w=!1)}return document.body.addEventListener("mousemove",M),i(()=>document.body.removeEventListener("mousemove",M)),document.body.addEventListener("mouseup",N),i(()=>document.body.removeEventListener("mouseup",N)),t=>r`
    <div class=${h} data-action=${a(c,{column:d,api:s,state:n})}>
      <div class=${u}>
        ${d.header.html?r`
              ${d.header.html}
            `:d.header.content}
      </div>
      <div class=${p} style=${"--"+v} @mousedown=${x}>
        ${y.map(t=>r`
              <div class=${f} />
            `)}
      </div>
    </div>
  `}function Tt({columnId:t},e){const{api:s,state:n,onDestroy:i,action:o,update:r,createComponent:a,html:l}=e,c=s.getAction("list-column-header");let d,h,u,p;i(n.subscribe(`config.list.columns.data.${t}`,t=>{d=t,r()})),i(n.subscribeAll(["config.classNames","config.headerHeight"],()=>{const t=n.get("config");h=s.getClass("list-column-header",{column:d}),u=s.getClass("list-column-header-content",{column:d}),p=`--height: ${t.headerHeight}px;`,r()}));const f=a(Pt,{columnId:t});i(f.destroy);const m=a(Nt,{});return i(m.destroy),function(){return l`
      <div class=${h} style=${p} data-action=${o(c,{column:d,api:s,state:n})}>
        ${"boolean"==typeof d.expander&&d.expander?l`
      <div class=${u}>
        ${m.html()}${f.html(d)}
      </div>
    `:l`
      <div class=${u}>
        ${f.html(d)}
      </div>
    `}
      </div>
    `}}function At({columnId:t},e){const{api:s,state:n,onDestroy:i,action:o,update:r,createComponent:a,html:l,repeat:c}=e;let d,h=`config.list.columns.data.${t}`;i(n.subscribe(h,t=>{d=t,r()}));const u=s.getAction("list-column"),p=s.getAction("list-column-rows");let f,m,g,v,b;i(n.subscribe("config.classNames",t=>{f=s.getClass("list-column",{column:d}),m=s.getClass("list-column-rows",{column:d}),r()}));let y=[];i(n.subscribe("_internal.list.visibleRows;",e=>{y.forEach(t=>t.component.destroy()),y=e.map(e=>({id:e.id,component:a(Ct,{columnId:t,rowId:e.id})})),r()})),i(()=>{y.forEach(t=>t.component.destroy())}),i(n.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${d.id}.width`,"config.height","config.headerHeight"],t=>{const e=n.get("config.list");g=e.columns.data[d.id].width*e.columns.percent*.01,v=`width: ${g+e.columns.resizer.width}px`,b=`height: ${n.get("config.height")}px`},{bulk:!0}));const w=a(Tt,{columnId:t});return i(w.destroy),t=>l`
    <div class=${f} data-action=${o(u,{column:d,state:n,api:s})} style=${v}>
      ${w.html()}
      <div class=${m} style=${b} data-action=${o(p,{api:s,state:n})}>
        ${y.map(t=>t.component.html())}
      </div>
    </div>
  `}function Dt(t){const{api:e,state:s,onDestroy:n,action:i,update:o,createComponent:r,html:a,repeat:l}=t,c=e.getAction("list");let d,h,u;n(s.subscribe("config.list",()=>{h=s.get("config.list"),u=h.columns.percent,o()})),n(s.subscribe("config.classNames",()=>{d=e.getClass("list",{list:h}),o()}));let p,f,m,g=[];function v(t){if("scroll"===t.type)s.update("config.scroll.top",t.target.scrollTop);else{const n=e.normalizeMouseWheelEvent(t);s.update("config.scroll.top",t=>e.limitScroll("top",t+=n.y*s.get("config.scroll.yMultiplier")))}}function b(t){m||(m=t.clientWidth,0===u&&(m=0),s.update("_internal.list.width",m),s.update("_internal.elements.List",t)),"function"==typeof i&&c(t,{list:h,columns:p,state:s,api:e})}return n(s.subscribe("config.list.columns.data;",t=>{g.forEach(t=>t.component.destroy()),p=Object.keys(t),g=p.map(t=>{return{id:t,component:r(At,{columnId:t})}}),o()})),n(()=>{g.forEach(t=>t.component.destroy())}),n(s.subscribe("config.height",t=>{f=`height: ${t}px`,o()})),t=>h.columns.percent>0?a`
          <div
            class=${d}
            data-action=${i(b)}
            style=${f}
            @scroll=${v}
            @wheel=${v}
          >
            ${g.map(t=>t.component.html())}
          </div>
        `:null}function It({date:t},e){const{api:s,state:n,onDestroy:i,action:o,update:r,createComponent:a,html:l,repeat:c}=e,d="chart-calendar-date",h=s.getAction(d);let u,p,f,m,g,v,b,y,w,$,_,x,M,N,C,P;return i(n.subscribe("config.classNames",()=>{u=s.getClass(d,{date:t}),p=s.getClass(`${d}-formatted`,{date:t}),f=s.getClass(`${d}-formatted-year`,{date:t}),m=s.getClass(`${d}-formatted-month`,{date:t}),g=s.getClass(`${d}-formatted-day`,{date:t}),v=s.getClass(`${d}-formatted-day-word`,{date:t}),r()})),i(n.subscribeAll(["_internal.chart.time","config.chart.calendar.vertical.smallFormat"],(function(){b=n.get("_internal.chart.time"),P=b.zoom<=22?18:13,y=b.period;const e=s.time.date(t.leftGlobal),i=b.maxWidth;w=i<=40;const o=n.get("config.chart.calendar.vertical.smallFormat");$=e.format(o),_=e.format("YYYY"),x=e.format("MMMM"),M=e.format("DD"),N=e.format("dddd"),i<=70?(_=e.format("YY"),x=e.format("MMM"),M=e.format("DD"),N=e.format("ddd")):i<=150&&(N=e.format("ddd")),C=`width: ${t.width}px; margin-left:-${t.subPx}px; --day-size: ${P}px`,r()}),{bulk:!0})),e=>l`
    <div class=${u} style=${C} data-action=${o(h,{date:t,api:s,state:n})}>
      ${w?l`
            <div class=${p} style="transform: rotate(90deg);">${$}</div>
          `:l`
            <div class=${p}>
              <div class=${f}>${_}</div>
              <div class=${m}>${x}</div>
              <div class=${g}>${M}</div>
              <div class=${v}>${N}</div>
            </div>
          `}
    </div>
  `}function St(t){const{api:e,state:s,onDestroy:n,action:i,update:o,createComponent:r,html:a,repeat:l}=t,c=e.getAction("chart-calendar");let d;n(s.subscribe("config.classNames",t=>{d=e.getClass("chart-calendar"),o()}));let h,u="";n(s.subscribe("config.headerHeight",t=>{u=`height: ${h=t}px;`,o()}));let p,f=[];function m(t){s.update("_internal.elements.Calendar",t),"function"==typeof c&&c({api:e,state:s})}return n(s.subscribe("_internal.chart.time.dates",t=>{p=t,f.forEach(t=>t.component.destroy()),f=[];for(const t of p)f.push({id:t.id,component:r(It,{date:t})});o()})),n(()=>{f.forEach(t=>t.component.destroy())}),t=>a`
    <div class=${d} data-action=${i(m)} style=${u}>
      ${l(f,t=>t.id,t=>t.component.html())}
    </div>
  `}function Lt({row:t,time:e,top:s},n){const{api:i,state:o,onDestroy:r,action:a,update:l,html:c}=n,d=i.getAction("chart-gantt-grid-block",{row:t,time:e,top:s});let h=i.getClass("chart-gantt-grid-block",{row:t});r(o.subscribe("config.classNames",()=>{h=i.getClass("chart-gantt-grid-block"),l()}));let u=`width: ${e.width}px;height: 100%;margin-left:-${e.subPx}px`;return n=>c`
      <div class=${h} data-action=${a(d,{row:t,time:e,top:s,api:i,state:o})} style=${u} />
    `}function Ot({row:t},e){const{api:s,state:n,onDestroy:i,action:o,update:r,html:a,createComponent:l,repeat:c}=e,d=s.getAction("chart-gantt-grid-row",{row:t});let h;i(n.subscribe("config.classNames",e=>{h=s.getClass("chart-gantt-grid-row",{row:t}),r()}));let u=[];for(const e of t.blocks)u.push({id:e.id,component:l(Lt,{row:t,time:e.date,top:e.top})});i(()=>{u.forEach(t=>t.component.destroy())});let p=`height: ${t.rowData.height}px;`;return e=>a`
    <div class=${h} data-action=${o(d,{row:t,api:s,state:n})} style=${p}>
      ${u.map(t=>t.component.html())}
    </div>
  `}function Vt(t){const{api:e,state:s,onDestroy:n,action:i,update:o,html:r,createComponent:a,repeat:l}=t,c=e.getAction("chart-gantt-grid");let d,h,u;n(s.subscribe("config.classNames",()=>{d=e.getClass("chart-gantt-grid"),o()})),n(s.subscribe("_internal.height",t=>{u=`height: ${h=t}px`,o()}));let p,f=[];return n(s.subscribeAll(["_internal.chart.time.dates","_internal.list.visibleRows","config.chart.grid.block"],(function(){const t=s.get("_internal.list.visibleRows"),e=s.get("_internal.chart.time.dates");f.forEach(t=>t.component.destroy()),f=[];let n=0;p=[];for(const s in t){const i=t[s],r=[];let l=0;for(const t of e)r.push({id:l++,date:t,row:i,top:n});const c={id:i.id,blocks:r,rowData:i,top:n};p.push(c),f.push({id:i.id,component:a(Ot,{row:c})}),n+=i.height,o()}}),{bulk:!0})),n(()=>{f.forEach(t=>t.component.destroy())}),t=>r`
    <div class=${d} data-action=${i(c,{api:e,state:s})} style=${u}>
      ${f.map(t=>t.component.html())}
    </div>
  `}function Et({rowId:t,itemId:e},s){const{api:n,state:i,onDestroy:o,action:r,update:a,html:l}=s;let c,d=`config.list.rows.${t}`;o(i.subscribe(d,t=>{c=t,a()}));let h,u=`config.chart.items.${e}`;o(i.subscribe(u,t=>{h=t,a()}));const p="chart-gantt-items-row-item",f=n.getAction(p,{row:c,item:h});let m,g,v;o(i.subscribe("config.classNames",()=>{m=n.getClass(p,{row:c,item:h}),g=n.getClass(p+"-content",{row:c,item:h}),v=n.getClass(p+"-content-label",{row:c,item:h}),a()}));let b,y=0,w=0;return o(i.subscribeAll(["_internal.chart.time","config.scroll"],t=>{let e=i.get("_internal.chart.time");y=(h.time.start-e.from)/e.timePerPixel,w=(h.time.end-h.time.start)/e.timePerPixel,b=`left:${y}px;width:${w}px;`,a()},{bulk:!0})),t=>l`
    <div
      class=${m}
      data-action=${r(f,{item:h,row:c,left:y,width:w,api:n,state:i})}
      style=${b}
    >
      <div class=${g}>
        <div class=${v}">${h.label}</div>
      </div>
    </div>
  `}function kt({rowId:t},e){const{api:s,state:n,onDestroy:i,action:o,update:r,html:a,createComponent:l,repeat:c}=e;let d,h,u,p,f=`_internal.flatTreeMapById.${t}`;i(n.subscribeAll([f,"_internal.chart"],t=>{d=n.get(f);const e=n.get("_internal.chart");u=`width:${e.dimensions.width}px;height:${d.height}px;--row-height:${d.height}px;`,p=`width: ${e.time.totalViewDurationPx}px;height: 100%;`,h&&(h.scrollLeft=e.time.leftPx),r()}));let m,g=[];i(n.subscribe(`_internal.flatTreeMapById.${t}._internal.items;`,e=>{m=e,g.forEach(t=>t.component.destroy()),g=[];for(const e of m)g.push({id:e.id,component:l(Et,{rowId:t,itemId:e.id})});r()})),i(()=>{g.forEach(t=>t.component.destroy())});const v=s.getAction("chart-gantt-items-row",{row:d});let b,y;function w(t){h=t,"function"==typeof v&&v({row:d,api:s,state:n})}return i(n.subscribe("config.classNames",()=>{b=s.getClass("chart-gantt-items-row",{row:d}),y=s.getClass("chart-gantt-items-row-inner",{row:d}),r()})),t=>a`
    <div class=${b} data-action=${o(w)} style=${u}>
      <div class=${y} style=${p}>
        ${c(g,t=>t.id,t=>t.component.html())}
      </div>
    </div>
  `}function Ht(t){const{api:e,state:s,onDestroy:n,action:i,update:o,html:r,createComponent:a,repeat:l}=t,c=e.getAction("chart-gantt-items");let d;n(s.subscribe("config.classNames",()=>{d=e.getClass("chart-gantt-items"),o()}));let h=[],u=[];return n(s.subscribe("_internal.list.visibleRows;",t=>{h=t,u.forEach(t=>t.component.destroy()),u=[];for(const t of h)u.push({id:t.id,component:a(kt,{rowId:t.id})});o()})),n(()=>{u.forEach(t=>t.component.destroy())}),t=>r`
    <div class=${d} data-action=${i(c,{api:e,state:s})}>
      ${u.map(t=>t.component.html())}
    </div>
  `}function Rt(t){const{api:e,state:s,onDestroy:n,action:i,update:o,html:r,createComponent:a}=t,l=e.getAction("chart-gantt"),c=a(Vt);n(c.destroy);const d=a(Ht);let h,u;n(d.destroy),n(s.subscribe("config.classNames",t=>{h=e.getClass("chart-gantt"),u=e.getClass("chart-gantt-inner"),o()}));let p="",f="";function m(t){s.update("_internal.elements.Gantt",t),"function"==typeof l&&l({api:e,state:s})}return n(s.subscribeAll(["_internal.height","_internal.list.expandedHeight"],()=>{p=`height: ${s.get("_internal.height")}px`,f=`height: ${s.get("_internal.list.expandedHeight")}px;`,o()})),t=>r`
    <div class=${h} style=${p} data-action=${i(m)} @wheel=${e.onScroll}>
      <div class=${u} style=${f}>
        ${c.html()}${d.html()}
      </div>
    </div>
  `}function Wt(t){const{api:e,state:s,onDestroy:n,action:i,update:o,html:r,createComponent:a}=t,l=a(St);n(l.destroy);const c=a(Rt);n(c.destroy);let d,h,u,p,f="",m="",g=e.getAction("chart");n(s.subscribe("config.classNames",t=>{d=e.getClass("chart"),h=e.getClass("horizontal-scroll"),u=e.getClass("horizontal-scroll-inner"),o()})),n(s.subscribe("config.scroll.left",t=>{p&&p.scrollLeft!==t&&(p.scrollLeft=t),o()})),n(s.subscribeAll(["_internal.chart.dimensions.width","_internal.chart.time.totalViewDurationPx"],(function(t,e){f=`width: ${s.get("_internal.chart.dimensions.width")}px`,m=`width: ${s.get("_internal.chart.time.totalViewDurationPx")}px; height:1px`,o()})));const v={handleEvent(t){if("scroll"===t.type)s.update("config.scroll.left",t.target.scrollLeft);else{const n=e.normalizeMouseWheelEvent(t),i=s.get("config.scroll.xMultiplier"),o=s.get("config.scroll.yMultiplier");t.shiftKey&&n.y?s.update("config.scroll.left",t=>e.limitScroll("left",t+=n.y*i)):n.x?s.update("config.scroll.left",t=>e.limitScroll("left",t+=n.x*i)):s.update("config.scroll.top",t=>e.limitScroll("top",t+=n.y*o))}},passive:!0};function b(t){p=t}return t=>r`
    <div class=${d} data-action=${i(g,{api:e,state:s})} @wheel=${v}>
      ${l.html()}${c.html()}
      <div class=${h} style=${f} data-action=${i(b)} @scroll=${v}>
        <div class=${u} style=${m} />
      </div>
    </div>
  `}function jt(t){const{api:e,state:s,onDestroy:n,action:i,update:o,createComponent:r,html:a}=t,l=e.name,c=r(Dt);n(c.destroy);const d=r(Wt);n(d.destroy);n(s.subscribe("config.plugins",t=>{if(void 0!==t&&Array.isArray(t))for(const n of t)n(s,e)}));const h=e.getAction("");let u,p,f,m,g,v,b=0,y=!1;n(s.subscribe("config.classNames",t=>{const n=s.get("config");u=e.getClass(l,{config:n}),y&&(u+=` ${l}__list-column-header-resizer--active`),p=e.getClass("vertical-scroll",{config:n}),o()})),n(s.subscribeAll(["config.height","config.headerHeight","_internal.scrollBarHeight"],()=>{const t=s.get("config"),e=s.get("_internal.scrollBarHeight"),n=t.height-t.headerHeight-e;s.update("_internal.height",n),f=`--height: ${t.height}px`,m=`height: ${n}px; width: ${e}px; margin-top: ${t.headerHeight}px;`,o()})),n(s.subscribe("_internal.list.columns.resizer.active",t=>{y=t,u=e.getClass(e.name),y&&(u+=` ${e.name}__list-column-header-resizer--active`),o()})),n(s.subscribeAll(["config.list.rows;","config.chart.items;","config.list.rows.*.parentId","config.chart.items.*.rowId"],(t,n)=>{if(s.get("_internal.flatTreeMap").length&&"subscribe"===n.type)return;const i=s.get("config.list.rows"),r=[];for(const t in i)r.push(i[t]);e.fillEmptyRowValues(r);const a=s.get("config.chart.items"),l=[];for(const t in a)l.push(a[t]);const c=e.makeTreeMap(r,l);s.update("_internal.treeMap",c),s.update("_internal.flatTreeMapById",e.getFlatTreeMapById(c)),s.update("_internal.flatTreeMap",e.flattenTreeMap(c)),o()},{bulk:!0})),n(s.subscribeAll(["config.list.rows.*.expanded","_internal.treeMap;"],t=>{const n=s.get("config.list.rows"),i=e.getRowsFromIds(e.getRowsWithParentsExpanded(s.get("_internal.flatTreeMap"),s.get("_internal.flatTreeMapById"),n),n);b=e.getRowsHeight(i),s.update("_internal.list.expandedHeight",b),s.update("_internal.list.rowsWithParentsExpanded",i),o()},{bulk:!0})),n(s.subscribeAll(["_internal.list.rowsWithParentsExpanded","config.scroll.top"],()=>{const t=e.getVisibleRows(s.get("_internal.list.rowsWithParentsExpanded"));s.update("_internal.list.visibleRows",t),o()})),n(s.subscribeAll(["config.scroll.top","_internal.list.visibleRows"],()=>{const t=s.get("config.scroll.top");g=`height: ${b}px; width: 1px`,v&&v.scrollTop!==t&&(v.scrollTop=t),o()})),n(s.subscribeAll(["config.chart.time","_internal.dimensions.width","config.scroll.left","_internal.scrollBarHeight","_internal.list.width"],(function(){const t=s.get("_internal.dimensions.width")-s.get("_internal.list.width"),n=t-s.get("_internal.scrollBarHeight");s.update("_internal.chart.dimensions",{width:t,innerWidth:n});let i=e.mergeDeep({},s.get("config.chart.time"));const r=.01*(i=e.time.recalculateFromTo(i)).zoom;let a=s.get("config.scroll.left");i.timePerPixel=r+Math.pow(2,i.zoom),i.totalViewDurationMs=e.time.date(i.to).diff(i.from,"milliseconds"),i.totalViewDurationPx=i.totalViewDurationMs/i.timePerPixel,a>i.totalViewDurationPx&&(a=i.totalViewDurationPx-t),i.leftGlobal=a*i.timePerPixel+i.from,i.rightGlobal=i.leftGlobal+t*i.timePerPixel,i.leftInner=i.leftGlobal-i.from,i.rightInner=i.rightGlobal-i.from,i.leftPx=i.leftInner/i.timePerPixel,i.rightPx=i.rightInner/i.timePerPixel,Math.round(i.rightGlobal/i.timePerPixel)>Math.round(i.to/i.timePerPixel)&&(i.rightGlobal=i.to,i.rightInner=i.rightGlobal-i.from,i.totalViewDurationMs=i.to-i.from,i.totalViewDurationPx=i.rightPx,i.timePerPixel=i.totalViewDurationMs/i.totalViewDurationPx),function(t,s){const n=[];let i=t.leftGlobal;const o=t.rightGlobal,r=t.timePerPixel,a=t.period;let l=i-e.time.date(i).startOf(a),c=l/r,d=0,h=0,u=0;for(;i<o;){const t={id:u++,sub:l,subPx:c,leftGlobal:i,rightGlobal:e.time.date(i).endOf(a).valueOf(),width:0,leftPx:0,rightPx:0};t.width=(t.rightGlobal-t.leftGlobal+l)/r,t.width>s&&(t.width=s),h=t.width>h?t.width:h,t.leftPx=d,d+=t.width,t.rightPx=d,n.push(t),i=t.rightGlobal+1,l=0,c=0}t.maxWidth=h,t.dates=n}(i,t),s.update("_internal.chart.time",i),o()}))),s.update("_internal.scrollBarHeight",e.getScrollBarHeight());const w={handleEvent(t){s.update("config.scroll.top",t.target.scrollTop)},passive:!1},$={width:0,height:0};function _(t){if(0===$.width){const e=t.clientWidth,n=t.clientHeight;$.width===e&&$.height===n||($.width=e,$.height=n,s.update("_internal.dimensions",$))}"function"==typeof i&&h(t,{state:s,api:e})}function x(t){v=t}return t=>a`
      <div class=${u} @scroll=${w} data-action=${i(_)}>
        ${c.html()} ${d.html()}
        <div
          class=${p}
          style=${m}
          @scroll=${w}
          data-action=${i(x)}
        >
          <div style=${g} />
        </div>
      </div>
    `}const Yt={components:{Main:jt},scrollBarHeight:17,height:0,treeMap:{},flatTreeMap:[],flatTreeMapById:{},list:{expandedHeight:0,visibleRows:[],rows:{},width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0},visibleItems:[],time:{dates:[],timePerPixel:0,firstTaskTime:0,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0}},elements:{}},zt=t=>{const e=t.state,s=function(t){let e=t.get(),s=[];const n={name:p,debug:!1,log(...t){this.debug&&console.log.call(console,...t)},mergeDeep:m,getComponentData(t,e){const s={};return s.componentName=t,s.className=this.getClass(t,e),s.action=this.getAction(t),s},getClass(s,n){let i=`${p}__${s}`;s===this.name&&(i=this.name);let o=`${i} `,r="-";if(void 0!==n)for(const t in n){if("Object"===n[t].constructor.name&&void 0!==n[t].id)return r+=`-${t}_${n[t].id}`,o+o.trim()+r;"string"!=typeof n[t]&&"number"!=typeof n[t]||(r+=`-${t}_${n[t]}`)}return"-"!=r&&(o+=i+r+" "),void 0!==e.config.classNames[s]&&t.get(`config.classNames.${s}`).forEach(t=>o+=t+" "),void 0!==e.config.classNames[s+r]&&t.get(`config.classNames.${s+r}`).forEach(t=>o+=t+" "),o.trim()},actionsExecutor(t,s){const n=this.name,i=[];for(const o of e.config.actions[n])i.push(o(t,s));return{update(t){for(const e of i)e&&"function"==typeof e.update&&e.update(t)},destroy(){for(const t of i)t&&"function"==typeof t.destroy&&t.destroy()}}},allActions:[],getAction(t){return this.allActions.includes(t)||this.allActions.push(t),void 0===e.config.actions[t]?()=>{}:this.actionsExecutor.bind({name:t})},isItemInViewport:(t,e,s)=>t.time.start>=e&&t.time.start<s||t.time.end>=e&&t.time.end<s,fillEmptyRowValues(t){let s=0;for(const n in t){const i=t[n];i._internal={parents:[],children:[],items:[]},"number"!=typeof i.height&&(i.height=e.config.list.rowHeight),"boolean"!=typeof i.expanded&&(i.expanded=!1),i.top=s,s+=i.height}return t},generateParents(t,e="parentId"){const s={};for(const n of t){const t=void 0!==n[e]?n[e]:"";void 0===s[t]&&(s[t]={}),s[t][n.id]=n}return s},fastTree(t,e,s=[]){const n=t[e.id];if(e._internal.parents=s,void 0===n)return e._internal.children=[],e;""!==e.id&&(s=[...s,e.id]),e._internal.children=Object.values(n);for(const e in n){const i=n[e];this.fastTree(t,i,s)}return e},makeTreeMap(t,e){const s=this.generateParents(e,"rowId");for(const e of t)e._internal.items=void 0!==s[e.id]?Object.values(s[e.id]):[];const n=this.generateParents(t);return this.fastTree(n,{id:"",_internal:{children:[],parents:[],items:[]}})},getFlatTreeMapById(t,e={}){for(const s of t._internal.children)e[s.id]=s,this.getFlatTreeMapById(s,e);return e},flattenTreeMap(t,e=[]){for(const s of t._internal.children)e.push(s.id),this.flattenTreeMap(s,e);return e},getRowsFromMap:(t,e)=>t.map(t=>e[t.id]),getRowsFromIds(t,e){const s=[];for(const n of t)s.push(e[n]);return s},getRowsWithParentsExpanded(t,e,s){const n=[];t:for(const i of t){for(const t of e[i]._internal.parents){if(!s[t].expanded)continue t}n.push(i)}return n},getRowsHeight(t){let e=0;for(let s of t)e+=s.height;return e},getVisibleRows(t){const s=[];let n=0,i=0;for(const o of t){if(n+o.height>e.config.scroll.top&&n<e.config.scroll.top+e._internal.height&&(o.top=i,i+=o.height,s.push(o)),n>e.config.scroll.top+e._internal.height)break;n+=o.height}return s},normalizeMouseWheelEvent(t){let e=t.deltaX||0,s=t.deltaY||0,n=t.deltaZ||0;const i=t.deltaMode,o=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(i){case 1:r=o;break;case 2:r=window.height}return{x:e*=r,y:s*=r,z:n*=r}},limitScroll(e,s){if("top"===e){const e=t.get("_internal.list.expandedHeight")-t.get("_internal.height");return s<0?s=0:s>e&&(s=e),s}{const e=t.get("_internal.chart.time.totalViewDurationPx")-t.get("_internal.chart.dimensions.width");return s<0?s=0:s>e&&(s=e),s}},time:o(t),getScrollBarHeight(){const t=document.createElement("div");t.style.visibility="hidden",t.style.height="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetHeight;t.style.overflow="scroll";var s=document.createElement("div");s.style.height="100%",t.appendChild(s);var n=s.offsetHeight;return t.parentNode.removeChild(t),e-n+1},destroy(){e=void 0;for(const t of s)t();s=[],n.debug&&delete window.state}};return n.debug&&(window.state=t,window.api=n),n}(e);window.state=e,e.update("",t=>({config:t.config,_internal:Yt}));xt(e,s).createApp(jt,t.element);return{state:e}};zt.api=g;export default zt;
//# sourceMappingURL=index.esm.js.map
