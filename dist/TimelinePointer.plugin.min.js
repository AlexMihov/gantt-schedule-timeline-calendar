!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).TimelinePointer={})}(this,(function(t){"use strict";const e="chart-timeline-grid-row-cell",i="chart-timeline-items-row-item";t.CELL=e,t.ITEM=i,t.Plugin=function(t={enabled:!0}){let a,n,s;const o="config.plugin.TimelinePointer",r={cell:"",item:""};function d(){return{enabled:t.enabled,isMoving:!1,currentTarget:null,realTarget:null,targetType:"",targetData:null,initialPosition:{x:0,y:0},currentPosition:{x:0,y:0},events:{down:null,move:null,up:null}}}let l;class h{constructor(t){this.unsub=[],this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.data=d(),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointerup",this.pointerUp),document.addEventListener("pointermove",this.pointerMove),this.unsub.push(s.subscribe(o,t=>this.data=t))}destroy(t){t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointerup",this.pointerUp),document.removeEventListener("pointermove",this.pointerMove)}updateData(){s.update(o,()=>Object.assign({},this.data))}getRealTarget(t){let e=t.target.closest("."+r.item);return e||(e=t.target.closest("."+r.cell),e||null)}getRealPosition(t){const e={x:0,y:0};if(l){const i=l.getBoundingClientRect();e.x=t.x-i.x,e.y=t.y-i.y}return e}pointerDown(t){if(!this.data.enabled)return;this.data.currentTarget=t.target,this.data.realTarget=this.getRealTarget(t),this.data.realTarget?this.data.realTarget.classList.contains(r.item)?(this.data.targetType=i,this.data.targetData=this.data.realTarget.vido.item):this.data.realTarget.classList.contains(r.cell)?(this.data.targetType=e,this.data.targetData=this.data.realTarget.vido):this.data.targetType="":(this.data.targetType="",this.data.targetData=null),this.data.isMoving=!!this.data.realTarget,this.data.events.down=t,this.data.events.move=t;const a=this.getRealPosition(t);this.data.initialPosition=a,this.data.currentPosition=a,this.updateData()}pointerUp(t){this.data.enabled&&(this.data.isMoving=!1,this.data.events.up=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}pointerMove(t){this.data.enabled&&this.data.isMoving&&(this.data.events.move=t,this.data.currentPosition=this.getRealPosition(t),this.updateData())}}return function(t){a=t,n=a.api,s=a.state,r.cell=n.getClass(e),r.item=n.getClass(i);const u=s.subscribe("_internal.elements.chart-timeline",t=>l=t);return s.update("config.actions.chart-timeline",t=>(t.push(h),t)),s.update(o,t=>d()),function(){u()}}},Object.defineProperty(t,"__esModule",{value:!0})}));
