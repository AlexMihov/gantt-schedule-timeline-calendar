{"version":3,"file":"highlight-weekends.plugin.umd.js","sources":["../node_modules/@neuronet.io/vido/Action.ts","../src/plugins/highlight-weekends.plugin.ts"],"sourcesContent":["class Action {\n  public isAction: boolean = true;\n}\nAction.prototype.isAction = true;\nexport default Action;\n","/**\n * Weekend highlight plugin\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n\nimport Action from '@neuronet.io/vido/Action';\nimport { Api } from '../api/api';\nimport { Vido } from '../gstc';\n\nexport interface Options {\n  weekdays?: number[];\n  className?: string;\n}\n\nexport function Plugin(options: Options = {}) {\n  const weekdays = options.weekdays || [6, 0];\n  let className;\n  let api: Api;\n  let enabled = true;\n\n  class WeekendHighlightAction extends Action {\n    constructor(element, data) {\n      super();\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    update(element, data) {\n      this.highlight(element, data.time.leftGlobal);\n    }\n\n    highlight(element, time) {\n      const hasClass = element.classList.contains(className);\n      if (!enabled) {\n        if (hasClass) {\n          element.classList.remove(className);\n        }\n        return;\n      }\n      const isWeekend = weekdays.includes(api.time.date(time).day());\n      if (!hasClass && isWeekend) {\n        element.classList.add(className);\n      } else if (hasClass && !isWeekend) {\n        element.classList.remove(className);\n      }\n    }\n  }\n\n  return function initialize(vidoInstance: Vido) {\n    const subs = [];\n    const pluginPath = 'config.plugin.HighlightWeekends';\n    api = vidoInstance.api;\n    className = options.className || api.getClass('chart-timeline-grid-row-cell') + '--weekend';\n    subs.push(vidoInstance.state.subscribe(pluginPath, (value) => (options = value)));\n    subs.push(vidoInstance.state.subscribe('$data.chart.time.format.period', (period) => (enabled = period === 'day')));\n    vidoInstance.state.update('config.actions.chart-timeline-grid-row-cell', (actions) => {\n      actions.push(WeekendHighlightAction);\n      return actions;\n    });\n    return function onDestroy() {\n      subs.forEach((unsub) => unsub());\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;EAAA,MAAM,MAAM;MAAZ;UACS,aAAQ,GAAY,IAAI,CAAC;OACjC;GAAA;EACD,MAAM,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI;;ECHhC;;;;;;;;;WAmBgB,MAAM,CAAC,UAAmB,EAAE;MAC1C,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAC5C,IAAI,SAAS,CAAC;MACd,IAAI,GAAQ,CAAC;MACb,IAAI,OAAO,GAAG,IAAI,CAAC;MAEnB,MAAM,sBAAuB,SAAQ,MAAM;UACzC,YAAY,OAAO,EAAE,IAAI;cACvB,KAAK,EAAE,CAAC;cACR,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;WAC/C;UAED,MAAM,CAAC,OAAO,EAAE,IAAI;cAClB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;WAC/C;UAED,SAAS,CAAC,OAAO,EAAE,IAAI;cACrB,MAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;cACvD,IAAI,CAAC,OAAO,EAAE;kBACZ,IAAI,QAAQ,EAAE;sBACZ,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;mBACrC;kBACD,OAAO;eACR;cACD,MAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;cAC/D,IAAI,CAAC,QAAQ,IAAI,SAAS,EAAE;kBAC1B,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;eAClC;mBAAM,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;kBACjC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;eACrC;WACF;OACF;MAED,OAAO,SAAS,UAAU,CAAC,YAAkB;UAC3C,MAAM,IAAI,GAAG,EAAE,CAAC;UAChB,MAAM,UAAU,GAAG,iCAAiC,CAAC;UACrD,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC;UACvB,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,GAAG,CAAC,QAAQ,CAAC,8BAA8B,CAAC,GAAG,WAAW,CAAC;UAC5F,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,KAAK,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;UAClF,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,gCAAgC,EAAE,CAAC,MAAM,MAAM,OAAO,GAAG,MAAM,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;UACpH,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,6CAA6C,EAAE,CAAC,OAAO;cAC/E,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;cACrC,OAAO,OAAO,CAAC;WAChB,CAAC,CAAC;UACH,OAAO,SAAS,SAAS;cACvB,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE,CAAC,CAAC;WAClC,CAAC;OACH,CAAC;EACJ;;;;;;;;;;;;"}